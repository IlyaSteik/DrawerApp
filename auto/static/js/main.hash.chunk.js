(window.webpackJsonpminiapp=window.webpackJsonpminiapp||[]).push([[0],{190:function(e,t,n){e.exports=n.p+"static/media/Story1.c1713922.png"},219:function(e,t,n){},293:function(e,t,n){e.exports=n.p+"static/media/Story2.28d56ba9.png"},294:function(e,t,n){e.exports=n.p+"static/media/Story3.2f47cccb.png"},384:function(e,t,n){e.exports=n(712)},474:function(e,t,n){},475:function(e,t,n){},476:function(e,t,n){},493:function(e,t){},495:function(e,t){},525:function(e,t){},526:function(e,t){},570:function(e,t){},572:function(e,t){},595:function(e,t){},687:function(e,t,n){var a={"./Story1.png":190,"./Story2.png":293,"./Story3.png":294};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=687},710:function(e,t,n){},711:function(e,t,n){var a={"./Desktop.css":[713,3],"./Global.css":[219],"./Mobile.css":[714,4]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(r,7)}))}r.keys=function(){return Object.keys(a)},r.id=711,e.exports=r},712:function(e,t,n){"use strict";n.r(t);n(385),n(411),n(413),n(414),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453);var a=n(0),r=n.n(a),o=n(142),s=n.n(o),c=(n(461),n(462),n(3)),i=(n(474),n(475),n(476),n(47)),l=n(2),u=n.n(l),p=n(5),m=n(17),d=n(15),f=n(16),h=n(20),v=n(19),b=n(32),g=n(21),y=n(12),k=n.n(y),w=(n(219),n(57));n(220);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){return O.apply(this,arguments)}function O(){return(O=Object(p.a)(u.a.mark((function e(t){var n,a,r,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},a=n?"?"+Object.keys(n).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent("object"===typeof n[e]?JSON.stringify(n[e]):n[e])})).join("&"):"",r="".concat(t).concat(a),e.next=4,new Promise((function(e,t){fetch(r,{method:"GET"}).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(t){return e({error:{code:-1,text:t.toString()}})}))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=["SF Pro Text","SF Pro Text Heavy","SF Pro Text Semibold","SF Pro Display","SF Pro Display Bold","SF Pro Display Semibold","SF Pro Display Medium","SF Pro Rounded","SF Pro Rounded Semibold","SF Pro Rounded Bold","SF UI Display","SF UI Text","TT Commons","TT Commons Bold","TT Commons Demibold","Manrope ExtraBold"];function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=!0,n=!1,a=void 0;try{for(var r,o=function(){var e=r.value,t=document.createElement("span");t.style.position="absolute",t.style.fontFamily=e,t.style.opacity="0",t.innerText=".",document.body.appendChild(t),t.onload=function(){return t.remove()}},s=e[Symbol.iterator]();!(t=(r=s.next()).done);t=!0)o()}catch(c){n=!0,a=c}finally{try{t||null==s.return||s.return()}finally{if(n)throw a}}}function j(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function P(e,t,n){return"#"+j(e)+j(t)+j(n)}function I(e){return new Promise((function(t){return setTimeout(t,e)}))}function A(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e){var a=[];return a[e]||(a[e]=e%100>4&&e%100<20?2:[2,0,1,1,1,2][Math.min(e%10,5)]),(n?e+" ":"")+t[a[e]]}}function D(e){try{return e.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}catch(t){return 0}}function L(e,t){return Math.floor(Math.random()*(t-e+1))+e}function T(e){var t,n,a,r,o,s;return s=parseInt(Math.floor(e/1e3)),o=parseInt(Math.floor(s/60)),r=parseInt(Math.floor(o/60)),a=parseInt(s%60),n=parseInt(o%60),{hours:t=parseInt(r%24),minutes:n,seconds:a,str:{hours:t.toLocaleString("ru",{minimumIntegerDigits:2}),minutes:n.toLocaleString("ru",{minimumIntegerDigits:2}),seconds:a.toLocaleString("ru",{minimumIntegerDigits:2})}}}function N(){return window.location.search.length>0&&JSON.parse('{"'+decodeURI(window.location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}function M(){return"mobile_iphone"===N().vk_platform}function F(){return"desktop_web"===N().vk_platform}var W={},B=["first_name","last_name","first_name_dat","first_name_nom","first_name_gen","first_name_acc","first_name_ins","first_name_abl","last_name_dat","last_name_nom","last_name_gen","last_name_acc","last_name_ins","last_name_abl"];function R(e){return U.apply(this,arguments)}function U(){return(U=Object(p.a)(u.a.mark((function e(t){var n,a,r,o,s,c,i,l,p,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(m.a)(new Set(t.filter((function(e){return void 0===W[e]})).map((function(e){return"number"===typeof e?e:e.replace("@","").replace("id","").replace("vk.com/","").replace("http://","").replace("https://","")})))),a=Math.floor(n.length/100),!(n.length>0)){e.next=32;break}r=[],o=0;case 4:if(!(o<a+1)){e.next=13;break}return e.t0=r,e.next=8,G("users.get",{user_ids:n.slice(100*o,100*o+100).join(","),fields:["screen_name","photo_100","photo_200","photo_max_orig","sex"].concat(B).join(",")});case 8:e.t1=e.sent,r=e.t0.concat.call(e.t0,e.t1);case 10:o++,e.next=4;break;case 13:for(s=!0,c=!1,i=void 0,e.prev=16,l=r[Symbol.iterator]();!(s=(p=l.next()).done);s=!0)d=p.value,W[d.id]=d;e.next=24;break;case 20:e.prev=20,e.t2=e.catch(16),c=!0,i=e.t2;case 24:e.prev=24,e.prev=25,s||null==l.return||l.return();case 27:if(e.prev=27,!c){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.abrupt("return",t.map((function(e){return W[e]||W[Object.keys(W).find((function(t){return W[t].screen_name===e}))]})));case 33:case"end":return e.stop()}}),e,null,[[16,20,24,32],[25,,27,31]])})))).apply(this,arguments)}function G(e){return V.apply(this,arguments)}function V(){return(V=Object(p.a)(u.a.mark((function e(t){var n,a=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,k.a.send("VKWebAppCallAPIMethod",{method:t,params:_({},n,{v:"5.126",access_token:n.access_token||"7a8d6dcc7a8d6dcc7a8d6dcc637afa8f4477a8d7a8d6dcc1b06a888634e406617b4aef3"})});case 3:return e.abrupt("return",e.sent.response);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){var t=document.createElement("a");t.href=e,t.target="_blank",t.click(),t.remove()}function K(e){return window.location.origin+window.location.pathname.replace("/index.html","")+e.substring(1)}function Y(e){return H.apply(this,arguments)}function H(){return(H=Object(p.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.createElement("canvas"),a=n.getContext("2d"),(r=new Image).src="https://murmuring-bastion-20764.herokuapp.com/"+t,r.crossOrigin="Anonymous",e.next=5,new Promise((function(e){return r.onload=function(){n.width=this.width,n.height=this.height,a.drawImage(r,0,0,this.width,this.height),e(n.toDataURL("image/png"))}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){return X.apply(this,arguments)}function X(){return(X=Object(p.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("https://api.ad-app.ru/method/"+t,_({},N(),{},n));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function J(e){return q.apply(this,arguments)}function q(){return(q=Object(p.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target||window.event.srcElement,a=n.files,!(FileReader&&a&&a.length)){e.next=7;break}return e.next=4,new Promise(function(){var e=Object(p.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a[0],(r=new FileReader).onload=Object(p.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.type.includes("image")?((a=new Image).src=r.result,a.onload=Object(p.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(w.createCanvas)(a.width,a.height),n.getContext("2d").drawImage(a,0,0,a.width,a.height),t(n.toDataURL("image/png"));case 3:case"end":return e.stop()}}),e)})))):console.error("File type not image");case 1:case"end":return e.stop()}}),e)}))),e.next=4,r.readAsDataURL(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 7:console.error("UNKNOWN ERROR");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee={},te=["first_name","last_name","first_name_dat","first_name_nom","first_name_gen","first_name_acc","first_name_ins","first_name_abl","last_name_dat","last_name_nom","last_name_gen","last_name_acc","last_name_ins","last_name_abl"];function ne(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(p.a)(u.a.mark((function e(t){var n,a,r,o,s,c,i,l,d,f,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(m.a)(new Set(t.filter((function(e){return void 0===ee[e]&&void 0!==e&&0!==e})).map((function(e){return"number"===typeof e?e:e.replace("@","").replace("id","").replace("vk.com/","").replace("http://","").replace("https://","")})))),a=Math.floor(n.length/100),!(n.length>0)){e.next=29;break}r=[],o=u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re("users.getVK",{user_ids:n.slice(100*t,100*t+100).join(","),fields:["screen_name","photo_100","photo_200","photo_max_orig","sex"].concat(te).join(",")});case 2:if(null!==(a=e.sent.response)){e.next=7;break}return e.next=6,new Promise((function(e){var a,r=0,o=!1;a=setInterval(Object(p.a)(u.a.mark((function s(){var c;return u.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(o){s.next=8;break}return o=!0,r++,s.next=5,re("users.getVK",{user_ids:n.slice(100*t,100*t+100).join(","),fields:["screen_name","photo_100","photo_200","photo_max_orig","sex"].concat(te).join(",")});case 5:null!==(c=s.sent.response)?(e(c),clearInterval(a)):r>=10&&(e([]),clearInterval(a)),o=!1;case 8:case"end":return s.stop()}}),s)}))),400)}));case 6:a=e.sent;case 7:r=r.concat(a);case 8:case"end":return e.stop()}}),e)})),s=0;case 5:if(!(s<a+1)){e.next=10;break}return e.delegateYield(o(s),"t0",7);case 7:s++,e.next=5;break;case 10:for(c=!0,i=!1,l=void 0,e.prev=13,d=r[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)h=f.value,ee[h.id]=h;e.next=21;break;case 17:e.prev=17,e.t1=e.catch(13),i=!0,l=e.t1;case 21:e.prev=21,e.prev=22,c||null==d.return||d.return();case 24:if(e.prev=24,!i){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",t.map((function(e){return ee[e]||ee[Object.keys(ee).find((function(t){return ee[t].screen_name===e}))]})));case 30:case"end":return e.stop()}}),e,null,[[13,17,21,29],[22,,24,28]])})))).apply(this,arguments)}function re(e){return oe.apply(this,arguments)}function oe(){return(oe=Object(p.a)(u.a.mark((function e(t){var n,a,r,o,s,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},a=0,r=Q({},N(),{query:JSON.stringify(n)}),o=r?"?"+Object.keys(r).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])})).join("&"):"",s="https://draw.avocado.special.vk-apps.com/api/".concat(t).concat(o),e.next=5,new Promise((function(e,t){var n,r=!1;n=setInterval((function(){r||(r=!0,fetch(s,{method:"GET"}).then((function(e){return e.json()})).then((function(t){clearInterval(n),r=!1,e(t)})).catch((function(t){++a>=5&&(e({error:null}),clearInterval(n)),r=!1})))}),400)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se=n(765),ce=n(766),ie=n(767),le=n(768),ue=n(769),pe=n(770),me=n(771),de=n(772),fe=n(773),he=n(774),ve=n(775),be=n(776),ge=n(777),ye=n(720),ke=n(749);n(686);function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ee(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _e=r.a.createElement("g",{clipPath:"url(#clip0_858_3679)"},r.a.createElement("path",{d:"M0 24.6154C0 11.0207 11.0207 0 24.6154 0H71.3846C84.9793 0 96 11.0207 96 24.6154V71.3846C96 84.9793 84.9793 96 71.3846 96H24.6154C11.0207 96 0 84.9793 0 71.3846V24.6154Z",fill:"#FF5277"}),r.a.createElement("path",{d:"M28.3181 68.045L26.2154 71.1991L29.9735 71.6954C32.6907 72.0543 37.0877 72.075 41.7379 71.0403C46.3888 70.0054 51.4965 67.8676 55.3771 63.7366C60.5026 58.2804 62.0551 52.8666 60.7191 47.6924C60.2733 45.966 60.5575 44.5507 61.3039 43.7662L122.862 -20.9368C123.412 -21.5146 124.023 -22.3537 124.337 -23.3354C124.662 -24.3505 124.758 -25.9407 123.499 -27.2004C122.239 -28.4601 120.649 -28.3636 119.634 -28.0388C118.652 -27.7247 117.813 -27.1137 117.235 -26.564L53.3187 34.243C52.3591 35.1558 50.4825 35.3173 47.9766 34.6943C43.753 33.6441 39.2764 34.9713 36.054 37.5731C32.8031 40.1977 30.5646 44.3474 31.2873 49.1174C31.9764 53.6651 32.207 56.8582 31.8061 59.6644C31.4153 62.4 30.3994 64.923 28.3181 68.045Z",fill:"white",stroke:"white",strokeWidth:4.72217})),xe=r.a.createElement("defs",null,r.a.createElement("clipPath",{id:"clip0_858_3679"},r.a.createElement("path",{d:"M0 24.6154C0 11.0207 11.0207 0 24.6154 0H71.3846C84.9793 0 96 11.0207 96 24.6154V71.3846C96 84.9793 84.9793 96 71.3846 96H24.6154C11.0207 96 0 84.9793 0 71.3846V24.6154Z",fill:"white"}))),Oe=function(e){var t=e.svgRef,n=e.title,a=Ee(e,["svgRef","title"]);return r.a.createElement("svg",we({width:96,height:96,viewBox:"0 0 96 96",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,_e,xe)},Ce=r.a.forwardRef((function(e,t){return r.a.createElement(Oe,we({svgRef:t},e))}));n.p;function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function je(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Pe=r.a.createElement("rect",{width:96,height:96,rx:24.6154,fill:"#FF5277"}),Ie=r.a.createElement("path",{d:"M25.708 25.6877L24.7077 24.1872L26.4955 23.9511C27.7882 23.7804 29.88 23.7705 32.0923 24.2628C34.3048 24.7551 36.7347 25.7721 38.5809 27.7374C41.0193 30.3331 41.7578 32.9086 41.1222 35.3702C40.9102 36.1915 41.0454 36.8648 41.4005 37.238L70.6858 68.0194C70.9474 68.2943 71.2381 68.6935 71.3875 69.1605C71.542 69.6435 71.5879 70.4 70.9886 70.9992C70.3894 71.5985 69.6329 71.5526 69.1499 71.3981C68.6829 71.2487 68.2837 70.958 68.0088 70.6965L37.6016 41.7685C37.1451 41.3342 36.2523 41.2574 35.0602 41.5538C33.0509 42.0534 30.9213 41.422 29.3882 40.1843C27.8417 38.9357 26.7767 36.9615 27.1205 34.6922C27.4484 32.5287 27.5581 31.0097 27.3674 29.6747C27.1814 28.3733 26.6981 27.173 25.708 25.6877Z",fill:"#E2E2E2",stroke:"#E2E2E2",strokeWidth:2.2465}),Ae=r.a.createElement("path",{d:"M70.3452 25.6877L71.3456 24.1872L69.5577 23.9511C68.265 23.7804 66.1732 23.7705 63.961 24.2628C61.7484 24.7551 59.3185 25.7721 57.4723 27.7374C55.034 30.3331 54.2954 32.9086 54.931 35.3702C55.1431 36.1915 55.0078 36.8648 54.6528 37.238L25.3674 68.0194C25.1059 68.2943 24.8152 68.6935 24.6657 69.1605C24.5112 69.6435 24.4653 70.4 25.0646 70.9992C25.6639 71.5985 26.4204 71.5526 26.9033 71.3981C27.3703 71.2487 27.7695 70.958 28.0444 70.6965L58.4516 41.7685C58.9081 41.3342 59.8009 41.2574 60.993 41.5538C63.0023 42.0534 65.132 41.422 66.665 40.1843C68.2115 38.9357 69.2765 36.9615 68.9327 34.6922C68.6049 32.5287 68.4951 31.0097 68.6859 29.6747C68.8718 28.3733 69.3551 27.173 70.3452 25.6877Z",fill:"white",stroke:"white",strokeWidth:2.2465}),De=function(e){var t=e.svgRef,n=e.title,a=je(e,["svgRef","title"]);return r.a.createElement("svg",Se({width:96,height:96,viewBox:"0 0 96 96",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,Pe,Ie,Ae)},Le=r.a.forwardRef((function(e,t){return r.a.createElement(De,Se({svgRef:t},e))}));n.p;function Te(){return(Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ne(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Me=r.a.createElement("g",{clipPath:"url(#clip0_859_3936)"},r.a.createElement("path",{d:"M0 24.6154C0 11.0207 11.0207 0 24.6154 0H71.3846C84.9793 0 96 11.0207 96 24.6154V71.3846C96 84.9793 84.9793 96 71.3846 96H24.6154C11.0207 96 0 84.9793 0 71.3846V24.6154Z",fill:"#4E5051"}),r.a.createElement("path",{d:"M28.3181 68.045L26.2154 71.1991L29.9735 71.6954C32.6907 72.0543 37.0877 72.075 41.7379 71.0403C46.3888 70.0054 51.4965 67.8676 55.3771 63.7366C60.5026 58.2804 62.0551 52.8666 60.7191 47.6924C60.2733 45.966 60.5575 44.5507 61.3039 43.7662L122.862 -20.9368C123.412 -21.5146 124.023 -22.3537 124.337 -23.3354C124.662 -24.3505 124.758 -25.9407 123.499 -27.2004C122.239 -28.4601 120.649 -28.3636 119.634 -28.0388C118.652 -27.7247 117.813 -27.1137 117.235 -26.564L53.3187 34.243C52.3591 35.1558 50.4825 35.3173 47.9766 34.6943C43.753 33.6441 39.2764 34.9713 36.054 37.5731C32.8031 40.1977 30.5646 44.3474 31.2873 49.1174C31.9764 53.6651 32.207 56.8582 31.8061 59.6644C31.4153 62.4 30.3994 64.923 28.3181 68.045Z",fill:"white",stroke:"white",strokeWidth:4.72217})),Fe=r.a.createElement("defs",null,r.a.createElement("clipPath",{id:"clip0_859_3936"},r.a.createElement("path",{d:"M0 24.6154C0 11.0207 11.0207 0 24.6154 0H71.3846C84.9793 0 96 11.0207 96 24.6154V71.3846C96 84.9793 84.9793 96 71.3846 96H24.6154C11.0207 96 0 84.9793 0 71.3846V24.6154Z",fill:"white"}))),We=function(e){var t=e.svgRef,n=e.title,a=Ne(e,["svgRef","title"]);return r.a.createElement("svg",Te({width:96,height:96,viewBox:"0 0 96 96",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,Me,Fe)},Be=r.a.forwardRef((function(e,t){return r.a.createElement(We,Te({svgRef:t},e))}));n.p;function Re(){return(Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ue(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Ge=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48 96C74.5097 96 96 74.5097 96 48C96 21.4903 74.5097 0 48 0C21.4903 0 0 21.4903 0 48C0 74.5097 21.4903 96 48 96ZM47.662 60.169C54.5694 60.169 60.169 54.5694 60.169 47.662C60.169 40.7545 54.5694 35.1549 47.662 35.1549C40.7545 35.1549 35.1549 40.7545 35.1549 47.662C35.1549 54.5694 40.7545 60.169 47.662 60.169Z",fill:"#FF66AC"}),Ve=r.a.createElement("rect",{x:18.9297,y:18.7441,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-6.94641 18.9297 18.7441)",fill:"#BEDBFB"}),ze=r.a.createElement("rect",{x:83.8311,y:49.8428,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-6.94641 83.8311 49.8428)",fill:"#BEDBFB"}),Ke=r.a.createElement("rect",{x:41.4331,y:78.4224,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(57.5878 41.4331 78.4224)",fill:"#BEDBFB"}),Ye=r.a.createElement("rect",{x:33.3269,y:62.873,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(22.9881 33.3269 62.873)",fill:"#FFFEFF"}),He=r.a.createElement("rect",{x:29.564,y:41.9155,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(62.1939 29.564 41.9155)",fill:"#FFFEFF"}),Ze=r.a.createElement("rect",{x:71.4856,y:43.2856,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(23.3091 71.4856 43.2856)",fill:"#FFFEFF"}),Xe=r.a.createElement("rect",{x:48.676,y:10.3862,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-34.0862 48.676 10.3862)",fill:"#FFFEFF"}),Je=r.a.createElement("rect",{x:36.8477,y:20.8916,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-94.8165 36.8477 20.8916)",fill:"#FDDD64"}),qe=r.a.createElement("rect",{x:15.5493,y:33.4668,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-14.5043 15.5493 33.4668)",fill:"#FDDD64"}),$e=r.a.createElement("rect",{x:14.8733,y:68.1821,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-77.2958 14.8733 68.1821)",fill:"#FDDD64"}),Qe=r.a.createElement("rect",{x:66.9297,y:68.2461,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-55.544 66.9297 68.2461)",fill:"#FDDD64"}),et=r.a.createElement("rect",{x:71.6018,y:33.5327,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-98.7318 71.6018 33.5327)",fill:"#FDDD64"}),tt=r.a.createElement("rect",{x:64.0173,y:21.5381,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-106.38 64.0173 21.5381)",fill:"#FD0C7D"}),nt=r.a.createElement("rect",{x:10.2402,y:59.1685,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-149.075 10.2402 59.1685)",fill:"#FD0C7D"}),at=r.a.createElement("rect",{x:56.2144,y:71.3013,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(132.748 56.2144 71.3013)",fill:"#FD0C7D"}),rt=r.a.createElement("rect",{x:63.7732,y:82.1592,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-152.683 63.7732 82.1592)",fill:"#928BFB"}),ot=r.a.createElement("rect",{x:29.0703,y:31.5825,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-72.2881 29.0703 31.5825)",fill:"#928BFB"}),st=function(e){var t=e.svgRef,n=e.title,a=Ue(e,["svgRef","title"]);return r.a.createElement("svg",Re({width:96,height:96,viewBox:"0 0 96 96",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,Ge,Ve,ze,Ke,Ye,He,Ze,Xe,Je,qe,$e,Qe,et,tt,nt,at,rt,ot)},ct=r.a.forwardRef((function(e,t){return r.a.createElement(st,Re({svgRef:t},e))}));n.p;function it(){return(it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function lt(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ut=r.a.createElement("rect",{width:96,height:96,rx:24.6153846,fill:"#FF5277"}),pt=r.a.createElement("path",{d:"M69.4961 32.3131C67.7658 30.5828 64.9603 30.5828 63.23 32.3131L41.5507 53.9924L33.1638 45.6054C31.4335 43.8751 28.628 43.8751 26.8977 45.6054C25.1674 47.3358 25.1674 50.1412 26.8977 51.8715L38.4177 63.3915C40.148 65.1218 42.9534 65.1218 44.6838 63.3915L69.4961 38.5792C71.2264 36.8489 71.2264 34.0434 69.4961 32.3131Z",fill:"white"}),mt=function(e){var t=e.svgRef,n=e.title,a=lt(e,["svgRef","title"]);return r.a.createElement("svg",it({width:96,height:96,viewBox:"0 0 96 96",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,ut,pt)},dt=r.a.forwardRef((function(e,t){return r.a.createElement(mt,it({svgRef:t},e))}));n.p;function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ht(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var vt=r.a.createElement("rect",{width:96,height:96,rx:24.6154,fill:"#4E5051"}),bt=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.6248 27.1505C48.0348 27.0664 47.473 27.0664 46.8829 27.1505C46.3584 27.2254 45.9121 27.3391 45.0122 27.633L33.1831 31.5751C31.8046 32.0346 30.8748 33.3247 30.8748 34.7777V50.4403C30.8748 58.7152 35.9509 65.0047 45.773 69.1798C47.0388 69.7179 48.469 69.7179 49.7348 69.1798L50.3564 68.9099C59.7745 64.7324 64.633 58.5328 64.633 50.4403V34.7777C64.633 33.3247 63.7032 32.0346 62.3247 31.5751L50.813 27.7379C49.6938 27.3648 49.2076 27.2337 48.6248 27.1505ZM47.3598 30.4925C47.6335 30.4535 47.8742 30.4535 48.148 30.4925L48.3532 30.5274C48.6019 30.577 48.9041 30.6636 49.4809 30.8529L61.2572 34.7777V50.4403C61.2572 57.0667 57.275 62.1481 48.9997 65.8188L48.4022 66.0782C47.9923 66.2524 47.5155 66.2524 47.0936 66.073C38.4215 62.3868 34.2506 57.2188 34.2506 50.4403V34.7777L45.7622 30.9405C46.7047 30.6263 47.0224 30.5407 47.3598 30.4925ZM43.0397 41.1447C42.3805 40.4856 41.3118 40.4856 40.6527 41.1447C39.9935 41.8039 39.9935 42.8726 40.6527 43.5318L45.3668 48.246L40.6527 52.9601C39.9935 53.6193 39.9935 54.688 40.6527 55.3472C41.3118 56.0064 42.3805 56.0064 43.0397 55.3472L47.7539 50.633L52.468 55.3472C53.1272 56.0064 54.1959 56.0064 54.8551 55.3472C55.5143 54.688 55.5143 53.6193 54.8551 52.9601L50.1409 48.246L54.8551 43.5318C55.5143 42.8726 55.5143 41.8039 54.8551 41.1447C54.1959 40.4856 53.1272 40.4856 52.468 41.1447L47.7539 45.8589L43.0397 41.1447Z",fill:"white"}),gt=function(e){var t=e.svgRef,n=e.title,a=ht(e,["svgRef","title"]);return r.a.createElement("svg",ft({width:96,height:96,viewBox:"0 0 96 96",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,vt,bt)},yt=r.a.forwardRef((function(e,t){return r.a.createElement(gt,ft({svgRef:t},e))}));n.p;function kt(){return(kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function wt(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Et,_t=r.a.createElement("rect",{y:.5,width:20,height:20,rx:10,fill:"#474747"}),xt=r.a.createElement("path",{d:"M6.14298 12.5226C4.74046 12.3375 4.91785 13.193 5.18186 13.6439C5.21637 13.7062 5.37764 13.9198 5.55563 14.0977C5.73361 14.2757 6.14298 14.5249 7.26428 14.9966C8.38558 15.4682 9.88066 15.2813 10.0764 15.2368C10.2722 15.1923 12.9509 14.6495 14.2858 12.2823C15.3537 10.3885 14.9918 8.09965 14.6773 7.19193C14.2235 5.97273 13.1378 6.69357 13.1556 6.89826C13.1734 7.10294 12.9865 7.85937 12.8352 8.31323C12.6839 8.76709 12.7462 8.91838 11.5804 10.369C10.4146 11.8195 7.89613 12.7539 6.14298 12.5226Z",fill:"url(#paint0_linear_1078_7766)"}),Ot=r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"paint0_linear_1078_7766",x1:0,y1:10.9054,x2:8.74064,y2:20.8258,gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{stopColor:"#FFB73D"}),r.a.createElement("stop",{offset:1,stopColor:"#FFA000"}))),Ct=function(e){var t=e.svgRef,n=e.title,a=wt(e,["svgRef","title"]);return r.a.createElement("svg",kt({width:20,height:21,viewBox:"0 0 20 21",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,_t,xt,Ot)},St=r.a.forwardRef((function(e,t){return r.a.createElement(Ct,kt({svgRef:t},e))})),jt=(n.p,n(778)),Pt=n(724),It=n(725),At=n(726),Dt=n(727),Lt=n(728),Tt=n(729),Nt=n(723),Mt=n(721),Ft=n(312),Wt=n.n(Ft),Bt=F(),Rt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={isShowGlobalCanvas:e.t.state.isShowGlobalCanvas,canvas_status:{status:!1},globalCanvasShowTimer:!1},e.t.socket.unsubscribe("changeOnline"),e.t.socket.subscribe("changeOnline",(function(t){e.t.setState({online:t.count}),n.forceUpdate()})),n.goToStats=n.goToStats.bind(Object(b.a)(n)),n.goToFeed=n.goToFeed.bind(Object(b.a)(n)),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"goToStats",value:function(){var e=this.props.t;e.setPopout(r.a.createElement(c.C,null)),e.socket.call("users.getTop",{type:"pictures"},(function(t){e.setState({users_topPictures:t.response});var n=t.response.map((function(e){return e.id}));e.socket.call("users.getTop",{type:"guessed_pictures"},(function(t){e.setState({users_topGuessedPictures:t.response}),n=[].concat(Object(m.a)(n),Object(m.a)(t.response.map((function(e){return e.id})))),e.socket.call("users.getTop",{type:"likes"},function(){var t=Object(p.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({users_topLikes:a.response}),n=[].concat(Object(m.a)(n),Object(m.a)(a.response.map((function(e){return e.id})))),t.next=4,ne(n);case 4:e.setPopout(null),e.go("stats");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}))}},{key:"goToFeed",value:function(){var e=this.props.t;e.setPopout(r.a.createElement(c.C,null)),e.socket.call("pictures.getRandomLikes",{limit:10},(function(t){e.setState({randomGamesLike:t.response});var n=t.response.map((function(e){return e.drawerId}));e.socket.call("pictures.getLikesTop",{limit:10},function(){var t=Object(p.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({topLikes:a.response}),n=[].concat(Object(m.a)(n),Object(m.a)(a.response.map((function(e){return e.drawerId})))),t.next=4,ne(n);case 4:e.setPopout(null),e.go("likes");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}},{key:"componentDidMount",value:function(){var e=this;this.props.t.socket.call("canvas.getStatus",{},function(){var t=Object(p.a)(u.a.mark((function t(n){var a,r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.response,r=a.start-Date.now(),(o=r<=864e5&&r>0)&&(Et=setInterval((function(){a.start-Date.now()<=0&&(e.setState({globalCanvasShowTimer:!1}),clearInterval(Et)),e.forceUpdate()}),1e3)),e.setState({canvas_status:a,globalCanvasShowTimer:o});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillMount",value:function(){clearInterval(Et)}},{key:"render",value:function(){var e=this,t=this.props.t,n=t.state,a=t._tags,o=n.gamesAsWinner,s=n.gamesAsDrawer,i=n.top_number,l=n.online,m=n.user,d=m.lvl,f=m.pictures,h=m.successfulPictures,v=m.guessedPictures,b=(m.likes,[Math.min(t.state.colors.length-3,Math.max(d,4)-4),Math.min(t.state.colors.length,Math.max(d,3)+3)]),g=(t.state.colors.slice(b[0],b[1]),Math.min(d,t.state.colors.length)),y=this.state,w=y.isShowGlobalCanvas,E=y.canvas_status,_=y.globalCanvasShowTimer,x=_?T(E.start-Date.now()).str:{};return b[0]>t.state.colors.length-6&&(b[0]=t.state.colors.length-6),r.a.createElement("div",{className:"Main"},r.a.createElement("div",{className:"app_version",onClick:Object(p.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.app_version!==to&&t.setActiveModal(no),a.next=3,t.setState({__v_clicks:4===n.__v_clicks?4:n.__v_clicks+1});case 3:e.forceUpdate(),3===n.__v_clicks&&Wt.a.init();case 5:case"end":return a.stop()}}),a)})))},"v",to," ",n.app_version!==to&&r.a.createElement("span",null,"(\u043d\u0435\u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u0430\u044f)")),r.a.createElement("div",{className:"User_Header"},r.a.createElement(c.f,{src:t.state.vk_user.photo_100,size:48,shadow:!1,onClick:function(){t.state.user.admin&&t.setActiveModal(ro)}}),r.a.createElement("div",{className:"UserTags"},a().map((function(e){return m[e[0]]&&r.a.createElement(jt.a,{action:"hover",content:r.a.createElement(c.l,null,r.a.createElement(c.L,null,e[2]))},r.a.cloneElement(e[1],{onClick:function(){return t.setActiveModal(e[0])}}))})))),r.a.createElement("h3",null,"\u041f\u0440\u0438\u0432\u0435\u0442, ",t.state.vk_user.first_name),r.a.createElement("h1",null,"\u0422\u0432\u043e\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"),r.a.createElement("div",{className:"Colors__Container"},r.a.createElement("div",{className:"Gradient_Opacity"}),t.state.colors.map((function(e,t){return r.a.createElement("div",{className:"Color",key:"Color__".concat(t),style:{display:(b[0]>t||b[1]<t)&&"none",marginLeft:t>0&&12,background:t+1===g&&"linear-gradient(156.04deg, #F05F88 0%, #FBD20A 100%)",border:t+1===g&&"none"}},r.a.createElement("span",null,t+1),r.a.createElement("div",{style:{background:"object"===typeof e?"conic-gradient(from 180deg at 50% 50%, ".concat(e.join(", "),")"):e}}))}))),r.a.createElement("p",null,"\u041e\u0442\u0433\u0430\u0434\u044b\u0432\u0430\u0439 \u0438 \u0440\u0438\u0441\u0443\u0439 \u043a\u0430\u0440\u0442\u0438\u043d\u044b, \u0447\u0442\u043e\u0431\u044b \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0446\u0432\u0435\u0442\u0430"),r.a.createElement("div",{className:"PlayCards__Container"},r.a.createElement("div",{className:"PlayCards_Lobbies__Container"},r.a.createElement("div",{className:"PlayCard GlobalLobby",onClick:function(){return t.go("search")}},r.a.createElement(Nt.a,null),r.a.createElement("span",null,"\u0418\u0433\u0440\u0430\u0442\u044c")),r.a.createElement("div",{className:"PlayCard SelfLobby",onClick:function(){return t.go("friends")}},r.a.createElement(Mt.a,null),r.a.createElement("span",null,"\u0421\u0432\u043e\u044f \u0438\u0433\u0440\u0430"))),r.a.createElement("div",{style:{display:0!==E.end&&Date.now()>=E.end?"none":_?"":E.status?"":E.admins_allow&&m.admin||E.donut_allow&&m.vk_donut?"":"none"},className:"PlayCard GlobalCanvasButton",onClick:Object(p.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:_||(k.a.send("VKWebAppStorageSet",{key:"canvas_new_mode",value:"1"}),t.setState({isShowGlobalCanvas:!1}),e.setState({isShowGlobalCanvas:!1}),t.go("global_canvas"));case 1:case"end":return n.stop()}}),n)})))},_&&r.a.createElement("div",{className:"TimeCounter"},r.a.createElement(Pt.a,null),r.a.createElement("span",null,x.hours,":",x.minutes,":",x.seconds)),r.a.createElement(It.a,null),r.a.createElement("span",null,"\u041e\u0431\u0449\u0438\u0439 \u0445\u043e\u043b\u0441\u0442"),w&&r.a.createElement("div",{className:"Point_New_Notify"})),!1,r.a.createElement("div",{className:"PlayCard SuggestionsButton",onClick:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.go("suggestions");case 1:case"end":return e.stop()}}),e)})))},r.a.createElement(At.a,null),r.a.createElement("span",null,"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f")),Bt&&r.a.createElement("p",{className:"OnlineText"},"\u041e\u043d\u043b\u0430\u0439\u043d: ",l)),r.a.createElement("div",{className:"PlayerPics__Container"},r.a.createElement("div",{className:"Card_Button_Stretch"},r.a.createElement("div",{className:"Images"},[1,0,2].map((function(e,t){return r.a.createElement("div",{num:t,key:"div__".concat(t)},s[e]&&r.a.createElement("img",{alt:"img",src:s[e]["Picture.url"]}))}))),r.a.createElement("div",{className:"Card_Text__Container",onClick:function(){s.length>0&&t.go("gallery")}},r.a.createElement("div",null,r.a.createElement("span",null,"\u041c\u043e\u0438 \u0440\u0430\u0431\u043e\u0442\u044b"),r.a.createElement("span",null,A(h,["\u0443\u0441\u043f\u0435\u0448\u043d\u0430\u044f","\u0443\u0441\u043f\u0435\u0448\u043d\u044b\u0435","\u0443\u0441\u043f\u0435\u0448\u043d\u044b\u0445"]))),r.a.createElement("div",null,A(f,["\u043a\u0430\u0440\u0442\u0438\u043d\u0430","\u043a\u0430\u0440\u0442\u0438\u043d\u044b","\u043a\u0430\u0440\u0442\u0438\u043d"])))),r.a.createElement("div",{className:"Card_Button_Stretch"},r.a.createElement("div",{className:"Images"},[1,0,2].map((function(e,t){return r.a.createElement("div",{num:t,key:"div__".concat(t)},o[e]&&r.a.createElement("img",{alt:"img",src:o[e]["Picture.url"]}))}))),r.a.createElement("div",{className:"Card_Text__Container",onClick:function(){return t.go("rating")}},r.a.createElement("div",null,r.a.createElement("span",null,"\u041e\u0442\u0433\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0440\u0430\u0431\u043e\u0442\u044b"),r.a.createElement("span",null,i&&"".concat(function(e){var t=D(e).split(" ");return t[0]+new Array(t.length-1).fill("\u041a").join("")}(i)," \u043c\u0435\u0441\u0442\u043e"))),r.a.createElement("div",null,A(v,["\u043a\u0430\u0440\u0442\u0438\u043d\u0430","\u043a\u0430\u0440\u0442\u0438\u043d\u044b","\u043a\u0430\u0440\u0442\u0438\u043d"]))))),r.a.createElement("div",{className:"SubCards__Container"},[[r.a.createElement(Dt.a,null),"\u041b\u0435\u043d\u0442\u0430",function(){return e.goToFeed()}],[r.a.createElement(Lt.a,null),"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",function(){return e.goToStats()}],[r.a.createElement(Tt.a,null),"\u041c\u0430\u0433\u0430\u0437\u0438\u043d",function(){return t.go("shop")}]].map((function(e,t){return r.a.createElement("div",{key:"SubCard_".concat(t),onClick:function(){return e[2]()},style:{marginLeft:0!==t&&8}},e[0],r.a.createElement("span",null,e[1]))}))),!Bt&&r.a.createElement("p",{className:"OnlineText"},"\u041e\u043d\u043b\u0430\u0439\u043d: ",l),!1)}}]),t}(a.PureComponent);Rt.defaultProps={};var Ut=Rt,Gt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={offset:e.t.state.gamesAsDrawer.length,limit:10,canGetMore:!0,prevY:0},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef),this.props.t.state.scrollPosition&&(console.log("Scroll to ".concat(this.props.t.state.scrollPosition)),setTimeout((function(){return document.body.scrollTop=e.props.t.state.scrollPosition}),800))}},{key:"handleObserver",value:function(e,t){var n=this,a=e[0].boundingClientRect.y,r=this.props.t,o=this.state,s=o.prevY,c=o.offset,i=o.limit,l=o.canGetMore;(0===s||s>a)&&l&&(this.setState({spinner:!0}),r.socket.call("games.getByDrawerId",{id:r.state.vk_user.id,offset:c,limit:i},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t.response.map((function(e){return e.drawerId})));case 2:r.setState({gamesAsDrawer:[].concat(Object(m.a)(r.state.gamesAsDrawer),Object(m.a)(t.response))}),n.setState({canGetMore:t.response.length>0,spinner:!1}),n.forceUpdate();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({offset:c+10})),this.setState({prevY:a})}},{key:"shareStory",value:function(e,t,a){var o=this;try{this.props.t.setPopout(r.a.createElement(c.C,null));var s=n(57),i=s.createCanvas,l=s.loadImage;l(K(n(190))).then(function(){var n=Object(p.a)(u.a.mark((function n(r){var s,c,p,m;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=i(r.width,r.height),c=s.getContext("2d"),n.next=5,Y(a);case 5:return p=n.sent,m=e.substring(0,1).toUpperCase()+e.substring(1),c.drawImage(r,0,0),c.font="64px TT Commons Demibold",c.textAlign="center",c.fillStyle="#616161",c.fillText(m,539,1210),n.t0=c,n.next=15,l(p);case 15:return n.t1=n.sent,n.t0.drawImage.call(n.t0,n.t1,198,618,683,683),n.next=19,k.a.send("VKWebAppShowStoryBox",{background_type:"image",blob:s.toDataURL("image/png"),attachment:{url:"https://vk.com/app"+N().vk_app_id,text:"go_to",type:"url"}});case 19:o.props.t.socket.call("games.share",{gameId:t}),o.props.t.setPopout(null),n.next=28;break;case 23:n.prev=23,n.t2=n.catch(0),console.error(n.t2),o.props.t.setPopout(null),o.props.t.setSnackbar("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");case 28:case"end":return n.stop()}}),n,null,[[0,23]])})));return function(e){return n.apply(this,arguments)}}())}catch(m){console.error(m),this.props.t.setPopout(null),this.props.t.setSnackbar("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}}},{key:"render",value:function(){var e=this,t=this.props.t,n=t.state,a=n.banners,o=(n.defaultBannerData,n.gamesAsDrawer),s=F(),i=this.state.spinner;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:t.back}),separator:!1},s&&"\u0422\u0432\u043e\u044f \u0433\u0430\u043b\u0435\u0440\u0435\u044f"),r.a.createElement("div",{className:"Gallery"},!s&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u0422\u0432\u043e\u044f \u0433\u0430\u043b\u0435\u0440\u0435\u044f"),r.a.createElement("p",{style:{margin:!s&&"8px 0 0 0"}},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0443\u0436\u043d\u0443\u044e \u043a\u0430\u0440\u0442\u0438\u043d\u0443, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0438 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435:"),r.a.createElement("div",{style:{marginTop:s?18:24,gridGap:s?8:15,paddingBottom:a[0]||140},className:"Images_Grid"},o.map((function(e,n){return r.a.createElement("div",{key:"Image_".concat(n),onClick:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({like_currentPictureSelected:n,like_method:"games.getByDrawerId",like_param:"gamesAsDrawer",like_user_id:t.state.vk_user.id,scrollPosition:document.body.scrollTop});case 2:t.go("picture_info");case 3:case"end":return e.stop()}}),e)})))},r.a.createElement("img",{alt:"img",src:e["Picture.url"]}))})),i&&r.a.createElement(c.H,{size:"small"})),a[0]&&r.a.createElement(c.B,{bannerData:a[0],onClose:Object(p.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a[0]=!1,n.next=3,t.setState({banners:a});case 3:e.forceUpdate();case 4:case"end":return n.stop()}}),n)})))})),r.a.createElement("div",{ref:function(t){return e.loadingRef=t}}))}}]),t}(a.PureComponent);Gt.defaultProps={};var Vt=Gt,zt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={offset:e.t.state.gamesAsWinner.length,limit:10,canGetMore:!0,prevY:0},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef),this.props.t.state.scrollPosition&&(console.log("Scroll to ".concat(this.props.t.state.scrollPosition)),setTimeout((function(){return document.body.scrollTop=t.props.t.state.scrollPosition}),800));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleObserver",value:function(e,t){var n=this,a=e[0].boundingClientRect.y,r=this.props.t,o=this.state,s=o.prevY,c=o.offset,i=o.limit,l=o.canGetMore;(0===s||s>a)&&l&&(r.socket.call("games.getByWinnerId",{id:r.state.vk_user.id,offset:c,limit:i},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t.response.map((function(e){return e.drawerId})));case 2:r.setState({gamesAsWinner:[].concat(Object(m.a)(r.state.gamesAsWinner),Object(m.a)(t.response))}),n.setState({canGetMore:t.response.length>0}),n.forceUpdate();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({offset:c+10})),this.setState({prevY:a})}},{key:"shareStory",value:function(e,t){var a=this;this.props.t.setPopout(r.a.createElement(c.C,null));try{var o=n(57),s=o.createCanvas,i=o.loadImage;i(K(n(293))).then(function(){var n=Object(p.a)(u.a.mark((function n(r){var o,c,l;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=s(r.width,r.height),c=o.getContext("2d"),n.next=4,Y(t);case 4:return l=n.sent,c.drawImage(r,0,0),n.t0=c,n.next=9,i(l);case 9:return n.t1=n.sent,n.t0.drawImage.call(n.t0,n.t1,198,618,683,683),n.prev=11,n.next=14,k.a.send("VKWebAppShowStoryBox",{background_type:"image",blob:o.toDataURL("image/png"),attachment:{url:"https://vk.com/app"+N().vk_app_id,text:"go_to",type:"url"}});case 14:a.props.t.socket.call("games.share",{gameId:e}),n.next=19;break;case 17:n.prev=17,n.t2=n.catch(11);case 19:a.props.t.setPopout(null);case 20:case"end":return n.stop()}}),n,null,[[11,17]])})));return function(e){return n.apply(this,arguments)}}())}catch(l){console.error(l),this.props.t.setPopout(null),this.props.t.setSnackbar("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}}},{key:"render",value:function(){var e=this,t=this.props.t,n=t.state.banners,a=F(),o=t.state,s=o.user,i=o.gamesAsWinner,l=o.top,m=s.guessedPictures;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:t.back}),separator:!1}),r.a.createElement("div",{className:"Rating"},l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u041b\u0443\u0447\u0448\u0438\u0435 \u0438\u0433\u0440\u043e\u043a\u0438 \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"),r.a.createElement("div",{className:"Users_List"},l.map((function(e,n){return r.a.createElement("div",{key:"div__".concat(n),onClick:function(){t.socket.call("users.getById",{id:e.id},function(){var n=Object(p.a)(u.a.mark((function n(a){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.setState({author:a.response});case 2:t.socket.call("games.getByDrawerId",{id:e.id},function(){var e=Object(p.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({author_works:n.response});case 2:t.go("author"),t.setPopout(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},r.a.createElement(c.f,{size:48,shadow:!1,src:e.photo_100}),r.a.createElement("div",null,r.a.createElement("div",null,e.first_name," ",e.last_name.substring(0,1),"."),r.a.createElement("div",null,"\u041e\u0442\u0433\u0430\u0434\u0430\u043b",1===e.sex&&"\u0430"," ",A(e.guessedPicturesToday,["\u043a\u0430\u0440\u0442\u0438\u043d\u0443","\u043a\u0430\u0440\u0442\u0438\u043d\u044b","\u043a\u0430\u0440\u0442\u0438\u043d"]))))})))),i.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:{margin:"24px 0 0 0"}},"\u0412\u044b \u043e\u0442\u0433\u0430\u0434\u0430\u043b\u0438 ",A(m,["\u043a\u0430\u0440\u0442\u0438\u043d\u0443","\u043a\u0430\u0440\u0442\u0438\u043d\u044b","\u043a\u0430\u0440\u0442\u0438\u043d"])," (\u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u0443, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043d\u0435\u0439):"),r.a.createElement("div",{style:{marginTop:18,gridGap:a?8:15,paddingBottom:n[1]&&140},className:"Images_Grid"},i.map((function(e,n){return r.a.createElement("div",{key:"Image_".concat(n),onClick:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({like_currentPictureSelected:n,like_method:"games.getByWinnerId",like_param:"gamesAsWinner",like_user_id:t.state.vk_user.id,scrollPosition:document.body.scrollTop});case 2:t.go("picture_info");case 3:case"end":return e.stop()}}),e)})))},r.a.createElement("img",{alt:"img",src:e["Picture.url"]}))}))),n[1]&&r.a.createElement(c.B,{bannerData:n[1],onClose:Object(p.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n[1]=!1,a.next=3,t.setState({banners:n});case 3:e.forceUpdate();case 4:case"end":return a.stop()}}),a)})))})),r.a.createElement("div",{ref:function(t){return e.loadingRef=t}})))}}]),t}(a.PureComponent);zt.defaultProps={};var Kt=zt,Yt=!1,Ht=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={lobbyPlayers:[],lobbyPlayers_:[],point_count:0,starting:!1},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentWillUnmount",value:function(){Yt=!0}},{key:"componentDidMount",value:function(){var e=this;Yt=!1,setTimeout(Object(p.a)(u.a.mark((function t(){var n,a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,n=document.getElementsByClassName("SearchImages")[0],a=u.a.mark((function t(a){var o,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=L(1,25),(s=document.createElement("img")).src="https://photos.avocado.special.vk-apps.com/drawapp_search_images/image_".concat(o,".png"),s.style.left="".concat(L(-10,90),"%"),n.appendChild(s),e.state.starting||Yt){t.next=8;break}return a--,t.next=8,I(L(100,1e3));case 8:setTimeout((function(){return s.remove()}),5e3),r=a;case 10:case"end":return t.stop()}}),t)})),r=0;case 4:if(!(r<1)){t.next=9;break}return t.delegateYield(a(r),"t0",6);case 6:r++,t.next=4;break;case 9:t.next=13;break;case 11:t.prev=11,t.t1=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])}))),100);var t=this.props.t.socket;t.unsubscribe("changeLobbyUsers","gameStart","chooseWord","setWord","gameEnd","draw","gameStarting","message"),t.subscribe("changeLobbyUsers",function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,ne(n.players);case 3:t.t1=t.sent,t.t2=n.players,t.t3={lobbyPlayers:t.t1,lobbyPlayers_:t.t2},t.t0.setState.call(t.t0,t.t3);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.subscribe("chooseWord",function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.t.setState({chooseWords:n.words}),setTimeout((function(){e.props.t.forceUpdate()}),400);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.subscribe("setWord",function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.t.setState({word:n.word}),setTimeout((function(){e.props.t.forceUpdate()}),400);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.subscribe("gameStart",function(){var t=Object(p.a)(u.a.mark((function t(n){var a,r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.lobbyId,r=n.drawerId,o=n.timeout,t.next=3,e.props.t.setState({game_timeout:o,lobbyId:a,drawerId:r,gameStart:Date.now(),isOnlineDrawing:!0,subGameInfo:{friendly:!1}});case 3:return t.next=5,new Promise((function(t){var n,a=e.state,r=a.lobbyPlayers,o=a.lobbyPlayers_;n=setInterval((function(){o.length===r.length&&(clearInterval(n),console.log("All players find"),t(!0))}),400)}));case 5:console.log("Game start. lobbyId = ".concat(a,", drawerId = ").concat(r)),e.props.t.setState({history:["main","game"],activePanel:"game"});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.subscribe("gameStarting",function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({starting:!0});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.call("games.search",{},(function(t){t.error&&(e.props.t.setActivePanel("main"),e.props.t.setAlert("\u041e\u0448\u0438\u0431\u043a\u0430",t.error.message,[{title:"\u041e\u043a",autoclose:!0}]))}))}},{key:"render",value:function(){var e=this,t=this.props.t,n=this.state.lobbyPlayers.filter((function(e){return e.id!==t.state.vk_user.id})),a=this.state.starting;return r.a.createElement("div",{className:"SearchGame"},r.a.createElement("div",{className:"SearchContainer"},r.a.createElement("h1",null,a?"\u041e\u0447\u0438\u0449\u0430\u0435\u043c \u0445\u043e\u043b\u0441\u0442":"\u041f\u043e\u0438\u0441\u043a \u0438\u0433\u0440\u043e\u043a\u043e\u0432"),r.a.createElement(c.N,{style:{marginTop:12},photos:[t.state.vk_user.photo_100].concat(Object(m.a)(n.map((function(e){return e.photo_100})))),size:"m",visibleCount:5}),!a&&r.a.createElement(c.h,{size:"l",stretched:!0,mode:"secondary",style:{marginTop:32},onClick:function(){e.state.starting||t.back()}},"\u041e\u0442\u043c\u0435\u043d\u0430")),r.a.createElement("div",{className:"SearchImages"}))}},{key:"renderOld",value:function(){var e=this,t=this.props.t,n=this.state.lobbyPlayers.filter((function(e){return e.id!==t.state.vk_user.id})),a=r.a.createElement("svg",{width:"274",height:"316",viewBox:"0 0 274 316",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginTop:F()?72:"8.86699507vh"},onClick:function(){e.state.starting||t.back()}},r.a.createElement("rect",{x:"63",y:"84",width:"148",height:"148",rx:"74",fill:"url(#paint0_linear)"}),r.a.createElement("circle",{className:"Search_Avatar",cx:"137",cy:"158",r:"48",fill:"url(#pattern0)"}),r.a.createElement("line",{x1:"27.866",y1:"26.5",x2:"60.366",y2:"82.7916",stroke:"var(--border_players_color)",strokeWidth:"2",strokeDasharray:"4 4"}),r.a.createElement("rect",{x:"1.5",y:"1.5",width:"51",height:"51",rx:"25.5",fill:"var(--background_content)"}),r.a.createElement("circle",{cx:"27",cy:"27",r:"24",fill:"url(#pattern1)"}),r.a.createElement("rect",{x:"1.5",y:"1.5",width:"51",height:"51",rx:"25.5",stroke:"var(--border_players_color)",strokeWidth:"3"}),r.a.createElement("line",{y1:"-1",x2:"65",y2:"-1",transform:"matrix(-0.5 0.866025 0.866025 0.5 246.88 27)",stroke:"var(--border_players_color)",strokeWidth:"2",strokeDasharray:"4 4"}),r.a.createElement("rect",{x:"1.5",y:"-1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(-1 0 0 1 274 3)",fill:"var(--background_content)"}),r.a.createElement("rect",{x:"1.5",y:"-1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(-1 0 0 1 274 3)"}),r.a.createElement("circle",{cx:"247",cy:"27",r:"24",fill:"url(#pattern2)"}),r.a.createElement("rect",{x:"1.5",y:"-1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(-1 0 0 1 274 3)",stroke:"var(--border_players_color)",strokeWidth:"3"}),r.a.createElement("line",{y1:"-1",x2:"65",y2:"-1",transform:"matrix(0.5 -0.866025 -0.866025 -0.5 27 289)",stroke:"var(--border_players_color)",strokeWidth:"2",strokeDasharray:"4 4"}),r.a.createElement("rect",{x:"-1.5",y:"1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(1 0 0 -1 3 316)",fill:"var(--background_content)"}),r.a.createElement("rect",{x:"-1.5",y:"1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(1 0 0 -1 3 316)"}),r.a.createElement("circle",{cx:"27",cy:"289",r:"24",fill:"url(#pattern3)"}),r.a.createElement("rect",{x:"-1.5",y:"1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(1 0 0 -1 3 316)",stroke:"var(--border_players_color)",strokeWidth:"3"}),r.a.createElement("line",{x1:"246.014",y1:"289.5",x2:"213.514",y2:"233.208",stroke:"var(--border_players_color)",strokeWidth:"2",strokeDasharray:"4 4"}),r.a.createElement("rect",{x:"272.5",y:"314.5",width:"51",height:"51",rx:"25.5",transform:"rotate(-180 272.5 314.5)",fill:"var(--background_content)"}),r.a.createElement("rect",{x:"272.5",y:"314.5",width:"51",height:"51",rx:"25.5",transform:"rotate(-180 272.5 314.5)"}),r.a.createElement("circle",{cx:"247",cy:"289",r:"24",fill:"url(#pattern4)"}),r.a.createElement("rect",{x:"272.5",y:"314.5",width:"51",height:"51",rx:"25.5",transform:"rotate(-180 272.5 314.5)",stroke:"var(--border_players_color)",strokeWidth:"3"}),r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"paint0_linear",x1:"63",y1:"84",x2:"211",y2:"232",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{stopColor:"#F05F88"}),r.a.createElement("stop",{offset:"1",stopColor:"#FAAF1A"})),r.a.createElement("pattern",{id:"pattern0",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},r.a.createElement("use",{href:"#image0",transform:"scale(0.005)"})),r.a.createElement("image",{href:t.state.vk_user.photo_max_orig,id:"image0",width:"200",height:"200"}),r.a.createElement("pattern",{id:"pattern1",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},r.a.createElement("use",{href:"#image1",transform:"scale(0.005)"})),r.a.createElement("image",{href:n[0]&&n[0].photo_max_orig,id:"image1",width:"200",height:"200"}),r.a.createElement("pattern",{id:"pattern2",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},r.a.createElement("use",{href:"#image2",transform:"scale(0.005)"})),r.a.createElement("image",{href:n[1]&&n[1].photo_max_orig,id:"image2",width:"200",height:"200"}),r.a.createElement("pattern",{id:"pattern3",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},r.a.createElement("use",{href:"#image3",transform:"scale(0.005)"})),r.a.createElement("image",{href:n[2]&&n[2].photo_max_orig,id:"image3",width:"200",height:"200"}),r.a.createElement("pattern",{id:"pattern4",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},r.a.createElement("use",{href:"#image4",transform:"scale(0.005)"})),r.a.createElement("image",{href:n[3]&&n[3].photo_max_orig,id:"image4",width:"200",height:"200"}))),o=this.state.point_count;return r.a.createElement("div",{className:"Search"},r.a.createElement("h1",null,this.state.starting?"\u041e\u0447\u0438\u0449\u0430\u0435\u043c \u0445\u043e\u043b\u0441\u0442".concat(new Array(o).fill(".").join("")):"\u0418\u0449\u0435\u043c \u0438\u0433\u0440\u043e\u043a\u043e\u0432".concat(new Array(o).fill(".").join(""))),r.a.createElement("h3",null,n.length+1,"/5"),a)}}]),t}(a.PureComponent);Ht.defaultProps={};var Zt=Ht;function Xt(){return(Xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Jt(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var qt=r.a.createElement("path",{d:"M16.1568 6.96446L14.0355 4.84314C13.2545 4.06209 11.9881 4.06209 11.2071 4.84314L8.37866 7.67157L13.3284 12.6213L16.1568 9.79289C16.9379 9.01184 16.9379 7.74551 16.1568 6.96446Z",fill:"#C3C3C3"}),$t=r.a.createElement("path",{d:"M16.864 6.25738L14.7427 4.13606C13.5711 2.96448 11.6716 2.96448 10.5 4.13606L4.13606 10.5C2.96449 11.6716 2.96449 13.5711 4.13606 14.7427L6.25738 16.864C7.42895 18.0356 9.32845 18.0356 10.5 16.864L16.864 10.5C18.0356 9.32844 18.0356 7.42895 16.864 6.25738Z",stroke:"#C3C3C3",strokeWidth:2}),Qt=function(e){var t=e.svgRef,n=e.title,a=Jt(e,["svgRef","title"]);return r.a.createElement("svg",Xt({width:21,height:21,viewBox:"0 0 21 21",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,qt,$t)};r.a.forwardRef((function(e,t){return r.a.createElement(Qt,Xt({svgRef:t},e))})),n.p;function en(){return(en=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function tn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var nn=r.a.createElement("path",{d:"M2.34316 12.0355L4.46448 14.1568C5.24553 14.9378 6.51186 14.9378 7.29291 14.1568L10.1213 11.3284L5.17159 6.37862L2.34316 9.20705C1.56211 9.9881 1.56211 11.2544 2.34316 12.0355Z",fill:"currentColor"}),an=r.a.createElement("path",{d:"M1.81279 12.5658L3.93411 14.6872C5.00806 15.7611 6.74926 15.7611 7.8232 14.6872L14.1872 8.32321C15.2611 7.24926 15.2611 5.50806 14.1872 4.43412L12.0658 2.3128C10.9919 1.23886 9.2507 1.23886 8.17675 2.3128L1.81279 8.67676C0.738852 9.7507 0.738851 11.4919 1.81279 12.5658Z",stroke:"currentColor",strokeWidth:1.5}),rn=function(e){var t=e.svgRef,n=e.title,a=tn(e,["svgRef","title"]);return r.a.createElement("svg",en({width:16,height:17,viewBox:"0 0 16 17",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,nn,an)},on=r.a.forwardRef((function(e,t){return r.a.createElement(rn,en({svgRef:t},e))}));n.p;function sn(){return(sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function cn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ln=r.a.createElement("rect",{x:1.5,y:1,width:12.5,height:1,rx:.5,fill:"currentColor",stroke:"currentColor",strokeWidth:.3}),un=r.a.createElement("rect",{x:1.25,y:4.75,width:13,height:1,rx:.5,fill:"currentColor",stroke:"currentColor",strokeWidth:.7}),pn=r.a.createElement("rect",{x:1,y:8.5,width:13.5,height:1,rx:.5,fill:"currentColor",stroke:"currentColor",strokeWidth:1.25}),mn=function(e){var t=e.svgRef,n=e.title,a=cn(e,["svgRef","title"]);return r.a.createElement("svg",sn({width:16,height:11,viewBox:"0 0 16 11",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,ln,un,pn)},dn=r.a.forwardRef((function(e,t){return r.a.createElement(mn,sn({svgRef:t},e))})),fn=(n.p,n(730)),hn=n(731),vn=n(732),bn=n(733);function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kn,wn={},En=0,_n=[],xn=!1,On=function(e){function t(e){var n;Object(d.a)(this,t),n=Object(h.a)(this,Object(v.a)(t).call(this,e));var a=e.t,r=a.state,o=r.user,s=r.test_game;return n.state={drawer:ee[e.drawerId],isDrawer:s||!1===e.online||e.drawerId===e.t.state.vk_user.id,text:"",selectedColor:o.vk_donut||o.admin?0:1,drawing:!1,time:a.state.game_timeout,messages:[],isEraser:!1,isStroke:!1,lineWidth:2},n.state.drawer||setTimeout(Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne([e.drawerId]);case 2:n.setState({drawer:ee[e.drawerId]});case 3:case"end":return t.stop()}}),t)}))),1),n.onMouseDown=n.onMouseDown.bind(Object(b.a)(n)),n.onMouseUp=n.onMouseUp.bind(Object(b.a)(n)),n.throttle=n.throttle.bind(Object(b.a)(n)),n.onMouseMove=n.onMouseMove.bind(Object(b.a)(n)),n.drawLine=n.drawLine.bind(Object(b.a)(n)),e.online&&!s&&(kn=setInterval((function(){n.setState({time:n.state.time-1}),n.state.time<=-5&&(n.props.t.setState({canvas_:n.canvas.toDataURL("image/png"),winnerId:0,word:{nom:""},gameId:0,gameEnd:Date.now()}),n.props.t.setActivePanel("result"),console.log("Game end (timeout)"),clearInterval(kn))}),1e3)),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentWillUnmount",value:function(){this.props.online&&clearInterval(kn)}},{key:"updateChooseWordPopout",value:function(e,t,n,a,o){var s=this;e.setPopout(r.a.createElement(c.A,null,r.a.createElement("div",{className:"GameChooseWord"},r.a.createElement("div",{className:"GameChooseWord-Timer"},5-n),r.a.createElement("div",{className:"GameChooseWord-Title"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043b\u043e\u0432\u043e"),r.a.createElement("div",{className:"GameChooseWord-Words"},(a||[{nom:"\u0441\u043b\u043e\u0432\u043e 1"},{nom:"\u0441\u043b\u043e\u0432\u043e 2"},{nom:"\u0441\u043b\u043e\u0432\u043e 3"}]).map((function(t,n){return r.a.createElement("div",{key:"word_".concat(n),onClick:function(){xn=!0,e.setState({word:t}),e.setPopout(null),e.socket.call("games.chooseWord",{lobbyId:o,word:n}),s.forceUpdate()}},t.nom)}))))))}},{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,a,o,s,i,l,d,f,h,v,b,g,y,w,E,_,x,O,C,S=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.canvas,a=this.onMouseDown,o=this.onMouseUp,s=this.throttle,i=this.onMouseMove,l=this.props,d=this.state,d.drawer,f=d.isDrawer,h=l.online,v=l.t,b=l.lobbyId,g=v.state.chooseWords,this.canvasContext=t.getContext("2d"),h&&(v.socket.unsubscribe("gameEnd","draw","clear","message"),v.socket.subscribe("gameEnd",function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout((function(){try{S.canvas.toBlob((function(){e(S.canvas.toDataURL("image/png"))}))}catch(t){console.error(t),e(null)}}),100)}));case 2:n=e.sent,a=t.winnerId,r=t.word,o=t.gameId,S.state.isDrawer&&S.props.t.socket.call("games.end",{canvasData:n,lobbyId:S.props.lobbyId,gameId:o}),S.props.t.setState({canvas_:n,winnerId:a,word:r,gameId:o,gameEnd:Date.now()}),S.props.t.setActivePanel("result"),console.log("Game end");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v.socket.subscribe("gameAfkEnd",function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.props.t.setActivePanel("game_canceled"),console.log("Game end afk");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f||(v.socket.subscribe("draw",(function(e){var t=!0,n=!1,a=void 0;try{for(var r,o=e.data[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value,c=s.x0,i=s.y0,l=s.x1,u=s.y1,p=s.color,m=s.isEraser,d=s.lineWidth;d||(d=2),S.drawLine(c,i,l,u,p,m,d)}}catch(f){n=!0,a=f}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}})),v.socket.subscribe("clear",(function(e){S.canvasContext.clearRect(0,0,319,319)}))),v.socket.subscribe("message",function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.user_id,a=t.message,console.log("New message from ".concat(n,": ").concat(a)),ee[n]){e.next=5;break}return e.next=5,ne(n);case 5:return e.next=7,S.setState({messages:[].concat(Object(m.a)(S.state.messages),[yn({user_id:n,message:a},ee[n])])});case 7:try{(r=document.getElementsByClassName("Comment"))[r.length-1].scrollIntoView(!1)}catch(o){}case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),f&&(t.addEventListener("mousedown",a,!1),t.addEventListener("mouseup",o,!1),t.addEventListener("mouseout",o,!1),t.addEventListener("mousemove",s(i,10),!1),t.addEventListener("touchstart",a,!1),t.addEventListener("touchend",o,!1),t.addEventListener("touchcancel",o,!1),t.addEventListener("touchmove",s(i,10),!1),h&&(y=Date.now(),xn=!1,g&&g.length>0&&(w=0,this.updateChooseWordPopout(v,y,w,g,b),E=setInterval((function(){w++,xn||S.updateChooseWordPopout(v,y,w,g,b),(5===w||xn)&&clearInterval(E)}),1e3)),setTimeout((function(){xn||(xn=!0,v.setState({word:g[0]}),v.setPopout(null))}),5e3),v.socket.subscribe("drawAfkWarning",(function(e){k.a.supports("VKWebAppTapticNotificationOccurred")&&k.a.send("VKWebAppTapticNotificationOccurred",{type:"warning"}),v.setPopout(r.a.createElement(c.A,null,r.a.createElement("div",{className:"GameAfkWarning"},r.a.createElement("div",{className:"GameAfkWarning-Icon"},r.a.createElement(fn.a,null)),r.a.createElement("div",{className:"GameAfkWarning-Title"},"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c!"),r.a.createElement("div",{className:"GameAfkWarning-Description"},"\u0415\u0441\u043b\u0438 \u0432\u044b \u043d\u0435 \u0431\u0443\u0434\u0435\u0442\u0435 \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c, \u0432\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u043d\u0430\u043a\u0430\u0437\u0430\u043d\u044b"),r.a.createElement("div",{className:"GameAfkWarning-Button",onClick:function(){return v.setPopout(null)}},"\u041e\u043a\u0435\u0439"))))})))),h){e.next=18;break}return v.setPopout(r.a.createElement(c.C,null)),_=v.state.pictureUrl_,e.next=9,Y(_);case 9:return x=e.sent,O=n(57),C=O.loadImage,e.t0=this.canvasContext,e.next=15,C(x);case 15:e.t1=e.sent,e.t0.drawImage.call(e.t0,e.t1,0,0),v.setPopout(null);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onMouseDown",value:function(e){this.setState({drawing:!0}),wn.x=e.clientX||e.touches[0].clientX,wn.y=e.clientY||e.touches[0].clientY,_n=[]}},{key:"onMouseUp",value:function(e){var t=this.state,n=t.drawing,a=t.selectedColor,r=t.isEraser,o=t.lineWidth;if(n){this.setState({drawing:!1});try{var s=this.canvas.getBoundingClientRect();try{this.drawLine(wn.x-s.left,wn.y-s.top,(e.clientX||e.touches[0].clientX)-s.left,(e.clientY||e.touches[0].clientY)-s.top,this.props.t.state.colors[a],r,o)}catch(e){}console.log("Lines to send: ".concat(_n.length)),_n.length>0&&(this.props.t.socket.call("games.draw",{lobbyId:this.props.lobbyId,data:_n}),_n=[])}catch(c){console.log(c)}}}},{key:"onMouseMove",value:function(e){var t=this.state,n=t.drawing,a=t.selectedColor,r=t.isEraser,o=t.lineWidth;if(n){try{var s=this.canvas.getBoundingClientRect();this.drawLine(wn.x-s.left,wn.y-s.top,(e.clientX||e.touches[0].clientX)-s.left,(e.clientY||e.touches[0].clientY)-s.top,this.props.t.state.colors[a],r,o),wn.x=e.clientX||e.touches[0].clientX,wn.y=e.clientY||e.touches[0].clientY}catch(c){console.log(c)}return!1}}},{key:"drawLine",value:function(e,t,n,a,r,o,s){try{var c=this.props,i=(c.lobbyId,c.t),l=(this.canvas,this.canvasContext);this.state;"object"===typeof r&&(r=r[En],En+=r.length-1===En?-En:1),l.beginPath(),o?(l.globalCompositeOperation="destination-out",l.arc(e,t,s,0,2*Math.PI,!1),l.fill()):(l.globalCompositeOperation="source-over",l.moveTo(e,t),l.lineTo(n,a),l.strokeStyle=r,l.fill(),l.lineWidth=s,l.lineCap=l.lineJoin="round",l.stroke()),l.closePath(),this.state.isDrawer&&this.props.online&&!i.state.test_game&&_n.push({x0:e,y0:t,x1:n,y1:a,color:r,isEraser:o,lineWidth:s})}catch(u){}}},{key:"throttle",value:function(e,t){var n=(new Date).getTime();return function(){var a=(new Date).getTime();a-n>=t&&(n=a,e.apply(null,arguments))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,a=t.lobbyId,o=t.online,s=t.word,i=n.state,l=i.colors,m=i.user,d=this.state,f=d.drawer,h=d.isDrawer,v=d.text,b=d.selectedColor,g=d.time,y=d.messages,k=d.isEraser,w=d.isStroke,E=d.lineWidth,_=F();return n.state.test_game&&(s={nom:"\u0416\u0438\u0440\u0430\u0444"},h=!0,f=n.state.vk_user),r.a.createElement("div",{className:"Game"},r.a.createElement("div",{style:{width:_?319:"100%",alignSelf:"flex-start"},ref:function(t){return e.header=t}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},!h&&r.a.createElement(c.f,{size:24,shadow:!1,src:f.photo_100}),r.a.createElement("h2",{style:{textAlign:"left",marginLeft:6}},h?"\u0417\u0430\u0434\u0430\u0447\u0430: "+(s?s.nom:""):"\u0420\u0438\u0441\u0443\u0435\u0442: "+f.first_name)),o&&r.a.createElement("h2",{style:{textAlign:"right",width:"25%",color:"var(--color_secondary)",wordWrap:"normal"}},g>=0?g:0," \u0441\u0435\u043a"))),r.a.createElement("div",{style:{display:_&&o&&"flex"}},r.a.createElement("div",{className:"Canvas__"},r.a.createElement("div",{className:"Canvas_Container_Clear"},r.a.createElement("canvas",{width:319,height:319,ref:function(t){return e.canvas=t},id:"canvas"})),r.a.createElement("div",{style:{display:!h&&"none"},className:"Canvas_Items_Container"},r.a.createElement("div",{className:"Canvas_Colors_Container"},l.map((function(t,n){return r.a.createElement("div",{onClick:function(){("object"!==typeof t||m.vk_donut||m.admin)&&e.setState({selectedColor:n,isEraser:!1})},className:"Color",key:"Color__".concat(n),style:{marginLeft:n>0&&8,background:"object"===typeof t?"conic-gradient(from 180deg at 50% 50%, ".concat(t.join(", "),")"):t,outline:b===n&&"4px solid #F3F2F2",opacity:m.lvl<n+1&&.25,pointerEvents:m.lvl<n+1&&"none"}})}))),r.a.createElement("div",{className:"Canvas_SubItems_Container"},r.a.createElement(c.q,{style:{background:k?"#A4A6AA":"#F8F8F8",color:k?"#F8F8F8":"#A4A6AA"},hasHover:!1,onClick:function(){e.setState({isEraser:!0,selectedColor:-1})}},r.a.createElement(on,null)),r.a.createElement(c.q,{style:{background:w?"#A4A6AA":"#F8F8F8",color:w?"#F8F8F8":"#A4A6AA"},hasHover:!1,onClick:function(){e.setState({isStroke:!w})}},r.a.createElement(dn,null)),r.a.createElement(c.q,{style:{background:"#F8F8F8",color:"#A4A6AA"},hasHover:!1,onClick:function(){o&&n.socket.call("games.clear",{lobbyId:a}),e.canvasContext.clearRect(0,0,319,319)}},r.a.createElement(hn.a,{width:21,height:21})))),r.a.createElement("div",{style:{transition:"all 200ms",height:!w&&0,opacity:!w&&0}},r.a.createElement(c.F,{step:1,min:2,max:20,value:Number(E),onChange:function(t){return e.setState({lineWidth:t})}}))),!o&&r.a.createElement("div",{className:"Offline_Drawing__Buttons"},r.a.createElement(c.h,{before:r.a.createElement(vn.a,{fill:"var(--color_secondary)"}),size:"m",mode:"secondary",onClick:function(){n.back()}},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement(c.h,{style:{marginLeft:!_&&10,marginTop:_&&10},before:r.a.createElement(bn.a,{fill:"var(--color_secondary)"}),size:"m",mode:"secondary",onClick:Object(p.a)(u.a.mark((function t(){var a,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.setPopout(r.a.createElement(c.C,null)),t.next=3,new Promise((function(t){setTimeout((function(){try{e.canvas.toBlob((function(){t(e.canvas.toDataURL("image/png"))}))}catch(n){console.error(n),t(null)}}),100)}));case 3:a=t.sent,o=n.state.gameId_,e.state.isDrawer&&e.props.t.socket.call("games.savePicture",{canvasData:a,gameId:o},function(){var t=Object(p.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.response){t.next=8;break}return n.setState({n_canvasData:a}),n.setSnackbar("\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"),t.next=5,new Promise((function(t){return e.props.t.socket.call("games.getByDrawerId",{id:e.props.t.state.vk_user.id,limit:e.props.t.state.gamesAsDrawer.length},function(){var n=Object(p.a)(u.a.mark((function n(a){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.props.t.setState({gamesAsDrawer:a.response});case 2:t(!0);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}));case 5:n.forceUpdate(),t.next=9;break;case 8:n.setSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c");case 9:setTimeout((function(){n.setPopout(null),n.back(),n.forceUpdate()}),1e3);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return t.stop()}}),t)})))},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")),o&&r.a.createElement("div",{className:"Comments_Container"},r.a.createElement("div",{className:"Comments",ref:function(t){return e.comments=t}},y.map((function(e,t){return r.a.createElement("div",{className:"Comment",key:"div__".concat(t),style:{marginTop:t>0&&6,cursor:e.id===n.state.vk_user.id&&"default"},onClick:function(){e.id!==n.state.vk_user.id&&e.message.replaceAll("*","").length>0&&n.setPopout(r.a.createElement(c.a,{onClose:function(){return n.setPopout(null)},iosCloseItem:r.a.createElement(c.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")},r.a.createElement(c.b,{autoclose:!0,mode:"destructive",onClick:function(){n.socket.call("games.reportWord",{message:e.message}),n.setSnackbar("\u0416\u0430\u043b\u043e\u0431\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430")}},"\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))}},r.a.createElement(c.f,{size:32,shadow:!1,src:e.photo_100}),r.a.createElement("div",null,r.a.createElement("div",null,e.first_name," ",e.last_name),r.a.createElement("div",null,e.message)))}))),!h&&r.a.createElement("div",{className:"Comment_Input"},r.a.createElement(c.r,{autoFocus:!0,id:"inputComment",value:v,onChange:function(t){t.currentTarget.value.length<=120&&e.setState({text:t.currentTarget.value})},placeholder:"\u0415\u0441\u0442\u044c \u0434\u043e\u0433\u0430\u0434\u043a\u0438?",onKeyDown:function(t){"Enter"===t.key&&v.trim().length>0&&(console.log("Send message (key) (lobbyId = ".concat(a,"): ").concat(v)),n.socket.call("games.message",{lobbyId:a,message:v}),e.setState({text:""}))},onFocus:function(){setTimeout((function(){document.getElementById("inputComment").scrollIntoView(!1)}),100)}}),r.a.createElement(c.P,{style:{display:0===v.length&&"none"},mode:"send",onClick:function(){v.trim().length>0?(console.log("Send message (btn) (lobbyId = ".concat(a,"): ").concat(v)),n.socket.call("games.message",{lobbyId:a,message:v})):console.log("Message is empty: ".concat(v)),e.setState({text:""})}})))))}}]),t}(a.PureComponent);On.defaultProps={};var Cn=On,Sn=n(734),jn=n(735),Pn=n(736),In=n(737),An=n(738);function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tn=F(),Nn=function(e){function t(e){var n;Object(d.a)(this,t),n=Object(h.a)(this,Object(v.a)(t).call(this,e));var a=e.drawerId,r=e.winnerId,o=e.word,s=e.t;return n.state={isDrawer:a===s.state.vk_user.id,isWinner:r===s.state.vk_user.id,winnerId:r||245481845,drawerId:a,word:o,playAgain:!1,playAgainTick:10},n.shareStory=n.shareStory.bind(Object(b.a)(n)),n.back=n.back.bind(Object(b.a)(n)),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.t.setState({chooseWords:[]})}},{key:"shareStory",value:function(){var e=this;this.props.t.setPopout(r.a.createElement(c.C,null));var t=n(57),a=t.createCanvas,o=t.loadImage,s=this.state,i=s.isDrawer,l=(s.winnerId,s.isWinner),m=i?1:l?2:3;o(K(n(687)("./Story".concat(m,".png")))).then(function(){var t=Object(p.a)(u.a.mark((function t(n){var r,o,s,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a(n.width,n.height),o=r.getContext("2d"),s=new Image,c=e.state.word,i=c.nom.substring(0,1).toUpperCase()+c.nom.substring(1),o.drawImage(n,0,0),1===m&&(o.font="64px TT Commons Demibold",o.textAlign="center",o.fillStyle="#616161",o.fillText(i,539,1210)),s.src=e.props.t.state.canvas_,o.drawImage(s,198,618,683,683),t.prev=5,t.next=8,k.a.send("VKWebAppShowStoryBox",{background_type:"image",blob:r.toDataURL("image/png"),attachment:{url:"https://vk.com/app"+N().vk_app_id,text:"go_to",type:"url"}});case 8:e.props.t.socket.call("games.share",{gameId:e.props.gameId}),Z("stats.shareStory"),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(5);case 14:e.props.t.updateData(),e.props.t.setPopout(null);case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}())}},{key:"back",value:function(){var e=this.props.t,t=e.back,n=e.state,a=e.socket,r=n.subGameInfo,o=n.user;r.friendly&&r.owner_id===o.id&&a.call("friends.removeLobbyData"),t()}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,a=t.gameId,o=n.state,s=o.vk_user,i=o.isNotApp,l=this.state,m=l.isDrawer,d=l.isWinner,f=l.winnerId,h=l.drawerId,v=l.word,b=l.isLiked,g=l.playAgain,y=l.playAgainTick,w=Math.round((n.state.gameEnd-n.state.gameStart)/1e3),E=m?0!==f?["\u0422\u044b \u043c\u043e\u043b\u043e\u0434\u0435\u0446!","\u0422\u0432\u043e\u044e \u043a\u0430\u0440\u0442\u0438\u043d\u0443 \u0443\u0433\u0430\u0434\u0430\u043b\u0438 \u0437\u0430 ".concat(A(w||0,["\u0441\u0435\u043a\u0443\u043d\u0434\u0443","\u0441\u0435\u043a\u0443\u043d\u0434\u044b","\u0441\u0435\u043a\u0443\u043d\u0434"]))]:["\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u0448\u043b\u043e","\u041d\u0438\u043a\u0442\u043e \u043d\u0435 \u0443\u0433\u0430\u0434\u0430\u043b, \u0447\u0442\u043e \u0442\u044b \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043b"]:0!==f?d?["\u0422\u044b \u043c\u043e\u043b\u043e\u0434\u0435\u0446!","\u0422\u044b \u043f\u0435\u0440\u0432".concat(1===s.sex?"\u0430\u044f":"\u044b\u0439"," \u0443\u0433\u0430\u0434\u0430\u043b").concat(1===s.sex&&"\u0430",", \u0447\u0442\u043e \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043b").concat(1===ee[h].sex?"\u0430":""," ").concat(ee[h].first_name)]:["\u0418\u0433\u0440\u0430 \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430","".concat(ee[f].first_name," \u0431\u044b\u043b").concat(1===ee[f].sex?"\u0430":""," \u043f\u0435\u0440\u0432").concat(1===ee[f].sex?"\u043e\u0439":"\u044b\u043c",", \u043a\u0442\u043e \u0443\u0433\u0430\u0434\u0430\u043b, \u0447\u0442\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043e \u043d\u0430 \u0445\u043e\u043b\u0441\u0442\u0435")]:["\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u0448\u043b\u043e","\u041d\u0438\u043a\u0442\u043e \u043d\u0435 \u0443\u0433\u0430\u0434\u0430\u043b, \u0447\u0442\u043e \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a \u043f\u044b\u0442\u0430\u043b\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c"];return r.a.createElement(r.a.Fragment,null,Tn?r.a.createElement(c.q,{style:Ln({position:"fixed",top:49,left:96},g?{visibility:"hidden",pointerEvents:"none"}:{}),onClick:this.back},r.a.createElement(Sn.a,{fill:"#F15F8A"})):r.a.createElement(c.x,{separator:!1,left:r.a.createElement(c.q,{style:g?{visibility:"hidden",pointerEvents:"none"}:{},onClick:this.back},r.a.createElement(Sn.a,{fill:"#F15F8A"}))}),r.a.createElement("div",{className:"Result_New"},v&&v.nom&&r.a.createElement("h2",null,v.nom.substring(0,1).toUpperCase()+v.nom.substring(1)),r.a.createElement("div",{className:"Canvas_Container"},r.a.createElement("img",{alt:"canvas",src:n.state.canvas_})),r.a.createElement("h1",null,E[0]),r.a.createElement("p",null,E[1]),g?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.h,{style:{marginTop:"6.89655172vh"},stretched:!0,size:"l",mode:"pink_secondary",onClick:function(){}},r.a.createElement("div",{style:{opacity:.5,display:"flex",flexDirection:"column"}},r.a.createElement("span",null,"\u0416\u0434\u0451\u043c \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445"),r.a.createElement("span",{style:{fontSize:11,marginTop:-4}},y," \u0441."))),r.a.createElement(c.N,{style:{marginTop:12},photos:[s.photo_100],size:"m",visibleCount:5})):r.a.createElement(r.a.Fragment,null,r.a.createElement(c.h,{style:{marginTop:"6.89655172vh"},stretched:!0,size:"l",mode:"gradient_pink",onClick:Object(p.a)(u.a.mark((function t(){var a,o,s,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.t,o=a.socket,s=a.state,l=s.subGameInfo,s.user,n.setPopout(r.a.createElement(c.C,null)),t.prev=2,i){t.next=6;break}return t.next=6,k.a.send("VKWebAppShowNativeAds",{ad_format:"interstitial"});case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(2);case 10:n.setPopout(null),n.updateData(),l.friendly?(n.setPopout(r.a.createElement(c.C,null)),o.call("friends.joinLobby",{owner_id:l.owner_id},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.response){e.next=8;break}return e.next=3,ne(t.response.members);case 3:return e.next=5,n.setState({friend_lobby:t.response});case 5:n.setActivePanel("friend_lobby",["main","friends"]),e.next=9;break;case 8:n.setActivePanel("friends",["main"]);case 9:n.setPopout(null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):n.setActivePanel("search",["main"]);case 13:case"end":return t.stop()}}),t,null,[[2,8]])})))},"\u0418\u0433\u0440\u0430\u0442\u044c \u0435\u0449\u0451 \u0440\u0430\u0437"),r.a.createElement(c.h,{style:{marginTop:8},stretched:!0,size:"l",mode:"pink_secondary",before:r.a.createElement(jn.a,{width:16,height:16}),onClick:function(){e.shareStory()}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f")),r.a.createElement("div",{className:"Actions_Container"},r.a.createElement(c.q,{onClick:function(){n.setPopout(r.a.createElement(c.C,null)),n.socket.call("pictures.like",{game_id:a},(function(t){e.setState({isLiked:t.response.isLiked}),n.setPopout(null)}))}},b?r.a.createElement(Pn.a,{fill:"#F16384",width:28,height:28}):r.a.createElement(In.a,{fill:"var(--color_secondary)"})),!m&&r.a.createElement(c.q,{onClick:function(){n.setPopout(r.a.createElement(c.C,null)),n.socket.call("games.report",{game_id:a},(function(e){e.response?n.setSnackbar("\u0416\u0430\u043b\u043e\u0431\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"):n.setSnackbar("\u0416\u0430\u043b\u043e\u0431\u0430 \u0443\u0436\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"),n.setPopout(null)}))}},r.a.createElement(An.a,{fill:"var(--color_secondary)"})))))}}]),t}(a.PureComponent);Nn.defaultProps={};var Mn=Nn,Fn=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.icon,a=e.title,o=e.description,s=e.buttonText,i=e.buttonIcon,l=e.buttonOnClick,u=e.buttonMode,p=e.buttonBack,m=e.buttonBackText;return r.a.createElement(r.a.Fragment,null,p&&!1,r.a.createElement("div",{className:"Placeholder_Clean"},r.a.cloneElement(n,{className:"Placeholder__Icon"}),r.a.createElement("div",null,r.a.createElement("h1",null,a),r.a.createElement("p",null,o),r.a.createElement("div",{className:p?"TwoButtons":"OneButton"},s&&r.a.createElement(c.h,{after:i,size:"m",mode:u||"gradient",onClick:l},s),p&&r.a.createElement(c.h,{size:"m",mode:"secondary",onClick:function(){return t.back()}},m||"\u041d\u0430\u0437\u0430\u0434")))))}}]),t}(a.PureComponent);Fn.defaultProps={};var Wn=Fn,Bn=n(313),Rn=n.n(Bn),Un=function(){function e(){Object(d.a)(this,e),this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.onConnectionError=this.onConnectionError.bind(this),this.getSocket=this.getSocket.bind(this)}return Object(f.a)(e,[{key:"onConnect",value:function(e){this.socket.on("connect",e)}},{key:"onDisconnect",value:function(e){this.socket.on("disconnect",e)}},{key:"onConnectionError",value:function(e){this.socket.on("connect_error",e)}},{key:"call",value:function(e,t,n){this.socket.emit(e,t,n)}},{key:"subscribe",value:function(e,t){this.socket.on(e,t)}},{key:"unsubscribe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var a=0,r=t;a<r.length;a++){var o=r[a];this.socket.removeAllListeners(o)}}},{key:"connect",value:function(e,t){this.socket?this.socket.connect():this.socket=Rn.a.connect(e,{path:"/socket.io",query:t,transports:["websocket","polling","flashsocket"],reconnection:!1})}},{key:"getSocket",value:function(){return this.socket}}]),e}(),Gn=(F(),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={offset:e.t.state.randomGamesLike.length,limit:10,canGetMore:!0,prevY:0},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef),this.props.t.state.scrollPosition&&(console.log("Scroll to ".concat(this.props.t.state.scrollPosition)),setTimeout((function(){return document.body.scrollTop=t.props.t.state.scrollPosition}),800));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleObserver",value:function(e,t){var n=this,a=e[0].boundingClientRect.y,r=this.props.t,o=this.state,s=o.prevY,c=o.offset,i=o.limit,l=o.canGetMore;(0===s||s>a)&&l&&(this.setState({spinner:!0}),r.socket.call("pictures.getRandomLikes",{offset:c,limit:i},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t.response.map((function(e){return e.drawerId})));case 2:r.setState({randomGamesLike:[].concat(Object(m.a)(r.state.randomGamesLike),Object(m.a)(t.response))}),n.setState({canGetMore:t.response.length>0,spinner:!1}),n.forceUpdate();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({offset:c+10})),this.setState({prevY:a})}},{key:"render",value:function(){var e=this,t=this.props.t,n=t.state,a=n.banners,o=n.randomGamesLike,s=n.topLikes,i=F(),l=this.state.spinner;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:t.back}),separator:!1}),r.a.createElement("div",{className:"Likes"},s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u041b\u0443\u0447\u0448\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u044b:"),r.a.createElement(c.p,{showArrows:!0,getScrollToLeft:function(e){return e-184},getScrollToRight:function(e){return e+184}},r.a.createElement("div",{style:{display:"flex"},className:"Pictures_List__"},s.map((function(e,n){return r.a.createElement("div",{key:"div__".concat(n),onClick:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({like_currentPictureSelected:n,like_method:"",like_param:"topLikes",scrollPosition:0});case 2:t.go("picture_info");case 3:case"end":return e.stop()}}),e)})))},r.a.createElement("img",{alt:"img",src:e["Picture.url"]}),r.a.createElement("div",null,D(e["Picture.likes"]),r.a.createElement(Pn.a,{width:10,height:10,style:{marginLeft:4}})))}))))),o.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:{margin:"24px 0 0 0"}},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0443\u0436\u043d\u0443\u044e \u043a\u0430\u0440\u0442\u0438\u043d\u0443, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0438 \u043e\u0446\u0435\u043d\u0438\u0442\u044c \u0435\u0451:"),r.a.createElement("div",{style:{marginTop:18,gridGap:i?8:15,paddingBottom:a[2]&&140},className:"Images_Grid"},o.map((function(e,n){return r.a.createElement("div",{key:"Image_".concat(n),onClick:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({like_currentPictureSelected:n,like_method:"pictures.getRandomLikes",like_param:"randomGamesLike",like_user_id:t.state.vk_user.id,scrollPosition:document.body.scrollTop});case 2:t.go("picture_info");case 3:case"end":return e.stop()}}),e)})))},r.a.createElement("img",{alt:"img",src:e["Picture.url"]}))})),l&&r.a.createElement(c.H,{size:"small"})),a[2]&&r.a.createElement(c.B,{bannerData:a[2],onClose:Object(p.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a[2]=!1,n.next=3,t.setState({banners:a});case 3:e.forceUpdate();case 4:case"end":return n.stop()}}),n)})))})),r.a.createElement("div",{ref:function(t){return e.loadingRef=t}})))}}]),t}(a.PureComponent));Gn.defaultProps={};var Vn=Gn,zn=n(739),Kn=n(740),Yn=n(741),Hn=n(722),Zn=n(742),Xn=n(743),Jn=n(744),qn=n(719);function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ea=F(),ta=function(e){function t(e){var n;Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={canGetMore:!0,isReported:!1},n.shareStory1=n.shareStory1.bind(Object(b.a)(n)),n.shareStory2=n.shareStory2.bind(Object(b.a)(n));var a=n.props,r=a.t,o=a.param,s=a.current,c=r.socket,i=r.state[o];return c.call("pictures.isLiked",{game_id:i[s].id},(function(e){n.setState({isLiked:e.response})})),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){}},{key:"shareStory1",value:function(e,t){var a=this;this.props.t.setPopout(r.a.createElement(c.C,null));try{var o=n(57),s=o.createCanvas,i=o.loadImage;i(K(n(294))).then(function(){var n=Object(p.a)(u.a.mark((function n(r){var o,c,l;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=s(r.width,r.height),c=o.getContext("2d"),n.next=4,Y(t);case 4:return l=n.sent,c.drawImage(r,0,0),n.t0=c,n.next=9,i(l);case 9:return n.t1=n.sent,n.t0.drawImage.call(n.t0,n.t1,198,618,683,683),n.prev=11,n.next=14,k.a.send("VKWebAppShowStoryBox",{background_type:"image",blob:o.toDataURL("image/png"),attachment:{url:"https://vk.com/app".concat(N().vk_app_id,"#picture").concat(e),text:"go_to",type:"url"}});case 14:a.props.t.socket.call("games.share",{gameId:e}),Z("stats.shareStory"),n.next=20;break;case 18:n.prev=18,n.t2=n.catch(11);case 20:a.props.t.setPopout(null);case 21:case"end":return n.stop()}}),n,null,[[11,18]])})));return function(e){return n.apply(this,arguments)}}())}catch(l){console.error(l),this.props.t.setPopout(null),this.props.t.setSnackbar("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}}},{key:"shareStory2",value:function(e,t,a){var o=this;try{this.props.t.setPopout(r.a.createElement(c.C,null));var s=n(57),i=s.createCanvas,l=s.loadImage;l(K(n(190))).then(function(){var n=Object(p.a)(u.a.mark((function n(r){var s,c,p,m;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=i(r.width,r.height),c=s.getContext("2d"),n.next=5,Y(a);case 5:return p=n.sent,m=e.substring(0,1).toUpperCase()+e.substring(1),c.drawImage(r,0,0),c.font="64px TT Commons Demibold",c.textAlign="center",c.fillStyle="#616161",c.fillText(m,539,1210),n.t0=c,n.next=15,l(p);case 15:return n.t1=n.sent,n.t0.drawImage.call(n.t0,n.t1,198,618,683,683),n.next=19,k.a.send("VKWebAppShowStoryBox",{background_type:"image",blob:s.toDataURL("image/png"),attachment:{url:"https://vk.com/app".concat(N().vk_app_id,"#picture").concat(t),text:"go_to",type:"url"}});case 19:o.props.t.socket.call("games.share",{gameId:t}),Z("stats.shareStory"),n.next=27;break;case 23:n.prev=23,n.t2=n.catch(0),console.error(n.t2),o.props.t.setSnackbar("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");case 27:o.props.t.setPopout(null);case 28:case"end":return n.stop()}}),n,null,[[0,23]])})));return function(e){return n.apply(this,arguments)}}())}catch(m){console.error(m),this.props.t.setPopout(null),this.props.t.setSnackbar("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,a=t.current,o=t.method,s=t.param,l=t.user_id,d=n.state,f=d.n_canvasData,h=d.banners,v=n.state[s],b=v[a],g=this.state,y=g.isLiked,E=g.isReported,_=g.canGetMore;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:n.back}),separator:!1}),r.a.createElement("div",{className:"PictureInfo"},r.a.createElement("div",{className:"PictureInfo-Word-Time"},r.a.createElement("span",null,b["Word.nom"]&&b["Word.nom"].substring(0,1).toUpperCase()+b["Word.nom"].substring(1)),r.a.createElement("span",null,Math.round((b.endTime-b.startTime)/1e3)," \u0441.")),r.a.createElement("div",{className:"PictureInfo-CanvasContainer"},r.a.createElement("img",{alt:"image",src:f||b["Picture.url"],onClick:Object(p.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.createElement("canvas"),n=t.getContext("2d"),e.next=4,Object(w.loadImage)(b["Picture.url"]);case 4:return a=e.sent,t.width=a.width,t.height=a.height,a.crossOrigin="anonymous",e.next=10,new Promise((function(e){return a.onload=function(){return e(!0)}}));case 10:n.drawImage(a,0,0),console.log({blank:!t.getContext("2d").getImageData(0,0,t.width,t.height).data.some((function(e){return 0!==e}))});case 12:case"end":return e.stop()}}),e)})))})),r.a.createElement("div",{className:"PictureInfo-Actions"},[[y?r.a.createElement(Pn.a,{fill:"#FD5C81",width:28,height:28}):r.a.createElement(In.a,null),D(b["Picture.likes"]),function(){n.setPopout(r.a.createElement(c.C,null)),n.socket.call("pictures.like",{game_id:b.id},(function(t){t.response&&(v[a]=Qn({},b,Object(i.a)({},"Picture.likes",t.response.likes)),n.setState({like_picturesList:v}),e.setState({isLiked:t.response.isLiked})),n.setPopout(null)}))}],[r.a.createElement(jn.a,null),"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f",function(){n.setPopout(r.a.createElement(c.a,{onClose:function(){return n.setPopout(null)},iosCloseItem:r.a.createElement(c.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")},r.a.createElement(c.b,{autoclose:!0,before:r.a.createElement(zn.a,null),onClick:function(){b.drawerId!==n.state.vk_user.id?e.shareStory1(b.id,b["Picture.url"]):e.shareStory2(b["Word.nom"],b.id,b["Picture.url"])}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"),r.a.createElement(c.b,{autoclose:!0,before:r.a.createElement(Kn.a,null),onClick:function(){k.a.send("VKWebAppCopyText",{text:"https://vk.com/app".concat(N().vk_app_id,"#picture").concat(b.id)}),n.setSnackbar("\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430")}},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u0443"),r.a.createElement(c.b,{autoclose:!0,before:r.a.createElement(Yn.a,null),onClick:function(){k.a.send("VKWebAppCopyText",{text:"https://vk.com/app".concat(N().vk_app_id,"#author").concat(b.drawerId)}),n.setSnackbar("\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430")}},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0430\u0432\u0442\u043e\u0440\u0430")))}],[r.a.createElement(An.a,null),"\u0416\u0430\u043b\u043e\u0431\u0430",function(){n.setPopout(r.a.createElement(c.C,null)),n.socket.call("games.report",{game_id:b.id},(function(t){t.response?n.setSnackbar("\u0416\u0430\u043b\u043e\u0431\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"):n.setSnackbar("\u0416\u0430\u043b\u043e\u0431\u0430 \u0443\u0436\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"),e.setState({isReported:!0}),n.setPopout(null)}))}]].map((function(e,t){return r.a.createElement("div",{key:"action_".concat(t),onClick:e[2],style:E&&2===t?{opacity:.5,pointerEvents:"none"}:{}},e[0],r.a.createElement("span",null,e[1]))}))),r.a.createElement("div",{className:"PictureInfo-Author",onClick:function(){n.setPopout(r.a.createElement(c.C,null)),n.socket.call("users.getById",{id:b.drawerId},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.socket.call("games.getByDrawerId",{id:b.drawerId},function(){var e=Object(p.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({author:t.response,author_works:a.response});case 2:n.go("author"),n.setPopout(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},r.a.createElement("div",null,"\u0410\u0432\u0442\u043e\u0440"),r.a.createElement("div",null,r.a.createElement(c.f,{shadow:!1,size:36,src:ee[b.drawerId].photo_100}),r.a.createElement("div",null,ee[b.drawerId].first_name," ",ee[b.drawerId].last_name))),r.a.createElement("div",{className:"PictureInfo-Arrows-ResumeDraw"},r.a.createElement("div",{style:0===a?{opacity:.5,pointerEvents:"none"}:{},onClick:function(){n.setPopout(r.a.createElement(c.C,null)),n.socket.call("pictures.isLiked",{game_id:v[a-1].id},(function(t){e.setState({isLiked:t.response,canGetMore:!0,isReported:!1}),n.setState({like_currentPictureSelected:a-1,n_canvasData:void 0}),n.setPopout(null)}))}},r.a.createElement(Hn.a,null)),r.a.createElement("div",{style:{background:"var(--gradient_green)",color:"#FFFFFF",display:b.drawerId!==n.state.vk_user.id&&"none"},onClick:function(){n.socket.call("games.canResumeDrawing",{gameId:b.id},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.response){e.next=15;break}return e.prev=1,e.next=4,k.a.send("VKWebAppShowNativeAds",{ad_format:"reward"});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return console.log(b),e.next=11,n.setState({isOnlineDrawing:!1,word:{nom:b["Word.nom"]},pictureUrl_:b["Picture.url"],gameId_:b.id});case 11:console.log(n.state.word),n.go("game"),e.next=16;break;case 15:M()?n.go("vk_donut_blocked"):n.go("vk_donut_avocado");case 16:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}())}},r.a.createElement(Zn.a,null)),r.a.createElement("div",{style:_?{}:{opacity:.5,pointerEvents:"none"},onClick:function(){a+1===v.length-1?o&&o.length>0?(n.setPopout(r.a.createElement(c.C,null)),n.socket.call(o,{offset:n.state[s].length,limit:10,id:l},function(){var t=Object(p.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.response.length>0)){t.next=7;break}return t.next=3,ne(r.response.map((function(e){return e.drawerId})));case 3:return t.next=5,n.setState(Object(i.a)({},s,[].concat(Object(m.a)(n.state[s]),Object(m.a)(r.response))));case 5:n.socket.call("pictures.isLiked",{game_id:r.response[0].id},(function(t){e.setState({isLiked:t.response})})),n.setState({like_currentPictureSelected:a+1,n_canvasData:void 0});case 7:e.setState({canGetMore:r.response.length>0}),n.setPopout(null);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())):e.setState({canGetMore:!1}):(n.socket.call("pictures.isLiked",{game_id:v[a+1].id},(function(t){e.setState({isLiked:t.response})})),n.setState({like_currentPictureSelected:a+1,n_canvasData:void 0})),e.setState({isReported:!1})}},r.a.createElement(Xn.a,null))),h[8]&&r.a.createElement(c.B,{bannerData:h[8],onClose:Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h[8]=!1,t.next=3,n.setState({banners:h});case 3:e.forceUpdate();case 4:case"end":return t.stop()}}),t)})))})))}},{key:"render_old",value:function(){var e=this,t=this.props,n=t.t,a=t.current,o=t.method,s=t.param,l=t.user_id,d=n.state,f=d.n_canvasData,h=d.banners,v=n.state[s],b=v[a],g=this.state,y=g.isLiked,w=g.canGetMore,E=b.drawerId===n.state.vk_user.id,_=E&&r.a.createElement(c.h,{style:{marginTop:ea?10:16},className:"ButtonResumeDraw",before:r.a.createElement(Jn.a,{width:16,height:16}),size:"m",mode:"gradient",stretched:!0,onClick:Object(p.a)(u.a.mark((function e(){var t,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state.user,a=t.admin,r=t.vk_donut,!a&&!r){e.next=7;break}return e.next=4,n.setState({isOnlineDrawing:!1,word:{nom:b["Word.nom"]},pictureUrl_:b["Picture.url"],gameId_:b.id});case 4:n.go("game"),e.next=8;break;case 7:M()?n.go("vk_donut_blocked"):n.go("vk_donut_avocado");case 8:case"end":return e.stop()}}),e)})))},"\u0414\u043e\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c");return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:n.back}),separator:!1}),r.a.createElement("div",{className:"PictureInfo"},r.a.createElement("div",{className:"Canvas_Container"},r.a.createElement("h2",null,(b["Word.nom"]&&b["Word.nom"].substring(0,1).toUpperCase())+(b["Word.nom"]&&b["Word.nom"].substring(1))),r.a.createElement("img",{alt:"canvas",src:f||b["Picture.url"]}),r.a.createElement("div",{className:"Actions_Container"},r.a.createElement("div",{className:"PictureTime"},Math.round((b.endTime-b.startTime)/1e3)," \u0441."),r.a.createElement("div",{style:y?{color:"#F9F9F9",background:"#F16384"}:{},className:"LikeButton",onClick:function(){n.setPopout(r.a.createElement(c.C,null)),n.socket.call("pictures.like",{game_id:b.id},(function(t){t.response&&(v[a]=Qn({},b,Object(i.a)({},"Picture.likes",t.response.likes)),n.setState({like_picturesList:v}),e.setState({isLiked:t.response.isLiked})),n.setPopout(null)}))}},D(b["Picture.likes"])," ",r.a.createElement(Pn.a,{style:{marginLeft:4}})),r.a.createElement("div",{className:"ReportButton",onClick:function(){n.setPopout(r.a.createElement(c.C,null)),n.socket.call("games.report",{game_id:b.id},(function(e){e.response?n.setSnackbar("\u0416\u0430\u043b\u043e\u0431\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"):n.setSnackbar("\u0416\u0430\u043b\u043e\u0431\u0430 \u0443\u0436\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"),n.setPopout(null)}))}},r.a.createElement(An.a,{width:16,height:16})))),r.a.createElement("div",{className:"Author_Container",onClick:function(){n.setPopout(r.a.createElement(c.C,null)),n.socket.call("users.getById",{id:b.drawerId},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({author:t.response});case 2:n.socket.call("games.getByDrawerId",{id:b.drawerId},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({author_works:t.response});case 2:n.go("author"),n.setPopout(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},r.a.createElement("div",null,"\u0410\u0432\u0442\u043e\u0440"),r.a.createElement("div",null,r.a.createElement(c.f,{shadow:!1,size:36,src:ee[b.drawerId].photo_100}),r.a.createElement("div",null,ee[b.drawerId].first_name," ",ee[b.drawerId].last_name))),r.a.createElement("div",{className:"Actions_Container"},r.a.createElement(c.h,{before:r.a.createElement(jn.a,{width:16,height:16}),size:"m",mode:E?"secondary":"gradient",onClick:function(){n.setPopout(r.a.createElement(c.a,{onClose:function(){return n.setPopout(null)},iosCloseItem:r.a.createElement(c.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")},r.a.createElement(c.b,{autoclose:!0,before:r.a.createElement(zn.a,null),onClick:function(){b.drawerId!==n.state.vk_user.id?e.shareStory1(b.id,b["Picture.url"]):e.shareStory2(b["Word.nom"],b.id,b["Picture.url"])}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"),r.a.createElement(c.b,{autoclose:!0,before:r.a.createElement(Kn.a,null),onClick:function(){k.a.send("VKWebAppCopyText",{text:"https://vk.com/app".concat(N().vk_app_id,"#picture").concat(b.id)}),n.setSnackbar("\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430")}},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u0443"),r.a.createElement(c.b,{autoclose:!0,before:r.a.createElement(Yn.a,null),onClick:function(){k.a.send("VKWebAppCopyText",{text:"https://vk.com/app".concat(N().vk_app_id,"#author").concat(b.drawerId)}),n.setSnackbar("\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430")}},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0430\u0432\u0442\u043e\u0440\u0430")))}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f"),r.a.createElement(c.h,{style:{marginTop:ea&&10},disabled:!w,after:r.a.createElement(qn.a,null),size:"m",mode:"secondary",onClick:function(){a+1===v.length-1?o&&o.length>0?(n.setPopout(r.a.createElement(c.C,null)),n.socket.call(o,{offset:n.state[s].length,limit:10,id:l},function(){var t=Object(p.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.response.length>0)){t.next=7;break}return t.next=3,ne(r.response.map((function(e){return e.drawerId})));case 3:return t.next=5,n.setState(Object(i.a)({},s,[].concat(Object(m.a)(n.state[s]),Object(m.a)(r.response))));case 5:n.socket.call("pictures.isLiked",{game_id:r.response[0].id},(function(t){e.setState({isLiked:t.response})})),n.setState({like_currentPictureSelected:a+1,n_canvasData:void 0});case 7:e.setState({canGetMore:r.response.length>0}),n.setPopout(null);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())):e.setState({canGetMore:!1}):(n.socket.call("pictures.isLiked",{game_id:v[a+1].id},(function(t){e.setState({isLiked:t.response})})),n.setState({like_currentPictureSelected:a+1,n_canvasData:void 0}))}},"\u0414\u0430\u043b\u044c\u0448\u0435"),E&&ea&&_),E&&!ea&&_,h[8]&&r.a.createElement(c.B,{bannerData:h[8],onClose:Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h[8]=!1,t.next=3,n.setState({banners:h});case 3:e.forceUpdate();case 4:case"end":return t.stop()}}),t)})))})))}}]),t}(a.PureComponent);ta.defaultProps={};var na=ta,aa=n(745),ra=n(746),oa=n(747),sa=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={offset:e.t.state.author_works.length,limit:10,canGetMore:!0,prevY:0,sort:"DESC"},n.onChangeSort=n.onChangeSort.bind(Object(b.a)(n)),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef),this.props.t.state.scrollPosition&&(console.log("Scroll to ".concat(this.props.t.state.scrollPosition)),setTimeout((function(){return document.body.scrollTop=e.props.t.state.scrollPosition}),800));this.props.t.state.author}},{key:"handleObserver",value:function(e,t){var n=this,a=e[0].boundingClientRect.y,r=this.props.t,o=this.state,s=o.prevY,c=o.offset,i=o.limit,l=o.canGetMore,d=o.sort;(0===s||s>a)&&l&&(this.setState({spinner:!0}),r.socket.call("games.getByDrawerId",{id:r.state.author.id,offset:c,limit:i,sort:d},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({author_works:[].concat(Object(m.a)(r.state.author_works),Object(m.a)(t.response))}),n.setState({canGetMore:t.response.length>0,spinner:!1}),n.forceUpdate();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({offset:c+10})),this.setState({prevY:a})}},{key:"onChangeSort",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.t,e.next=3,this.setState({spinner:!0,sort:t.target.value,offset:0,prevY:0,canGetMore:!0});case 3:return e.next=5,n.setState({author_works:[]});case 5:this.forceUpdate();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.t,n=t.state,a=t._tags,o=F(),s=n.author,i=n.author_works,l=n.banners,m=this.state,d=m.sort,f=m.spinner;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:t.back}),separator:!1}),r.a.createElement("div",{className:"Author"},r.a.createElement("div",{className:"User_Header"},r.a.createElement(c.f,{src:ee[s.id].photo_100,size:48,shadow:!1},r.a.createElement("div",{className:s.online?"online":"offline"})),r.a.createElement("div",{className:"UserTags"},a().map((function(e){return s[e[0]]&&r.a.createElement(jt.a,{action:"hover",content:r.a.createElement(c.l,null,r.a.createElement(c.L,null,e[2]))},r.a.cloneElement(e[1],{onClick:function(){return t.setActiveModal(e[0])}}))})))),r.a.createElement("h3",null,ee[s.id].first_name," ",ee[s.id].last_name.substring(0,1),"."),r.a.createElement("div",{className:"Author_Title_Container"},r.a.createElement("h1",null,"\u0420\u0430\u0431\u043e\u0442\u044b \u0438\u0433\u0440\u043e\u043a\u0430"),r.a.createElement(c.h,{mode:"tertiary",after:r.a.createElement(aa.a,null),onClick:function(){t.setPopout(r.a.createElement(c.a,{onClose:function(){return t.setPopout(null)},iosCloseItem:r.a.createElement(c.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")},r.a.createElement(c.b,{autoclose:!0,before:r.a.createElement(ra.a,null),onChange:e.onChangeSort,name:"sort",value:"DESC",checked:"DESC"===d,selectable:!0},"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u043e\u0432\u044b\u0435"),r.a.createElement(c.b,{autoclose:!0,before:r.a.createElement(oa.a,null),onChange:e.onChangeSort,name:"sort",value:"ASC",checked:"ASC"===d,selectable:!0},"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0440\u044b\u0435")))}},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430")),r.a.createElement("div",{style:{marginTop:24,gridGap:o?8:15,paddingBottom:l[6]&&140},className:"Images_Grid"},i.map((function(e,n){return r.a.createElement("div",{key:"Image_".concat(n),onClick:Object(p.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({like_currentPictureSelected:n,like_method:"games.getByDrawerId",like_param:"author_works",like_user_id:s.id,scrollPosition:document.body.scrollTop});case 2:"picture_info"===(a=t.state.history)[a.length-1]?t.back():t.go("picture_info");case 4:case"end":return e.stop()}}),e)})))},r.a.createElement("img",{alt:"img",src:e["Picture.url"]}))})),f&&r.a.createElement(c.H,{size:"small"})),l[6]&&r.a.createElement(c.B,{bannerData:l[6],onClose:Object(p.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l[6]=!1,n.next=3,t.setState({banners:l});case 3:e.forceUpdate();case 4:case"end":return n.stop()}}),n)})))})),r.a.createElement("div",{ref:function(t){return e.loadingRef=t}}))}}]),t}(a.PureComponent);sa.defaultProps={};var ca=sa,ia=F(),la=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t,n=t.state.banners,a=t._tags;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:t.back}),separator:!1},ia&&"\u041c\u0435\u0442\u043a\u0438"),r.a.createElement("div",{className:"Tags",style:{paddingBottom:24}},!ia&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u041c\u0435\u0442\u043a\u0438"),r.a.createElement("div",{className:"TagsList",style:{paddingBottom:n[5]&&140}},a().map((function(e){return r.a.createElement("div",null,e[1],r.a.createElement("div",null,r.a.createElement("h1",null,e[2]),r.a.createElement("h3",null,e[3])))}))),n[5]&&r.a.createElement(c.B,{bannerData:n[5],onClose:Object(p.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n[5]=!1,a.next=3,t.setState({banners:n});case 3:e.forceUpdate();case 4:case"end":return a.stop()}}),a)})))})))}}]),t}(a.PureComponent);la.defaultProps={};var ua=la,pa=F(),ma=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={friends:[],others:[]},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"updateFriends",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,n,a,r,o,s,c=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.props.t.state.isNotApp){e.next=23;break}return e.next=4,k.a.send("VKWebAppGetAuthToken",{app_id:parseInt(N().vk_app_id),scope:"friends"});case 4:return n=e.sent.access_token,e.next=7,k.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:{access_token:n,v:"5.131"}});case 7:a=e.sent,r=a.response.count,o=Math.floor(r/100),t=Object(m.a)(a.response.items),s=0;case 12:if(!(s<o)){e.next=21;break}return e.t0=t,e.next=16,k.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:{access_token:n,v:"5.131",offset:100*s}});case 16:e.t1=e.sent.response.items,t=e.t0.concat.call(e.t0,e.t1);case 18:s++,e.next=12;break;case 21:return e.next=23,ne(t);case 23:this.props.t.socket.call("friends.getLobbies",{ids:t},function(){var e=Object(p.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.response,e.next=3,ne(t.public_lobbies);case 3:c.setState({friends:n,others:t.public_lobbies});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this,t=this.props.t.socket;t.unsubscribe("createLobby","removeLobby"),t.subscribe("createLobby",function(){var t=Object(p.a)(u.a.mark((function t(n){var a,r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,r=a.friends,o=a.others,!n.changeMode||-1!==o.indexOf(n.id)||-1!==r.indexOf(n.id)){t.next=7;break}return t.next=4,ne([n.id]);case 4:e.setState({others:[].concat(Object(m.a)(o),[n.id])}),t.next=8;break;case 7:n.changeMode||-1!==r.indexOf(n.id)||e.setState({friends:[].concat(Object(m.a)(r),[n.id])});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.subscribe("removeLobby",function(){var t=Object(p.a)(u.a.mark((function t(n){var a,r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.state,r=a.friends,o=a.others,n.changeMode&&o.indexOf(n.id)>-1&&-1===r.indexOf(n.id)?(o.splice(o.indexOf(n.id),1),e.setState({others:o})):!n.changeMode&&r.indexOf(n.id)>-1&&(r.splice(r.indexOf(n.id),1),e.setState({friends:r})),e.forceUpdate();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.updateFriends()}},{key:"render",value:function(){var e=this,t=this.props.t,n=t.socket,a=t.state,o=a.user,s=a.banners,i=this.state,l=i.friends,m=i.others;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:t.back}),separator:!1},pa&&"\u0414\u0440\u0443\u0436\u0435\u0441\u043a\u0430\u044f \u0438\u0433\u0440\u0430"),r.a.createElement("div",{className:"Friends"},!pa&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u0414\u0440\u0443\u0436\u0435\u0441\u043a\u0430\u044f \u0438\u0433\u0440\u0430"),r.a.createElement("p",{style:{margin:"8px 40px 0 0"}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043b\u043e\u0431\u0431\u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0439 \u0447\u0435\u043b\u043e\u0432\u0435\u043a."),r.a.createElement("p",{style:{margin:"4px 40px 0 0"}},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432 \u0432 \u043b\u043e\u0431\u0431\u0438 \u043c\u043e\u0436\u0435\u0442 \u0434\u043e\u0441\u0442\u0438\u0433\u0430\u0442\u044c \u0434\u043e 20."),r.a.createElement("div",{style:{display:"flex",marginTop:24}},r.a.createElement(c.h,{stretched:!0,size:"m",mode:"gradient_violet",onClick:function(){o.vk_donut||o.admin?(t.setPopout(r.a.createElement(c.C,null)),n.call("friends.createLobby",{},(function(e){e.response&&(t.setState({friend_lobby:e.response}),t.go("friend_lobby")),t.setPopout(null)}))):M()?t.go("vk_donut_blocked"):t.go("vk_donut_avocado")}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043b\u043e\u0431\u0431\u0438"),r.a.createElement(c.h,{style:{marginLeft:4},stretched:!0,size:"m",mode:"gradient_gray",onClick:Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateFriends();case 2:case"end":return t.stop()}}),t)})))},"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0440\u0443\u0437\u0435\u0439")),r.a.createElement("div",{className:"FriendsList",style:{paddingBottom:s[7]&&140}},l.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"Span"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u0430, \u0432 \u0447\u044c\u0451 \u043b\u043e\u0431\u0431\u0438 \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f:"),r.a.createElement("div",{style:{marginTop:8}},l.map((function(e,a){return r.a.createElement(c.E,{key:"SCell_".concat(a),before:r.a.createElement(c.f,{size:32,shadow:!1,src:ee[e].photo_100}),expandable:!0,onClick:function(){n.call("friends.joinLobby",{owner_id:e},function(){var e=Object(p.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(n.response.members);case 2:return e.next=4,t.setState({friend_lobby:n.response});case 4:t.go("friend_lobby");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},ee[e].first_name," ",ee[e].last_name.substring(0,1),".")})))):r.a.createElement("span",{className:"Span"},"\u0412\u0430\u0448\u0438 \u0434\u0440\u0443\u0437\u044c\u044f \u043d\u0435 \u0438\u0433\u0440\u0430\u044e\u0442 \u0432 \u0438\u0433\u0440\u0443 :("),m.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("div",{className:"Span",style:{marginTop:12}},"\u0414\u0440\u0443\u0433\u0438\u0435 \u0438\u0433\u0440\u043e\u043a\u0438:"),r.a.createElement("div",{style:{marginTop:8}},m.map((function(e,a){return r.a.createElement(c.E,{key:"SCell_".concat(a),before:r.a.createElement(c.f,{size:32,shadow:!1,src:ee[e].photo_100}),expandable:!0,onClick:function(){n.call("friends.joinLobby",{owner_id:e},function(){var e=Object(p.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(n.response.members);case 2:return e.next=4,t.setState({friend_lobby:n.response});case 4:t.go("friend_lobby");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},ee[e].first_name," ",ee[e].last_name.substring(0,1),".")}))))),s[7]&&r.a.createElement(c.B,{bannerData:s[7],onClose:Object(p.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s[7]=!1,n.next=3,t.setState({banners:s});case 3:e.forceUpdate();case 4:case"end":return n.stop()}}),n)})))})))}}]),t}(a.PureComponent);ma.defaultProps={};var da=ma,fa=n(748),ha=F(),va=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={removed:!1,members:[],splashShow:!1},setTimeout(Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.t.state.friend_lobby,e.next=3,ne(t.members);case 3:n.setState({members:t.members});case 4:case"end":return e.stop()}}),e)}))),1),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.t,n=t.socket,a=t.state;n.unsubscribe("changeLobbyUsers","gameStart","chooseWord","setWord","gameEnd","draw","removeLobby","wakeUp"),n.subscribe("wakeUp",function(){var t=Object(p.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.user_ids.indexOf(a.user.id)>-1)for(r=0;r<3;r++)setTimeout(Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!k.a.supports("VKWebAppTapticNotificationOccurred")){t.next=3;break}return t.next=3,k.a.send("VKWebAppTapticNotificationOccurred",{type:"success"});case 3:return t.next=5,e.setState({splashShow:!e.state.splashShow});case 5:setTimeout((function(){e.setState({splashShow:!e.state.splashShow})}),100);case 6:case"end":return t.stop()}}),t)}))),200+200*r);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.subscribe("removeLobby",function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({removed:!0});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.subscribe("changeLobbyUsers",function(){var t=Object(p.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.friend_lobby,t.next=3,ne(n.players);case 3:r.members=n.players,e.props.t.setState({friend_lobby:r}),setTimeout(Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({members:r.members});case 2:e.forceUpdate(),-1===n.players.indexOf(a.user.id)&&e.props.friend_lobby.owner_id!==a.user.id&&(e.props.t.back(),e.state.removed?e.props.t.setSnackbar("\u041b\u043e\u0431\u0431\u0438 \u0431\u044b\u043b\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e"):e.props.t.setSnackbar("\u0412\u0430\u0441 \u0432\u044b\u0433\u043d\u0430\u043b\u0438 \u0438\u0437 \u043b\u043e\u0431\u0431\u0438"));case 4:case"end":return t.stop()}}),t)}))),400);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.subscribe("chooseWord",function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.t.setState({chooseWords:n.words}),setTimeout((function(){e.props.t.forceUpdate()}),400);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.subscribe("setWord",function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.t.setState({word:n.word}),setTimeout((function(){e.props.t.forceUpdate()}),400);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.subscribe("gameStart",function(){var t=Object(p.a)(u.a.mark((function t(a){var r,o,s,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.unsubscribe("changeLobbyUsers"),r=a.lobbyId,o=a.drawerId,s=a.timeout,c=e.props.friend_lobby,t.next=4,e.props.t.setState({game_timeout:s,lobbyId:r,drawerId:o,gameStart:Date.now(),isOnlineDrawing:!0,subGameInfo:{friendly:!0,owner_id:c.owner_id}});case 4:e.props.t.go("game");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,a=t.friend_lobby,o=n.socket,s=n.state.user,i=this.state,l=i.members,d=i.splashShow;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:n.back}),separator:!1},ha&&"\u0414\u0440\u0443\u0436\u0435\u0441\u043a\u0430\u044f \u0438\u0433\u0440\u0430"),r.a.createElement("div",{className:"FriendSplash",style:{opacity:d?1:0}}),r.a.createElement("div",{className:"FriendLobby"},!ha&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u0414\u0440\u0443\u0436\u0435\u0441\u043a\u0430\u044f \u0438\u0433\u0440\u0430"),a.owner_id===s.id&&r.a.createElement("div",{style:{marginTop:ha?10:16,width:"100%",display:"flex"}},r.a.createElement(c.h,{before:r.a.createElement(fa.a,{width:16,height:16}),size:"m",mode:"gradient_light_gray",stretched:!0,onClick:function(){n.go("friend_lobby_settings")}},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),r.a.createElement(c.h,{style:{marginLeft:6},before:r.a.createElement(ke.a,{width:16,height:16}),size:"m",mode:"gradient_gray",stretched:!0,onClick:Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.send("VKWebAppShare",{link:"https://vk.com/drawapp#lobby".concat(s.id)});case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),k.a.send("VKWebAppCopyText",{text:"https://vk.com/drawapp#lobby".concat(s.id)}),e.props.t.setSnackbar("\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430");case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))},"\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u044c")),r.a.createElement("div",{className:"Span",style:{marginTop:16}},"\u0418\u0433\u0440\u043e\u043a\u0438"),r.a.createElement("div",{className:"FriendsList"},r.a.createElement("div",{style:{marginTop:8}},r.a.createElement(c.E,{onClick:function(){a.owner_id===s.id?o.call("friends.wakeUp",{user_ids:[s.id].concat(Object(m.a)(l)),owner_id:a.owner_id}):o.call("friends.wakeUp",{user_ids:[a.owner_id],owner_id:a.owner_id})},before:r.a.createElement(c.f,{size:32,shadow:!1,src:ee[a.owner_id].photo_100})},ee[a.owner_id].first_name," ",ee[a.owner_id].last_name.substring(0,1),"."),l.map((function(e,t){return r.a.createElement(c.E,{onClick:function(){o.call("friends.wakeUp",{user_ids:[e],owner_id:a.owner_id})},key:"SCell_".concat(t),before:r.a.createElement(c.f,{size:32,shadow:!1,src:ee[e].photo_100}),after:a.owner_id===s.id&&r.a.createElement(c.q,{onClick:function(){o.call("friends.kickFromLobby",{user_id:e})}},r.a.createElement(vn.a,{fill:"var(--icon_tertiary)"}))},ee[e].first_name," ",ee[e].last_name.substring(0,1),".")})))),a.owner_id===s.id&&l.length>0&&r.a.createElement(c.h,{style:{marginTop:24},size:"m",mode:"gradient_violet",onClick:function(){o.call("friends.startGame",{},(function(t){t.error&&(e.props.t.setActivePanel("main"),e.props.t.setAlert("\u041e\u0448\u0438\u0431\u043a\u0430",t.error.message,[{title:"\u041e\u043a",autoclose:!0}]))}))}},"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443")))}}]),t}(a.PureComponent);va.defaultProps={};var ba=va,ga=n(750),ya=n(751),ka=F(),wa=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t,n=t.state,a=t.socket,o=t.state,s=o.user,i=o.banners;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:t.back}),separator:!1},ka&&"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"),r.a.createElement("div",{className:"Stats"},!ka&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"),r.a.createElement("p",{style:{margin:"8px 40px 0 0"}},"\u0417\u0434\u0435\u0441\u044c \u0441\u043e\u0431\u0440\u0430\u043d\u0430 \u0432\u0441\u044f \u0442\u0432\u043e\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430, \u0438 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0438 \u0438\u0433\u0440\u043e\u043a\u043e\u0432."),r.a.createElement("div",{className:"StatsCards__Container"},r.a.createElement("div",null,r.a.createElement(ga.a,{width:16,height:16}),r.a.createElement("span",null,D(s.coins))),r.a.createElement("div",null,r.a.createElement("span",null,D(s.likes)),r.a.createElement(ya.a,{width:16,height:16}))),r.a.createElement("div",{className:"Rating__List",style:{paddingBottom:i[4]&&140}},[["users_topPictures","\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0443 \u043a\u0430\u0440\u0442\u0438\u043d","pictures"],["users_topGuessedPictures","\u0443\u0433\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u043a\u0430\u0440\u0442\u0438\u043d\u0430\u043c","guessedPictures"],["users_topLikes","\u043b\u0430\u0439\u043a\u0430\u043c","likes"]].map((function(e,o){return r.a.createElement("div",null,r.a.createElement("span",{className:"Span"},"\u041b\u0443\u0447\u0448\u0438\u0435 \u0438\u0433\u0440\u043e\u043a\u0438 \u043f\u043e ",e[1],":"),r.a.createElement(c.p,{showArrows:!0,getScrollToLeft:function(e){return e-128},getScrollToRight:function(e){return e+128}},r.a.createElement("div",{style:{display:"flex"}},n[e[0]].map((function(n,o){return r.a.createElement(c.o,{key:"Cell_".concat(o),header:ee[n.id].first_name,subtitle:n[e[2]],onClick:function(){t.setPopout(r.a.createElement(c.C,null)),a.call("users.getById",{id:n.id},function(){var e=Object(p.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===r.response){e.next=6;break}return e.next=3,t.setState({author:r.response});case 3:a.call("games.getByDrawerId",{id:n.id},function(){var e=Object(p.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({author_works:n.response});case 2:t.go("author"),t.setPopout(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7;break;case 6:t.setPopout(null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},r.a.createElement(c.f,{size:48,shadow:!1,src:ee[n.id].photo_100}))})))))}))),i[4]&&r.a.createElement(c.B,{bannerData:i[4],onClose:Object(p.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i[4]=!1,n.next=3,t.setState({banners:i});case 3:e.forceUpdate();case 4:case"end":return n.stop()}}),n)})))})))}}]),t}(a.PureComponent);wa.defaultProps={};var Ea,_a=wa,xa=n(752),Oa=F(),Ca=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={items:[]},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.t.socket,Ea=setInterval((function(){n.forceUpdate()}),1e3),t.call("shop.getList",{},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({items:t.response});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),245481845!==this.props.t.state.vk_user.id&&246549084!==this.props.t.state.vk_user.id||k.a.send("VKWebAppShowOrderBox",{type:"item",item:"test"});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(Ea)}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,a=t.watchedShopItems,o=t.boughtShopItems,s=n.state,i=s.banners,l=s.isNotApp,d=this.state.items,f=n.socket;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:n.back}),separator:!1},Oa&&"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"),r.a.createElement("div",{className:"Shop"},!Oa&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"),r.a.createElement("p",{style:{margin:"8px 40px 0 0"}},"\u0417\u0434\u0435\u0441\u044c \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u044f\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u0430\u043a\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0441\u0442\u0438 \u0437\u0430 \u043c\u043e\u043d\u0435\u0442\u044b."),r.a.createElement("div",{className:"ShopItems",style:{paddingBottom:i[3]&&140}},d.length>0?d.map((function(e,t){var s=e.id,i=e.startTime,d=(e.count,e.title),h=e.price,v=e.img,b=e.needAdvert,g=e.singleBuy,y=T(i-Date.now()).str,w=y.hours,E=y.minutes,_=y.seconds;return r.a.createElement("div",{key:"Shop_".concat(t),onClick:function(){Date.now()<i||-1===a.indexOf(s)&&b||(g&&o.indexOf(s)>-1?n.setSnackbar("\u0412\u044b \u0443\u0436\u0435 \u043a\u0443\u043f\u0438\u043b\u0438 \u044d\u0442\u043e\u0442 \u0442\u043e\u0432\u0430\u0440"):(n.setPopout(r.a.createElement(c.C,null)),f.call("shop.buy",{product_id:s},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.response){e.next=8;break}return g&&n.setState({boughtShopItems:[].concat(Object(m.a)(o),[s])}),n.setSnackbar("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043a\u0443\u043f\u0438\u043b\u0438 \u0442\u043e\u0432\u0430\u0440"),e.next=5,n.updateData();case 5:n.forceUpdate(),e.next=9;break;case 8:n.setSnackbar(t.message);case 9:n.setPopout(null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())))}},Date.now()<i?r.a.createElement("div",{className:"TimeCounter"},r.a.createElement(Pt.a,null),r.a.createElement("span",null,w,":",E,":",_)):-1===a.indexOf(s)&&b&&r.a.createElement("div",{className:"WatchAdvert",onClick:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setPopout(r.a.createElement(c.C,null)),e.prev=1,l){e.next=5;break}return e.next=5,k.a.send("VKWebAppShowNativeAds",{ad_format:"reward"});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:n.setPopout(null),n.setState({watchedShopItems:[].concat(Object(m.a)(a),[s])});case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))},r.a.createElement(xa.a,null),r.a.createElement("span",null,"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435")),r.a.createElement("img",{className:"icon",alt:"icon",src:v}),r.a.createElement("div",{className:"titles"},r.a.createElement("span",null,d),r.a.createElement("br",null),r.a.createElement("span",null,A(h,["\u043c\u043e\u043d\u0435\u0442\u0430","\u043c\u043e\u043d\u0435\u0442\u044b","\u043c\u043e\u043d\u0435\u0442"]))))})):r.a.createElement("div",{key:"Shop_-1",onClick:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l){e.next=5;break}return e.next=4,k.a.send("VKWebAppAllowNotifications");case 4:f.call("users.enableNotifications");case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))},r.a.createElement("div",{className:"titles"},r.a.createElement("span",null,"\u0422\u0443\u0442 \u043f\u0443\u0441\u0442\u043e :("),r.a.createElement("br",null),r.a.createElement("span",null,"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e \u043d\u043e\u0432\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u0430\u0445. \u041c\u044b \u0412\u0430\u0441 \u043e\u043f\u043e\u0432\u0435\u0441\u0442\u0438\u043c, \u043a\u043e\u0433\u0434\u0430 \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u0447\u0442\u043e-\u0442\u043e \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e\u0435.")))),i[3]&&r.a.createElement(c.B,{bannerData:i[3],onClose:Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i[3]=!1,t.next=3,n.setState({banners:i});case 3:e.forceUpdate();case 4:case"end":return t.stop()}}),t)})))})))}}]),t}(a.PureComponent);Ca.defaultProps={};var Sa=Ca,ja=n(753),Pa=n(754),Ia=n(755),Aa=n(756),Da=n(757),La=n(758),Ta=n(759),Na=n(760),Ma=n(761),Fa=n(194);function Wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wa(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wa(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ra,Ua={},Ga=0,Va=0,za={x:0,y:0},Ka=F(),Ya=[],Ha=[],Za=[],Xa=function(e){function t(e){var n;Object(d.a)(this,t),n=Object(h.a)(this,Object(v.a)(t).call(this,e));e.t.state.user;return n.state={color:"#000000",drawing:!1,isEraser:!1,isStroke:!1,isCompassActive:!1,isFullCanvasShowed:!1,fullCanvasData:null,lineWidth:2,areas:[],areas_time:{}},n.onMouseDown=n.onMouseDown.bind(Object(b.a)(n)),n.onMouseUp=n.onMouseUp.bind(Object(b.a)(n)),n.throttle=n.throttle.bind(Object(b.a)(n)),n.onMouseMove=n.onMouseMove.bind(Object(b.a)(n)),n.drawLine=n.drawLine.bind(Object(b.a)(n)),e.t.socket.subscribe("draw",function(){var t=Object(p.a)(u.a.mark((function t(a){var r,o,s,c,i,l,p,m,d,f,h,v,b,g;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.user_id==e.t.state.vk_user.id){t.next=21;break}for(r=a.data,o=!0,s=!1,c=void 0,t.prev=5,i=r[Symbol.iterator]();!(o=(l=i.next()).done);o=!0)p=l.value,m=p.x0,d=p.y0,f=p.x1,h=p.y1,v=p.color,b=p.isEraser,g=p.lineWidth,n.drawLine(m,d,f,h,v,b,g,!1);t.next=13;break;case 9:t.prev=9,t.t0=t.catch(5),s=!0,c=t.t0;case 13:t.prev=13,t.prev=14,o||null==i.return||i.return();case 16:if(t.prev=16,!s){t.next=19;break}throw c;case 19:return t.finish(16);case 20:return t.finish(13);case 21:case"end":return t.stop()}}),t,null,[[5,9,13,21],[14,,16,20]])})));return function(e){return t.apply(this,arguments)}}()),e.t.socket.subscribe("updateAreas",function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.updateAreas(t.areas);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,n,a,o,s,i,l,m,d=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.t.setPopout(r.a.createElement(c.C,null)),S(["Manrope Semibold","Manrope Bold"]),setTimeout((function(){d.props.t.state.isShowGlobalCanvasOnboard&&d.props.t.setActiveModal(ao)}),500),e.next=5,new Promise((function(e){return d.props.t.socket.call("canvas.getAreas",{},function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(n.response);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 5:return t=e.sent,e.next=8,new Promise((function(e){return d.props.t.socket.call("canvas.join",{},function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(n.canvasData);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 8:return n=e.sent,e.next=11,this.updateAreas(t);case 11:try{(a=new Image).onload=function(){d.props.t.setPopout(null),d.canvasContext.drawImage(a,0,0)},a.src=n}catch(f){console.error(f)}this.lastScheme=document.body.attributes.getNamedItem("scheme").value,this.clientHeight=parseInt(document.body.attributes.getNamedItem("_height").value),this.clientWidth=parseInt(document.body.attributes.getNamedItem("_width").value),o=this.canvas,s=this.onMouseDown,i=this.onMouseUp,l=this.throttle,m=this.onMouseMove,this.props,this.canvasContext=o.getContext("2d"),o.addEventListener("mousedown",s,!1),o.addEventListener("mouseup",i,!1),o.addEventListener("mouseout",i,!1),o.addEventListener("mousemove",(function(e){return d.state.isCompassActive?m(e):l(m(e),10)}),!1),o.addEventListener("touchstart",s,!1),o.addEventListener("touchend",i,!1),o.addEventListener("touchcancel",i,!1),o.addEventListener("touchmove",(function(e){return d.state.isCompassActive?m(e):l(m(e),10)}),!1);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,n,a,r,o,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.props.t.socket.call("canvas.leave",{}),document.body.setAttribute("scheme",this.lastScheme),t=!0,n=!1,a=void 0,e.prev=5,r=Ya[Symbol.iterator]();!(t=(o=r.next()).done);t=!0)s=o.value,clearInterval(s);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),n=!0,a=e.t0;case 13:e.prev=13,e.prev=14,t||null==r.return||r.return();case 16:if(e.prev=16,!n){e.next=19;break}throw a;case 19:return e.finish(16);case 20:return e.finish(13);case 21:Ya=[],clearInterval(Ra);case 23:case"end":return e.stop()}}),e,this,[[5,9,13,21],[14,,16,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t,n){"bright_light"!==document.body.attributes.getNamedItem("scheme").value&&setTimeout((function(){return document.body.setAttribute("scheme","bright_light")}),500)}},{key:"updateAreas",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,r,o,s=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in Ya=[],n={},a=[],r=function(e){t[e].owner_id>0&&a.push(t[e].owner_id),Ya.push(setInterval((function(){if(t[e].owner_id>0){var a=T(t[e].time-Date.now()).str,r=a.hours,o=a.minutes,c=a.seconds;n[e]="".concat(r,":").concat(o,":").concat(c),s.setState({areas_time:n}),s.state.drawing||s.forceUpdate(),t[e].time<=Date.now()&&(t[e]={owner_id:0,time:0})}}),1e3))},t)r(o);return e.next=6,ne(a);case 6:this.setState({areas:t.sort((function(e,t){return e.id-t.id})),areas_time:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onMouseDown",value:function(e){console.log("onMouseDown");try{this.setState({drawing:!0}),Ua.x=e.clientX||e.touches[0].clientX,Ua.y=e.clientY||e.touches[0].clientY,Ha=[]}catch(e){console.log("Error onMouseDown"),console.error(e)}}},{key:"onMouseUp",value:function(e){console.log("onMouseUp");try{var t=this.state,n=t.drawing,a=t.color,r=t.isEraser,o=t.lineWidth,s=t.isPipette;if(!n)return;if(this.setState({drawing:!1}),s)return void this.setState({isPipette:!1});try{var c=this.canvas.getBoundingClientRect();try{this.drawLine(Ua.x-c.left,Ua.y-c.top,(e.clientX||e.touches[0].clientX)-c.left,(e.clientY||e.touches[0].clientY)-c.top,a,r,o)}catch(e){}console.log("Lines to send: ".concat(Ha.length)),Ha.length>0&&(this.props.t.socket.call("canvas.draw",{data:Ha,user_id:this.props.t.state.vk_user.id}),Ha=[])}catch(u){console.log("Error onMouseUp2"),console.log(e),console.error(u)}var i=this.canvas_container.style.transform,l=i.substring(i.indexOf("(")+1,i.indexOf(")")).split(",");za.x=parseInt(l[0]),za.y=parseInt(l[1]),(isNaN(za.x)||isNaN(za.y))&&(za.x=0,za.y=0)}catch(e){console.log("Error onMouseUp1"),console.error(e)}}},{key:"onMouseMove",value:function(e){try{var t=this.state,n=t.drawing,a=t.color,r=t.isEraser,o=t.lineWidth;if(!n)return;var s=this.canvas,c=this.canvasContext,i=s.getBoundingClientRect(),l={x:e.clientX||e.touches[0].clientX,y:e.clientY||e.touches[0].clientY};if(this.state.isPipette){var u=c.getImageData((e.clientX||e.touches[0].clientX)-i.left,(e.clientY||e.touches[0].clientY)-i.top,1,1),p=P(u.data[0],u.data[1],u.data[2]);return void this.setState({color:p})}if(this.state.isCompassActive){try{var m={x:l.x-Ua.x,y:l.y-Ua.y},d=Math.max(Math.min(this.clientWidth-200,za.x+Ga+m.x),200-this.canvas.width),f=Math.max(Math.min(this.clientHeight-200,za.y+Va+m.y),200-this.canvas.height);this.canvas_container.style.transform="translate(".concat(d,"px, ").concat(f,"px)")}catch(e){console.log(e)}return}try{this.drawLine(Ua.x-i.left,Ua.y-i.top,(e.clientX||e.touches[0].clientX)-i.left,(e.clientY||e.touches[0].clientY)-i.top,a,r,o),Ua.x=e.clientX||e.touches[0].clientX,Ua.y=e.clientY||e.touches[0].clientY}catch(e){console.log("Error onMouseMove2"),console.error(e)}}catch(e){console.log("Error onMouseMove1"),console.error(e)}return!1}},{key:"drawLine",value:function(e,t,n,a,r,o,s){var c=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],i=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];try{if(this.state.isCompassActive&&c)return;if(c&&!this.isAllowToDraw(e,t,n,a))return;try{var l=this.canvasContext;l.beginPath(),o?(l.globalCompositeOperation="destination-out",l.arc(e,t,s,0,2*Math.PI,!1),l.fill()):(l.globalCompositeOperation="source-over",l.moveTo(e,t),l.lineTo(n,a),l.strokeStyle=r,l.fill(),l.lineWidth=s,l.lineCap=l.lineJoin="round",l.stroke()),l.closePath(),i&&Ha.push({x0:e,y0:t,x1:n,y1:a,color:r,isEraser:o,lineWidth:s})}catch(u){}}catch(u){console.log("Error drawLine"),console.error(u)}}},{key:"throttle",value:function(e,t){var n=(new Date).getTime();return function(){var a=(new Date).getTime();a-n>=t&&(n=a,e.apply(null,arguments))}}},{key:"isAllowToDraw",value:function(e,t,n,a){if(245481845===this.props.t.state.vk_user.id)return!0;var r=!0,o=this.state.areas.filter((function(r){var o=r.x0,s=r.y0,c=r.x1,i=r.y1;return e>=o&&t>=s&&n<=c&&a<=i})),s=!0,c=!1,i=void 0;try{for(var l,u=o[Symbol.iterator]();!(s=(l=u.next()).done);s=!0){var p=l.value;if(!(r=0===p.owner_id||p.owner_id==this.props.t.state.vk_user.id))return r}}catch(m){c=!0,i=m}finally{try{s||null==u.return||u.return()}finally{if(c)throw i}}return o.length>0&&r}},{key:"render",value:function(){var e=this,t=this.state,n=this.props.t,a=t.isCompassActive,o=t.drawing,s=t.isFullCanvasShowed,i=t.fullCanvasData,l=t.lineWidth,u=t.isStroke,p=t.isPipette,m=t.color;return r.a.createElement("div",{className:"GlobalCanvas"},Ka?r.a.createElement("div",{className:"CircleButtonBack",onClick:function(){e.componentWillUnmount(),n.back()}},r.a.createElement(ja.a,null)):r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:function(){e.componentWillUnmount(),n.back()}}),separator:!1}),s&&r.a.createElement("img",{src:i,alt:"canvas"}),r.a.createElement("div",{className:"GlobalCanvas_canvas",ref:function(t){return e.canvas_container=t}},this.areas,r.a.createElement("canvas",{style:{cursor:a?o?"grabbing":"grab":"crosshair",display:s&&"none"},width:1595,height:1595,ref:function(t){return e.canvas=t},id:"canvas"})),r.a.createElement("div",{className:"NavigationBar"},r.a.createElement("div",{className:"Items"},this.navbar_items.map((function(e,t){var n=e.icon,a=e.onClick,o=e.selected;return r.a.createElement("div",{style:Ba({},o?{background:"#A4A6AA",color:"#F8F8F8"}:{background:"#F8F8F8",color:"#A4A6AA"},{},p?{background:m,color:m}:{}),key:"Item_".concat(t),onClick:a},n)}))),r.a.createElement("div",{className:"SubItems",style:{transition:"all 200ms",opacity:!u&&0,visibility:!u&&"hidden"}},r.a.createElement("div",null,r.a.createElement(c.F,{step:1,min:2,max:20,value:Number(l),onChange:function(t){return e.setState({lineWidth:t})}})))))}},{key:"navbar_items",get:function(){var e=this,t=this.state,n=this.props.t,a=t.isCompassActive,o=t.isEraser,s=t.isFullCanvasShowed,c=t.isStroke;return[].concat(Object(m.a)(n.state.user.admin?[{icon:r.a.createElement(Pa.a,{width:21,height:21}),onClick:function(){n.setPopout(e.alert_load_picture)}}]:[]),[{icon:r.a.createElement(Ia.a,{width:21,height:21}),onClick:function(){e.setState({isCompassActive:!a,isEraser:!1,isFullCanvasShowed:!1,isStroke:!1})},selected:a},{icon:r.a.createElement(Aa.a,{width:21,height:21}),onClick:function(){n.setPopout(e.alert_color)}},{icon:r.a.createElement(on,null),onClick:function(){e.setState({isEraser:!o,isCompassActive:!1,isFullCanvasShowed:!1})},selected:o},{icon:r.a.createElement(dn,null),onClick:function(){e.setState({isStroke:!c,isCompassActive:!1,isFullCanvasShowed:!1})},selected:c},{icon:r.a.createElement(Da.a,{width:21,height:21}),onClick:function(){var t=Object(p.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s?e.setState({fullCanvasData:null}):(n=e.canvas.toDataURL("image/png"),e.setState({fullCanvasData:n}),clearInterval(Ra),Ra=setInterval((function(){var t=e.canvas.toDataURL("image/png");e.setState({fullCanvasData:t})}),500)),e.setState({isFullCanvasShowed:!s,isEraser:!1,isCompassActive:!1,isStroke:!1});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),selected:s},{icon:r.a.createElement(La.a,{width:21,height:21}),onClick:function(){z("https://vk.me/join/DFIbwK_w537NhbqDIWPd8JjoW/qfkWn5tzk=")}},{icon:r.a.createElement(Ta.a,{width:21,height:21}),onClick:function(){e.componentWillUnmount(),n.go("global_canvas_info")}}])}},{key:"alert_load_picture",get:function(){var e=this,t=this.props.t;return r.a.createElement(c.A,{onClick:function(){return e.props.t.setPopout(null)},onClose:function(){return e.props.t.setPopout(null)}},r.a.createElement(c.l,{className:"GlobaCanvas_Load_Picture"},r.a.createElement("input",{accept:".png",type:"file",multiple:!1,ref:function(t){return e.uploadImage=t},style:{display:"none"},onChange:function(){var n=Object(p.a)(u.a.mark((function n(a){var o,s,i,l,m,d;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=2,l=s=1595,m=i=1595,n.next=3,J(a);case 3:d=n.sent,e.uploadImageTag.onload=Object(p.a)(u.a.mark((function n(){var a,p,f,h,v,b,g,y,k;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Image loaded"),(a=e.canvasUploadImage.getContext("2d")).mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,a.imageSmoothingEnabled=!1,a.drawImage(e.uploadImageTag,0,0,1595,1595),console.log("Start processing..."),Za=[],t.setPopout(r.a.createElement(c.C,null)),n.next=11,I(500);case 11:for(p=0;p<1595;p++)for(console.log("".concat(Math.ceil(100/1595*p),"%")),f=0;f<1595;f++)h=a.getImageData(f,p,1,1).data,void 0,void 0,v=b=l===s?f:l+f,void 0,void 0,g=y=m===i?p:m+p,k=P(h[0],h[1],h[2]),Za.push({x0:v,y0:g,x1:b,y1:y,color:k,isEraser:!1,lineWidth:o}),e.drawLine(v,g,b,y,k,!1,o,!1,!1);return console.log("Process end!"),n.next=15,t.setPopout(e.alert_load_picture);case 15:e.uploadImageTag.src=d;case 16:case"end":return n.stop()}}),n)}))),e.uploadImageTag.src=d;case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}),r.a.createElement("img",{width:200,height:200,alt:"img",onClick:function(){return e.uploadImage.click()},ref:function(t){return e.uploadImageTag=t}}),r.a.createElement("canvas",{ref:function(t){return e.canvasUploadImage=t},width:1595,height:1595,style:{display:"none"}}),r.a.createElement(c.h,{style:{marginTop:12},size:"m",mode:"gradient_blue",onClick:Object(p.a)(u.a.mark((function n(){var a,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.setPopout(r.a.createElement(c.C,null)),n.next=3,I(500);case 3:a=0;case 4:if(!(a<Za.length)){n.next=13;break}return console.log("".concat(Math.ceil(100/Za.length*a),"%")),o=Za.slice(a,a+100),t.socket.call("canvas.draw",{data:o,user_id:t.state.vk_user.id}),n.next=10,I(10);case 10:a+=100,n.next=4;break;case 13:e.props.t.setPopout(null);case 14:case"end":return n.stop()}}),n)})))},"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c")))}},{key:"alert_color",get:function(){var e=this;return r.a.createElement(c.A,{onClick:function(){return e.props.t.setPopout(null)},onClose:function(){return e.props.t.setPopout(null)}},r.a.createElement(c.l,null,r.a.createElement(Fa.a,{color:this.state.color,onChange:function(t){return e.setState({color:t})}}),r.a.createElement(c.h,{style:{marginTop:12},stretched:!0,size:"m",before:r.a.createElement(Na.a,null),mode:"gradient_blue",onClick:function(){e.props.t.setPopout(null),e.setState({isPipette:!0})}},"\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0446\u0432\u0435\u0442"),this.props.t.state.user.admin&&r.a.createElement(c.h,{style:{marginTop:8},stretched:!0,size:"m",before:r.a.createElement(Ma.a,null),mode:"gradient_gray",onClick:function(){e.props.t.setPopout(null),e.drawLine(0,0,1595,1595,e.state.color,!1,2500,!1),e.props.t.socket.call("canvas.draw",{data:Ha,user_id:e.props.t.state.vk_user.id})}},"\u0417\u0430\u043b\u0438\u0442\u044c \u0445\u043e\u043b\u0441\u0442")))}},{key:"areas",get:function(){var e=this,t=this.state,n=t.areas,a=t.areas_time,o=t.isCompassActive,s=this.props.t;return r.a.createElement("div",{className:"Canvas_Areas",style:{transition:"all 200ms",opacity:!o&&0,visibility:!o&&"hidden"}},n.map((function(t,n){return r.a.createElement("div",{key:"area_".concat(n),style:{pointerEvents:o&&"none"}},0!==t.owner_id&&r.a.createElement(c.f,{size:48,shadow:!1,src:ee[t.owner_id]&&ee[t.owner_id].photo_100}),r.a.createElement("h1",{style:{marginTop:0!==t.owner_id&&2}},0===t.owner_id?"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c":t.owner_id===e.props.t.state.vk_user.id?"\u0422\u0432\u043e\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c":"\u0427\u0443\u0436\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c"),r.a.createElement("h3",{style:{marginTop:2}},0!==t.owner_id&&a[n]),0===t.owner_id&&r.a.createElement("div",{className:"CustomButton",onClick:function(){s.state.user.coins>=1e3?s.setPopout(r.a.createElement(c.d,{actions:[{title:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c",autoclose:!0,mode:"positive",action:function(){s.socket.call("canvas.rentArea",{area_id:t.id},(function(e){s.updateData()}))}},{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],actionsLayout:"horizontal",onClose:function(){return s.setPopout(null)},header:"\u0410\u0440\u0435\u043d\u0434\u0430 \u043e\u0431\u043b\u0430\u0441\u0442\u0438",text:"\u0410\u0440\u0435\u043d\u0434\u0430 \u0441\u0442\u043e\u0438\u0442 1000 \u043c\u043e\u043d\u0435\u0442 \u043d\u0430 1 \u0447\u0430\u0441. \u041f\u0440\u043e\u0434\u043b\u0438\u0442\u044c \u0430\u0440\u0435\u043d\u0434\u0443 \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u043e\u0433\u0434\u0430, \u043a\u043e\u0433\u0434\u0430 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u0441\u044f \u0441\u0440\u043e\u043a (1 \u0447\u0430\u0441). \u0423 \u0412\u0430\u0441 ".concat(D(s.state.user.coins)," ").concat(A(s.state.user.coins,["\u043c\u043e\u043d\u0435\u0442\u0430","\u043c\u043e\u043d\u0435\u0442\u044b","\u043c\u043e\u043d\u0435\u0442"],!1),".")})):s.setPopout(r.a.createElement(c.d,{actions:[{title:"\u041e\u043a",autoclose:!0,mode:"cancel"}],actionsLayout:"horizontal",onClose:function(){return s.setPopout(null)},header:"\u0410\u0440\u0435\u043d\u0434\u0430 \u043e\u0431\u043b\u0430\u0441\u0442\u0438",text:"\u0422\u0435\u0431\u0435 \u043d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 ".concat(A(1e3-s.state.user.coins,["\u043c\u043e\u043d\u0435\u0442\u044b","\u043c\u043e\u043d\u0435\u0442\u044b","\u043c\u043e\u043d\u0435\u0442"]),".")}))}},"\u0430\u0440\u0435\u043d\u0434\u043e\u0432\u0430\u0442\u044c"))})))}}]),t}(a.PureComponent);Xa.defaultProps={};var Ja=Xa;function qa(){return(qa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function $a(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Qa=r.a.createElement("path",{d:"M3.84316 13.0355L5.96448 15.1568C6.74553 15.9378 8.01186 15.9378 8.79291 15.1568L11.6213 12.3284L6.67159 7.37862L3.84316 10.207C3.06211 10.9881 3.06211 12.2544 3.84316 13.0355Z",fill:"#A4A6AA"}),er=r.a.createElement("path",{d:"M3.31279 13.5658L5.43411 15.6872C6.50806 16.7611 8.24926 16.7611 9.3232 15.6872L15.6872 9.32321C16.7611 8.24926 16.7611 6.50806 15.6872 5.43412L13.5658 3.3128C12.4919 2.23886 10.7507 2.23886 9.67675 3.3128L3.31279 9.67676C2.23885 10.7507 2.23885 12.4919 3.31279 13.5658Z",stroke:"#A4A6AA",strokeWidth:1.5}),tr=function(e){var t=e.svgRef,n=e.title,a=$a(e,["svgRef","title"]);return r.a.createElement("svg",qa({width:20,height:20,viewBox:"0 0 20 20",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,Qa,er)},nr=r.a.forwardRef((function(e,t){return r.a.createElement(tr,qa({svgRef:t},e))})),ar=(n.p,F()),rr=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:e.back}),separator:!1},ar&&"\u041e\u0431\u0449\u0438\u0439 \u0445\u043e\u043b\u0441\u0442"),r.a.createElement("div",{className:"GlobalCanvasInfo",style:{paddingBottom:24}},!ar&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u041e\u0431\u0449\u0438\u0439 \u0445\u043e\u043b\u0441\u0442"),r.a.createElement("p",{style:{margin:!ar&&"8px 0 0 0"}},"\u041d\u0430 \u043e\u0431\u0449\u0435\u043c \u0445\u043e\u043b\u0441\u0442\u0435 \u043c\u043e\u0433\u0443\u0442 \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0438\u0433\u0440\u043e\u043a\u0438. \u0420\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u043c\u043e\u0436\u043d\u043e \u043d\u0430 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438. \u0412\u0441\u0435\u0433\u043e \u0442\u0430\u043a\u0438\u0445 \u043e\u0431\u043b\u0430\u0441\u0442\u0435\u0439 25."),r.a.createElement("div",{className:"GlobalCanvas_Items__List"},[[r.a.createElement(Ia.a,{width:20,height:20}),"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u043f\u043e \u0445\u043e\u043b\u0441\u0442\u0443"],[r.a.createElement(Aa.a,{width:20,height:20}),"\u041c\u0435\u043d\u044e \u043f\u0430\u043b\u0438\u0442\u0440\u044b"],[r.a.createElement(nr,null),"\u041b\u0430\u0441\u0442\u0438\u043a \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u0442\u0438\u0440\u0430\u0442\u044c \u0440\u0438\u0441\u0443\u043d\u043e\u043a \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u043c \u043c\u0435\u0441\u0442\u0435"],[r.a.createElement(Da.a,{width:20,height:20}),"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0435\u0441\u044c \u0445\u043e\u043b\u0441\u0442"],[r.a.createElement(La.a,{width:20,height:20}),"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0447\u0430\u0442"]].map((function(e,t){return r.a.createElement("div",{key:"item_".concat(t)},e[0],r.a.createElement("span",null,e[1]))}))),r.a.createElement("p",{style:{margin:"18px 0 0 0"}},"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u0443\u044e \u043e\u0431\u043b\u0430\u0441\u0442\u044c \u043c\u043e\u0436\u043d\u043e \u0430\u0440\u0435\u043d\u0434\u043e\u0432\u0430\u0442\u044c (1000 \u043c\u043e\u043d\u0435\u0442 \u043d\u0430 \u0447\u0430\u0441). \u041d\u0430 \u0430\u0440\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043c\u043e\u0436\u0435\u0442 \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446. \u041f\u0440\u043e\u0434\u043b\u0438\u0442\u044c \u0430\u0440\u0435\u043d\u0434\u0443 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u2014 \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u043a\u0443\u043f\u0438\u0442\u044c \u0435\u0451 \u0441\u043d\u043e\u0432\u0430 \u043f\u043e \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044e \u0441\u0440\u043e\u043a\u0430.")))}}]),t}(a.PureComponent);rr.defaultProps={};var or=rr;function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ir=F(),lr=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={friend_lobby:cr({},e.friend_lobby)},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t,n=t.socket,a=t.state.user,o=this.state.friend_lobby;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:t.back}),separator:!1},ir&&"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043b\u043e\u0431\u0431\u0438"),r.a.createElement("div",{className:"FriendLobbySettings"},!ir&&r.a.createElement("h2",{style:{textAlign:"left",marginLeft:28}},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043b\u043e\u0431\u0431\u0438"),r.a.createElement(c.g,{header:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",subheader:"\u0415\u0441\u043b\u0438 \u0432\u044b \u0432\u0432\u043e\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0451 \u0441\u043b\u043e\u0432\u043e \u0434\u043b\u044f \u0438\u0433\u0440\u044b, \u0442\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0438\u0441\u0443\u043d\u043e\u043a \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f. \u0422\u0430\u043a \u0436\u0435, \u0435\u0441\u043b\u0438 \u0432\u044b \u0437\u0430\u0434\u0430\u0451\u0442\u0435 \u0441\u0432\u043e\u0451 \u0441\u043b\u043e\u0432\u043e, \u0442\u043e \u0432\u044b \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435\u0441\u044c \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a\u043e\u043c \u0432 \u0438\u0433\u0440\u0435."}),r.a.createElement(c.l,{style:{paddingBottom:24}},r.a.createElement("div",{className:"Span"},"\u0412\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u043b\u043e\u0431\u0431\u0438"),r.a.createElement(c.D,{style:{marginTop:8},value:o.friendsOnly?"private":"public",onChange:function(t){console.log(t),o.friendsOnly="private"===t,e.setState({friend_lobby:o}),e.forceUpdate()},options:[{label:"\u0414\u043b\u044f \u0432\u0441\u0435\u0445",value:"public"},{label:"\u0414\u043b\u044f \u0434\u0440\u0443\u0437\u0435\u0439",value:"private"}]}),r.a.createElement("div",{className:"Span",style:{marginTop:8}},"\u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u0438\u0433\u0440\u044b"),r.a.createElement(c.D,{style:{marginTop:8},value:o.timeout,onChange:function(t){o.timeout=t,e.setState({friend_lobby:o}),e.forceUpdate()},options:[{label:"90 \u0441\u0435\u043a",value:90},{label:"10 \u043c\u0438\u043d",value:600}]}),r.a.createElement(c.E,{style:{marginTop:8},Component:"label",after:r.a.createElement(c.K,{getRef:function(t){return e.saveGame=t},checked:o.saveGame,onChange:function(t){o.saveGame=t.currentTarget.checked,o.saveGame&&(o.setCustomWord=!1,e.setCustomWord.checked=!1),e.setState({friend_lobby:o}),e.forceUpdate()}})},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0438\u0441\u0443\u043d\u043e\u043a"),r.a.createElement(c.E,{Component:"label",after:r.a.createElement(c.K,{getRef:function(t){return e.setCustomWord=t},checked:o.setCustomWord,onChange:function(t){o.setCustomWord=t.currentTarget.checked,o.setCustomWord&&(o.saveGame=!1,e.saveGame.checked=!1),e.setState({friend_lobby:o}),e.forceUpdate()}})},"\u0417\u0430\u0434\u0430\u0442\u044c \u0441\u0432\u043e\u0451 \u0441\u043b\u043e\u0432\u043e"),o.setCustomWord&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Span",style:{marginTop:8}},"\u0421\u043b\u043e\u0432\u043e"),r.a.createElement(c.r,{style:{marginTop:8},placeholder:"\u041a\u0440\u043e\u043a\u043e\u0434\u0438\u043b",defaultValue:o.customWord||"",onChange:function(t){o.customWord=t.currentTarget.value,e.setState({friend_lobby:o})}})),(a.premium||a.admin)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Span",style:{marginTop:8}},"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b-\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432"),r.a.createElement(c.r,{style:{marginTop:8},placeholder:"\u0427\u0438\u0441\u043b\u043e (\u043c\u0430\u043a\u0441 500)",type:"number",min:2,max:500,defaultValue:o.maxPlayers||20,onChange:function(t){o.maxPlayers=parseInt(t.currentTarget.value),e.setState({friend_lobby:o})}})),r.a.createElement(c.h,{style:{marginTop:18,width:"100%"},size:"m",mode:"gradient_blue",stretched:!0,onClick:Object(p.a)(u.a.mark((function a(){var s,i,l,p,m,d;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.props.t.setPopout(r.a.createElement(c.C,null)),s=o.friendsOnly,i=o.timeout,l=o.saveGame,p=o.setCustomWord,m=o.customWord,d=o.maxPlayers,n.call("friends.saveSettings",{friendsOnly:s,timeout:i,saveGame:l,setCustomWord:p,customWord:m,maxPlayers:d},(function(e){e.response&&t.setState({friend_lobby:e.response}),t.setPopout(null),t.back()}));case 3:case"end":return a.stop()}}),a)})))},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))}}]),t}(a.PureComponent);lr.defaultProps={};var ur,pr=lr,mr=F(),dr=function(e){function t(e){var n;Object(d.a)(this,t),n=Object(h.a)(this,Object(v.a)(t).call(this,e));e.t;return n.state={isFullCanvasShowed:!0,fullCanvasData:null},n.drawLine=n.drawLine.bind(Object(b.a)(n)),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,n,a,r,o,s,c,i,l,m,d,f,h,v,b,g,y,k,w,E,_,x,O,C,S,j,P,A,D,L,T,N=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.lastScheme=document.body.attributes.getNamedItem("scheme").value,this.clientHeight=parseInt(document.body.attributes.getNamedItem("_height").value),this.clientWidth=parseInt(document.body.attributes.getNamedItem("_width").value),t=this.canvas,this.onMouseDown,this.onMouseUp,this.throttle,this.onMouseMove,n=this.props,a=n.t.socket,this.canvasContext=t.getContext("2d"),this.componentDidUpdate(),ur=setInterval((function(){var e=N.canvas.toDataURL("image/png");N.setState({fullCanvasData:e})}),200),1,r=0,o=0,s=!1,c=300,i=[],setTimeout(Object(p.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<1)){e.next=9;break}return e.next=4,new Promise((function(e){return a.call("canvas.getHistory",{limit:1,offset:r},(function(t){e(t)}))}));case 4:(n=e.sent).response.length>0?(i.push(n.response),console.log({allData:i.length}),r+=1,t--,i.length-o>2?c-=10:c+=10):s=!0;case 6:t++,e.next=1;break;case 9:case"end":return e.stop()}}),e)}))),100),l=0;case 11:if(!(l<1)){e.next=71;break}if(s){e.next=68;break}if(m=i[o],l--,!m){e.next=66;break}console.log({currentData:o}),o++,d=this.canvasContext,f=!0,h=!1,v=void 0,e.prev=22,b=m[Symbol.iterator]();case 24:if(f=(g=b.next()).done){e.next=50;break}for(y=g.value,k=!0,w=!1,E=void 0,e.prev=29,_=y.lines[Symbol.iterator]();!(k=(x=_.next()).done);k=!0)O=x.value,S=(C=O||{}).x0,j=C.y0,P=C.x1,A=C.y1,D=C.color,L=C.isEraser,T=C.lineWidth,d.beginPath(),L?(d.globalCompositeOperation="destination-out",d.arc(S,j,T,0,2*Math.PI,!1),d.fill()):(d.globalCompositeOperation="source-over",d.moveTo(S,j),d.lineTo(P,A),d.strokeStyle=D,d.fill(),d.lineWidth=T,d.lineCap=d.lineJoin="round",d.stroke()),d.closePath();e.next=37;break;case 33:e.prev=33,e.t0=e.catch(29),w=!0,E=e.t0;case 37:e.prev=37,e.prev=38,k||null==_.return||_.return();case 40:if(e.prev=40,!w){e.next=43;break}throw E;case 43:return e.finish(40);case 44:return e.finish(37);case 45:return e.next=47,I(c);case 47:f=!0,e.next=24;break;case 50:e.next=56;break;case 52:e.prev=52,e.t1=e.catch(22),h=!0,v=e.t1;case 56:e.prev=56,e.prev=57,f||null==b.return||b.return();case 59:if(e.prev=59,!h){e.next=62;break}throw v;case 62:return e.finish(59);case 63:return e.finish(56);case 64:e.next=68;break;case 66:return e.next=68,I(100);case 68:l++,e.next=11;break;case 71:case"end":return e.stop()}}),e,this,[[22,52,56,64],[29,33,37,45],[38,,40,44],[57,,59,63]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.body.setAttribute("scheme",this.lastScheme),clearInterval(ur);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t,n){"bright_light"!==document.body.attributes.getNamedItem("scheme").value&&setTimeout((function(){return document.body.setAttribute("scheme","bright_light")}),500)}},{key:"drawLine",value:function(e,t,n,a,r,o,s){try{try{var c=this.canvasContext;c.beginPath(),o?(c.globalCompositeOperation="destination-out",c.arc(e,t,s,0,2*Math.PI,!1),c.fill()):(c.globalCompositeOperation="source-over",c.moveTo(e,t),c.lineTo(n,a),c.strokeStyle=r,c.fill(),c.lineWidth=s,c.lineCap=c.lineJoin="round",c.stroke()),c.closePath()}catch(i){}}catch(i){console.log("Error drawLine"),console.error(i)}}},{key:"render",value:function(){var e=this,t=this.state,n=this.props.t,a=t.isFullCanvasShowed,o=t.fullCanvasData;return r.a.createElement("div",{className:"GlobalCanvas"},mr?r.a.createElement("div",{className:"CircleButtonBack",onClick:function(){e.componentWillUnmount(),n.back()}},r.a.createElement(ja.a,null)):r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:function(){e.componentWillUnmount(),n.back()}}),separator:!1}),a&&r.a.createElement("img",{src:o,alt:"canvas"}),r.a.createElement("div",{className:"GlobalCanvas_canvas",ref:function(t){return e.canvas_container=t}},r.a.createElement("canvas",{style:{display:a&&"none"},width:1595,height:1595,ref:function(t){return e.canvas=t},id:"canvas"})))}}]),t}(a.PureComponent);dr.defaultProps={};var fr=dr,hr=n(762),vr=n(763),br=n(764),gr=F(),yr=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.t,t=e.state.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:e.back}),separator:!1},gr&&"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f"),r.a.createElement("div",{className:"Suggestions"},!gr&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f"),r.a.createElement("div",{className:"Span",style:{marginTop:8}},"\u041c\u044b \u0433\u043e\u0442\u043e\u0432\u044b \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043e\u0442 \u043d\u0430\u0448\u0435\u0439 \u043b\u044e\u0431\u0438\u043c\u043e\u0439 \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u0438, \u0442\u0430\u043a \u0447\u0442\u043e \u0432\u043f\u0435\u0440\u0451\u0434!"),r.a.createElement("div",{className:"SuggestionsCards"},[["suggestions_idea",["\u0418\u0434\u0435\u044f","\u0418\u0434\u0435\u0438","\u0418\u0434\u0435\u0439"],"\u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e"],["suggestions_word",["\u0421\u043b\u043e\u0432\u043e","\u0421\u043b\u043e\u0432\u0430","\u0421\u043b\u043e\u0432"],"\u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u043e"]].map((function(e,n){return r.a.createElement("div",{key:"Card_".concat(n)},r.a.createElement("p",null,t[e[0]]),r.a.createElement("p",null,A(t[e[0]],e[1],!1)," ",e[2]))}))),r.a.createElement("div",{className:"SuggestionsVariants"},[{icon:r.a.createElement(hr.a,null),text:"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u0438\u0434\u0435\u044e",onClick:function(){return e.go("suggestions_idea")}},{icon:r.a.createElement(vr.a,null),text:"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e",onClick:function(){return e.go("suggestions_word")}},{icon:r.a.createElement(br.a,null),text:"\u0421\u043e\u043e\u0431\u0449\u0438\u0442\u044c \u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435",onClick:function(){return z("https://vk.com/@draw_app-bug")}}].map((function(e,t){var n=e.icon,a=e.text,o=e.onClick;return r.a.createElement("div",{key:"Variant_".concat(t),className:"Variant_".concat(t),onClick:o},n,r.a.createElement("span",null,a))})))))}}]),t}(a.PureComponent);yr.defaultProps={};var kr=yr,wr=F(),Er=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:t.back}),separator:!1},wr&&"\u041d\u043e\u0432\u0430\u044f \u0438\u0434\u0435\u044f"),r.a.createElement("div",{className:"SuggestionsIdea"},!wr&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u041d\u043e\u0432\u0430\u044f \u0438\u0434\u0435\u044f"),r.a.createElement("div",{className:"SuggestionsIdea_Container"},r.a.createElement("div",{className:"Span"},"\u041a\u0440\u0430\u0442\u043a\u043e \u043e\u043f\u0438\u0448\u0438\u0442\u0435 \u0438\u0434\u0435\u044e"),r.a.createElement(c.r,{style:{marginTop:8},placeholder:"\u041d\u043e\u0432\u0430\u044f \u043c\u0435\u0442\u043a\u0430",getRef:function(t){return e.inputIdeaTitle=t}}),r.a.createElement("div",{className:"Span",style:{marginTop:8}},"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u043e\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u0432\u043e\u044e \u0438\u0434\u0435\u044e"),r.a.createElement(c.M,{style:{marginTop:8},placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u043c\u0435\u0442\u043a\u0443 \u201c\u041a\u043b\u0438\u043f\u0435\u0440\u201d. \u042d\u0442\u0443 \u043c\u0435\u0442\u043a\u0443 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0434\u0430\u0432\u0430\u0442\u044c \u0438\u0433\u0440\u043e\u043a\u0430\u043c, \u043a\u043e\u0442\u043e\u0440\u043e\u044b\u0435 \u0441\u043d\u0438\u043c\u0430\u044e\u0442 \u043a\u043b\u0438\u043f\u044b \u043f\u043e \u0438\u0433\u0440\u0435.",getRef:function(t){return e.inputIdeaDescription=t}})),r.a.createElement(c.h,{style:{marginTop:12,width:"100%"},size:"m",mode:"gradient_blue",stretched:!0,onClick:Object(p.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.setPopout(r.a.createElement(c.C,null)),t.socket.call("suggestions.add",{type:"idea",title:e.inputIdeaTitle.value,description:e.inputIdeaDescription.value},(function(e){t.setPopout(null),e.response?t.go("suggestions_done"):t.setSnackbar(e.error.message)}));case 2:case"end":return n.stop()}}),n)})))},"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c"),t.state.user.admin&&r.a.createElement(c.h,{style:{marginTop:6,width:"100%"},size:"m",mode:"gradient_gray",stretched:!0,onClick:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.socket.call("suggestions.getList",{type:"idea"},function(){var e=Object(p.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({suggestions_type:"idea",suggestions_list:n.response});case 2:t.go("suggestions_list");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))},"\u0421\u043f\u0438\u0441\u043e\u043a")))}}]),t}(a.PureComponent);Er.defaultProps={};var _r=Er,xr=F(),Or=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:t.back}),separator:!1},xr&&"\u041d\u043e\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e"),r.a.createElement("div",{className:"SuggestionsWord"},!xr&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u041d\u043e\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e"),r.a.createElement("div",{className:"Span"},"\u041f\u043e\u0441\u0442\u0430\u0440\u0430\u0439\u0442\u0435\u0441\u044c \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043b\u043e\u0432\u043e \u0431\u0435\u0437 \u043e\u0448\u0438\u0431\u043e\u043a. \u0418 \u0441\u0430\u043c\u043e\u0435 \u0433\u043b\u0430\u0432\u043d\u043e\u0435, \u0447\u0442\u043e\u0431\u044b \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0443 \u0438\u0433\u0440\u043e\u043a\u043e\u0432 \u0431\u044b\u043b\u043e \u043f\u043e\u043d\u044f\u0442\u043d\u043e, \u043a\u0430\u043a \u0435\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c, \u0438 \u043e\u0442\u0433\u0430\u0434\u0430\u0442\u044c \u0440\u0438\u0441\u0443\u043d\u043e\u043a."),r.a.createElement("div",{className:"SuggestionsWord_Container"},r.a.createElement("div",{className:"Span"},"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043b\u043e\u0432\u043e"),r.a.createElement(c.r,{style:{marginTop:8},placeholder:"\u041c\u043e\u0440\u043a\u043e\u0432\u044c",getRef:function(t){return e.inputWord=t}})),r.a.createElement(c.h,{style:{marginTop:12,width:"100%"},size:"m",mode:"gradient_blue",stretched:!0,onClick:Object(p.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.setPopout(r.a.createElement(c.C,null)),t.socket.call("suggestions.add",{type:"word",title:e.inputWord.value},(function(e){t.setPopout(null),e.response?t.go("suggestions_done"):t.setSnackbar(e.error.message)}));case 2:case"end":return n.stop()}}),n)})))},"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c"),t.state.user.admin&&r.a.createElement(c.h,{style:{marginTop:6,width:"100%"},size:"m",mode:"gradient_gray",stretched:!0,onClick:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.socket.call("suggestions.getList",{type:"word"},function(){var e=Object(p.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({suggestions_type:"word",suggestions_list:n.response});case 2:t.go("suggestions_list");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))},"\u0421\u043f\u0438\u0441\u043e\u043a")))}}]),t}(a.PureComponent);Or.defaultProps={};var Cr=Or;function Sr(){return(Sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function jr(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Pr=r.a.createElement("path",{d:"M7.55399 2.70017C7.61717 2.20735 7.00078 1.93404 6.67796 2.31173L2.63885 7.03749C2.36152 7.36197 2.59209 7.86235 3.01893 7.86235H6.61564C6.91702 7.86235 7.14991 8.127 7.11158 8.42594L6.81369 10.7495C6.7505 11.2424 7.3669 11.5157 7.68971 11.138L11.7288 6.41221C12.0062 6.08774 11.7756 5.58735 11.3487 5.58735H7.75203C7.45065 5.58735 7.21777 5.32271 7.25609 5.02377L7.55399 2.70017Z",fill:"#574039",stroke:"#574039",strokeLinecap:"round",strokeLinejoin:"round"}),Ir=function(e){var t=e.svgRef,n=e.title,a=jr(e,["svgRef","title"]);return r.a.createElement("svg",Sr({width:14,height:14,viewBox:"0 0 14 14",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,Pr)},Ar=r.a.forwardRef((function(e,t){return r.a.createElement(Ir,Sr({svgRef:t},e))}));n.p;function Dr(){return(Dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Lr(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Tr=r.a.createElement("path",{d:"M6.17869 2.55539C6.49554 1.81487 7.50446 1.81487 7.82131 2.55539L8.58985 4.35159C8.72053 4.65701 8.99757 4.8667 9.31677 4.9018L11.194 5.10822C11.968 5.19331 12.2797 6.19296 11.7016 6.73572L10.2993 8.05225C10.0609 8.27611 9.95509 8.6154 10.0217 8.94251L10.4134 10.8663C10.5748 11.6594 9.75859 12.2772 9.08445 11.8721L7.44926 10.8896C7.17122 10.7225 6.82878 10.7225 6.55074 10.8896L4.91555 11.8721C4.24141 12.2772 3.42517 11.6594 3.58664 10.8663L3.97831 8.94251C4.04491 8.6154 3.93909 8.27611 3.70065 8.05225L2.29838 6.73572C1.72027 6.19296 2.03204 5.19331 2.80598 5.10822L4.68323 4.9018C5.00243 4.8667 5.27947 4.65701 5.41015 4.35159L6.17869 2.55539Z",fill:"#5C453E"}),Nr=function(e){var t=e.svgRef,n=e.title,a=Lr(e,["svgRef","title"]);return r.a.createElement("svg",Dr({width:14,height:14,viewBox:"0 0 14 14",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,Tr)},Mr=r.a.forwardRef((function(e,t){return r.a.createElement(Nr,Dr({svgRef:t},e))}));n.p;function Fr(){return(Fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Wr(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Br=r.a.createElement("path",{d:"M3 7.2L5.86364 10L12 4",stroke:"#574039",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),Rr=function(e){var t=e.svgRef,n=e.title,a=Wr(e,["svgRef","title"]);return r.a.createElement("svg",Fr({width:15,height:14,viewBox:"0 0 15 14",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,Br)},Ur=r.a.forwardRef((function(e,t){return r.a.createElement(Rr,Fr({svgRef:t},e))}));n.p;function Gr(){return(Gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Vr(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var zr=r.a.createElement("path",{d:"M11.5 3L7.75 6.75M4 10.5L7.75 6.75M7.75 6.75L4 3M7.75 6.75L11.5 10.5",stroke:"#574039",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),Kr=function(e){var t=e.svgRef,n=e.title,a=Vr(e,["svgRef","title"]);return r.a.createElement("svg",Gr({width:15,height:14,viewBox:"0 0 15 14",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,zr)},Yr=r.a.forwardRef((function(e,t){return r.a.createElement(Kr,Gr({svgRef:t},e))})),Hr=(n.p,n(710),a.PureComponent,F()),Zr=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={offset:e.list.length,limit:10,canGetMore:e.list.length>0,prevY:0},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef)}},{key:"handleObserver",value:function(e,t){var n=this,a=e[0].boundingClientRect.y,r=this.props.t,o=this.state,s=o.prevY,c=o.offset,i=o.limit,l=o.canGetMore;o.sort;(0===s||s>a)&&l&&(this.setState({spinner:!0}),r.socket.call("suggestions.getList",{type:this.props.type,offset:c,limit:i},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({suggestions_list:[].concat(Object(m.a)(r.state.suggestions_list),Object(m.a)(t.response))}),n.setState({canGetMore:t.response.length>0,spinner:!1}),n.forceUpdate();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({offset:c+10})),this.setState({prevY:a})}},{key:"actionButtons",value:function(e,t){var n=this,a=this.props.t;return r.a.createElement("div",{style:{display:"flex",marginTop:12}},r.a.createElement(c.h,{mode:"gradient_blue",onClick:function(){a.socket.call("suggestions.approve",{id:e},function(){var e=Object(p.a)(u.a.mark((function e(r){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.response){e.next=8;break}return(o=a.state.suggestions_list).splice(t,1),e.next=5,a.setState({suggestions_list:o});case 5:n.forceUpdate(),e.next=10;break;case 8:a.setSnackbar(r.error.message),n.forceUpdate();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},"\u041e\u0434\u043e\u0431\u0440\u0438\u0442\u044c"),r.a.createElement(c.h,{mode:"gradient_",style:{marginLeft:6},onClick:function(){a.socket.call("suggestions.decline",{id:e},function(){var e=Object(p.a)(u.a.mark((function e(r){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.response){e.next=8;break}return(o=a.state.suggestions_list).splice(t,1),e.next=5,a.setState({suggestions_list:o});case 5:n.forceUpdate(),e.next=10;break;case 8:a.setSnackbar(r.error.message),n.forceUpdate();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"))}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,a=t.list,o=t.type,s=this.state.spinner;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{left:r.a.createElement(c.y,{onClick:n.back}),separator:!1},Hr&&"\u0421\u043f\u0438\u0441\u043e\u043a ".concat("idea"===o?"\u0438\u0434\u0435\u0439":"\u0441\u043b\u043e\u0432")),r.a.createElement("div",{className:"SuggestionsList"},!Hr&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u0421\u043f\u0438\u0441\u043e\u043a ".concat("idea"===o?"\u0438\u0434\u0435\u0439":"\u0441\u043b\u043e\u0432")),r.a.createElement("div",{className:"SuggestionsList_Container"},r.a.createElement(c.i,{size:"l"},a.map((function(t,n){return"idea"===o?r.a.createElement(c.k,{key:"Card_".concat(n),header:t.title,caption:r.a.createElement(r.a.Fragment,null,t.description,e.actionButtons(t.id,n))}):r.a.createElement(c.k,{key:"Card_".concat(n),header:t.title,caption:e.actionButtons(t.id,n)})}))))),s&&r.a.createElement(c.H,{size:"small",style:{margin:"20px 0"}}),r.a.createElement("div",{ref:function(t){return e.loadingRef=t}}))}}]),t}(a.PureComponent);Zr.defaultProps={};var Xr=Zr;function Jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jr(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(711)("./".concat(window.location.search.length>0&&"desktop_web"===JSON.parse('{"'+decodeURI(window.location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}').vk_platform?"Desktop":"Mobile",".css"));var $r,Qr,eo=new Un,to="1.2.2",no="outdated-version",ao="global-canvas",ro="change-url-params",oo=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={bridge_inited:!1,appearance:"light",isNotApp:!1,activePanel:"main",history:["main"],activeModal:null,modalHistory:[],colors:[["#ff0000","#ff9a00","#d0de21","#4fdc4a","#3fdad8","#2fc9e2","#1c7fee","#ba0cf8","#fb07d9","#ff0000"],"#000000","#FFFFFF","#E63902","#EA5A03","#FA8A00","#FBB101","#FDE401","#85B201","#019317","#019C8B","#035AA2","#00247A","#500A6D","#A9236B","#964B00","#F57C7C"],__v_clicks:0,online:0,chooseWords:[],drawerId:0,lobbyId:0,isOnlineDrawing:!0,bannersCount:9,banners:[],defaultBannerData:{title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",domain:"vk.com",trackingLink:"https://vk.com",ctaText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438",advertisingLabel:"\u0420\u0435\u043a\u043b\u0430\u043c\u0430",iconLink:"https://sun9-7.userapi.com/c846420/v846420985/1526c3/ISX7VF8NjZk.jpg",description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u043a\u043b\u0430\u043c\u044b",ageRestrictions:"14+",statistics:[{url:"",type:"playbackStarted"},{url:"",type:"click"}]},connected:!1,trying_reconnect:!1,dataUpdated:!1,author_works:[],subGameInfo:{},watchedShopItems:[],boughtShopItems:[],user:{},friend_lobby:{},game_timeout:90,suggestions_type:"",suggestions_list:[]},n.componentDidMount=n.componentDidMount.bind(Object(b.a)(n)),n.updateData=n.updateData.bind(Object(b.a)(n)),n.setAlert=n.setAlert.bind(Object(b.a)(n)),n.back=function(){var e=n.state,t=e.history,a=e.popout,r=e.activeModal;if(null===a||void 0===a){if(null!==r)return n.setState({activeModal:null}),void window.history.pushState({pop:"popout"},"Title");if(t.length<=1&&"main"!==t[0])n.setState({activePanel:"main",history:["main"]});else if(t.length>1){var o=t[t.length-1];"search"===o?(eo.call("games.search"),n.setSnackbar("\u041f\u043e\u0438\u0441\u043a \u0438\u0433\u0440\u044b \u043e\u0442\u043c\u0435\u043d\u0451\u043d")):"friend_lobby"===o?eo.call("friends.leaveLobby",{owner_id:n.state.friend_lobby.owner_id}):"gallery"!==o&&"rating"!==o&&"likes"!==o||n.setState({scrollPosition:null}),t.pop(),n.setState({activePanel:t[t.length-1],history:t}),"search"!==t[t.length-1]&&n.setState({snackbar:null})}else k.a.send("VKWebAppClose",{status:"success"})}},n.go=function(e){var t=n.state,a=t.history;null!==t.activeModal&&n.setState({activeModal:null,modalHistory:[]}),a[a.length-1]!==e&&(a.push(e),window.history.pushState({activePanel:e},"Title"),n.setState({activePanel:e,history:a,snackbar:null}))},n.setActivePanel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.setState({activePanel:e,history:[].concat(Object(m.a)(t),[e]),snackbar:null})},n.setActiveModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=n.state.modalHistory;null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),n.setState({activeModal:e,modalHistory:t})},n.setPopout=function(e){n.setState({popout:e})},n.setSnackbar=function(e){n.setState({snackbar:r.a.createElement(c.G,{onClose:function(){return n.setState({snackbar:null})}},e)})},n.socket=eo,n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,n,a,r,o,s,c,i,l=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k.a.send("VKWebAppInit"),this.setState({bridge_inited:!0}),S(),window.addEventListener("popstate",(function(e){e.preventDefault(),l.back()})),k.a.subscribe(function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,r,o,s,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.detail,a=n.type,r=n.data,void 0===a){e.next=17;break}if("vk-connect"!==a||r){e.next=16;break}if(l.state.isNotApp){e.next=14;break}return e.next=6,l.setState({isNotApp:!0});case 6:document.body.style.width="660px",document.body.style.height="600px",document.body.style.position="absolute",document.body.style.top="50%",document.body.style.left="50%",document.body.style.transform="translate(-50%, -50%)",console.log("Log in as not app version"),l.componentDidMount();case 14:e.next=17;break;case 16:console.log(a,r);case 17:"VKWebAppUpdateConfig"===a?((o=document.createAttribute("scheme")).value=r.scheme?"client_light"===r.scheme?"bright_light":r.scheme:"bright_light",document.body.attributes.setNamedItem(o),l.setState({appearance:r.scheme&&r.scheme.indexOf("light")>-1?"light":"dark"}),s=document.documentElement.clientHeight,c=document.documentElement.clientWidth,i=100/812*(s>0?s:812)/100,document.body.style.setProperty("--scale-value",i),console.log("windowHeight = ".concat(document.documentElement.clientHeight)),document.body.setAttribute("_width",c),document.body.setAttribute("_height",s)):"VKWebAppViewRestore"===a&&(l.setState({popout:null}),"global_canvas"===l.state.activePanel&&setTimeout((function(){return document.body.setAttribute("scheme","bright_light")}),500));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t=this.state.isNotApp,e.t0=!t,!e.t0){e.next=12;break}return e.next=10,k.a.send("VKWebAppStorageGet",{keys:["onboard"]});case 10:e.t1=e.sent.keys[0].value,e.t0=""===e.t1;case 12:if(n=e.t0,e.t2=!t,!e.t2){e.next=19;break}return e.next=17,k.a.send("VKWebAppStorageGet",{keys:["vk_group2"]});case 17:e.t3=e.sent.keys[0].value,e.t2=""===e.t3;case 19:if(a=e.t2,e.t4=!t,!e.t4){e.next=26;break}return e.next=24,k.a.send("VKWebAppStorageGet",{keys:["update_01062022"]});case 24:e.t5=e.sent.keys[0].value,e.t4=""===e.t5;case 26:if(r=e.t4,e.t6=!t,!e.t6){e.next=33;break}return e.next=31,k.a.send("VKWebAppStorageGet",{keys:["canvas_new_mode"]});case 31:e.t7=e.sent.keys[0].value,e.t6=""===e.t7;case 33:if(o=e.t6,e.t8=!t,!e.t8){e.next=40;break}return e.next=38,k.a.send("VKWebAppStorageGet",{keys:["canvas_new_mode_onboard"]});case 38:e.t9=e.sent.keys[0].value,e.t8=""===e.t9;case 40:if(s=e.t8,e.t10=!t,!e.t10){e.next=46;break}return e.next=45,k.a.send("VKWebAppGetUserInfo");case 45:e.t10=e.sent;case 46:return c=e.t10,e.prev=47,e.next=50,ne([N().vk_user_id]);case 50:i=e.sent,e.next=55;break;case 53:e.prev=53,e.t11=e.catch(47);case 55:return e.next=57,this.setState({isShowOnboard:n,isShowVkGroup:a,isShowGlobalCanvasOnboard:s,isShowGlobalCanvas:o,vk_user:c.id==N().vk_user_id?c:i[0]||c});case 57:return k.a.send("VKWebAppEnableSwipeBack"),this.connect(),eo.subscribe("exit",function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.setState({placeholderText:t.title,banned:t.banned,dataUpdated:!0});case 2:l.setPopout(null),t.banned?(l.setState({placeholderNeed:2}),l.setActivePanel("banned")):(l.setState({placeholderNeed:1}),l.setActivePanel("placeholder")),l.state.bridge_inited||(k.a.send("VKWebAppInit"),l.setState({bridge_inited:!0}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),eo.subscribe("app_version",(function(e){l.setState({app_version:e.app_version})})),eo.subscribe("restart",(function(e){l.setAlert("\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435","\u041f\u043e \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044e \u0432\u0441\u0435\u0445 \u0438\u0433\u0440 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d \u0440\u0435\u0441\u0442\u0430\u0440\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430.",[{title:"\u041e\u043a",autoclose:!0}])})),eo.onConnectionError((function(e){console.log("Connection error"),l.setState({connected:!1}),l.state.trying_reconnect||(l.setState({placeholderText:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",placeholderNeed:1}),l.setPopout(null),l.setActivePanel("placeholder")),l.state.bridge_inited||(k.a.send("VKWebAppInit"),l.setState({bridge_inited:!0}))})),eo.onDisconnect((function(){console.log("Disconnected"),l.setState({connected:!1}),l.setPopout(null),2!==l.state.placeholderNeed&&(l.setState({placeholderText:""}),l.setActivePanel("placeholder")),l.state.bridge_inited||(k.a.send("VKWebAppInit"),l.setState({bridge_inited:!0}))})),e.next=66,new Promise((function(e){return eo.onConnect(Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.setState({connected:!0,placeholderNeed:0});case 2:return console.log("Connected"),l.setActivePanel("main"),t.next=6,l.updateData();case 6:a&&!n?setTimeout((function(){l.go("group_vk")}),1e3):r&&!n?setTimeout((function(){l.setActiveModal("new-update")}),1e3):n||l.onChangeHash(),e(!0);case 8:case"end":return t.stop()}}),t)}))))}));case 66:clearInterval($r),$r=setInterval((function(){for(var e=l.state,t=e.banners,n=e.bannersCount,a=function(e){k.a.send("VKWebAppGetAds",{}).then((function(n){!1!==t[e]&&(t[e]=n)}))},r=0;r<n;r++)a(r);l.setState({banners:t})}),3e3),Z("stats.join");case 69:case"end":return e.stop()}}),e,this,[[47,53]])})));return function(){return e.apply(this,arguments)}}()},{key:"setAlert",value:function(e,t,n){var a=this;this.setPopout(r.a.createElement(c.d,{actions:n,actionsLayout:"vertical",onClose:function(){return a.setPopout(null)},header:e,text:t}))}},{key:"connect",value:function(){var e=this;console.log("Try to connect..."),eo.connect("https://draw.avocado.special.vk-apps.com",N()),setTimeout((function(){e.state.banned||(e.state.dataUpdated||e.updateData(),e.state.connected||(clearInterval(Qr),Qr=setInterval((function(){e.state.connected?clearInterval(Qr):eo.connect("https://draw.avocado.special.vk-apps.com",N())}),1e3)))}),1e3)}},{key:"updateData",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){eo.call("users.getTopNumber",{},(function(e){t.setState({top_number:e.response})})),eo.call("users.getTop",{},function(){var e=Object(p.a)(u.a.mark((function e(n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.response.map((function(e){return e.id})),e.next=3,ne(a);case 3:t.setState({top:n.response.map((function(e){return qr({},ee[e.id],{},e)}))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),eo.call("users.get",{},(function(n){t.setState({user:n.response}),eo.call("games.getByDrawerId",{id:t.state.vk_user.id,limit:10},(function(n){t.setState({gamesAsDrawer:n.response});var a=n.response.map((function(e){return e.drawerId}));eo.call("games.getByWinnerId",{id:t.state.vk_user.id,limit:10},(function(n){ne(a=[].concat(Object(m.a)(a),Object(m.a)(n.response.map((function(e){return e.drawerId}))))),setTimeout(Object(p.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.setState({gamesAsWinner:n.response,dataUpdated:!0});case 2:e(!0);case 3:case"end":return a.stop()}}),a)}))),400)}))}))}))}));case 2:return this.setState({time:Date.now()}),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onChangeHash",value:function(){var e=this;if(window.location.hash.startsWith("#"))for(var t=window.location.hash.substring(1),n=0,a=[{key:"author",do:function(t){e.setPopout(r.a.createElement(c.C,null)),e.socket.call("users.getById",{id:t},function(){var n=Object(p.a)(u.a.mark((function n(a){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===a.response){n.next=8;break}return n.next=3,ne([t]);case 3:return n.next=5,e.setState({author:a.response});case 5:e.socket.call("games.getByDrawerId",{id:t},function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({author_works:n.response});case 2:setTimeout((function(){e.go("author"),e.setPopout(null)}),400);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.next=9;break;case 8:e.setPopout(null);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"picture",do:function(){var t=Object(p.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a=parseInt(n),e.setPopout(r.a.createElement(c.C,null)),e.socket.call("games.getById",{id:a},function(){var t=Object(p.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===n.response){t.next=9;break}return a=n.response.drawerId,t.next=4,ne([a]);case 4:return t.next=6,e.setState({gamesAsAuthor:[n.response],like_currentPictureSelected:0,like_method:"",like_param:"gamesAsAuthor",like_user_id:a});case 6:setTimeout((function(){e.go("picture_info"),e.setPopout(null)}),400),t.next=10;break;case 9:e.setPopout(null);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(o){console.error(o)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"lobby",do:function(t){e.setPopout(r.a.createElement(c.C,null)),e.socket.call("friends.joinLobby",{owner_id:parseInt(t),url:!0},function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.response){t.next=8;break}return t.next=3,ne(n.response.members);case 3:return t.next=5,e.setState({friend_lobby:n.response});case 5:setTimeout((function(){e.go("friend_lobby"),e.setPopout(null)}),400),t.next=9;break;case 8:e.setPopout(null);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}];n<a.length;n++){var o=a[n];t.startsWith(o.key)&&o.do(t.substring(o.key.length))}}},{key:"_tags",value:function(){return[["tag_interesting",r.a.createElement(se.a,null),"\u0418\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u0440","\u041c\u0435\u0442\u043a\u0430 \u0432\u044b\u0434\u0430\u0451\u0442\u0441\u044f \u043f\u0440\u0438 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0438 1000 \u043b\u0430\u0439\u043a\u043e\u0432"],["tag_rater",r.a.createElement(ce.a,null),"\u041e\u0446\u0435\u043d\u0449\u0438\u043a","\u041e\u0446\u0435\u043d\u0438\u0442\u044c 100 \u043a\u0430\u0440\u0442\u0438\u043d"],["tag_agitator",r.a.createElement(ie.a,null),"\u0410\u0433\u0438\u0442\u0430\u0442\u043e\u0440","\u0420\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u043e \u0441\u0432\u043e\u0438\u0445 \u0440\u0430\u0431\u043e\u0442\u0430\u0445 \u0434\u0440\u0443\u0437\u044c\u044f\u043c (10 \u0440\u0430\u0437)"],["tag_rapidfire",r.a.createElement(le.a,null),"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u0440\u0435\u043b","\u041c\u0435\u0442\u043a\u0430 \u0432\u044b\u0434\u0430\u0451\u0442\u0441\u044f \u0437\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u0443, \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043d\u043d\u0443\u044e \u0438 \u0443\u0433\u0430\u0434\u0430\u043d\u043d\u0443\u044e \u0437\u0430 5 \u0441\u0435\u043a\u0443\u043d\u0434"],["tag_turtle",r.a.createElement(ue.a,{width:20,height:20}),"\u0427\u0435\u0440\u0435\u043f\u0430\u0445\u0430","\u041c\u0435\u0442\u043a\u0430 \u0432\u044b\u0434\u0430\u0451\u0442\u0441\u044f \u0437\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u0443, \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043d\u043d\u0443\u044e \u0438 \u0443\u0433\u0430\u0434\u0430\u043d\u043d\u0443\u044e \u0437\u0430 85-90 \u0441\u0435\u043a\u0443\u043d\u0434"],["tag_creative",r.a.createElement(pe.a,null),"\u041a\u0440\u0435\u0430\u0442\u0438\u0432\u043d\u044b\u0439","\u041c\u0435\u0442\u043a\u0430 \u0432\u044b\u0434\u0430\u0451\u0442\u0441\u044f \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0435\u0439, \u0435\u0441\u043b\u0438 \u0442\u0430 \u043f\u043e\u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u0442\u0432\u043e\u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u044b \u043a\u0440\u0435\u0430\u0442\u0438\u0432\u043d\u044b\u043c\u0438"],["tag_banned",r.a.createElement(me.a,null),"\u041d\u0430\u0440\u0443\u0448\u0438\u0442\u0435\u043b\u044c","\u041c\u0435\u0442\u043a\u0430 \u0441\u0432\u0438\u0434\u0435\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0443\u0435\u0442 \u043e \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0438 \u043f\u0440\u0430\u0432\u0438\u043b \u0438\u0433\u0440\u044b"],["tag_veteran",r.a.createElement(de.a,null),"\u0412\u0435\u0442\u0435\u0440\u0430\u043d","\u0423 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430 \u044d\u0442\u043e\u0439 \u043c\u0435\u0442\u043a\u0438 \u0431\u043e\u043b\u044c\u0448\u0435 1.000 \u043a\u0430\u0440\u0442\u0438\u043d"],["tag_banana",r.a.createElement(St,null),"\u0411\u0430\u043d\u0430\u043d\u043e\u0432\u044b\u0439 \u043e\u0441\u0442\u0440\u043e\u0432","\u041d\u0430\u0440\u0438\u0441\u0443\u0439\u0442\u0435 100 \u0431\u0430\u043d\u0430\u043d\u043e\u0432"],["tag_smart",r.a.createElement(fe.a,null),"\u0423\u043c\u043d\u0438\u043a","\u0412\u043b\u0430\u0434\u0435\u043b\u0435\u0446 \u043c\u0435\u0442\u043a\u0438 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u043b \u0432 \u0441\u0443\u043c\u043c\u0435 100 \u0438\u0434\u0435\u0439 \u0438 \u0441\u043b\u043e\u0432"],["tag_psychic",r.a.createElement(he.a,null),"\u042d\u043a\u0441\u0442\u0440\u0430\u0441\u0435\u043d\u0441","\u0423\u0433\u0430\u0434\u0430\u0439\u0442\u0435, \u043a\u0430\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u0432\u044b\u043f\u0430\u043b\u043e \u0438\u0433\u0440\u043e\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043e\u043d \u043d\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0437\u0438\u043b \u043d\u0430 \u0445\u043e\u043b\u0441\u0442\u0435"]]}},{key:"_tag_modal",value:function(e){var t=this,n=this._tags().find((function(t){return t[0]===e}));return r.a.createElement(c.s,{key:e,id:e,onClose:function(){return t.setActiveModal(null)},icon:r.a.cloneElement(n[1],{width:56,height:56}),header:n[2],subheader:n[3],actions:r.a.createElement(c.h,{size:"l",mode:"gradient_blue",onClick:function(){return t.go("tags")}},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")})}},{key:"isNonScrollingElement",value:function(e){return["global_canvas","search"].indexOf(e)>-1}},{key:"render",value:function(){var e=this,t=this.state,n=t.activePanel,a=t.activeModal,o=t.popout,s=t.snackbar,i=t.isShowOnboard,l=(t.isShowVkGroup,t.vk_user),m=t.user,d=t.banned,f=t.placeholderText,h=t.gamesAsWinner,v=t.gamesAsDrawer,b=t.drawerId,g=t.winnerId,y=t.lobbyId,w=t.gameId,E=t.word,_=t.chooseWords,x=(t.like_picturesList,t.like_currentPictureSelected),O=t.like_method,C=t.like_param,S=t.like_user_id,j=t.isOnlineDrawing,P=t.friend_lobby,A=t.watchedShopItems,D=t.boughtShopItems,L=t.suggestions_type,T=t.suggestions_list,N=!(l&&m&&h&&v),M=r.a.createElement(c.v,{activeModal:a},this._tags().map((function(t){return e._tag_modal(t[0])})),r.a.createElement(c.s,{id:"new-update",onClose:function(){return e.setActiveModal(null)},icon:r.a.createElement(ve.a,null),header:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435",subheader:"\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u0432\u043d\u0435\u0441\u0435\u043d\u0438\u0435 \u043f\u043e\u043f\u0440\u0430\u0432\u043e\u043a \u0432 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0438\u0433\u0440\u044b.",actions:r.a.createElement(c.h,{size:"l",mode:"gradient_violet",onClick:function(){k.a.send("VKWebAppStorageSet",{key:"update_01062022",value:"1"}),e.setActiveModal(null),z("https://vk.com/@draw_app-update-01-06-2022")}},"\u0427\u0438\u0442\u0430\u0442\u044c")}),r.a.createElement(c.s,{id:ao,onClose:function(){return e.setActiveModal(null)},icon:r.a.createElement(be.a,null),header:"\u041d\u043e\u0432\u044b\u0439 \u0440\u0435\u0436\u0438\u043c",subheader:"\u0414\u0430\u0432\u0430\u0439 \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0443\u0447\u0438\u043c\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u0433\u043e\u0434\u044f\u0442\u0441\u044f \u0432 \u044d\u0442\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435.",actions:r.a.createElement(c.h,{size:"l",mode:"gradient_blue",onClick:function(){k.a.send("VKWebAppStorageSet",{key:"canvas_new_mode_onboard",value:"1"}),e.setState({isShowGlobalCanvasOnboard:!1}),e.setActiveModal(null),e.go("global_canvas_info")}},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0435")}),r.a.createElement(c.s,{id:ro,onClose:function(){return e.setActiveModal(null)},header:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",actions:[r.a.createElement(c.h,{size:"l",mode:"gradient_blue",onClick:function(){e._urlParams&&(window.location.search=e._urlParams,e.connect())}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")]},r.a.createElement(c.n,null,r.a.createElement(c.m,null,r.a.createElement(c.r,{defaultValue:window.location.search,onChange:function(t){return e._urlParams=t.target.value}})))),r.a.createElement(c.s,{id:no,onClose:function(){return e.setActiveModal(null)},icon:r.a.createElement(ge.a,{fill:"#E63902"}),header:"\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435",subheader:"\u0412\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 \u0443\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u043c\u0438\u043d\u0438-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. ".concat("\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u044d\u0448 (\u0447\u0435\u0440\u0435\u0437 \u0442\u0440\u0438 \u0442\u043e\u0447\u043a\u0438 \u0441\u043f\u0440\u0430\u0432\u0430 \u0432\u0432\u0435\u0440\u0445\u0443).")}),r.a.createElement(c.t,{id:"friend-lobby-settings",onClose:function(){return e.setActiveModal(null)},dynamicContentHeight:!0,header:r.a.createElement(c.u,{right:r.a.createElement(c.z,{onClick:function(){return e.setActiveModal(null)}},r.a.createElement(ye.a,null))},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")},r.a.createElement(c.l,{style:{paddingBottom:24}},r.a.createElement("div",{className:"Span"},"\u0412\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u043b\u043e\u0431\u0431\u0438"),r.a.createElement(c.D,{style:{marginTop:8},value:P.friendsOnly?"private":"public",onChange:function(t){P.friendsOnly="private"===t,e.setState({friend_lobby:P}),eo.call("friends.changeVisibility",{friendsOnly:P.friendsOnly})},options:[{label:"\u0414\u043b\u044f \u0432\u0441\u0435\u0445",value:"public"},{label:"\u0414\u043b\u044f \u0434\u0440\u0443\u0437\u0435\u0439",value:"private"}]}),(m.premium||m.admin)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Span",style:{marginTop:12}},"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b-\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432"),r.a.createElement(c.r,{style:{marginTop:8},placeholder:"\u0427\u0438\u0441\u043b\u043e (\u043c\u0430\u043a\u0441 500)",type:"number",defaultValue:20,min:2,max:500,onChange:function(e){eo.call("friends.changeMaxPlayers",{count:e.currentTarget.value})}})),!P.friendsOnly&&r.a.createElement(c.h,{style:{marginTop:12,width:"100%"},before:r.a.createElement(ke.a,null),size:"m",mode:"gradient_gray",stretched:!0,onClick:Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.send("VKWebAppShare",{link:"https://vk.com/drawapp#lobby".concat(m.id)});case 3:t.next=10;break;case 5:t.prev=5,t.t0=t.catch(0),k.a.send("VKWebAppCopyText",{text:"https://vk.com/drawapp#lobby".concat(m.id)}),e.setActiveModal(null),e.setSnackbar("\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430");case 10:case"end":return t.stop()}}),t,null,[[0,5]])})))},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u0438\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435"))));return r.a.createElement(c.J,{popout:o,modal:M},r.a.createElement(c.I,{animate:!F()},r.a.createElement(c.O,{style:{overflow:this.isNonScrollingElement(n)&&"hidden"},activePanel:"placeholder"!==n&&"banned"!==n?N?"connecting":i?"onboard":n:n,onSwipeBack:this.back,history:this.state.history},[{id:"onboard",component:r.a.createElement(Wn,{icon:r.a.createElement(Ce,null),title:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c",description:"\u0417\u0434\u0435\u0441\u044c \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0447\u0443\u0432\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0431\u044f \u0432 \u0440\u043e\u043b\u0438 \u043a\u0430\u043a \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a\u0430, \u0442\u0430\u043a \u0438 \u0428\u0435\u0440\u043b\u043e\u043a\u0430. \u0420\u0438\u0441\u0443\u0439\u0442\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u044b \u0438 \u0443\u0433\u0430\u0434\u044b\u0432\u0430\u0439\u0442\u0435 \u0447\u0443\u0436\u0438\u0435.",buttonIcon:!1,buttonText:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c",buttonMode:"primary_2",buttonOnClick:function(){k.a.send("VKWebAppStorageSet",{key:"onboard",value:"1"}),e.setState({isShowOnboard:!1})}})},{id:"connecting",component:r.a.createElement(Wn,{icon:r.a.createElement(Ce,null),title:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435",description:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443..."})},{id:"placeholder",component:r.a.createElement(Wn,{icon:r.a.createElement(Le,null),title:"\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u043e",description:f,buttonText:"\u041f\u0435\u0440\u0435\u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f",buttonMode:"primary_2",buttonOnClick:Object(p.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setActivePanel("connecting"),e.setState({trying_reconnect:!0}),n=0;case 3:if(!(n<5)){t.next=12;break}return e.connect(),t.next=7,I(1e3);case 7:if(!e.state.connected){t.next=9;break}return t.abrupt("break",12);case 9:n++,t.next=3;break;case 12:return t.next=14,e.setState({trying_reconnect:!1});case 14:e.connect();case 15:case"end":return t.stop()}}),t)})))})},{id:"main",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut,{t:this,time:this.state.time}),s)},{id:"suggestions",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(kr,{t:this}),s)},{id:"suggestions_idea",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(_r,{t:this}),s)},{id:"suggestions_word",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(Cr,{t:this}),s)},{id:"suggestions_list",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(Xr,{t:this,type:L,list:T}),s)},{id:"shop",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(Sa,{t:this,watchedShopItems:A,boughtShopItems:D}),s)},{id:"stats",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(_a,{t:this}),s)},{id:"gallery",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(Vt,{t:this}),s)},{id:"rating",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(Kt,{t:this}),s)},{id:"likes",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(Vn,{t:this}),s)},{id:"picture_info",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(na,{t:this,current:x,method:O,param:C,user_id:S}),s)},{id:"author",component:r.a.createElement(ca,{t:this})},{id:"search",component:r.a.createElement(Zt,{t:this})},{id:"game",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(Cn,{t:this,drawerId:b,lobbyId:y,online:j,chooseWords:_,word:E}),s)},{id:"global_canvas_history",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(fr,{t:this}),s)},{id:"global_canvas",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(Ja,{t:this}),s)},{id:"global_canvas_info",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(or,{t:this}),s)},{id:"result",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(Mn,{t:this,drawerId:b,winnerId:g,word:E,gameId:w}),s)},{id:"tags",component:r.a.createElement(ua,{t:this})},{id:"friends",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(da,{t:this}),s)},{id:"friend_lobby",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(ba,{t:this,friend_lobby:P}),s)},{id:"friend_lobby_settings",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(pr,{t:this,friend_lobby:P}),s)},{id:"group_vk",component:r.a.createElement(Wn,{icon:r.a.createElement(Be,null),title:"\u0421 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435\u043c!",description:"\u041d\u0435 \u0445\u043e\u0447\u0435\u0448\u044c \u0432\u0441\u0442\u0443\u043f\u0438\u0442\u044c \u0432 \u043d\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435? \u0418\u043c\u0435\u043d\u043d\u043e \u0442\u0430\u043c \u043f\u0443\u0431\u043b\u0438\u043a\u0443\u044e\u0442\u0441\u044f \u0432\u0441\u0435 \u043a\u0440\u0443\u0442\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f",buttonText:"\u0412\u0441\u0442\u0443\u043f\u0438\u0442\u044c",buttonOnClick:Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k.a.send("VKWebAppStorageSet",{key:"vk_group2",value:"1"}),e.setState({isShowVkGroup:!1}),t.prev=2,t.next=5,k.a.send("VKWebAppJoinGroup",{group_id:208964042});case 5:Z("stats.subscribe",{group_id:208964042}),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(2);case 10:e.back();case 11:case"end":return t.stop()}}),t,null,[[2,8]])}))),buttonMode:"gradient_gray",buttonBack:!0,t:this})},{id:"vk_donut_avocado",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(c.x,{separator:!1,left:r.a.createElement(c.y,{onClick:function(){return e.back()}})}),r.a.createElement("iframe",{src:"https://avocadoteam.github.io/app-sub-modal/?appearance=".concat(this.state.appearance,"&app=draw"),style:{height:F()?"102vh":"calc(100vh - 120px)",border:0},width:"100%"}))},{id:"vk_donut_blocked",component:r.a.createElement(Wn,{icon:r.a.createElement(Be,null),title:"\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043e",description:"\u0414\u043e\u0441\u0442\u0443\u043f \u043a \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u0443 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d. \u041e\u0436\u0438\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439 \u0432 \u043d\u0430\u0448\u0435\u0439 \u0433\u0440\u0443\u043f\u043f\u0435 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435.",buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438",buttonOnClick:function(){z("https://vk.com/draw_app")},buttonMode:"gradient_gray",buttonBack:!0,t:this})},{id:"vk_donut_ios",component:r.a.createElement(Wn,{icon:r.a.createElement(ct,null),title:"VK Donut",description:"\u041d\u0430 \u0412\u0430\u0448\u0435\u043c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0435 \u0434\u0430\u043d\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043d\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430. \u0423\u0442\u043e\u0447\u043d\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043c\u043e\u0436\u0435\u0442\u0435 \u0432 \u043d\u0430\u0448\u0435\u0439 \u0433\u0440\u0443\u043f\u043f\u0435.",buttonText:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c",buttonOnClick:function(){z("https://vk.com/draw_app")},buttonMode:"primary_2",buttonBack:!0,t:this})},{id:"banned",component:r.a.createElement(Wn,{icon:r.a.createElement(Be,null),title:"\u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430",description:"\u0412\u044b \u0431\u044b\u043b\u0438 \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0437\u0430 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b. \u0414\u0430\u0442\u0430 \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438: ".concat(new Date(d+864e5).toLocaleDateString("ru",{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric"})),buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0433\u0440\u0443\u043f\u043f\u0443",buttonOnClick:function(){z("https://vk.com/club208964042")},buttonMode:"gradient_gray",t:this})},{id:"suggestions_done",component:r.a.createElement(Wn,{icon:r.a.createElement(dt,null),title:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e! \u041c\u044b \u0443\u0447\u0442\u0451\u043c.",buttonBack:!0,buttonBackText:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f",t:this})},{id:"game_canceled",component:r.a.createElement(Wn,{icon:r.a.createElement(yt,null),title:"\u0418\u0433\u0440\u0430 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430",buttonBack:!1,buttonText:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e",buttonMode:"secondary",buttonOnClick:function(){return e.setActivePanel("main")},t:this})}].map((function(e,t){var n=e.id,a=e.component;return r.a.createElement(c.w,{id:n,key:"Panel__".concat(t)},a)})))))}}]),t}(r.a.Component);s.a.render(r.a.createElement(c.j,null,r.a.createElement(c.c,null,r.a.createElement(c.e,null,r.a.createElement(oo,null)))),document.getElementById("root"))}},[[384,1,2]]]);
//# sourceMappingURL=main.881745e8.chunk.js.map