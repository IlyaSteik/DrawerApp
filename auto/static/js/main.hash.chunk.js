(window.webpackJsonpminiapp=window.webpackJsonpminiapp||[]).push([[0],{337:function(e,t,a){},492:function(e,t,a){e.exports=a(685)},603:function(e,t,a){},604:function(e,t,a){},605:function(e,t,a){},624:function(e,t,a){},625:function(e,t,a){e.exports=a.p+"static/media/bp-background-3.cd124dfb.svg"},626:function(e,t,a){e.exports=a.p+"static/media/bp-background-2.3c862ec7.svg"},627:function(e,t,a){e.exports=a.p+"static/media/bp.cdd6efdf.svg"},628:function(e,t,a){var n={"./1.webp":629,"./10.webp":630,"./11.webp":631,"./12.webp":632,"./13.webp":633,"./2.webp":634,"./3.webp":635,"./4.webp":636,"./5.webp":637,"./6.webp":638,"./7.webp":639,"./8.webp":640,"./9.webp":641};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=628},629:function(e,t,a){e.exports=a.p+"static/media/1.0ef8c7e1.webp"},630:function(e,t,a){e.exports=a.p+"static/media/10.13a89991.webp"},631:function(e,t,a){e.exports=a.p+"static/media/11.e3ca71ae.webp"},632:function(e,t,a){e.exports=a.p+"static/media/12.0f4613b2.webp"},633:function(e,t,a){e.exports=a.p+"static/media/13.42cc85a0.webp"},634:function(e,t,a){e.exports=a.p+"static/media/2.5a026d4d.webp"},635:function(e,t,a){e.exports=a.p+"static/media/3.72b041a0.webp"},636:function(e,t,a){e.exports=a.p+"static/media/4.04114258.webp"},637:function(e,t,a){e.exports=a.p+"static/media/5.d4a749e3.webp"},638:function(e,t,a){e.exports=a.p+"static/media/6.6dd58558.webp"},639:function(e,t,a){e.exports=a.p+"static/media/7.8fcbd554.webp"},640:function(e,t,a){e.exports=a.p+"static/media/8.ade4c4f7.webp"},641:function(e,t,a){e.exports=a.p+"static/media/9.68fcbcf6.webp"},667:function(e,t,a){e.exports=a.p+"static/media/gifts_panel.d87a6156.png"},669:function(e,t){},670:function(e,t){},678:function(e,t){},681:function(e,t){},682:function(e,t){},683:function(e,t){},684:function(e,t,a){var n={"./Desktop.css":[686,3],"./Global.css":[337],"./Mobile.css":[687,4]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return Promise.all(t.slice(1).map(a.e)).then((function(){return a.t(r,7)}))}r.keys=function(){return Object.keys(n)},r.id=684,e.exports=r},685:function(e,t,a){"use strict";a.r(t);a(493),a(527),a(529),a(531),a(533),a(534),a(535),a(536),a(537),a(538),a(541),a(542),a(544),a(545),a(546),a(547),a(548),a(549),a(551),a(552),a(553),a(554),a(555),a(556),a(559),a(560),a(561),a(562),a(563),a(565),a(567),a(569),a(571),a(572),a(573),a(574),a(575),a(576),a(578),a(580);var n=a(5),r=a(12),o=a(17),s=a(13),c=a(16),i=a(1),l=a.n(i),u=a(199),p=a.n(u),d=(a(589),a(590),a(15)),m=(a(603),a(604),a(605),a(27)),h=a.n(m),f=a(50),v=a(2),b=a.n(v),g=a(9),E=a(18),y=a(37),k=(a(337),a(202)),w=a.n(k),_=a(266),C=a(83);a(302);var x=["SF Pro Text","SF Pro Text Heavy","SF Pro Text Semibold","SF Pro Display","SF Pro Display Bold","SF Pro Display Semibold","SF Pro Display Medium","SF Pro Rounded","SF Pro Rounded Semibold","SF Pro Rounded Bold","SF UI Display","SF UI Text","TT Commons","TT Commons Bold","TT Commons Demibold","Manrope ExtraBold"];function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=!0,a=!1,n=void 0;try{for(var r,o=function(){var e=r.value,t=document.createElement("span");t.style.position="fixed",t.style.fontFamily=e,t.style.opacity="0",t.innerText="test",document.body.appendChild(t),t.onload=function(){return t.remove()}},s=e[Symbol.iterator]();!(t=(r=s.next()).done);t=!0)o()}catch(c){a=!0,n=c}finally{try{t||null==s.return||s.return()}finally{if(a)throw n}}}function O(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function S(e,t,a){return"#"+O(e)+O(t)+O(a)}function j(e,t,a,n){var r=e.replace("#","").match(/.{2}/g),o=t.replace("#","").match(/.{2}/g),s=a/n,c=1-s;return S(Math.floor(("0x"+r[0])*c+("0x"+o[0])*s),Math.floor(("0x"+r[1])*c+("0x"+o[1])*s),Math.floor(("0x"+r[2])*c+("0x"+o[2])*s))}function P(e){return new Promise((function(t){return setTimeout(t,e)}))}function A(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("object"!==typeof t)return"".concat(e," ").concat(t);if(void 0!==e){var n=[];return n[e]||(n[e]=e%100>4&&e%100<20?2:[2,0,1,1,1,2][Math.min(e%10,5)]),(a?e+" ":"")+t[n[e]]}}function I(e){try{return e.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}catch(t){return 0}}function D(e,t){return Math.floor(Math.random()*(t-e+1))+e}function F(e){var t,a,n,r,o,s;return s=parseInt(Math.floor(e/1e3)),o=parseInt(Math.floor(s/60)),r=parseInt(Math.floor(o/60)),n=parseInt(s%60),a=parseInt(o%60),{hours:t=parseInt(r%24),minutes:a,seconds:n,str:{hours:t.toLocaleString("ru",{minimumIntegerDigits:2}),minutes:a.toLocaleString("ru",{minimumIntegerDigits:2}),seconds:n.toLocaleString("ru",{minimumIntegerDigits:2})}}}function N(){var e=window.location.search.length>0&&JSON.parse('{"'+decodeURI(window.location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}');return e&&e.vk_chat_id&&(e.vk_chat_id=decodeURIComponent(e.vk_chat_id)),e}function W(){return"mobile_iphone"===N().vk_platform}function T(){return"desktop_web"===N().vk_platform}function M(e,t){var a=document.createElement("a");a.href=e,t&&(a.download=t),a.target="_blank",a.click(),a.remove()}function B(e){return window.location.origin.includes("localhost")?e:(7985972===parseInt(N().vk_app_id)?T()?"https://ilyasteik.github.io/DrawerApp/auto/":"https://ilyasteik.github.io/DrawerApp/auto":window.location.origin+window.location.pathname.replace("/index.html",""))+e.substring(1)}function U(e){return G.apply(this,arguments)}function G(){return(G=Object(g.a)(b.a.mark((function e(t){var a,n,r,o,s=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(s.length>1&&void 0!==s[1])||s[1],n=document.createElement("canvas"),r=n.getContext("2d"),(o=new Image).src=(a?"https://vds2153919.my-ihor.ru:8088/":"")+t,o.crossOrigin="Anonymous",e.next=6,new Promise((function(e){return o.onload=function(){n.width=this.width,n.height=this.height,r.drawImage(o,0,0,this.width,this.height),e(n.toDataURL("image/png"))}}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0,width:0,height:0};a="number"===typeof a?new Array(4).fill(a):a,e.save(),e.beginPath(),e.moveTo(r.x+a[0],r.y),e.lineTo(r.x+r.width-a[1],r.y),e.quadraticCurveTo(r.x+r.width,r.y,r.x+r.width,r.y+a[1]),e.lineTo(r.x+r.width,r.y+r.height-a[2]),e.quadraticCurveTo(r.x+r.width,r.y+r.height,r.x+r.width-a[2],r.y+r.height),e.lineTo(r.x+a[3],r.y+r.height),e.quadraticCurveTo(r.x,r.y+r.height,r.x,r.y+r.height-a[3]),e.lineTo(r.x,r.y+a[0]),e.quadraticCurveTo(r.x,r.y,r.x+a[0],r.y),e.closePath();var o=n?n.x:r.x,s=n?n.y:r.y,c=n?n.width:r.width,i=n?n.height:r.height;e.clip(),e.drawImage(t,o,s,c,i),e.restore()}function z(e){return V.apply(this,arguments)}function V(){return(V=Object(g.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=document.createElement("img")).crossOrigin="anonymous",a.src=t,e.next=5,new Promise((function(e){return a.onload=function(){return e()}}));case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t){return H.apply(this,arguments)}function H(){return(H=Object(g.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return X.apply(this,arguments)}function X(){return(X=Object(g.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target||window.event.srcElement,n=a.files,!(FileReader&&n&&n.length)){e.next=7;break}return e.next=4,new Promise(function(){var e=Object(g.a)(b.a.mark((function e(t){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n[0],(r=new FileReader).onload=Object(g.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.type.includes("image")?((n=new Image).src=r.result,n.onload=Object(g.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(C.createCanvas)(n.width,n.height),a.getContext("2d").drawImage(n,0,0,n.width,n.height),t({image:n,data:a.toDataURL("image/png")});case 3:case"end":return e.stop()}}),e)})))):console.error("File type not image");case 1:case"end":return e.stop()}}),e)}))),e.next=4,r.readAsDataURL(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 7:console.error("UNKNOWN ERROR");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=parseInt(e.substring(1),16),a=t>>16&255,n=t>>8&255,r=t>>0&255;return{r:a,g:n,b:r,arr:[a,n,r]}}function J(){var e=Z(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"");return.2126*e.r+.7152*e.g+.0722*e.b<50}function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q={};function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(g.a)(b.a.mark((function e(t){var a,n,r,o,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=Object(E.a)(new Set(t.filter((function(e){return void 0===Q[e]&&void 0!==e&&0!==e})).map((function(e){return"number"===typeof e?e:e.replace("@","").replace("id","").replace("vk.com/","").replace("http://","").replace("https://","")}))))).length>0)){e.next=11;break}n=[],r=b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re("users.getVKd",{user_ids:a.slice(100*t,100*t+100).join(","),d:"t"});case 2:if(null!==(r=e.sent.response)){e.next=7;break}return e.next=6,new Promise((function(e){var n,r=0,o=!1;n=setInterval(Object(g.a)(b.a.mark((function s(){var c;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(o){s.next=8;break}return o=!0,r++,s.next=5,re("users.getVKd",{user_ids:a.slice(100*t,100*t+100).join(","),d:"t"});case 5:null!==(c=s.sent.response)?(e(c),clearInterval(n)):r>=10&&(e([]),clearInterval(n)),o=!1;case 8:case"end":return s.stop()}}),s)}))),400)}));case 6:r=e.sent;case 7:n=n.concat(r);case 8:case"end":return e.stop()}}),e)})),o=0;case 5:if(!(o<Math.floor(a.length/100)+1)){e.next=10;break}return e.delegateYield(r(o),"t0",7);case 7:o++,e.next=5;break;case 10:for(s=0;s<n.length;s++)c=n[s],Q[c.id]=c;case 11:return e.abrupt("return",t.map((function(e){return Q[e]||Q[Object.keys(Q).find((function(t){return Q[t].screen_name===e}))]})));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return oe.apply(this,arguments)}function oe(){return(oe=Object(g.a)(b.a.mark((function e(t){var a,n,r,o,s,c=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},n=0,r=$({},N(),{},a),o="?"+Object.keys(r).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])})).join("&"),s="https://draw.avocado.special.vk-apps.com/api/".concat(t).concat(o),e.next=5,new Promise((function(e,t){var a,r=!1;a=setInterval((function(){r||(r=!0,fetch(s,{method:"GET"}).then((function(e){return e.json()})).then((function(t){clearInterval(a),r=!1,e(t)})).catch((function(t){++n>=5&&(e({error:null}),clearInterval(a)),r=!1})))}),400)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se=a(753),ce=a(754),ie=a(755),le=a(756),ue=a(757),pe=a(758),de=a(759),me=a(760),he=a(761),fe=a(762),ve=a(763),be=a(764),ge=a(765),Ee=a(766),ye=a(767),ke=a(691);function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function _e(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Ce=l.a.createElement("g",{clipPath:"url(#clip0_858_3679)"},l.a.createElement("path",{d:"M0 24.6154C0 11.0207 11.0207 0 24.6154 0H71.3846C84.9793 0 96 11.0207 96 24.6154V71.3846C96 84.9793 84.9793 96 71.3846 96H24.6154C11.0207 96 0 84.9793 0 71.3846V24.6154Z",fill:"#FF5277"}),l.a.createElement("path",{d:"M28.3181 68.045L26.2154 71.1991L29.9735 71.6954C32.6907 72.0543 37.0877 72.075 41.7379 71.0403C46.3888 70.0054 51.4965 67.8676 55.3771 63.7366C60.5026 58.2804 62.0551 52.8666 60.7191 47.6924C60.2733 45.966 60.5575 44.5507 61.3039 43.7662L122.862 -20.9368C123.412 -21.5146 124.023 -22.3537 124.337 -23.3354C124.662 -24.3505 124.758 -25.9407 123.499 -27.2004C122.239 -28.4601 120.649 -28.3636 119.634 -28.0388C118.652 -27.7247 117.813 -27.1137 117.235 -26.564L53.3187 34.243C52.3591 35.1558 50.4825 35.3173 47.9766 34.6943C43.753 33.6441 39.2764 34.9713 36.054 37.5731C32.8031 40.1977 30.5646 44.3474 31.2873 49.1174C31.9764 53.6651 32.207 56.8582 31.8061 59.6644C31.4153 62.4 30.3994 64.923 28.3181 68.045Z",fill:"white",stroke:"white",strokeWidth:4.72217})),xe=l.a.createElement("defs",null,l.a.createElement("clipPath",{id:"clip0_858_3679"},l.a.createElement("path",{d:"M0 24.6154C0 11.0207 11.0207 0 24.6154 0H71.3846C84.9793 0 96 11.0207 96 24.6154V71.3846C96 84.9793 84.9793 96 71.3846 96H24.6154C11.0207 96 0 84.9793 0 71.3846V24.6154Z",fill:"white"}))),Le=function(e){var t=e.svgRef,a=e.title,n=_e(e,["svgRef","title"]);return l.a.createElement("svg",we({width:96,height:96,viewBox:"0 0 96 96",fill:"none",ref:t},n),a?l.a.createElement("title",null,a):null,Ce,xe)},Oe=l.a.forwardRef((function(e,t){return l.a.createElement(Le,we({svgRef:t},e))}));a.p;function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function je(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Pe=l.a.createElement("rect",{width:96,height:96,rx:24.6154,fill:"#FF5277"}),Ae=l.a.createElement("path",{d:"M25.708 25.6877L24.7077 24.1872L26.4955 23.9511C27.7882 23.7804 29.88 23.7705 32.0923 24.2628C34.3048 24.7551 36.7347 25.7721 38.5809 27.7374C41.0193 30.3331 41.7578 32.9086 41.1222 35.3702C40.9102 36.1915 41.0454 36.8648 41.4005 37.238L70.6858 68.0194C70.9474 68.2943 71.2381 68.6935 71.3875 69.1605C71.542 69.6435 71.5879 70.4 70.9886 70.9992C70.3894 71.5985 69.6329 71.5526 69.1499 71.3981C68.6829 71.2487 68.2837 70.958 68.0088 70.6965L37.6016 41.7685C37.1451 41.3342 36.2523 41.2574 35.0602 41.5538C33.0509 42.0534 30.9213 41.422 29.3882 40.1843C27.8417 38.9357 26.7767 36.9615 27.1205 34.6922C27.4484 32.5287 27.5581 31.0097 27.3674 29.6747C27.1814 28.3733 26.6981 27.173 25.708 25.6877Z",fill:"#E2E2E2",stroke:"#E2E2E2",strokeWidth:2.2465}),Ie=l.a.createElement("path",{d:"M70.3452 25.6877L71.3456 24.1872L69.5577 23.9511C68.265 23.7804 66.1732 23.7705 63.961 24.2628C61.7484 24.7551 59.3185 25.7721 57.4723 27.7374C55.034 30.3331 54.2954 32.9086 54.931 35.3702C55.1431 36.1915 55.0078 36.8648 54.6528 37.238L25.3674 68.0194C25.1059 68.2943 24.8152 68.6935 24.6657 69.1605C24.5112 69.6435 24.4653 70.4 25.0646 70.9992C25.6639 71.5985 26.4204 71.5526 26.9033 71.3981C27.3703 71.2487 27.7695 70.958 28.0444 70.6965L58.4516 41.7685C58.9081 41.3342 59.8009 41.2574 60.993 41.5538C63.0023 42.0534 65.132 41.422 66.665 40.1843C68.2115 38.9357 69.2765 36.9615 68.9327 34.6922C68.6049 32.5287 68.4951 31.0097 68.6859 29.6747C68.8718 28.3733 69.3551 27.173 70.3452 25.6877Z",fill:"white",stroke:"white",strokeWidth:2.2465}),De=function(e){var t=e.svgRef,a=e.title,n=je(e,["svgRef","title"]);return l.a.createElement("svg",Se({width:96,height:96,viewBox:"0 0 96 96",fill:"none",ref:t},n),a?l.a.createElement("title",null,a):null,Pe,Ae,Ie)},Fe=l.a.forwardRef((function(e,t){return l.a.createElement(De,Se({svgRef:t},e))}));a.p;function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function We(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Te=l.a.createElement("g",{clipPath:"url(#clip0_859_3936)"},l.a.createElement("path",{d:"M0 24.6154C0 11.0207 11.0207 0 24.6154 0H71.3846C84.9793 0 96 11.0207 96 24.6154V71.3846C96 84.9793 84.9793 96 71.3846 96H24.6154C11.0207 96 0 84.9793 0 71.3846V24.6154Z",fill:"#4E5051"}),l.a.createElement("path",{d:"M28.3181 68.045L26.2154 71.1991L29.9735 71.6954C32.6907 72.0543 37.0877 72.075 41.7379 71.0403C46.3888 70.0054 51.4965 67.8676 55.3771 63.7366C60.5026 58.2804 62.0551 52.8666 60.7191 47.6924C60.2733 45.966 60.5575 44.5507 61.3039 43.7662L122.862 -20.9368C123.412 -21.5146 124.023 -22.3537 124.337 -23.3354C124.662 -24.3505 124.758 -25.9407 123.499 -27.2004C122.239 -28.4601 120.649 -28.3636 119.634 -28.0388C118.652 -27.7247 117.813 -27.1137 117.235 -26.564L53.3187 34.243C52.3591 35.1558 50.4825 35.3173 47.9766 34.6943C43.753 33.6441 39.2764 34.9713 36.054 37.5731C32.8031 40.1977 30.5646 44.3474 31.2873 49.1174C31.9764 53.6651 32.207 56.8582 31.8061 59.6644C31.4153 62.4 30.3994 64.923 28.3181 68.045Z",fill:"white",stroke:"white",strokeWidth:4.72217})),Me=l.a.createElement("defs",null,l.a.createElement("clipPath",{id:"clip0_859_3936"},l.a.createElement("path",{d:"M0 24.6154C0 11.0207 11.0207 0 24.6154 0H71.3846C84.9793 0 96 11.0207 96 24.6154V71.3846C96 84.9793 84.9793 96 71.3846 96H24.6154C11.0207 96 0 84.9793 0 71.3846V24.6154Z",fill:"white"}))),Be=function(e){var t=e.svgRef,a=e.title,n=We(e,["svgRef","title"]);return l.a.createElement("svg",Ne({width:96,height:96,viewBox:"0 0 96 96",fill:"none",ref:t},n),a?l.a.createElement("title",null,a):null,Te,Me)},Ue=l.a.forwardRef((function(e,t){return l.a.createElement(Be,Ne({svgRef:t},e))}));a.p;function Ge(){return(Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Re(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ze=l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48 96C74.5097 96 96 74.5097 96 48C96 21.4903 74.5097 0 48 0C21.4903 0 0 21.4903 0 48C0 74.5097 21.4903 96 48 96ZM47.662 60.169C54.5694 60.169 60.169 54.5694 60.169 47.662C60.169 40.7545 54.5694 35.1549 47.662 35.1549C40.7545 35.1549 35.1549 40.7545 35.1549 47.662C35.1549 54.5694 40.7545 60.169 47.662 60.169Z",fill:"#FF66AC"}),Ve=l.a.createElement("rect",{x:18.9297,y:18.7441,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-6.94641 18.9297 18.7441)",fill:"#BEDBFB"}),Ke=l.a.createElement("rect",{x:83.8311,y:49.8428,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-6.94641 83.8311 49.8428)",fill:"#BEDBFB"}),He=l.a.createElement("rect",{x:41.4331,y:78.4224,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(57.5878 41.4331 78.4224)",fill:"#BEDBFB"}),Ye=l.a.createElement("rect",{x:33.3269,y:62.873,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(22.9881 33.3269 62.873)",fill:"#FFFEFF"}),Xe=l.a.createElement("rect",{x:29.564,y:41.9155,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(62.1939 29.564 41.9155)",fill:"#FFFEFF"}),Ze=l.a.createElement("rect",{x:71.4856,y:43.2856,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(23.3091 71.4856 43.2856)",fill:"#FFFEFF"}),Je=l.a.createElement("rect",{x:48.676,y:10.3862,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-34.0862 48.676 10.3862)",fill:"#FFFEFF"}),qe=l.a.createElement("rect",{x:36.8477,y:20.8916,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-94.8165 36.8477 20.8916)",fill:"#FDDD64"}),$e=l.a.createElement("rect",{x:15.5493,y:33.4668,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-14.5043 15.5493 33.4668)",fill:"#FDDD64"}),Qe=l.a.createElement("rect",{x:14.8733,y:68.1821,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-77.2958 14.8733 68.1821)",fill:"#FDDD64"}),et=l.a.createElement("rect",{x:66.9297,y:68.2461,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-55.544 66.9297 68.2461)",fill:"#FDDD64"}),tt=l.a.createElement("rect",{x:71.6018,y:33.5327,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-98.7318 71.6018 33.5327)",fill:"#FDDD64"}),at=l.a.createElement("rect",{x:64.0173,y:21.5381,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-106.38 64.0173 21.5381)",fill:"#FD0C7D"}),nt=l.a.createElement("rect",{x:10.2402,y:59.1685,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-149.075 10.2402 59.1685)",fill:"#FD0C7D"}),rt=l.a.createElement("rect",{x:56.2144,y:71.3013,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(132.748 56.2144 71.3013)",fill:"#FD0C7D"}),ot=l.a.createElement("rect",{x:63.7732,y:82.1592,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-152.683 63.7732 82.1592)",fill:"#928BFB"}),st=l.a.createElement("rect",{x:29.0703,y:31.5825,width:4.05634,height:7.43662,rx:2.02817,transform:"rotate(-72.2881 29.0703 31.5825)",fill:"#928BFB"}),ct=function(e){var t=e.svgRef,a=e.title,n=Re(e,["svgRef","title"]);return l.a.createElement("svg",Ge({width:96,height:96,viewBox:"0 0 96 96",fill:"none",ref:t},n),a?l.a.createElement("title",null,a):null,ze,Ve,Ke,He,Ye,Xe,Ze,Je,qe,$e,Qe,et,tt,at,nt,rt,ot,st)},it=l.a.forwardRef((function(e,t){return l.a.createElement(ct,Ge({svgRef:t},e))}));a.p;function lt(){return(lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ut(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var pt=l.a.createElement("rect",{width:96,height:96,rx:24.6153846,fill:"#FF5277"}),dt=l.a.createElement("path",{d:"M69.4961 32.3131C67.7658 30.5828 64.9603 30.5828 63.23 32.3131L41.5507 53.9924L33.1638 45.6054C31.4335 43.8751 28.628 43.8751 26.8977 45.6054C25.1674 47.3358 25.1674 50.1412 26.8977 51.8715L38.4177 63.3915C40.148 65.1218 42.9534 65.1218 44.6838 63.3915L69.4961 38.5792C71.2264 36.8489 71.2264 34.0434 69.4961 32.3131Z",fill:"white"}),mt=function(e){var t=e.svgRef,a=e.title,n=ut(e,["svgRef","title"]);return l.a.createElement("svg",lt({width:96,height:96,viewBox:"0 0 96 96",fill:"none",ref:t},n),a?l.a.createElement("title",null,a):null,pt,dt)},ht=l.a.forwardRef((function(e,t){return l.a.createElement(mt,lt({svgRef:t},e))}));a.p;function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function vt(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var bt=l.a.createElement("rect",{width:96,height:96,rx:24.6154,fill:"#4E5051"}),gt=l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.6248 27.1505C48.0348 27.0664 47.473 27.0664 46.8829 27.1505C46.3584 27.2254 45.9121 27.3391 45.0122 27.633L33.1831 31.5751C31.8046 32.0346 30.8748 33.3247 30.8748 34.7777V50.4403C30.8748 58.7152 35.9509 65.0047 45.773 69.1798C47.0388 69.7179 48.469 69.7179 49.7348 69.1798L50.3564 68.9099C59.7745 64.7324 64.633 58.5328 64.633 50.4403V34.7777C64.633 33.3247 63.7032 32.0346 62.3247 31.5751L50.813 27.7379C49.6938 27.3648 49.2076 27.2337 48.6248 27.1505ZM47.3598 30.4925C47.6335 30.4535 47.8742 30.4535 48.148 30.4925L48.3532 30.5274C48.6019 30.577 48.9041 30.6636 49.4809 30.8529L61.2572 34.7777V50.4403C61.2572 57.0667 57.275 62.1481 48.9997 65.8188L48.4022 66.0782C47.9923 66.2524 47.5155 66.2524 47.0936 66.073C38.4215 62.3868 34.2506 57.2188 34.2506 50.4403V34.7777L45.7622 30.9405C46.7047 30.6263 47.0224 30.5407 47.3598 30.4925ZM43.0397 41.1447C42.3805 40.4856 41.3118 40.4856 40.6527 41.1447C39.9935 41.8039 39.9935 42.8726 40.6527 43.5318L45.3668 48.246L40.6527 52.9601C39.9935 53.6193 39.9935 54.688 40.6527 55.3472C41.3118 56.0064 42.3805 56.0064 43.0397 55.3472L47.7539 50.633L52.468 55.3472C53.1272 56.0064 54.1959 56.0064 54.8551 55.3472C55.5143 54.688 55.5143 53.6193 54.8551 52.9601L50.1409 48.246L54.8551 43.5318C55.5143 42.8726 55.5143 41.8039 54.8551 41.1447C54.1959 40.4856 53.1272 40.4856 52.468 41.1447L47.7539 45.8589L43.0397 41.1447Z",fill:"white"}),Et=function(e){var t=e.svgRef,a=e.title,n=vt(e,["svgRef","title"]);return l.a.createElement("svg",ft({width:96,height:96,viewBox:"0 0 96 96",fill:"none",ref:t},n),a?l.a.createElement("title",null,a):null,bt,gt)},yt=l.a.forwardRef((function(e,t){return l.a.createElement(Et,ft({svgRef:t},e))}));a.p;function kt(){return(kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function wt(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var _t=l.a.createElement("rect",{y:.5,width:20,height:20,rx:10,fill:"#474747"}),Ct=l.a.createElement("path",{d:"M6.14298 12.5226C4.74046 12.3375 4.91785 13.193 5.18186 13.6439C5.21637 13.7062 5.37764 13.9198 5.55563 14.0977C5.73361 14.2757 6.14298 14.5249 7.26428 14.9966C8.38558 15.4682 9.88066 15.2813 10.0764 15.2368C10.2722 15.1923 12.9509 14.6495 14.2858 12.2823C15.3537 10.3885 14.9918 8.09965 14.6773 7.19193C14.2235 5.97273 13.1378 6.69357 13.1556 6.89826C13.1734 7.10294 12.9865 7.85937 12.8352 8.31323C12.6839 8.76709 12.7462 8.91838 11.5804 10.369C10.4146 11.8195 7.89613 12.7539 6.14298 12.5226Z",fill:"url(#paint0_linear_1078_7766)"}),xt=l.a.createElement("defs",null,l.a.createElement("linearGradient",{id:"paint0_linear_1078_7766",x1:0,y1:10.9054,x2:8.74064,y2:20.8258,gradientUnits:"userSpaceOnUse"},l.a.createElement("stop",{stopColor:"#FFB73D"}),l.a.createElement("stop",{offset:1,stopColor:"#FFA000"}))),Lt=function(e){var t=e.svgRef,a=e.title,n=wt(e,["svgRef","title"]);return l.a.createElement("svg",kt({width:20,height:21,viewBox:"0 0 20 21",fill:"none",ref:t},n),a?l.a.createElement("title",null,a):null,_t,Ct,xt)},Ot=l.a.forwardRef((function(e,t){return l.a.createElement(Lt,kt({svgRef:t},e))})),St=(a.p,a(699)),jt=a(700),Pt=a(701),At=a(702),It=a(703),Dt=a(704),Ft=a(705),Nt=a(706),Wt=a(707),Tt=a(692),Mt=(a(624),function(e){function t(e){var a;Object(n.a)(this,t),a=Object(o.a)(this,Object(s.a)(t).call(this,e));for(var r=[],c=1;c<=100;c++)100===c?r.push("\u041a\u0440\u0438\u043f\u0442\u043e"):c%25===0?r.push("\u041b\u0435\u0433\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439 \u043a\u0435\u0439\u0441"):c%15===0?r.push("\u0421\u043a\u0438\u043d"):c%4===0?r.push("\u042d\u043f\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043a\u0435\u0439\u0441"):r.push("\u041e\u0431\u044b\u0447\u043d\u044b\u0439 \u043a\u0435\u0439\u0441");return a.state={bp_items:r},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{onClick:this.props.onClick,className:"BattlePassCard",style:{background:"url(".concat(this.props.user.bp&&this.props.user.bpLvl>=100?a(625):this.props.user.bp?a(626):"","), var(--card_background)"),backgroundRepeat:"no-repeat",backgroundPositionX:-19,backgroundPositionY:-43.41}},l.a.createElement("img",{className:"BattlePassCard_Icon",src:a(627),alt:"bp",width:42,height:38.25}),l.a.createElement("div",{className:"BattlePassCard_Info"},l.a.createElement("div",null,"\u0411\u043e\u0435\u0432\u043e\u0439 \u043f\u0440\u043e\u043f\u0443\u0441\u043a"),l.a.createElement("div",null,this.props.user.bp?this.props.user.bpLvl>=100?"\u0412\u0441\u0435 \u043d\u0430\u0433\u0440\u0430\u0434\u044b \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b!":l.a.createElement("span",null,"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u043d\u0430\u0433\u0440\u0430\u0434\u0430: ",l.a.createElement("span",{style:{color:"#FFFFFF"}},this.state.bp_items[this.props.user.bpLvl])):"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442")))}}]),t}(i.PureComponent));Mt.defaultProps={user:{bp:!1},onClick:function(){}};var Bt=a(696),Ut=a(697),Gt=a(698),Rt=a(303),zt=a.n(Rt);var Vt="https://vds2153919.my-ihor.ru:8088/";function Kt(e){return Ht.apply(this,arguments)}function Ht(){return(Ht=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.send("VKWebAppStorageGet",{keys:[t]});case 2:return e.abrupt("return",e.sent.keys[0].value);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yt(e,t){return h.a.send("VKWebAppStorageSet",{key:e,value:t})}function Xt(e){return Zt.apply(this,arguments)}function Zt(){return(Zt=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt(t);case 2:return e.t0=e.sent,e.abrupt("return",""===e.t0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(e){return qt.apply(this,arguments)}function qt(){return(qt=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt(t);case 2:if(!e.sent){e.next=8;break}return e.next=5,Yt(t,"1");case 5:return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $t(e){return Qt.apply(this,arguments)}function Qt(){return(Qt=Object(g.a)(b.a.mark((function e(t){var a,n,r=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]&&r[1],e.prev=1,e.next=4,h.a.send("VKWebAppGetAuthToken",{app_id:parseInt(N().vk_app_id),scope:t});case 4:if(n=e.sent,!(t.includes(",")?n.scope.split(",").length===t.split(",").length:n.scope===t)){e.next=9;break}return e.abrupt("return",n.access_token);case 9:if(!a){e.next=15;break}return e.next=12,$t(t,a);case 12:return e.abrupt("return",e.sent);case 15:return e.abrupt("return",!1);case 16:e.next=27;break;case 18:if(e.prev=18,e.t0=e.catch(1),!a){e.next=26;break}return e.next=23,$t(t,a);case 23:return e.abrupt("return",e.sent);case 26:return e.abrupt("return",!1);case 27:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}function ea(e,t,a,n){return ta.apply(this,arguments)}function ta(){return(ta=Object(g.a)(b.a.mark((function e(t,a,n,r){var o,s,c,i,l,u,p,d,m,f,v,E,y,k,w=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=w.length>4&&void 0!==w[4]&&w[4],s=w.length>5&&void 0!==w[5]?w[5]:"perm_album",r){e.next=8;break}return e.next=5,$t("photos");case 5:if(r=e.sent){e.next=8;break}return e.abrupt("return",-1);case 8:if(e.t0=o,!e.t0){e.next=13;break}return e.next=12,Kt(s);case 12:e.t0=e.sent;case 13:if(""!==(i=e.t0)&&o){e.next=23;break}return e.next=17,h.a.send("VKWebAppCallAPIMethod",{method:"photos.createAlbum",params:{title:a,v:"5.126",access_token:r}});case 17:if(c=e.sent.response.id,!o){e.next=21;break}return e.next=21,Yt(s,"".concat(c));case 21:e.next=24;break;case 23:c=parseInt(i);case 24:u=!1,p=0;case 26:if(!(p<1)){e.next=51;break}return e.prev=27,e.next=30,h.a.send("VKWebAppCallAPIMethod",{method:"photos.getUploadServer",params:{album_id:c,v:"5.126",access_token:r}});case 30:l=e.sent.response.upload_url,e.next=48;break;case 33:if(e.prev=33,e.t1=e.catch(27),u){e.next=46;break}return u=!0,p--,e.next=40,h.a.send("VKWebAppCallAPIMethod",{method:"photos.createAlbum",params:{title:a,v:"5.126",access_token:r}});case 40:if(c=e.sent.response.id,!o){e.next=44;break}return e.next=44,Yt(s,"".concat(c));case 44:e.next=48;break;case 46:return console.error(e.t1),e.abrupt("return",-2);case 48:p++,e.next=26;break;case 51:t instanceof Blob&&(t=[t]),d=!0,m=!1,f=void 0,e.prev=55,v=b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.value,(a=new FormData).append("photo",t,"image.png"),e.prev=3,e.next=6,new Promise((function(e){return zt()(Vt+l,{method:"POST",body:a}).then((function(e){return e.json()})).then(function(){var t=Object(g.a)(b.a.mark((function t(a){var o,s,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=a.server,s=a.photos_list,i=a.hash,t.next=4,h.a.send("VKWebAppCallAPIMethod",{method:"photos.save",params:{album_id:c,server:o,photos_list:s,hash:i,caption:n,v:"5.126",access_token:r}});case 4:e(c),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0),e(-3);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())}));case 6:return e.t0=e.sent,e.abrupt("return",{v:e.t0});case 10:return e.prev=10,e.t1=e.catch(3),console.error(e.t1),e.abrupt("return",{v:-4});case 14:case"end":return e.stop()}}),e,null,[[3,10]])})),E=t[Symbol.iterator]();case 58:if(d=(y=E.next()).done){e.next=66;break}return e.delegateYield(v(),"t2",60);case 60:if("object"!==typeof(k=e.t2)){e.next=63;break}return e.abrupt("return",k.v);case 63:d=!0,e.next=58;break;case 66:e.next=72;break;case 68:e.prev=68,e.t3=e.catch(55),m=!0,f=e.t3;case 72:e.prev=72,e.prev=73,d||null==E.return||E.return();case 75:if(e.prev=75,!m){e.next=78;break}throw f;case 78:return e.finish(75);case 79:return e.finish(72);case 80:case"end":return e.stop()}}),e,null,[[27,33],[55,68,72,80],[73,,75,79]])})))).apply(this,arguments)}function aa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function na(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?aa(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):aa(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ra={1:l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("defs",null,l.a.createElement("clipPath",{id:"clipAvatar1",clipPathUnits:"objectBoundingBox"},l.a.createElement("circle",{cx:"0.497087",cy:"0.502947",r:"0.497087",fill:"black"})))),2:l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("defs",null,l.a.createElement("clipPath",{id:"clipAvatar2",clipPathUnits:"objectBoundingBox"},l.a.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.994175 0.497087L0.994162 0.546795L0.994125 0.567384L0.994063 0.583179L0.993976 0.596491L0.993864 0.608216L0.993727 0.618812L0.993566 0.62855L0.993379 0.63761L0.993168 0.646113L0.992932 0.654149L0.99267 0.661786L0.992384 0.669077L0.992073 0.676062L0.991737 0.682777L0.991376 0.689247L0.99099 0.695498L0.990579 0.701548L0.990143 0.707414L0.989682 0.713111L0.989196 0.718651L0.988684 0.724045L0.988148 0.729302L0.987586 0.734432L0.986999 0.739441L0.986387 0.744337L0.98575 0.749126L0.985087 0.753813L0.984399 0.758404L0.983686 0.762902L0.982947 0.767313L0.982183 0.771639L0.981393 0.775885L0.980578 0.780053L0.979737 0.784147L0.978871 0.788169L0.977979 0.792122L0.977061 0.796008L0.976117 0.79983L0.975147 0.803588L0.974152 0.807287L0.97313 0.810926L0.972083 0.814508L0.971009 0.818034L0.969909 0.821507L0.968783 0.824926L0.967631 0.828294L0.966452 0.831611L0.965246 0.83488L0.964014 0.8381L0.962756 0.841273L0.96147 0.844401L0.960158 0.847483L0.958819 0.850521L0.957453 0.853515L0.956059 0.856467L0.954639 0.859377L0.953191 0.862246L0.951715 0.865074L0.950212 0.867863L0.948681 0.870612L0.947123 0.873323L0.945536 0.875996L0.943921 0.878631L0.942278 0.881229L0.940606 0.88379L0.938906 0.886316L0.937177 0.888805L0.935419 0.89126L0.933633 0.89368L0.931816 0.896066L0.929971 0.898417L0.928096 0.900735L0.926191 0.903019L0.924255 0.905271L0.92229 0.90749L0.920294 0.909676L0.918268 0.911831L0.91621 0.913954L0.914121 0.916045L0.912001 0.918105L0.909849 0.920134L0.907665 0.922132L0.905449 0.9241L0.9032 0.926038L0.900918 0.927945L0.898603 0.929823L0.896254 0.931671L0.893871 0.933489L0.891454 0.935278L0.889002 0.937038L0.886515 0.93877L0.883993 0.940472L0.881434 0.942146L0.878839 0.943791L0.876207 0.945408L0.873537 0.946997L0.870829 0.948558L0.868083 0.950091L0.865298 0.951597L0.862473 0.953074L0.859607 0.954525L0.8567 0.955947L0.853752 0.957343L0.850761 0.958711L0.847726 0.960053L0.844648 0.961367L0.841524 0.962654L0.838355 0.963915L0.835138 0.965149L0.831873 0.966357L0.82856 0.967538L0.825196 0.968692L0.821781 0.969821L0.818313 0.970922L0.814791 0.971998L0.811213 0.973048L0.807579 0.974071L0.803885 0.975069L0.800131 0.976041L0.796315 0.976986L0.792434 0.977906L0.788486 0.978801L0.78447 0.979669L0.780382 0.980512L0.77622 0.981329L0.77198 0.982121L0.76766 0.982887L0.763257 0.983628L0.758765 0.984343L0.754182 0.985033L0.749503 0.985698L0.744722 0.986337L0.739835 0.986952L0.734835 0.98754L0.729715 0.988104L0.724468 0.988642L0.719086 0.989156L0.713558 0.989644L0.707874 0.990107L0.702022 0.990545L0.695987 0.990958L0.689753 0.991346L0.683301 0.991709L0.676607 0.992047L0.669644 0.99236L0.662379 0.992649L0.654771 0.992912L0.646769 0.99315L0.638306 0.993363L0.629295 0.993552L0.619616 0.993715L0.609097 0.993854L0.597476 0.993968L0.584314 0.994057L0.568769 0.994121L0.548737 0.99416L0.511115 0.994175L0.449399 0.994164L0.428204 0.994129L0.412146 0.994069L0.398677 0.993984L0.386846 0.993874L0.376172 0.993739L0.366373 0.99358L0.357264 0.993395L0.348721 0.993186L0.34065 0.992951L0.332983 0.992692L0.325667 0.992408L0.318658 0.992099L0.311923 0.991765L0.305434 0.991406L0.299166 0.991022L0.293101 0.990613L0.287221 0.990179L0.281511 0.989719L0.275959 0.989235L0.270554 0.988726L0.265286 0.988191L0.260147 0.987632L0.255128 0.987047L0.250223 0.986437L0.245426 0.985802L0.240731 0.985141L0.236133 0.984455L0.231627 0.983744L0.22721 0.983007L0.222877 0.982245L0.218625 0.981457L0.21445 0.980644L0.210351 0.979805L0.206323 0.978941L0.202365 0.978051L0.198473 0.977135L0.194647 0.976193L0.190883 0.975225L0.18718 0.974232L0.183536 0.973213L0.17995 0.972167L0.176419 0.971096L0.172942 0.969998L0.169519 0.968874L0.166147 0.967723L0.162825 0.966547L0.159553 0.965343L0.156329 0.964114L0.153152 0.962857L0.150021 0.961574L0.146935 0.960264L0.143894 0.958927L0.140896 0.957563L0.137941 0.956171L0.135028 0.954753L0.132155 0.953307L0.129324 0.951834L0.126532 0.950333L0.12378 0.948804L0.121066 0.947248L0.11839 0.945663L0.115752 0.944051L0.113151 0.94241L0.110587 0.940741L0.108059 0.939043L0.105566 0.937316L0.103109 0.935561L0.100686 0.933776L0.0982977 0.931962L0.0959435 0.930119L0.093623 0.928246L0.0913359 0.926343L0.0890817 0.924411L0.0868602 0.922448L0.0846711 0.920454L0.082514 0.91843L0.0803888 0.916375L0.078295 0.914289L0.0762325 0.912171L0.074201 0.910022L0.0722003 0.90784L0.07023 0.905627L0.0682901 0.90338L0.0663803 0.901101L0.0645003 0.898788L0.06265 0.896442L0.0608292 0.894062L0.0590377 0.891648L0.0572752 0.889199L0.0555418 0.886715L0.053837 0.884195L0.0521609 0.881639L0.0505133 0.879047L0.0488939 0.876418L0.0473028 0.873751L0.0457396 0.871047L0.0442043 0.868303L0.0426968 0.865521L0.0412169 0.862699L0.0397645 0.859837L0.0383395 0.856933L0.0369418 0.853988L0.0355713 0.851001L0.0342278 0.84797L0.0329113 0.844895L0.0316216 0.841775L0.0303588 0.838609L0.0291226 0.835396L0.027913 0.832135L0.0267299 0.828826L0.0255732 0.825466L0.0244429 0.822055L0.0233389 0.818591L0.0222611 0.815073L0.0212093 0.8115L0.0201837 0.80787L0.0191841 0.804182L0.0182103 0.800432L0.0172625 0.796621L0.0163405 0.792745L0.0154442 0.788803L0.0145736 0.784792L0.0137287 0.78071L0.0129094 0.776554L0.0121156 0.772321L0.0113473 0.768007L0.0106045 0.763611L0.00988714 0.759126L0.00919514 0.754551L0.00852848 0.749879L0.00788712 0.745107L0.00727103 0.740228L0.00668018 0.735237L0.00611453 0.730127L0.00557405 0.724891L0.00505871 0.719519L0.00456848 0.714003L0.00410335 0.708333L0.00366328 0.702494L0.00324826 0.696475L0.00285825 0.690257L0.00249324 0.683823L0.00215322 0.677149L0.00183815 0.670209L0.00154804 0.662969L0.00128286 0.655391L0.00104259 0.647422L0.000827238 0.638999L0.000636778 0.630035L0.000471204 0.620415L0.000330509 0.609971L0.000214684 0.59845L0.000123725 0.585434L5.76268e-05 0.570129L1.63857e-05 0.550608L0 0.516925L8.46877e-06 0.451509L4.17925e-05 0.429647L9.99728e-05 0.413311L0.000183013 0.399681L0.000290916 0.387741L0.000423688 0.376987L0.000581337 0.367125L0.000763869 0.357967L0.000971293 0.349382L0.00120362 0.341277L0.00146086 0.33358L0.00174304 0.326237L0.00205015 0.319206L0.00238222 0.31245L0.00273927 0.305942L0.00312131 0.299658L0.00352837 0.293577L0.00396046 0.287682L0.0044176 0.28196L0.00489983 0.276396L0.00540717 0.270979L0.00593964 0.265701L0.00649727 0.260551L0.00708009 0.255523L0.00768814 0.250609L0.00832144 0.245804L0.00898004 0.241101L0.00966397 0.236495L0.0103733 0.231982L0.011108 0.227558L0.0118681 0.223219L0.0126537 0.21896L0.0134649 0.21478L0.0143017 0.210674L0.0151641 0.206641L0.0160522 0.202677L0.016966 0.198781L0.0179056 0.194949L0.0188711 0.19118L0.0198625 0.187472L0.0208798 0.183824L0.0219232 0.180233L0.0229927 0.176698L0.0240884 0.173217L0.0252103 0.169789L0.0263586 0.166413L0.0275333 0.163088L0.0287344 0.159812L0.0299621 0.156584L0.0312165 0.153403L0.0324976 0.150268L0.0338055 0.147179L0.0351404 0.144134L0.0365023 0.141133L0.0378914 0.138174L0.0393076 0.135258L0.0407513 0.132382L0.0422224 0.129548L0.0437211 0.126753L0.0452475 0.123997L0.0468018 0.12128L0.0483841 0.118602L0.0499944 0.115961L0.051633 0.113357L0.0533001 0.110789L0.0549956 0.108258L0.0567199 0.105763L0.0584731 0.103303L0.0602554 0.100877L0.0620668 0.0984863L0.0639077 0.0961294L0.0657782 0.0938063L0.0676785 0.0915164L0.0696088 0.0892597L0.0715694 0.0870356L0.0735604 0.0848439L0.0755821 0.0826843L0.0776347 0.0805565L0.0797184 0.0784602L0.0818336 0.0763953L0.0839805 0.0743613L0.0861594 0.0723581L0.0883706 0.0703855L0.0906143 0.0684431L0.0928909 0.0665309L0.0952008 0.0646486L0.0975442 0.0627959L0.0999215 0.0609727L0.102333 0.0591789L0.104779 0.0574142L0.107261 0.0556784L0.109778 0.0539714L0.112331 0.052293L0.11492 0.0506431L0.117546 0.0490215L0.12021 0.0474281L0.122911 0.0458627L0.125651 0.0443252L0.12843 0.0428155L0.131249 0.0413334L0.134108 0.0398788L0.137008 0.0384516L0.13995 0.0370517L0.142934 0.035679L0.145962 0.0343334L0.149033 0.0330148L0.15215 0.031723L0.155312 0.030458L0.158521 0.0292197L0.161778 0.028008L0.165084 0.0268228L0.168439 0.025664L0.171846 0.0245316L0.175306 0.0234255L0.178819 0.0223455L0.182388 0.0212918L0.186013 0.020264L0.189697 0.0192623L0.193441 0.0182865L0.197248 0.0173366L0.201118 0.0164125L0.205055 0.0155142L0.20906 0.0146416L0.213137 0.0137946L0.217287 0.0129733L0.221514 0.0121775L0.225821 0.0114072L0.230211 0.0106624L0.234688 0.00994295L0.239256 0.00924893L0.24392 0.00858025L0.248684 0.00793688L0.253554 0.00731878L0.258535 0.00672592L0.263636 0.00615826L0.268862 0.00561577L0.274222 0.00509843L0.279726 0.00460621L0.285384 0.00413908L0.291209 0.00369702L0.297213 0.00328L0.303414 0.002888L0.309831 0.002521L0.316485 0.00217899L0.323402 0.00186194L0.330617 0.00156983L0.338167 0.00130267L0.346102 0.00106042L0.354487 0.000843081L0.363403 0.000650639L0.372966 0.000483084L0.383337 0.000340407L0.394759 0.000222603L0.407635 0.000129663L0.422711 6.15854e-05L0.441759 1.8365e-05L0.472791 0L0.540454 6.48955e-06L0.563052 3.78339e-05L0.579681 9.40348e-05L0.593479 0.000175095L0.605531 0.000281018L0.616367 0.00041181L0.626291 0.000567477L0.6355 0.000748027L0.644127 0.00095347L0.652268 0.00118381L0.659995 0.00143907L0.667364 0.00171926L0.674419 0.00202439L0.681196 0.00235447L0.687722 0.00270953L0.694024 0.00308958L0.70012 0.00349464L0.706029 0.00392474L0.711765 0.00437989L0.717341 0.00486012L0.722769 0.00536545L0.728058 0.00589592L0.733217 0.00645155L0.738255 0.00703237L0.743177 0.0076384L0.747991 0.0082697L0.752703 0.00892628L0.757316 0.00960819L0.761836 0.0103155L0.766267 0.0110481L0.770613 0.0118063L0.774878 0.0125899L0.779064 0.013399L0.783176 0.0142337L0.787215 0.0150941L0.791184 0.0159801L0.795086 0.0168919L0.798922 0.0178295L0.802696 0.0187929L0.806409 0.0197822L0.810062 0.0207975L0.813657 0.0218388L0.817197 0.0229062L0.820682 0.0239998L0.824114 0.0251197L0.827494 0.0262658L0.830823 0.0274384L0.834103 0.0286374L0.837335 0.029863L0.84052 0.0311152L0.843658 0.0323942L0.846751 0.0337L0.849799 0.0350327L0.852804 0.0363925L0.855766 0.0377794L0.858686 0.0391935L0.861564 0.040635L0.864402 0.0421039L0.8672 0.0436004L0.869959 0.0451246L0.872679 0.0466766L0.87536 0.0482567L0.878004 0.0498648L0.880611 0.0515011L0.883182 0.0531659L0.885716 0.0548592L0.888214 0.0565812L0.890677 0.0583321L0.893105 0.060112L0.895499 0.0619211L0.897858 0.0637597L0.900184 0.0656278L0.902477 0.0675257L0.904736 0.0694537L0.906963 0.0714118L0.909157 0.0734004L0.911319 0.0754196L0.913449 0.0774697L0.915548 0.079551L0.917616 0.0816637L0.919652 0.083808L0.921658 0.0859844L0.923633 0.0881929L0.925577 0.0904341L0.927492 0.0927081L0.929377 0.0950152L0.931232 0.097356L0.933057 0.0997306L0.934853 0.102139L0.93662 0.104583L0.938359 0.107062L0.940068 0.109576L0.941749 0.112126L0.943401 0.114712L0.945025 0.117335L0.94662 0.119996L0.948188 0.122694L0.949728 0.125431L0.951239 0.128207L0.952724 0.131023L0.95418 0.133879L0.95561 0.136776L0.957012 0.139714L0.958387 0.142695L0.959734 0.145719L0.961055 0.148787L0.962349 0.1519L0.963616 0.155058L0.964857 0.158263L0.966071 0.161516L0.967258 0.164818L0.968419 0.16817L0.969553 0.171573L0.970662 0.175028L0.971744 0.178537L0.972799 0.182101L0.973829 0.185722L0.974833 0.189401L0.975811 0.19314L0.976763 0.196942L0.977689 0.200807L0.978589 0.204738L0.979464 0.208738L0.980313 0.212809L0.981136 0.216953L0.981934 0.221174L0.982707 0.225474L0.983453 0.229858L0.984175 0.234328L0.984871 0.238888L0.985542 0.243544L0.986187 0.2483L0.986807 0.253162L0.987402 0.258134L0.987972 0.263225L0.988516 0.268441L0.989035 0.27379L0.98953 0.279282L0.989999 0.284928L0.990443 0.290738L0.990862 0.296728L0.991256 0.302913L0.991625 0.309311L0.991969 0.315945L0.992288 0.322841L0.992582 0.33003L0.992851 0.337552L0.993095 0.345455L0.993315 0.3538L0.993509 0.362671L0.993679 0.372177L0.993823 0.382476L0.993943 0.393803L0.994038 0.406542L0.994108 0.4214L0.994153 0.440009L0.994174 0.469032L0.994175 0.497087Z",fill:"black"})))),3:l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("defs",null,l.a.createElement("clipPath",{id:"clipAvatar3",clipPathUnits:"objectBoundingBox"},l.a.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.900161 0.225626C0.918544 0.242436 0.931355 0.264328 0.93692 0.288438L0.991067 0.523035C0.996814 0.547934 0.994552 0.573982 0.984595 0.597553L0.895569 0.808316C0.885062 0.833191 0.866553 0.853967 0.842897 0.867442L0.649289 0.977719C0.625633 0.991193 0.598141 0.996618 0.571051 0.993158L0.341525 0.963839C0.315855 0.96056 0.291859 0.949469 0.272875 0.93211L0.0940134 0.768548C0.0756313 0.751739 0.0628198 0.729847 0.0572549 0.705737L0.00310751 0.47114C-0.00263951 0.446241 -0.000377275 0.420193 0.00957951 0.396621L0.0986059 0.185859C0.109113 0.160983 0.127621 0.140208 0.151278 0.126733L0.344886 0.0164562C0.368542 0.00298171 0.396034 -0.00244339 0.423124 0.00101696L0.65265 0.0303355C0.67832 0.0336145 0.702316 0.0447054 0.7213 0.0620652L0.900161 0.225626Z",fill:"black"})))),4:l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("defs",null,l.a.createElement("clipPath",{id:"clipAvatar4",clipPathUnits:"objectBoundingBox"},l.a.createElement("path",{d:"M0.790574 0.113435L0.432444 0.0183842C0.389575 0.00700625 0.343891 0.0193388 0.312571 0.0507445L0.050708 0.313326C0.0193334 0.344787 0.00714221 0.390604 0.0187327 0.433497L0.115706 0.792364C0.127258 0.835117 0.160689 0.868491 0.203461 0.87997L0.559531 0.975538C0.602488 0.987067 0.648331 0.97476 0.679738 0.943268L0.943444 0.678842C0.974831 0.64737 0.987019 0.601531 0.975408 0.558626L0.878651 0.201086C0.867055 0.158234 0.833481 0.124823 0.790574 0.113435Z",fill:"black"})))),5:l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("defs",null,l.a.createElement("clipPath",{id:"clipAvatar5",clipPathUnits:"objectBoundingBox"},l.a.createElement("path",{d:"M0.415435 0.0552153C0.446935 -0.018405 0.54724 -0.0184051 0.57874 0.0552152L0.655146 0.233789C0.668138 0.264153 0.69568 0.285001 0.727415 0.28849L0.914047 0.309011C0.990989 0.317471 1.02198 0.416853 0.96451 0.470813L0.8251 0.601699C0.801395 0.623955 0.790875 0.657686 0.797496 0.690207L0.836435 0.881464C0.852488 0.960313 0.77134 1.02173 0.704319 0.981463L0.541752 0.883781C0.51411 0.867171 0.480065 0.867171 0.452423 0.883781L0.289856 0.981463C0.222835 1.02173 0.141687 0.960313 0.15774 0.881464L0.196679 0.690207C0.2033 0.657686 0.192779 0.623955 0.169074 0.601699L0.0296643 0.470813C-0.0278101 0.416853 0.00318571 0.317471 0.0801281 0.309011L0.26676 0.28849C0.298494 0.285001 0.326037 0.264153 0.339029 0.233789L0.415435 0.0552153Z",fill:"black"}))))},oa=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={tooltip:!1},setTimeout(Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,Jt("avatar_update");case 3:return e.t1=e.sent,e.t2={tooltip:e.t1},e.next=7,e.t0.setState.call(e.t0,e.t2);case 7:case"end":return e.stop()}}),e)})))),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.iosOptimize,n=t.style,r=t.size,o=t.onClick,s=t.src,c=t.frame,i=t.color,u=t.badge,p=t.badgeValue,m=this.state.tooltip,h=0===i?"var(--background_content)":"var(--palette_gradient_".concat(i,")"),f=r/100*6;return a?l.a.createElement(d.f,{size:r,shadow:!1,src:s}):l.a.createElement("div",{className:"UserAvatar",style:na({width:r,height:r},n||{}),onClick:o},l.a.createElement(d.O,{text:"\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0439 \u0430\u0432\u0430\u0442\u0430\u0440, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435!",isShown:m,onClose:function(){return e.setState({tooltip:!1})}},l.a.createElement("img",{alt:"avatar",src:s,style:{clipPath:"url(#clipAvatar".concat(c+1,")")}})),l.a.createElement("div",{className:"UserAvatarBorder",style:{clipPath:"url(#clipAvatar".concat(c+1,")"),background:h,left:-f,right:-f,top:-f,bottom:-f}}),u&&l.a.createElement("div",{className:"Badge",style:{background:p?"#83E261":"#A1A1A1"}}))}}]),t}(i.PureComponent);oa.defaultProps={onClick:function(){},size:48,frame:1,color:0};var sa=function(e){function t(e){var a;Object(n.a)(this,t),a=Object(o.a)(this,Object(s.a)(t).call(this,e));var r=e.t.state.user;return a.state={frame:r.frame_type,color:r.frame_color},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t,a=t.state,n=a.vk_user,r=a.user,o=a.gradients,s=this.state,c=s.frame,i=s.color,u=W();return l.a.createElement("div",{className:"UserAvatarFrame"},l.a.createElement(oa,{size:100,src:n.photo_max_orig,frame:c,color:i}),l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h1",null,"\u0424\u043e\u0440\u043c\u0430"),l.a.createElement("div",null,Object.keys(ra).map((function(t,a){return l.a.createElement("div",{key:"Frame-".concat(a),style:{boxShadow:a===c&&"inset 0 0 0 3px var(--custom_card_solo_text_color)"},onClick:function(){return e.setState({frame:a})}},l.a.createElement("div",{style:{clipPath:"url(#clipAvatar".concat(t,")"),background:"var(--custom_card_solo_text_color)",width:56,height:56}}))})))),l.a.createElement("div",null,l.a.createElement("h1",null,"\u0426\u0432\u0435\u0442"),l.a.createElement("div",null,o.map((function(a,n){var o="conic-gradient(from 180deg at 50% 50%, ".concat([].concat(Object(E.a)(a.slice(0,a.length-2)),[a[0]]).join(", "),")");return l.a.createElement("div",{key:"gradient-".concat(n),style:{background:o},onClick:function(){r.vk_donut||r.admin||r.premium?e.setState({color:n+1}):t.setPopout(l.a.createElement(d.C,null,l.a.createElement("div",{className:"GameAfkWarning"},l.a.createElement("div",{className:"GameAfkWarning-Icon"},l.a.createElement(Bt.a,null)),l.a.createElement("div",{className:"GameAfkWarning-Title"},"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430"),u?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"GameAfkWarning-Description"},"\u0412 \u0441\u0442\u0430\u0442\u044c\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e, \u043a\u0430\u043a \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044e \u0446\u0432\u0435\u0442\u0430 \u0440\u0430\u043c\u043a\u0438"),l.a.createElement("div",{className:"GameAfkWarning-Button",onClick:function(){return M("https://vk.com/@draw_app-avocadoplus")}},l.a.createElement(Ut.a,{width:20,height:20})," \u041f\u0435\u0440\u0435\u0439\u0442\u0438")):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"GameAfkWarning-Description"},"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0443 avocado+, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0446\u0432\u0435\u0442 \u0440\u0430\u043c\u043a\u0438"),l.a.createElement("div",{className:"GameAfkWarning-Button",onClick:function(){t.setPopout(null),t.go("vk_donut_avocado")}},"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c")),l.a.createElement("div",{className:"GameAfkWarning-Button-Close",onClick:function(){return t.setPopout(null)}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))))}},l.a.createElement("div",null,l.a.createElement("div",{style:{display:i!==n+1&&"none",background:o}})))}))))),l.a.createElement("div",null,l.a.createElement(d.h,{stretched:!0,size:"l",mode:"gradient_pink",disabled:r.frame_type===c&&r.frame_color===i,onClick:function(){r.coins<5e3?t.setSnackbar("\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432"):t.socket.call("frames.save",{frame_type:c,frame_color:i},function(){var e=Object(g.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.response){e.next=4;break}t.setSnackbar(a.error.message),e.next=10;break;case 4:return r.frame_type=c,r.frame_color=i,e.next=8,t.setState({user:r});case 8:t.back(),t.setSnackbar("\u0412\u044b \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0438 \u0440\u0430\u043c\u043a\u0443");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},after:l.a.createElement(Gt.a,null)},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430 5\u043a"),l.a.createElement(d.h,{stretched:!0,size:"l",mode:"secondary",onClick:function(){return t.back()}},"\u041e\u0442\u043c\u0435\u043d\u0430")))}}]),t}(i.PureComponent);sa.defaultProps={};var ca,ia=sa,la=(T(),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={isShowGlobalCanvas:e.t.state.isShowGlobalCanvas,canvas_status:{status:!1},globalCanvasShowTimer:!1},e.t.socket.unsubscribe("changeOnline"),e.t.socket.subscribe("changeOnline",(function(t){"feed"!==e.t.state.activePanel&&(e.t.setState({online:t.count}),a.forceUpdate())})),a.goToStats=a.goToStats.bind(Object(y.a)(a)),a.goToFeed=a.goToFeed.bind(Object(y.a)(a)),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"goToStats",value:function(){var e=this.props.t;e.setPopout(l.a.createElement(d.E,null)),e.socket.call("users.get",{},(function(t){e.setState({user:t.response}),e.socket.call("users.getTop",{type:"pictures"},(function(t){e.setState({users_topPictures:t.response});var a=t.response.map((function(e){return e.id}));e.socket.call("users.getTop",{type:"guessed_pictures"},(function(t){e.setState({users_topGuessedPictures:t.response}),a=[].concat(Object(E.a)(a),Object(E.a)(t.response.map((function(e){return e.id})))),e.socket.call("users.getTop",{type:"likes"},function(){var t=Object(g.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({users_topLikes:n.response}),a=[].concat(Object(E.a)(a),Object(E.a)(n.response.map((function(e){return e.id})))),t.next=4,ae(a);case 4:e.setPopout(null),e.go("stats");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}))}))}},{key:"goToFeed",value:function(){var e=this.props.t;e.setPopout(l.a.createElement(d.E,null)),e.socket.call("pictures.getFeed",{limit:3},function(){var t=Object(g.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({picturesFeed:a.response}),n=a.response.map((function(e){return e.drawerId})),t.next=4,ae(n);case 4:e.setPopout(null),e.go("feed");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.t.socket.call("canvas.getStatus",{},function(){var e=Object(g.a)(b.a.mark((function e(a){var n,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.response,r=n.start-Date.now(),(o=r<=864e5&&r>0)&&(ca=setInterval((function(){n.start-Date.now()<=0&&(t.setState({globalCanvasShowTimer:!1}),clearInterval(ca)),t.forceUpdate()}),1e3)),t.setState({canvas_status:n,globalCanvasShowTimer:o});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){clearInterval(ca)}},{key:"render",value:function(){var e=this,t=this.props.t,a=t._tags,n=t.state,r=n.vk_user,o=n.user,s=n.gamesAsWinner,c=n.gamesAsDrawer,i=n.top_number,u=n.online,p=(o.lvl,o.pictures),m=o.successfulPictures,f=o.guessedPictures,v=T(),E=this.state.canvas_status,y=E.status&&F(E.start-Date.now()).str;return l.a.createElement("div",{className:"Profile"},!v&&l.a.createElement("div",{className:"NativeButtonMiniAppTop",style:{height:!W()&&37},onClick:Object(g.a)(b.a.mark((function a(){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.state.app_version!==Qo&&t.setActiveModal(es),a.next=3,t.setState({__v_clicks:4===t.state.__v_clicks?4:t.state.__v_clicks+1});case 3:e.forceUpdate(),3===t.state.__v_clicks&&w.a.scale(1);case 5:case"end":return a.stop()}}),a)})))},"v",Qo," ",t.state.app_version!==Qo&&l.a.createElement("span",null,"(\u043d\u0435\u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u0430\u044f)")),l.a.createElement("div",{className:"UserAvatarCover"},l.a.createElement("img",{alt:"cover",src:r.photo_max_orig})),l.a.createElement("div",{className:"UserInfoContainer"},l.a.createElement(oa,{size:100,src:r.photo_200,onClick:function(){return t.go("avatar_frames")},frame:o.frame_type,color:o.frame_color}),l.a.createElement("div",{className:"UserNameTags"},l.a.createElement("h1",{onClick:function(){o.admin&&t.setActiveModal(as)}},r.first_name," ",r.last_name),l.a.createElement("div",{className:"UserTags"},a().map((function(e,a){return o[e[0]]&&l.a.cloneElement(e[1],{key:"tag".concat(a),onClick:function(){return t.setActiveModal(e[0])}})})))),l.a.createElement("div",{className:"UserLvl"},l.a.createElement("div",{className:"UserLvlProgress"},l.a.createElement("div",null,l.a.createElement("div",{style:{width:100/(100*o.lvl)*o.xp+"%"}})),l.a.createElement("div",null,l.a.createElement("span",null,o.xp,"XP ",l.a.createElement("span",null,"/")," ",100*o.lvl,"XP"),l.a.createElement("span",null,"LVL ",o.lvl))),l.a.createElement(d.r,{onClick:function(){return t.go("lvl_help")}},l.a.createElement(St.a,{fill:"#DCDCDC"}))),l.a.createElement("div",{className:"ActionCards"},l.a.createElement("div",null,l.a.createElement("div",{className:"ActionCard MainActionCard PlayGlobal",onClick:Object(g.a)(b.a.mark((function a(){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.props.t.setState({api_manager:0});case 2:t.go("search");case 3:case"end":return a.stop()}}),a)})))},l.a.createElement(jt.a,null)," \u0418\u0433\u0440\u0430\u0442\u044c"),l.a.createElement("div",{className:"ActionCard MainActionCard PlayLobby",onClick:function(){t.vkChatIntegration||t.isFromCatalogChat||t.isFromChatWidget?(t.setPopout(l.a.createElement(d.E,null)),t.socket.call("friends.createLobby",{},(function(e){e.response?(t.setState({friend_lobby:e.response}),t.go("friend_lobby"),t.setPopout(null)):t.setAlert("\u041e\u0448\u0438\u0431\u043a\u0430",e.error.message,[{title:"\u041e\u043a",mode:"cancel",autoclose:!0}])}))):t.go("friends")}},t.vkChatIntegration||t.isFromCatalogChat||t.isFromChatWidget?l.a.createElement(l.a.Fragment,null,l.a.createElement(Pt.a,null),l.a.createElement("span",null,"\u0418\u0433\u0440\u0430\u0442\u044c \u0432 \u0447\u0430\u0442\u0435")):l.a.createElement(l.a.Fragment,null,l.a.createElement(Tt.a,null),l.a.createElement("span",null,"\u0421\u0432\u043e\u044f \u0438\u0433\u0440\u0430")))),l.a.createElement("div",null,!1,(o.admin||o.tester)&&l.a.createElement("div",{className:"ActionCard MainActionCard ArtBattle",onClick:function(){t.go("art_battle_placeholder")}},l.a.createElement(At.a,null)," \u0411\u0438\u0442\u0432\u0430 \u0430\u0440\u0442\u043e\u0432"),(E.status||E.admins_allow&&o.admin||E.donut_allow&&(o.premium||o.vk_donut||o.admin))&&(0===E.end||E.end>Date.now())&&l.a.createElement("div",{className:"ActionCard MainActionCard GlobalCanvas",onClick:function(){if(0!==E.end||0!==E.start){if(E.start>=Date.now())return;if(0!==E.end&&E.end<=Date.now())return}h.a.send("VKWebAppStorageSet",{key:"canvas_new_mode",value:"1"}),t.setState({isShowGlobalCanvas:!1}),e.setState({isShowGlobalCanvas:!1}),t.go("global_canvas")}},E.start>=Date.now()?"".concat(y.hours,":").concat(y.minutes,":").concat(y.seconds):l.a.createElement(l.a.Fragment,null,l.a.createElement(It.a,null)," \u041e\u0431\u0449\u0438\u0439 \u0445\u043e\u043b\u0441\u0442")),l.a.createElement("div",{className:"ActionCard MainActionCard Suggestion",onClick:function(){return t.go("suggestions")}},l.a.createElement(Dt.a,null)," \u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f")),l.a.createElement("div",null,l.a.createElement("div",{className:"ActionCard GalleryGuessed",onClick:function(){return t.go("gallery")}},l.a.createElement("div",{className:"Images"},[1,0,2].map((function(e,t){return l.a.createElement("div",{num:t,key:"div__".concat(t)},c[e]&&l.a.createElement("img",{alt:"img",src:c[e]["Picture.url"]}))}))),l.a.createElement("div",{className:"Titles"},l.a.createElement("div",null,l.a.createElement("span",null,"\u041c\u043e\u0438 \u0440\u0430\u0431\u043e\u0442\u044b"),l.a.createElement("span",null,A(m,["\u0443\u0441\u043f\u0435\u0448\u043d\u0430\u044f","\u0443\u0441\u043f\u0435\u0448\u043d\u044b\u0435","\u0443\u0441\u043f\u0435\u0448\u043d\u044b\u0445"]))),l.a.createElement("div",null,A(p,["\u043a\u0430\u0440\u0442\u0438\u043d\u0430","\u043a\u0430\u0440\u0442\u0438\u043d\u044b","\u043a\u0430\u0440\u0442\u0438\u043d"]))))),l.a.createElement("div",null,l.a.createElement("div",{className:"ActionCard GalleryGuessed",onClick:function(){return t.go("guessed_pictures")}},l.a.createElement("div",{className:"Images"},[1,0,2].map((function(e,t){return l.a.createElement("div",{num:t,key:"div__".concat(t)},s[e]&&l.a.createElement("img",{alt:"img",src:s[e]["Picture.url"]}))}))),l.a.createElement("div",{className:"Titles"},l.a.createElement("div",null,l.a.createElement("span",null,"\u041e\u0442\u0433\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0440\u0430\u0431\u043e\u0442\u044b"),l.a.createElement("span",null,i&&"".concat(function(e){var t=I(e).split(" ");return t[0]+new Array(t.length-1).fill("\u041a").join("")}(i)," \u043c\u0435\u0441\u0442\u043e"))),l.a.createElement("div",null,A(f,["\u043a\u0430\u0440\u0442\u0438\u043d\u0430","\u043a\u0430\u0440\u0442\u0438\u043d\u044b","\u043a\u0430\u0440\u0442\u0438\u043d"]))))),l.a.createElement("div",null,[[l.a.createElement(Ft.a,null),"\u041b\u0435\u043d\u0442\u0430",function(){return e.goToFeed()}],[l.a.createElement(Nt.a,null),"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",function(){return e.goToStats()}],[l.a.createElement(Wt.a,null),"\u041c\u0430\u0433\u0430\u0437\u0438\u043d",function(){return t.go("shop")}]].map((function(e,t){return l.a.createElement("div",{key:"SubCard_".concat(t),className:"ActionCard",onClick:function(){return e[2]()}},e[0],l.a.createElement("span",null,e[1]))})))),l.a.createElement("div",{className:"Online",onClick:function(){o.admin&&t.go("neural")}},"\u041e\u043d\u043b\u0430\u0439\u043d: ",u)))}}]),t}(i.PureComponent));la.defaultProps={};var ua=la,pa=a(708),da=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={offset:e.t.state.gamesAsDrawer.length,limit:50,canGetMore:!0,prevY:0},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){0!==this.props.t.state.gamesAsDrawer.length&&(this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef),this.handleObserver(),this.props.t.state.scrollPosition&&(console.log("Scroll to ".concat(this.props.t.state.scrollPosition)),document.body.scrollTop=this.props.t.state.scrollPosition))}},{key:"handleObserver",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{boundingClientRect:{y:0}}],a=(arguments.length>1&&arguments[1],t[0].boundingClientRect.y),n=this.props.t,r=this.state,o=r.prevY,s=r.offset,c=r.limit,i=r.canGetMore;(0===o||o>a)&&i&&(this.setState({spinner:!0}),n.socket.call("games.getByDrawerId",{id:n.state.vk_user.id,offset:s,limit:c},function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae(a.response.map((function(e){return e.drawerId})));case 2:n.setState({gamesAsDrawer:[].concat(Object(E.a)(n.state.gamesAsDrawer),Object(E.a)(a.response))}),e.setState({canGetMore:a.response.length>0,spinner:!1}),e.forceUpdate();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.setState({offset:s+c})),this.setState({prevY:a})}},{key:"render",value:function(){var e=this,t=this.props.t,a=t.state.gamesAsDrawer,n=this.state.spinner;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:t.back}),separator:!1}),l.a.createElement("div",{className:"Panel_Container_Card Panel_Container_Card-TwoCards"},l.a.createElement("div",null,l.a.createElement(pa.a,{width:36,height:36}),l.a.createElement("div",{className:"Panel_Container_Card-Text"},l.a.createElement("h2",null,"\u0413\u0430\u043b\u0435\u0440\u0435\u044f"),l.a.createElement("p",null,0===a.length?"\u0422\u0443\u0442 \u043f\u043e\u043a\u0430 \u0447\u0442\u043e \u043f\u0443\u0441\u0442\u043e, \u0432\u0435\u0440\u043d\u0438\u0442\u0435\u0441\u044c \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0438 \u0432\u043f\u0435\u0440\u0451\u0434 \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c!":"\u0412\u0441\u0451 \u0432\u0430\u0448\u0435 \u0442\u0432\u043e\u0440\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043e\u0431\u0440\u0430\u043b\u043e\u0441\u044c \u0442\u0443\u0442, \u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435\u0441\u044c \u0432\u043e\u043a\u0440\u0443\u0433"))),l.a.createElement("div",{style:0===a.length?{display:"none"}:{}},l.a.createElement("div",{className:"MiniCards"},a.map((function(e,a){return l.a.createElement("div",{className:"MiniCard",key:"Card-".concat(a),onClick:Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({like_currentPictureSelected:a,like_method:"games.getByDrawerId",like_param:"gamesAsDrawer",like_user_id:t.state.vk_user.id,scrollPosition:document.body.scrollTop});case 2:t.go("picture_info");case 3:case"end":return e.stop()}}),e)})))},l.a.createElement("img",{alt:"img",src:e["Picture.url"]}))})),n&&l.a.createElement("div",{className:"MiniCard"},l.a.createElement(d.J,{size:"small"})),l.a.createElement("div",{ref:function(t){return e.loadingRef=t},className:"LoadingRef"})))))}}]),t}(i.PureComponent);da.defaultProps={};var ma=da,ha=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={offset:e.t.state.gamesAsWinner.length,limit:50,canGetMore:!0,prevY:0},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.props.t.state.gamesAsWinner.length){e.next=2;break}return e.abrupt("return");case 2:this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef),this.handleObserver(),this.props.t.state.scrollPosition&&(console.log("Scroll to ".concat(this.props.t.state.scrollPosition)),document.body.scrollTop=this.props.t.state.scrollPosition);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleObserver",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{boundingClientRect:{y:0}}],a=(arguments.length>1&&arguments[1],t[0].boundingClientRect.y),n=this.props.t,r=this.state,o=r.prevY,s=r.offset,c=r.limit,i=r.canGetMore;(0===o||o>a)&&i&&(this.setState({spinner:!0}),n.socket.call("games.getByWinnerId",{id:n.state.vk_user.id,offset:s,limit:c},function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae(a.response.map((function(e){return e.drawerId})));case 2:n.setState({gamesAsWinner:[].concat(Object(E.a)(n.state.gamesAsWinner),Object(E.a)(a.response))}),e.setState({canGetMore:a.response.length>0,spinner:!1}),e.forceUpdate();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.setState({offset:s+c})),this.setState({prevY:a})}},{key:"render",value:function(){var e=this,t=this.props.t,a=t.state,n=a.user,r=a.gamesAsWinner,o=n.guessedPictures,s=this.state.spinner;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:t.back}),separator:!1}),l.a.createElement("div",{className:"Panel_Container_Card Panel_Container_Card-TwoCards"},l.a.createElement("div",null,l.a.createElement(pa.a,{width:36,height:36}),l.a.createElement("div",{className:"Panel_Container_Card-Text"},l.a.createElement("h2",null,"\u041e\u0442\u0433\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0440\u0430\u0431\u043e\u0442\u044b"),l.a.createElement("p",null,o>0?"\u0412\u044b \u043e\u0442\u0433\u0430\u0434\u0430\u043b\u0438".concat(o>1?" \u0446\u0435\u043b\u044b\u0445":""," ").concat(A(o,["\u043a\u0430\u0440\u0442\u0438\u043d\u0443","\u043a\u0430\u0440\u0442\u0438\u043d\u044b","\u043a\u0430\u0440\u0442\u0438\u043d"]),"! \u0422\u0430\u043a \u0434\u0435\u0440\u0436\u0430\u0442\u044c, \u0428\u0435\u0440\u043b\u043e\u043a"):"\u0412\u044b \u0435\u0449\u0451 \u043d\u0435 \u0443\u0433\u0430\u0434\u0430\u043b\u0438 \u043d\u0438 \u043e\u0434\u043d\u0443 \u043a\u0430\u0440\u0442\u0438\u043d\u0443"))),l.a.createElement("div",{style:0===r.length?{display:"none"}:{}},l.a.createElement("div",{className:"MiniCards"},r.map((function(e,a){return l.a.createElement("div",{className:"MiniCard",key:"Card-".concat(a),onClick:Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({like_currentPictureSelected_:a,like_currentPictureSelected:a,like_method:"games.getByWinnerId",like_param:"gamesAsWinner",like_user_id:t.state.vk_user.id,scrollPosition:document.body.scrollTop});case 2:t.go("picture_info");case 3:case"end":return e.stop()}}),e)})))},l.a.createElement("img",{alt:"img",src:e["Picture.url"]}))})),s&&l.a.createElement("div",{className:"MiniCard"},l.a.createElement(d.J,{size:"small"})),l.a.createElement("div",{ref:function(t){return e.loadingRef=t},className:"LoadingRef"})))))}}]),t}(i.PureComponent);ha.defaultProps={};var fa=ha,va=!1,ba=function(e){function t(e){var a;Object(n.a)(this,t),a=Object(o.a)(this,Object(s.a)(t).call(this,e));e.t.state.subGameInfo;return a.state={lobbyPlayers:[],lobbyPlayers_:[],point_count:0,starting:!1},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillUnmount",value:function(){va=!0}},{key:"componentDidMount",value:function(){var e=this;va=!1,setTimeout(Object(g.a)(b.a.mark((function t(){var a,n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a=document.getElementsByClassName("SearchImages")[0],n=b.a.mark((function t(n){var o,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=D(1,25),(s=document.createElement("img")).src="https://photos.avocado.special.vk-apps.com/drawapp_search_images/image_".concat(o,".png"),s.style.left="".concat(D(-10,90),"%"),a.appendChild(s),e.state.starting||va){t.next=8;break}return n--,t.next=8,P(D(100,1e3));case 8:setTimeout((function(){return s.remove()}),5e3),r=n;case 10:case"end":return t.stop()}}),t)})),r=0;case 4:if(!(r<1)){t.next=9;break}return t.delegateYield(n(r),"t0",6);case 6:r++,t.next=4;break;case 9:t.next=13;break;case 11:t.prev=11,t.t1=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])}))),100);var t=this.props.t.socket;t.unsubscribe("changeLobbyUsers","gameStart","chooseWord","voteWord","setWord","gameStarting","message"),t.subscribe("changeLobbyUsers",function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,ae(a.players);case 3:t.t1=t.sent,t.t2=a.players,t.t3={lobbyPlayers:t.t1,lobbyPlayers_:t.t2},t.t0.setState.call(t.t0,t.t3),console.log("Change lobby players",a.players);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.subscribe("chooseWord",function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.t.setState({chooseWords:a.words}),setTimeout((function(){e.props.t.forceUpdate()}),400);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.subscribe("voteWord",function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.t.setState({voteWords:a.words}),setTimeout((function(){e.props.t.forceUpdate()}),400);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),2!==this.props.t.state.api_manager&&t.subscribe("setWord",function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.t.setState({word:a.word}),e.props.t.log("game_logs","set_word",{word:a.word}),setTimeout((function(){e.props.t.forceUpdate()}),400);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.subscribe("gameStart",function(){var t=Object(g.a)(b.a.mark((function t(a){var n,r,o,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.players,r=a.lobbyId,o=a.drawerId,s=a.timeout,t.next=3,e.props.t.log("game_logs");case 3:return e.props.t.log("game_logs","start",{drawer:o,lobby:r,manager:e.props.t.state.api_manager}),t.next=6,e.props.t.setState({game_players:n,game_timeout:s,lobbyId:r,drawerId:o,gameStart:Date.now(),isOnlineDrawing:!0,subGameInfo:{friendly:!1}});case 6:return t.next=8,new Promise((function(t){var a,n=e.state,r=n.lobbyPlayers,o=n.lobbyPlayers_;a=setInterval((function(){o.length===r.length&&(clearInterval(a),console.log("All players find"),t(!0))}),400)}));case 8:console.log("Game start. lobbyId = ".concat(r,", drawerId = ").concat(o)),h.a.send("VKWebAppHideBannerAd"),e.props.t.setState({history:["main","game"],activePanel:"game"});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.subscribe("gameStarting",function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({starting:!0});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.call("games.search",{manager:this.props.t.state.api_manager},(function(t){t.error?(e.props.t.setActivePanel("main"),e.props.t.setAlert("\u041e\u0448\u0438\u0431\u043a\u0430",t.error.message,[{title:"\u041e\u043a",autoclose:!0}])):"number"!==typeof t.response&&"string"!==typeof t.response||t.response}))}},{key:"render",value:function(){var e=this,t=this.props.t,a=this.state.lobbyPlayers.filter((function(e){return e.id!==t.state.vk_user.id})),n=this.state.starting;return l.a.createElement("div",{className:"SearchGame"},l.a.createElement("div",{className:"SearchContainer"},l.a.createElement("h1",null,n?"\u041e\u0447\u0438\u0449\u0430\u0435\u043c \u0445\u043e\u043b\u0441\u0442":"\u041f\u043e\u0438\u0441\u043a \u0438\u0433\u0440\u043e\u043a\u043e\u0432"),l.a.createElement(d.P,{style:{marginTop:12},photos:[t.state.vk_user.photo_100].concat(Object(E.a)(a.map((function(e){return e.photo_100})))),size:"m",visibleCount:5}),!n&&l.a.createElement(d.h,{size:"l",stretched:!0,mode:"secondary",style:{marginTop:32},onClick:function(){e.state.starting||t.back()}},"\u041e\u0442\u043c\u0435\u043d\u0430")),l.a.createElement("div",{className:"SearchImages"}))}},{key:"renderOld",value:function(){var e=this,t=this.props.t,a=this.state.lobbyPlayers.filter((function(e){return e.id!==t.state.vk_user.id})),n=l.a.createElement("svg",{width:"274",height:"316",viewBox:"0 0 274 316",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginTop:T()?72:"8.86699507vh"},onClick:function(){e.state.starting||t.back()}},l.a.createElement("rect",{x:"63",y:"84",width:"148",height:"148",rx:"74",fill:"url(#paint0_linear)"}),l.a.createElement("circle",{className:"Search_Avatar",cx:"137",cy:"158",r:"48",fill:"url(#pattern0)"}),l.a.createElement("line",{x1:"27.866",y1:"26.5",x2:"60.366",y2:"82.7916",stroke:"var(--border_players_color)",strokeWidth:"2",strokeDasharray:"4 4"}),l.a.createElement("rect",{x:"1.5",y:"1.5",width:"51",height:"51",rx:"25.5",fill:"var(--background_content)"}),l.a.createElement("circle",{cx:"27",cy:"27",r:"24",fill:"url(#pattern1)"}),l.a.createElement("rect",{x:"1.5",y:"1.5",width:"51",height:"51",rx:"25.5",stroke:"var(--border_players_color)",strokeWidth:"3"}),l.a.createElement("line",{y1:"-1",x2:"65",y2:"-1",transform:"matrix(-0.5 0.866025 0.866025 0.5 246.88 27)",stroke:"var(--border_players_color)",strokeWidth:"2",strokeDasharray:"4 4"}),l.a.createElement("rect",{x:"1.5",y:"-1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(-1 0 0 1 274 3)",fill:"var(--background_content)"}),l.a.createElement("rect",{x:"1.5",y:"-1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(-1 0 0 1 274 3)"}),l.a.createElement("circle",{cx:"247",cy:"27",r:"24",fill:"url(#pattern2)"}),l.a.createElement("rect",{x:"1.5",y:"-1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(-1 0 0 1 274 3)",stroke:"var(--border_players_color)",strokeWidth:"3"}),l.a.createElement("line",{y1:"-1",x2:"65",y2:"-1",transform:"matrix(0.5 -0.866025 -0.866025 -0.5 27 289)",stroke:"var(--border_players_color)",strokeWidth:"2",strokeDasharray:"4 4"}),l.a.createElement("rect",{x:"-1.5",y:"1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(1 0 0 -1 3 316)",fill:"var(--background_content)"}),l.a.createElement("rect",{x:"-1.5",y:"1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(1 0 0 -1 3 316)"}),l.a.createElement("circle",{cx:"27",cy:"289",r:"24",fill:"url(#pattern3)"}),l.a.createElement("rect",{x:"-1.5",y:"1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(1 0 0 -1 3 316)",stroke:"var(--border_players_color)",strokeWidth:"3"}),l.a.createElement("line",{x1:"246.014",y1:"289.5",x2:"213.514",y2:"233.208",stroke:"var(--border_players_color)",strokeWidth:"2",strokeDasharray:"4 4"}),l.a.createElement("rect",{x:"272.5",y:"314.5",width:"51",height:"51",rx:"25.5",transform:"rotate(-180 272.5 314.5)",fill:"var(--background_content)"}),l.a.createElement("rect",{x:"272.5",y:"314.5",width:"51",height:"51",rx:"25.5",transform:"rotate(-180 272.5 314.5)"}),l.a.createElement("circle",{cx:"247",cy:"289",r:"24",fill:"url(#pattern4)"}),l.a.createElement("rect",{x:"272.5",y:"314.5",width:"51",height:"51",rx:"25.5",transform:"rotate(-180 272.5 314.5)",stroke:"var(--border_players_color)",strokeWidth:"3"}),l.a.createElement("defs",null,l.a.createElement("linearGradient",{id:"paint0_linear",x1:"63",y1:"84",x2:"211",y2:"232",gradientUnits:"userSpaceOnUse"},l.a.createElement("stop",{stopColor:"#F05F88"}),l.a.createElement("stop",{offset:"1",stopColor:"#FAAF1A"})),l.a.createElement("pattern",{id:"pattern0",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},l.a.createElement("use",{href:"#image0",transform:"scale(0.005)"})),l.a.createElement("image",{href:t.state.vk_user.photo_max_orig,id:"image0",width:"200",height:"200"}),l.a.createElement("pattern",{id:"pattern1",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},l.a.createElement("use",{href:"#image1",transform:"scale(0.005)"})),l.a.createElement("image",{href:a[0]&&a[0].photo_max_orig,id:"image1",width:"200",height:"200"}),l.a.createElement("pattern",{id:"pattern2",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},l.a.createElement("use",{href:"#image2",transform:"scale(0.005)"})),l.a.createElement("image",{href:a[1]&&a[1].photo_max_orig,id:"image2",width:"200",height:"200"}),l.a.createElement("pattern",{id:"pattern3",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},l.a.createElement("use",{href:"#image3",transform:"scale(0.005)"})),l.a.createElement("image",{href:a[2]&&a[2].photo_max_orig,id:"image3",width:"200",height:"200"}),l.a.createElement("pattern",{id:"pattern4",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},l.a.createElement("use",{href:"#image4",transform:"scale(0.005)"})),l.a.createElement("image",{href:a[3]&&a[3].photo_max_orig,id:"image4",width:"200",height:"200"}))),r=this.state.point_count;return l.a.createElement("div",{className:"Search"},l.a.createElement("h1",null,this.state.starting?"\u041e\u0447\u0438\u0449\u0430\u0435\u043c \u0445\u043e\u043b\u0441\u0442".concat(new Array(r).fill(".").join("")):"\u0418\u0449\u0435\u043c \u0438\u0433\u0440\u043e\u043a\u043e\u0432".concat(new Array(r).fill(".").join(""))),l.a.createElement("h3",null,a.length+1,"/5"),n)}}]),t}(i.PureComponent);ba.defaultProps={};var ga=ba;function Ea(){return(Ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ya(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ka=l.a.createElement("path",{d:"M2.34316 12.0355L4.46448 14.1568C5.24553 14.9378 6.51186 14.9378 7.29291 14.1568L10.1213 11.3284L5.17159 6.37862L2.34316 9.20705C1.56211 9.9881 1.56211 11.2544 2.34316 12.0355Z",fill:"currentColor"}),wa=l.a.createElement("path",{d:"M1.81279 12.5658L3.93411 14.6872C5.00806 15.7611 6.74926 15.7611 7.8232 14.6872L14.1872 8.32321C15.2611 7.24926 15.2611 5.50806 14.1872 4.43412L12.0658 2.3128C10.9919 1.23886 9.2507 1.23886 8.17675 2.3128L1.81279 8.67676C0.738852 9.7507 0.738851 11.4919 1.81279 12.5658Z",stroke:"currentColor",strokeWidth:1.5}),_a=function(e){var t=e.svgRef,a=e.title,n=ya(e,["svgRef","title"]);return l.a.createElement("svg",Ea({width:16,height:17,viewBox:"0 0 16 17",fill:"none",ref:t},n),a?l.a.createElement("title",null,a):null,ka,wa)},Ca=l.a.forwardRef((function(e,t){return l.a.createElement(_a,Ea({svgRef:t},e))}));a.p;function xa(){return(xa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function La(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Oa=l.a.createElement("rect",{x:1.5,y:1,width:12.5,height:1,rx:.5,fill:"currentColor",stroke:"currentColor",strokeWidth:.3}),Sa=l.a.createElement("rect",{x:1.25,y:4.75,width:13,height:1,rx:.5,fill:"currentColor",stroke:"currentColor",strokeWidth:.7}),ja=l.a.createElement("rect",{x:1,y:8.5,width:13.5,height:1,rx:.5,fill:"currentColor",stroke:"currentColor",strokeWidth:1.25}),Pa=function(e){var t=e.svgRef,a=e.title,n=La(e,["svgRef","title"]);return l.a.createElement("svg",xa({width:16,height:11,viewBox:"0 0 16 11",fill:"none",ref:t},n),a?l.a.createElement("title",null,a):null,Oa,Sa,ja)},Aa=l.a.forwardRef((function(e,t){return l.a.createElement(Pa,xa({svgRef:t},e))})),Ia=(a.p,a(709)),Da=a(710),Fa=a(711),Na=a(712),Wa=a(694),Ta=a(713),Ma=a(714);function Ba(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ua(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ba(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ba(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ga,Ra={},za=0,Va=0,Ka=[],Ha=[],Ya=!1,Xa=!1,Za=T(),Ja={},qa=function(e){function t(e){var a;Object(n.a)(this,t),a=Object(o.a)(this,Object(s.a)(t).call(this,e));var r=e.t,c=r.state,i=(c.user,c.test_game),l=(c.subGameInfo,c.api_manager);return a.state={drawer:Q[e.drawerId],isDrawer:i||!1===e.online||2===l||e.drawerId===e.t.state.vk_user.id,text:"",drawing:!1,time:r.state.game_timeout,messages:[],color:"#000000",isEraser:!1,isPipette:!1,lineWidth:2,votes:[],completed_players:[]},Q[e.drawerId]&&Q[e.drawerId].first_name||(a.state.drawer={},setTimeout(Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae([e.drawerId]);case 2:a.setState({drawer:Q[e.drawerId]});case 3:case"end":return t.stop()}}),t)}))),1)),a.onMouseDown=a.onMouseDown.bind(Object(y.a)(a)),a.onMouseUp=a.onMouseUp.bind(Object(y.a)(a)),a.throttle=a.throttle.bind(Object(y.a)(a)),a.onMouseMove=a.onMouseMove.bind(Object(y.a)(a)),a.drawLine=a.drawLine.bind(Object(y.a)(a)),a.sendMessage=a.sendMessage.bind(Object(y.a)(a)),a.undoDraw=a.undoDraw.bind(Object(y.a)(a)),a.updateChooseWordPopout=a.updateChooseWordPopout.bind(Object(y.a)(a)),a.updateVoteWordPopout=a.updateVoteWordPopout.bind(Object(y.a)(a)),e.online&&!i&&(Ga=setInterval((function(){if(a.setState({time:a.state.time-1}),a.state.time<=-5){var e=W()?"png":"webp";a.props.t.setState({canvas_:a.canvas.toDataURL("image/".concat(e)),winnerId:0,word:{nom:""},gameId:0,gameEnd:Date.now()}),a.props.t.setActivePanel("result"),console.log("Game end (timeout)"),clearInterval(Ga)}}),1e3)),a.canvasSize=!a.state.isDrawer&&!Za&&e.t.clientHeight<=700?319/1.5:319,a.canvasMultiplier=2,!Za&&e.t.clientWidth>=600&&(a.canvasMultiplier/=1.41065831,a.canvasSize=450),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillUnmount",value:function(){h.a.send("VKWebAppEnableSwipeBack"),this.props.online&&(this.props.t.socket.unsubscribe("gamePreloadEnd","gameEnd","gameAfkEnd","gameErrorEnd","draw","clear","message"),clearInterval(Ga))}},{key:"componentDidUpdate",value:function(e,t,a){e.color!==this.props.color&&("pipette"===this.props.color?this.setState({isPipette:!0}):this.setState({color:this.props.color}))}},{key:"updateChooseWordPopout",value:function(e,t,a,n){var r=this;e.setPopout(l.a.createElement(d.C,null,l.a.createElement("div",{className:"GameChooseWord"},l.a.createElement("div",{className:"GameChooseWord-Timer"},5-t),l.a.createElement("div",{className:"GameChooseWord-Title"},"\u0427\u0442\u043e \u0431\u0443\u0434\u0435\u0442\u0435 \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c?"),l.a.createElement("div",{className:"GameChooseWord-Words"},(a||[{nom:"\u0441\u043b\u043e\u0432\u043e 1"},{nom:"\u0441\u043b\u043e\u0432\u043e 2"},{nom:"\u0441\u043b\u043e\u0432\u043e 3"}]).map((function(t,a){return l.a.createElement("div",{key:"word_".concat(a),onClick:function(){Ya=!0,e.setState({word:t}),e.setPopout(null),e.socket.call("games.chooseWord",{lobbyId:n,word:a,manager:e.state.api_manager}),e.log("game_logs","choose_word",{word:t}),r.forceUpdate()}},t.nom)}))))))}},{key:"updateVoteWordPopout",value:function(e,t,a,n){var r=this,o=this.state.votes;e.setPopout(l.a.createElement(d.C,null,l.a.createElement("div",{className:"GameChooseWord"},l.a.createElement("div",{className:"GameChooseWord-Timer"},5-t),l.a.createElement("div",{className:"GameChooseWord-Title"},"\u0413\u043e\u043b\u043e\u0441\u0443\u0439\u0442\u0435 \u0437\u0430 \u0442\u043e, \u0447\u0442\u043e \u0431\u0443\u0434\u0435\u0442\u0435 \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c"),l.a.createElement("div",{className:"GameChooseWord-Words"},(a||[{nom:"\u0441\u043b\u043e\u0432\u043e 1"},{nom:"\u0441\u043b\u043e\u0432\u043e 2"},{nom:"\u0441\u043b\u043e\u0432\u043e 3"}]).map((function(t,a){return l.a.createElement("div",{key:"word_".concat(a),style:{background:Xa===a&&"rgba(255, 255, 255, 0.4)",pointerEvents:Xa&&"none"},onClick:function(){Xa||(Xa=a,e.socket.call("games.voteWord",{lobbyId:n,word:a}),e.log("game_logs","vote_word",{word:t}),r.forceUpdate())}},t.nom,l.a.createElement("span",null,o[a]||0))}))))))}},{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,n,r,o,s,c,i,u,p,m,f,v,y,k,w,_,C,x,L,O,S,j,P,A=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Date.now(),this.oldImage=void 0,Ha=[],this.clientHeight=parseInt(document.body.attributes.getNamedItem("_height").value),this.maxCommentsHeight=!T()&&114/(this.clientHeight<=600?3:this.clientHeight<=700?2:1),h.a.send("VKWebAppDisableSwipeBack"),n=this.canvas,r=this.onMouseDown,o=this.onMouseUp,s=this.throttle,c=this.onMouseMove,i=this.props,u=this.state.isDrawer,p=i.online,m=i.t,f=i.lobbyId,v=m.state,y=v.chooseWords,k=v.voteWords,w=v.api_manager,this.canvasContext=n.getContext("2d"),m.setState({color:"#000000",pickedColor:"#000000",color_gradient:void 0,color_percent:0}),p&&(m.socket.unsubscribe("gamePreloadEnd","gameEnd","gameVote","voteWord","completePicture","gameAfkEnd","gameErrorEnd","draw","clear","message"),2===w&&(m.socket.subscribe("gameVote",Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.setState(Ja);case 2:m.setActivePanel("art_battle_rate");case 3:case"end":return e.stop()}}),e)})))),m.socket.subscribe("voteWord",(function(e){A.setState({votes:e.votes})})),m.socket.subscribe("setWord",function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A.props.t.setState({word:t.word}),A.props.t.log("game_logs","set_word",{word:t.word}),A.props.t.forceUpdate(),A.forceUpdate();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m.socket.subscribe("completePicture",(function(e){A.setState({completed_players:e.completed})}))),m.socket.subscribe("gamePreloadEnd",function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.setPopout(l.a.createElement(d.E,null)),clearInterval(Ga),console.log("Game preload end");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),2!==w&&m.socket.subscribe("gameEnd",function(){var e=Object(g.a)(b.a.mark((function e(a){var n,r,o,s,c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=W()?"png":"webp",r=A.canvas.toDataURL("image/".concat(n)),o=a.winnerId,s=a.word,c=a.gameId,i=a.lobbyId,o>0?m.log("game_logs","end",{win:o,word:s,game:c,time:Math.floor((Date.now()-t)/1e3),lobby_id:i}):m.log("game_logs","end_timeout",{word:s,game:c,time:Math.floor((Date.now()-t)/1e3),lobby_id:i}),0===o){e.next=5;break}return e.next=5,ae([o]);case 5:m.setPopout(null),m.setState({canvas_:r,winnerId:o,word:s,gameId:c,gameEnd:Date.now()}),m.setActivePanel("result"),console.log("Game end");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m.socket.subscribe("gameAfkEnd",function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.log("game_logs","end_afk"),m.setState({game_canceled_reason:"\u0418\u0433\u0440\u0430 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430"}),m.setActivePanel("game_canceled"),1===m.state.api_manager&&m.state.subGameInfo.owner_id===m.state.user.id&&m.socket.call("friends.leaveLobby",{owner_id:m.state.user.id}),console.log("Game end afk");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m.socket.subscribe("gamePlayersLeft",function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.log("game_logs","end_players_left"),m.setState({game_canceled_reason:"\u0418\u0433\u0440\u043e\u043a\u0438 \u0432\u044b\u0448\u043b\u0438"}),m.setActivePanel("game_canceled"),1===m.state.api_manager&&m.state.subGameInfo.owner_id===m.state.user.id&&m.socket.call("friends.leaveLobby",{owner_id:m.state.user.id}),console.log("Game end players left");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m.socket.subscribe("gameErrorEnd",function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.log("game_logs","end_error"),e.next=3,m.setState({gameErrorText:t.message});case 3:m.setActivePanel("game_error"),console.log("Game end error"),1===m.state.api_manager&&m.state.subGameInfo.owner_id===m.state.user.id&&m.socket.call("friends.leaveLobby",{owner_id:m.state.user.id}),m.setPopout(null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u?2===w&&(m.socket.subscribe("draw",(function(e){var t=e.data,a=e.player_id;Ja[a]||(Ja[a]=[]),Ja[a].push(t)})),m.socket.subscribe("undo",(function(e){var t=e.player_id;Ja[t]||(Ja[t]=[]),Ja[t].splice(Ja[t].length-1,1)}))):(m.socket.subscribe("draw",(function(e){Ha.push(e.data);var t=!0,a=!1,n=void 0;try{for(var r,o=e.data[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value,c=s.x0,i=s.y0,l=s.x1,u=s.y1,p=s.color,d=s.isEraser,m=s.lineWidth,h=s.multiplier;m||(m=2),h||(h=2),A.drawLine(c,i,l,u,p,d,m,h)}}catch(f){a=!0,n=f}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}})),m.socket.subscribe("undo",(function(e){A.undoDraw()}))),m.socket.subscribe("message",function(){var e=Object(g.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.user_id,n=t.message,console.log("New message from ".concat(a,": ").concat(n)),Q[a]){e.next=5;break}return e.next=5,ae(a);case 5:return e.next=7,A.setState({messages:[].concat(Object(E.a)(A.state.messages),[Ua({user_id:a,message:n},Q[a])])});case 7:A.comments.scrollTop=A.comments.scrollHeight;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),u&&(n.addEventListener("mousedown",r,!1),n.addEventListener("mouseup",o,!1),n.addEventListener("mouseout",o,!1),n.addEventListener("mousemove",s(c,10),!1),n.addEventListener("touchstart",r,!1),n.addEventListener("touchend",o,!1),n.addEventListener("touchcancel",o,!1),n.addEventListener("touchmove",s(c,10),!1),p&&(Ya=!1,y&&y.length>0&&(m.log("game_logs","choose_words",{words:y}),_=0,this.updateChooseWordPopout(m,_,y,f),C=setInterval((function(){_++,Ya||A.updateChooseWordPopout(m,_,y,f),(5===_||Ya)&&clearInterval(C)}),1e3),setTimeout((function(){Ya||(Ya=!0,m.log("game_logs","set_word_afk",{word:y[0]}),m.setState({word:y[0]}),m.setPopout(null))}),5e3)),k&&k.length>0&&(m.log("game_logs","vote_words",{words:k}),x=0,this.updateVoteWordPopout(m,x,k,f),L=setInterval((function(){x++,A.updateChooseWordPopout(m,x,y,f),(5===x||Ya)&&clearInterval(L)}),1e3),setTimeout((function(){m.setPopout(null)}),5e3)),m.socket.subscribe("drawAfkWarning",(function(e){m.log("game_logs","afk_warning"),h.a.supports("VKWebAppTapticNotificationOccurred")&&h.a.send("VKWebAppTapticNotificationOccurred",{type:"warning"}),m.setPopout(l.a.createElement(d.C,null,l.a.createElement("div",{className:"GameAfkWarning"},l.a.createElement("div",{className:"GameAfkWarning-Icon"},l.a.createElement(Ia.a,null)),l.a.createElement("div",{className:"GameAfkWarning-Title"},"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c!"),l.a.createElement("div",{className:"GameAfkWarning-Description"},"\u0415\u0441\u043b\u0438 \u0432\u044b \u043d\u0435 \u0431\u0443\u0434\u0435\u0442\u0435 \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c, \u0432\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u043d\u0430\u043a\u0430\u0437\u0430\u043d\u044b"),l.a.createElement("div",{className:"GameAfkWarning-Button",onClick:function(){return m.setPopout(null)}},"\u041e\u043a\u0435\u0439"))))})))),p){e.next=24;break}return m.setPopout(l.a.createElement(d.E,null)),O=m.state.pictureUrl_,e.next=16,U(O,!1);case 16:return S=e.sent,j=a(83),P=j.loadImage,e.next=21,P(S);case 21:this.oldImage=e.sent,this.canvasContext.drawImage(this.oldImage,0,0,638,638),m.setPopout(null);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onMouseDown",value:function(e){this.setState({drawing:!0}),Ra.x=e.clientX||e.touches[0].clientX,Ra.y=e.clientY||e.touches[0].clientY,Ka=[]}},{key:"onMouseUp",value:function(e){var t=this.state,a=t.drawing,n=t.color,r=t.isEraser,o=t.lineWidth,s=t.isPipette;if(a)if(this.setState({drawing:!1}),s)this.setState({isPipette:!1});else try{var c=this.canvas.getBoundingClientRect();try{this.drawLine(Ra.x-c.left,Ra.y-c.top,(e.clientX||e.touches[0].clientX)-c.left,(e.clientY||e.touches[0].clientY)-c.top,n,r,o,this.canvasMultiplier)}catch(e){}console.log("Lines to send: ".concat(Ka.length)),Ka.length>0&&(Ha.push(Ka),this.state.isDrawer&&this.props.online&&!this.props.t.state.test_game&&this.props.t.socket.call("games.draw",{lobbyId:this.props.lobbyId,data:Ka,manager:this.props.t.state.api_manager}),Ka=[])}catch(i){console.log(i)}}},{key:"onMouseMove",value:function(e){var t=this.state,a=t.drawing,n=t.color,r=t.isEraser,o=t.lineWidth;if(a){try{var s=this.canvas,c=this.canvasContext,i=s.getBoundingClientRect();if(this.state.isPipette){var l=c.getImageData(((e.clientX||e.touches[0].clientX)-i.left)*this.canvasMultiplier,((e.clientY||e.touches[0].clientY)-i.top)*this.canvasMultiplier,1,1),u=S(l.data[0],l.data[1],l.data[2]);return this.setState({color:u}),void this.props.t.setState({pickedColor:u})}this.drawLine(Ra.x-i.left,Ra.y-i.top,(e.clientX||e.touches[0].clientX)-i.left,(e.clientY||e.touches[0].clientY)-i.top,n,r,o,this.canvasMultiplier),Ra.x=e.clientX||e.touches[0].clientX,Ra.y=e.clientY||e.touches[0].clientY}catch(p){console.log(p)}return!1}}},{key:"drawLine",value:function(e,t,a,n,r,o,s,c){try{this.props.t;var i=this.canvasContext;if("object"===typeof r)r=j(r[za]||r[0],r[za+1]||r[0],Va,r.length),0===(Va+=r.length===Va?-Va:1)&&(za+=r.length===za?-za:1);i.beginPath(),o?(i.globalCompositeOperation="destination-out",i.arc(e*c,t*c,1.2*s,0,2*Math.PI,!1),i.fill()):(i.globalCompositeOperation="source-over",i.moveTo(e*c,t*c),i.lineTo(a*c,n*c),i.strokeStyle=r,i.fill(),i.lineWidth=s,i.lineCap=i.lineJoin="round",i.stroke()),i.closePath(),Ka.push({x0:e,y0:t,x1:a,y1:n,color:r,isEraser:o,lineWidth:s,multiplier:c})}catch(l){}}},{key:"throttle",value:function(e,t){var a=(new Date).getTime();return function(){var n=(new Date).getTime();n-a>=t&&(a=n,e.apply(null,arguments))}}},{key:"sendMessage",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a,n,r,o,s,c,i,l,u,p=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.t,n=t.lobbyId,r=this.state,o=r.text,s=r.messages,c=a.state,i=c.test_game,l=c.user,u=c.api_manager,!i){e.next=9;break}return e.next=6,this.setState({messages:[].concat(Object(E.a)(s),[Ua({user_id:l.id,message:o},Q[l.id])]),text:""});case 6:this.comments.scrollTop=this.comments.scrollHeight,e.next=10;break;case 9:o.replace(/^[0-9 ]+$/,"").length>0?a.socket.call("games.message",{lobbyId:n,message:o,manager:u},(function(e){console.log("Response message",e),e.response?p.setState({text:""}):a.setSnackbar(e.error.message)})):(this.setState({text:""}),a.setSnackbar("\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0441\u043b\u043e\u0432\u043e."),console.log("Message is empty: ".concat(o)));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"undoDraw",value:function(){var e=this.canvasContext,t=this.oldImage;Ha.splice(Ha.length-1,1),e.clearRect(0,0,638,638),t&&(e.globalCompositeOperation="source-over",e.drawImage(t,0,0,638,638)),Ha.length>0&&(Ha.forEach((function(t){t.forEach((function(t){var a=t.x0,n=t.y0,r=t.x1,o=t.y1,s=t.color,c=t.isEraser,i=t.lineWidth,l=t.multiplier;e.beginPath(),c?(e.globalCompositeOperation="destination-out",e.arc(a*l,n*l,1.2*i,0,2*Math.PI,!1),e.fill()):(e.globalCompositeOperation="source-over",e.moveTo(a*l,n*l),e.lineTo(r*l,o*l),e.strokeStyle=s,e.fill(),e.lineWidth=i,e.lineCap=e.lineJoin="round",e.stroke())}))})),e.closePath())}},{key:"render",value:function(){var e=this,t=this.props,a=t.t,n=t.lobbyId,r=t.online,o=t.word,s=a.state,c=s.user,i=s.vk_user,u=s.test_game,p=s.api_manager,m=s.game_players,h=this.state,f=h.drawer,v=h.isDrawer,E=h.text,y=h.color,k=h.time,w=h.messages,_=h.isEraser,C=h.lineWidth,x=h.isPipette,L=h.completed_players,O=(W(),function(){return a.setAlert("\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435","\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0439\u0442\u0438 \u0438\u0437 \u0438\u0433\u0440\u044b?",[{title:"\u0414\u0430",action:function(){1===a.state.api_manager?a.socket.call("friends.leaveLobby",{owner_id:a.state.subGameInfo.owner_id}):a.socket.call("games.leaveGame",{lobbyId:n}),a.setActivePanel("main"),a.showNewAd()},autoclose:!0},{title:"\u041d\u0435\u0442",mode:"cancel",autoclose:!0}],"horizontal")});return u&&(o={nom:"\u0416\u0438\u0440\u0430\u0444"},v=!1,f=a.state.vk_user),l.a.createElement("div",{className:"Game"},r&&!Za&&(0===p||1===p)&&l.a.createElement("div",{className:"NativeButtonMiniAppTop",onClick:function(){v||O()},style:{height:!W()&&37}},v?"id".concat(n):"\u041f\u043e\u043a\u0438\u043d\u0443\u0442\u044c \u0438\u0433\u0440\u0443"),l.a.createElement("div",{style:{width:Za?319:"100%",alignSelf:"flex-start"},ref:function(t){return e.header=t}},l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("div",{style:{display:"flex",alignItems:"center"}},!v&&l.a.createElement(oa,{size:24,src:f.photo_100,frame:f.frame_type,color:f.frame_color}),l.a.createElement("h2",{style:{textAlign:"left",marginLeft:6}},v?"\u0417\u0430\u0434\u0430\u0447\u0430: "+(o?o.nom:""):"\u0420\u0438\u0441\u0443\u0435\u0442: "+f.first_name)),r&&l.a.createElement("h2",{style:{textAlign:"right",width:"25%",color:"var(--color_secondary)",wordWrap:"normal"}},k>=0?k:0," \u0441\u0435\u043a"))),l.a.createElement("div",{style:{display:Za&&r&&"flex"}},l.a.createElement("div",{className:"Canvas__"},l.a.createElement("div",{className:"Canvas_Container_Clear",style:{width:this.canvasSize,height:this.canvasSize}},l.a.createElement("canvas",{style:{width:this.canvasSize,height:this.canvasSize},width:638,height:638,ref:function(t){return e.canvas=t},id:"canvas"})),l.a.createElement("div",{style:{display:!v&&"none"},className:"Canvas_Items_Container"},l.a.createElement(d.H,{step:1,min:4,max:30,value:Number(C),onChange:function(t){return e.setState({lineWidth:t})}}),l.a.createElement("div",{className:"Canvas_SubItems_Container"},l.a.createElement(d.r,{style:Ua({},x?{background:y,color:y}:{}),hasHover:!1,onClick:function(){a.setActiveModal(ns)}},l.a.createElement(Da.a,{width:21,height:21})),l.a.createElement(d.r,{style:{border:_&&"2px solid var(--color_secondary)"},hasHover:!1,onClick:function(){e.setState({isEraser:!_})}},l.a.createElement(Ca,null)),l.a.createElement(d.r,{hasHover:!1,onClick:function(){Ha.length>0&&(r&&a.socket.call("games.undo",{lobbyId:n,api_manager:p}),e.undoDraw())}},l.a.createElement(Fa.a,{width:21,height:21})))),r&&2===p&&l.a.createElement(d.h,{style:Ua({marginTop:Za?18:32},Za?{}:{width:"74.6666667vw"}),disabled:L.indexOf(c.id)>-1,size:"l",mode:"gradient_blue",stretched:!0,onClick:function(){a.socket.call("games.completePicture",{lobbyId:n})}},L.indexOf(c.id)>-1?"\u0416\u0434\u0451\u043c \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445":"\u042f \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043b".concat(1===i.sex?"\u0430":"")),r&&Za&&(0===p||1===p)&&l.a.createElement(d.h,{style:{marginTop:28},stretched:!0,size:"l",mode:"secondary",onClick:function(){v||O()}},v?"id".concat(n):"\u041f\u043e\u043a\u0438\u043d\u0443\u0442\u044c \u0438\u0433\u0440\u0443")),!r&&l.a.createElement("div",{className:"Offline_Drawing__Buttons",style:{width:!Za&&this.canvasSize}},l.a.createElement(d.h,{before:l.a.createElement(Na.a,{fill:"var(--color_secondary)"}),size:"m",mode:"secondary",onClick:function(){a.setAlert("\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435","\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0439\u0442\u0438 \u0431\u0435\u0437 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f?",[{title:"\u0414\u0430",action:function(){a.back(),a.showNewAd()},autoclose:!0},{title:"\u041d\u0435\u0442",mode:"cancel",autoclose:!0}],"horizontal")}},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),l.a.createElement(d.h,{style:{marginLeft:!Za&&10,marginTop:Za&&10},before:l.a.createElement(Wa.a,{fill:"var(--color_secondary)"}),size:"m",mode:"secondary",onClick:function(){a.setAlert("\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435","\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0438\u0441\u0443\u043d\u043e\u043a?",[{title:"\u0414\u0430",action:function(){var t=Object(g.a)(b.a.mark((function t(){var n,r,o,s,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==Ha.length){t.next=4;break}return a.back(),a.showNewAd(),t.abrupt("return");case 4:return a.setPopout(l.a.createElement(d.E,null)),n=W()?"png":"webp",t.next=8,new Promise((function(t){setTimeout((function(){try{e.canvas.toBlob((function(){t(e.canvas.toDataURL("image/".concat(n)))}))}catch(a){console.error(a),t(null)}}),100)}));case 8:if(r=t.sent,o=a.state.gameId_,!e.state.isDrawer){t.next=18;break}s=b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Ha[n],t.next=3,new Promise((function(t){return e.props.t.socket.call("games.editPicture",{history:s,historyLength:Ha.length,gameId:o},function(){var o=Object(g.a)(b.a.mark((function o(s){return b.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(n!==Ha.length-1){o.next=11;break}if(!s.response){o.next=9;break}return a.setState({n_canvasData:r}),a.setSnackbar("\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"),o.next=6,new Promise((function(t){return e.props.t.socket.call("games.getByDrawerId",{id:e.props.t.state.vk_user.id,limit:e.props.t.state.gamesAsDrawer.length},function(){var a=Object(g.a)(b.a.mark((function a(n){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.props.t.setState({gamesAsDrawer:n.response});case 2:t(!0);case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}));case 6:a.forceUpdate(),o.next=10;break;case 9:a.setSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c");case 10:setTimeout((function(){a.setPopout(null),a.back(),a.back(),a.showNewAd(),a.forceUpdate()}),1e3);case 11:t(!0);case 12:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}())}));case 3:case"end":return t.stop()}}),t)})),c=0;case 13:if(!(c<Ha.length)){t.next=18;break}return t.delegateYield(s(c),"t0",15);case 15:c++,t.next=13;break;case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),autoclose:!0},{title:"\u041d\u0435\u0442",mode:"cancel",autoclose:!0}],"horizontal")}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")),r&&(0===p||1===p)&&l.a.createElement("div",{className:"Comments_Container",style:{width:!Za&&this.canvasSize}},l.a.createElement("div",{className:"Comments",ref:function(t){return e.comments=t},style:this.maxCommentsHeight?{maxHeight:this.maxCommentsHeight}:{}},w.map((function(t,n){return l.a.createElement("div",{className:"Comment",key:"div__".concat(n),style:{marginTop:n>0&&6,cursor:t.id===a.state.vk_user.id&&"default"},ref:function(t){return e["comment".concat(n)]=t},onClick:function(){t.id!==a.state.vk_user.id&&t.message.replaceAll("*","").length>0&&a.setPopout(l.a.createElement(d.a,{onClose:function(){return a.setPopout(null)},iosCloseItem:l.a.createElement(d.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),toggleRef:e["comment".concat(n)]},l.a.createElement(d.b,{autoclose:!0,mode:"destructive",onClick:function(){a.socket.call("games.reportWord",{message:t.message}),a.setSnackbar("\u0416\u0430\u043b\u043e\u0431\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430")}},"\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))}},l.a.createElement(oa,{size:32,src:t.photo_100,frame:t.frame_type,color:t.frame_color}),l.a.createElement("div",null,l.a.createElement("div",null,t.first_name," ",t.last_name),l.a.createElement("div",null,t.message)))}))),!v&&l.a.createElement("div",{className:"Comment_Input"},l.a.createElement(d.s,{autoFocus:!0,id:"inputComment",value:E,onChange:function(t){var a=t.currentTarget.value;(a.match(/^[0-9a-zA-Z\u0430-\u044f\u0410-\u042f ,.:-]+$/)||""===a)&&a.length<=120&&(console.log("Set text1 = ".concat(a)),e.setState({text:a}))},placeholder:"\u0415\u0441\u0442\u044c \u0434\u043e\u0433\u0430\u0434\u043a\u0438?",onKeyDown:function(t){var a=t.key;console.log("Pressed key = ".concat(a)),"Enter"===a&&(console.log("Send message (key) (lobbyId = ".concat(n,"): ").concat(E)),e.sendMessage())},onFocus:function(){}}),l.a.createElement(d.S,{style:{display:0===E.trim().length&&"none"},mode:"send",onClick:function(){console.log("Send message (btn) (lobbyId = ".concat(n,"): ").concat(E)),e.sendMessage()}}))),r&&2===p&&l.a.createElement("div",{className:"ArtBattle--Users"},m.map((function(e,t){return Za?l.a.createElement("div",{key:"user-".concat(t),style:-1===L.indexOf(e)?{opacity:.5}:{}},l.a.createElement(oa,{size:32,src:Q[e].photo_100,frame:Q[e].frame_type,color:Q[e].frame_color}),l.a.createElement("span",null,Q[e].first_name," ",Q[e].last_name.substring(0,1),"."),l.a.createElement("div",null,L.indexOf(e)>-1?l.a.createElement(Ta.a,null):l.a.createElement(Ma.a,{width:16,height:16}))):l.a.createElement("div",{key:"user-".concat(t),style:-1===L.indexOf(e)?{opacity:.5}:{}},l.a.createElement(oa,{size:32,src:Q[e].photo_100,frame:Q[e].frame_type,color:Q[e].frame_color}),l.a.createElement("div",null,L.indexOf(e)>-1?l.a.createElement(Ta.a,{width:10,height:10}):l.a.createElement(Ma.a,{width:10,height:10})))})))))}}]),t}(i.PureComponent);qa.defaultProps={};var $a=qa,Qa=a(726),en=a(727),tn=a(716),an=a(728),nn=a(715),rn=a(720),on=a(721),sn=a(719),cn=a(717),ln=a(718),un=a(693),pn=a(722),dn=a(723),mn=a(695),hn=a(724),fn=a(725);function vn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function bn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vn(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vn(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function gn(e){return En.apply(this,arguments)}function En(){return(En=Object(g.a)(b.a.mark((function e(t){var n,r,o,s,c,i,l,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=D(1,13),e.next=3,z(B(a(628)("./".concat(n,".webp"))));case 3:return r=e.sent,o=Object(C.createCanvas)(r.width,r.height),(s=o.getContext("2d")).drawImage(r,0,0),c=s.getImageData(372,1665,1,1),i="rgb(".concat(c.data[0],", ").concat(c.data[1],", ").concat(c.data[2],")"),l=t["Word.nom"]||t.Word.nom,s.font="".concat(l.length>=14?76:96,"px Inter Black"),s.textAlign="left",s.fillStyle=i,s.fillText(l.substring(0,1).toUpperCase()+l.substring(1),100,574),s.fillStyle="#FFFFFF",s.roundRect(90,672,899,899,129),s.fill(),e.next=19,z(t["Picture.url"]||t.Picture.url);case 19:return u=e.sent,R(s,u,129,null,{x:90,y:672,width:899,height:899}),e.abrupt("return",o);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yn(e){return kn.apply(this,arguments)}function kn(){return(kn=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.t.setPopout(l.a.createElement(d.E,null)),e.prev=1,e.t0=h.a,e.next=5,gn(t);case 5:return e.t1=e.sent.toDataURL("image/png"),e.t2={url:"https://vk.com/app".concat(N().vk_app_id,"#picture").concat(t.id),text:"go_to",type:"url"},e.t3={background_type:"image",blob:e.t1,attachment:e.t2},e.next=10,e.t0.send.call(e.t0,"VKWebAppShowStoryBox",e.t3);case 10:this.props.t.socket.call("games.share",{gameId:t.id}),e.next=16;break;case 13:e.prev=13,e.t4=e.catch(1),console.error(e.t4);case 16:this.props.t.setPopout(null);case 17:case"end":return e.stop()}}),e,this,[[1,13]])})))).apply(this,arguments)}function wn(e){return _n.apply(this,arguments)}function _n(){return(_n=Object(g.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.t.setPopout(l.a.createElement(d.E,null)),e.next=3,gn(t);case 3:return a=e.sent,e.t0=ea,e.next=7,new Promise((function(e){return a.toBlob((function(t){return e(t)}))}));case 7:return e.t1=e.sent,e.t2="\u0420\u0438\u0441\u0443\u043d\u043e\u043a \u0441\u0434\u0435\u043b\u0430\u043d \u0432 \u043c\u0438\u043d\u0438-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 vk.com/app".concat(N().vk_app_id,". \u0421\u043b\u043e\u0432\u043e: ").concat(t["Word.nom"]||t.Word.nom),e.next=11,(0,e.t0)(e.t1,"\u0423\u0433\u0430\u0434\u0430\u0439, \u0447\u0442\u043e \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043d\u043e",e.t2,!1,!0);case 11:(n=e.sent)>=0&&this.props.t.socket.call("games.save",{gameId:t.id}),this.props.t.setSnackbar(-1===n?"\u0414\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u0432 \u0430\u043b\u044c\u0431\u043e\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c \u0434\u043e\u0441\u0442\u0443\u043f":n<0?"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 :(":"\u0420\u0438\u0441\u0443\u043d\u043e\u043a \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d \u0432 \u0430\u043b\u044c\u0431\u043e\u043c \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435"),this.props.t.setPopout(null);case 15:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Cn(e,t){return xn.apply(this,arguments)}function xn(){return(xn=Object(g.a)(b.a.mark((function e(t,a){var n,r=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.props.t).setPopout(l.a.createElement(d.a,{onClose:function(){return n.setPopout(null)},iosCloseItem:l.a.createElement(d.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),toggleRef:a||this.pictureActionsButton},t.drawerId===n.state.vk_user.id&&l.a.createElement(d.b,{autoclose:!0,before:l.a.createElement(nn.a,null),onClick:function(){wn.bind(r)(t)}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0438\u0441\u0443\u043d\u043e\u043a"),l.a.createElement(d.b,{autoclose:!0,before:l.a.createElement(tn.a,null),onClick:function(){yn.bind(r)(t)}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"),l.a.createElement(d.b,{autoclose:!0,before:l.a.createElement(cn.a,null),onClick:function(){h.a.send("VKWebAppCopyText",{text:"https://vk.com/app".concat(N().vk_app_id,"#picture").concat(t.id)}),n.setSnackbar("\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430")}},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u0443"),l.a.createElement(d.b,{autoclose:!0,before:l.a.createElement(ln.a,null),onClick:function(){h.a.send("VKWebAppCopyText",{text:"https://vk.com/app".concat(N().vk_app_id,"#author").concat(t.drawerId)}),n.setSnackbar("\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430")}},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0430\u0432\u0442\u043e\u0440\u0430"),t.drawerId!==n.state.vk_user.id&&"feed"!==n.state.activePanel&&l.a.createElement(d.b,{autoclose:!0,before:l.a.createElement(sn.a,null),onClick:function(){n.setPopout(l.a.createElement(d.E,null)),n.socket.call("games.report",{game_id:t.id},(function(e){e.response?n.setSnackbar("\u0416\u0430\u043b\u043e\u0431\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"):n.setSnackbar("\u0416\u0430\u043b\u043e\u0431\u0430 \u0443\u0436\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"),n.setPopout(null)}))}},"\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))),this.forceUpdate(),n.forceUpdate();case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var Ln=function(e){function t(e){var a;Object(n.a)(this,t);var r=(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).props,c=r.t,i=r.param,l=r.current,u=c.socket,p=c.state[i];return a.state={canGetMore:p.length>1,isReported:!1},u.call("pictures.isLiked",{game_id:p[l].id},(function(e){a.setState({isLiked:e.response})})),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=W(),a=this.props,n=a.t,r=a.current,o=a.method,s=a.param,c=a.user_id,i=n.state,u=i.n_canvasData,p=i.banners,m=i.user,v=n.state[s],y=v[r],k=Q[y.drawerId],w=this.state,_=w.isLiked,C=w.isReported,x=(w.isDeleted,w.canGetMore),L=y.deleteTime-Date.now(),O=L>=864e5?["\u0434\u0435\u043d\u044c","\u0434\u043d\u044f","\u0434\u043d\u0435\u0439"]:L>=36e5?["\u0447\u0430\u0441","\u0447\u0430\u0441\u0430","\u0447\u0430\u0441\u043e\u0432"]:"\u043c\u0438\u043d",S=L/1e3/60,j=A(S>=1440?Math.floor(S/24/60):S>=60?Math.floor(S/60):Math.floor(S),O),P=m.vk_donut||m.premium||m.admin;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.back();case 1:case"end":return e.stop()}}),e)})))}),separator:!1}),y&&l.a.createElement("div",{className:"PictureInfo"},l.a.createElement("div",{className:"PictureInfo-Word-Time"},l.a.createElement("span",null,y["Word.nom"]&&y["Word.nom"].substring(0,1).toUpperCase()+y["Word.nom"].substring(1)),l.a.createElement("span",null,Math.round((y.endTime-y.startTime)/1e3)," \u0441.")),l.a.createElement("div",{className:"PictureInfo-CanvasContainer"},l.a.createElement("img",{crossOrigin:"anonymous",alt:"im",src:y["Picture.url"]||u,ref:function(t){return e.imageRef=t}})),l.a.createElement("div",{className:"PictureInfo-Actions"},[[_?l.a.createElement(rn.a,{fill:"#FD5C81",width:28,height:28}):l.a.createElement(on.a,null),I(y["Picture.likes"]),function(){n.setPopout(l.a.createElement(d.E,null)),n.socket.call("pictures.like",{game_id:y.id},(function(t){t.response&&(v[r]=bn({},y,Object(f.a)({},"Picture.likes",t.response.likes)),n.setState({like_picturesList:v}),e.setState({isLiked:t.response.isLiked})),n.setPopout(null)}))}],[l.a.createElement(un.a,null),"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",function(){return Cn.bind(e)(y)},function(t){return e.pictureActionsButton=t}],[l.a.createElement(pn.a,null),j,function(){P||y.drawerId!==m.id||n.setPopout(l.a.createElement(d.C,null,l.a.createElement("div",{className:"GameAfkWarning"},l.a.createElement("div",{className:"GameAfkWarning-Icon"},l.a.createElement(dn.a,null)),l.a.createElement("div",{className:"GameAfkWarning-Title"},"\u041a\u0430\u0440\u0442\u0438\u043d\u0430 \u0443\u0434\u0430\u043b\u0438\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 ",j),l.a.createElement("div",{className:"GameAfkWarning-Description"},t?"\u0412 \u0441\u0442\u0430\u0442\u044c\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e, \u043a\u0430\u043a \u043f\u0440\u043e\u0434\u043b\u0438\u0442\u044c \u0430\u0432\u0442\u043e\u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0440\u0438\u0441\u0443\u043d\u043a\u043e\u0432":"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0443 avocado+, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043b\u0438\u0442\u044c \u0430\u0432\u0442\u043e\u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0440\u0438\u0441\u0443\u043d\u043a\u043e\u0432"),l.a.createElement("div",{className:"GameAfkWarning-Button",style:{background:"rgba(255, 75, 75, 0.15)"},onClick:function(){t?M("https://vk.com/@draw_app-avocadoplus"):n.go("vk_donut_avocado")}},t&&l.a.createElement(Ut.a,{width:20,height:20}),t?"\u041f\u0435\u0440\u0435\u0439\u0442\u0438":"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c"),l.a.createElement("div",{className:"GameAfkWarning-Button",style:{marginTop:8},onClick:function(){return n.setPopout(null)}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))))}]].map((function(e,t){return l.a.createElement("div",{key:"action_".concat(t),onClick:e[2],ref:e[3],style:C&&2===t?{opacity:.5,pointerEvents:"none"}:{}},e[0],l.a.createElement("span",null,e[1]))}))),l.a.createElement("div",{className:"PictureInfo-Author",onClick:function(){n.setPopout(l.a.createElement(d.E,null)),n.socket.call("users.getById",{id:y.drawerId},function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.socket.call("games.getByDrawerId",{id:y.drawerId},function(){var e=Object(g.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({author:bn({id:y.drawerId},t.response||{}),author_works:a.response});case 2:n.go("author"),n.setPopout(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},style:bn({},k?{}:{display:"none"})},l.a.createElement("div",null,"\u0410\u0432\u0442\u043e\u0440"),l.a.createElement("div",null,l.a.createElement(oa,{size:36,src:k&&k.photo_100,frame:k&&k.frame_type,color:k&&k.frame_color}),l.a.createElement("div",null,k&&k.first_name," ",k&&k.last_name))),l.a.createElement("div",{className:"PictureInfo-Arrows-ResumeDraw"},l.a.createElement("div",{style:0===r?{opacity:.5,pointerEvents:"none"}:{},onClick:function(){n.setPopout(l.a.createElement(d.E,null)),n.socket.call("pictures.isLiked",{game_id:v[r-1].id},(function(t){e.setState({isLiked:t.response,canGetMore:!0,isReported:!1}),n.setState({like_currentPictureSelected:r-1,n_canvasData:void 0}),n.setPopout(null)}))}},l.a.createElement(mn.a,null)),l.a.createElement("div",{style:{background:"var(--gradient_green)",color:"#FFFFFF",display:y.drawerId!==n.state.vk_user.id&&"none"},onClick:function(){n.socket.call("games.canResumeDrawing",{gameId:y.id},function(){var e=Object(g.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.response){e.next=16;break}if(n.state.user.vk_donut){e.next=9;break}return e.prev=2,e.next=5,h.a.send("VKWebAppShowNativeAds",{ad_format:"reward"});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:return console.log(y),e.next=12,n.setState({isOnlineDrawing:!1,word:{nom:y["Word.nom"]},pictureUrl_:y["Picture.url"],gameId_:y.id});case 12:console.log(n.state.word),n.go("game"),e.next=17;break;case 16:t?n.go("vk_donut_blocked"):n.go("vk_donut_avocado");case 17:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}())}},l.a.createElement(hn.a,null)),l.a.createElement("div",{style:x?{}:{opacity:.5,pointerEvents:"none"},onClick:function(){var t=!1;r===v.length-1?o&&o.length>0?t=!0:e.setState({canGetMore:!1}):(n.socket.call("pictures.isLiked",{game_id:v[r+1].id},(function(t){e.setState({isLiked:t.response}),n.setState({like_currentPictureSelected:r+1,n_canvasData:void 0})})),r+1===v.length-1&&(e.setState({canGetMore:!1}),t=!0)),t&&(n.setPopout(l.a.createElement(d.E,null)),n.socket.call(o,{offset:v.length,limit:10,id:c},function(){var t=Object(g.a)(b.a.mark((function t(a){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.response.length>0)){t.next=4;break}return t.next=3,ae(a.response.map((function(e){return e.drawerId})));case 3:n.setState((r={},Object(f.a)(r,s,Object(E.a)(new Set([].concat(Object(E.a)(v),Object(E.a)(a.response))))),Object(f.a)(r,"n_canvasData",void 0),r));case 4:e.setState({canGetMore:a.response.length>0}),n.setPopout(null);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.setState({isReported:!1})}},l.a.createElement(fn.a,null))),!n.newAdSupports&&p[8]&&l.a.createElement(d.D,{bannerData:p[8],onClose:Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p[8]=!1,t.next=3,n.setState({banners:p});case 3:e.forceUpdate();case 4:case"end":return t.stop()}}),t)})))})))}}]),t}(i.PureComponent);Ln.defaultProps={};var On=Ln;function Sn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function jn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Sn(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Sn(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Pn=T(),An=function(e){function t(e){var a;Object(n.a)(this,t),a=Object(o.a)(this,Object(s.a)(t).call(this,e));var r=e.drawerId,c=e.winnerId,i=e.word,l=e.t;return a.state={isDrawer:r===l.state.vk_user.id,isWinner:c===l.state.vk_user.id,winnerId:c,drawerId:r,word:i,playAgain:!1,playAgainTick:10},a.shareStory=a.shareStory.bind(Object(y.a)(a)),a.back=a.back.bind(Object(y.a)(a)),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){L(["TT Commons Demibold"]),this.props.t.setState({chooseWords:[]})}},{key:"shareStory",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a,n,r,o,s,c,i,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.t.setPopout(l.a.createElement(d.E,null)),e.prev=1,t=this.state,a=t.isDrawer,n=t.isWinner,r=a?1:n?2:3,e.next=8,z("https://photos.avocado.special.vk-apps.com/drawapp_search_images/stories/Story".concat(r,".png"));case 8:return o=e.sent,s=Object(C.createCanvas)(o.width,o.height),c=s.getContext("2d"),i=this.state.word,u=i.nom.substring(0,1).toUpperCase()+i.nom.substring(1),c.drawImage(o,0,0),1===r&&(c.font="64px TT Commons Demibold",c.textAlign="center",c.fillStyle="#616161",c.fillText(u,539,1210)),c.drawImage(this.imageRef,198,618,683,683),e.prev=16,e.next=19,h.a.send("VKWebAppShowStoryBox",{background_type:"image",blob:s.toDataURL("image/png"),attachment:{url:"https://vk.com/app"+N().vk_app_id,text:"go_to",type:"url"}});case 19:this.props.t.socket.call("games.share",{gameId:this.props.gameId}),K("stats.shareStory"),e.next=25;break;case 23:e.prev=23,e.t0=e.catch(16);case 25:this.props.t.updateData(),e.next=32;break;case 28:e.prev=28,e.t1=e.catch(1),console.error(e.t1),this.props.t.setSnackbar("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");case 32:this.props.t.setPopout(null);case 33:case"end":return e.stop()}}),e,this,[[1,28],[16,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"back",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a,n,r,o,s,c,i,u,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.t,a=t.back,n=t.state,r=t.socket,o=t.setPopout,s=t.updateData,c=t.showNewAd,i=n.subGameInfo,u=n.api_manager,p=n.user,c(),o(l.a.createElement(d.E,null));try{s()}catch(m){}return e.prev=4,e.next=7,h.a.send("VKWebAppShowNativeAds",{ad_format:"interstitial"});case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(4);case 11:1===u&&i.owner_id===p.id&&r.call("friends.leaveLobby",{owner_id:p.id}),o(null),a();case 14:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.t,n=t.gameId,r=a.state,o=r.vk_user,s=r.isNotApp,c=r.api_manager,i=this.state,u=i.isDrawer,p=i.isWinner,m=i.winnerId,v=i.drawerId,E=i.word,y=i.isLiked,k=i.playAgain,w=i.playAgainTick,_=Math.round((a.state.gameEnd-a.state.gameStart)/1e3),C=2===c?[p?"\u0422\u044b \u043f\u043e\u0431\u0435\u0434\u0438\u043b".concat(1===o.sex?"\u0430":"","!"):"\u0423\u0432\u044b \u0438 \u0430\u0445!","\u0411\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043b\u043e \u0437\u0430 \u0440\u0438\u0441\u0443\u043d\u043e\u043a ".concat(Q[m].first_name_gen)]:u?0!==m?["\u0422\u044b \u043c\u043e\u043b\u043e\u0434\u0435\u0446!","\u0422\u0432\u043e\u044e \u043a\u0430\u0440\u0442\u0438\u043d\u0443 \u0443\u0433\u0430\u0434\u0430\u043b\u0438 \u0437\u0430 ".concat(A(_||0,["\u0441\u0435\u043a\u0443\u043d\u0434\u0443","\u0441\u0435\u043a\u0443\u043d\u0434\u044b","\u0441\u0435\u043a\u0443\u043d\u0434"]))]:["\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u0448\u043b\u043e","\u041d\u0438\u043a\u0442\u043e \u043d\u0435 \u0443\u0433\u0430\u0434\u0430\u043b, \u0447\u0442\u043e \u0442\u044b \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043b"]:0!==m?p?["\u0422\u044b \u043c\u043e\u043b\u043e\u0434\u0435\u0446!","\u0422\u044b \u043f\u0435\u0440\u0432".concat(1===o.sex?"\u0430\u044f":"\u044b\u0439"," \u0443\u0433\u0430\u0434\u0430\u043b").concat(1===o.sex?"\u0430":"",", \u0447\u0442\u043e \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043b").concat(1===Q[v].sex?"\u0430":""," ").concat(Q[v].first_name)]:["\u0418\u0433\u0440\u0430 \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430","".concat(Q[m].first_name," \u0431\u044b\u043b").concat(1===Q[m].sex?"\u0430":""," \u043f\u0435\u0440\u0432").concat(1===Q[m].sex?"\u043e\u0439":"\u044b\u043c",", \u043a\u0442\u043e \u0443\u0433\u0430\u0434\u0430\u043b, \u0447\u0442\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043e \u043d\u0430 \u0445\u043e\u043b\u0441\u0442\u0435")]:["\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u0448\u043b\u043e","\u041d\u0438\u043a\u0442\u043e \u043d\u0435 \u0443\u0433\u0430\u0434\u0430\u043b, \u0447\u0442\u043e \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a \u043f\u044b\u0442\u0430\u043b\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c"],x=Object(f.a)({Word:this.state.word,id:this.props.gameId},"Picture.url",a.state.canvas_),L=!a.state.subGameInfo||!a.state.subGameInfo.data||a.state.subGameInfo.data.saveGame;return l.a.createElement(l.a.Fragment,null,Pn?l.a.createElement(d.r,{style:jn({position:"fixed",top:49,left:96},k?{visibility:"hidden",pointerEvents:"none"}:{}),onClick:this.back},l.a.createElement(Qa.a,{fill:"#F15F8A"})):l.a.createElement(d.z,{separator:!1,left:l.a.createElement(d.r,{style:k?{visibility:"hidden",pointerEvents:"none"}:{},onClick:this.back},l.a.createElement(Qa.a,{fill:"#F15F8A"}))}),l.a.createElement("div",{className:"Result_New"},E&&E.nom&&l.a.createElement("h2",null,E.nom.substring(0,1).toUpperCase()+E.nom.substring(1)),l.a.createElement("div",{className:"Canvas_Container"},l.a.createElement("img",{alt:"canvas",src:a.state.canvas_,ref:function(t){return e.imageRef=t}})),l.a.createElement("h1",null,C[0]),l.a.createElement("p",null,C[1]),k?l.a.createElement(l.a.Fragment,null,l.a.createElement(d.h,{style:{marginTop:"6.89655172vh"},stretched:!0,size:"l",mode:"pink_secondary",onClick:function(){}},l.a.createElement("div",{style:{opacity:.5,display:"flex",flexDirection:"column"}},l.a.createElement("span",null,"\u0416\u0434\u0451\u043c \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445"),l.a.createElement("span",{style:{fontSize:11,marginTop:-4}},w," \u0441."))),l.a.createElement(d.P,{style:{marginTop:12},photos:[o.photo_100],size:"m",visibleCount:5})):l.a.createElement(l.a.Fragment,null,l.a.createElement(d.h,{style:{marginTop:"6.89655172vh"},stretched:!0,size:"l",mode:"gradient_pink",onClick:Object(g.a)(b.a.mark((function t(){var n,r,o,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.t,r=n.socket,o=n.state,i=o.subGameInfo,a.setPopout(l.a.createElement(d.E,null)),t.prev=2,s){t.next=6;break}return t.next=6,h.a.send("VKWebAppShowNativeAds",{ad_format:"interstitial"});case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(2);case 10:a.setPopout(null),a.updateData(),1===c?(a.setPopout(l.a.createElement(d.E,null)),r.call("friends.joinLobby",{owner_id:i.owner_id},function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.response){e.next=8;break}return e.next=3,ae(t.response.members);case 3:return e.next=5,a.setState({friend_lobby:t.response});case 5:a.vkChatIntegration||a.isFromCatalogChat?a.setActivePanel("friend_lobby",["main"]):a.setActivePanel("friend_lobby",["main","friends"]),e.next=9;break;case 8:a.vkChatIntegration||a.isFromCatalogChat?a.setActivePanel("main"):a.setActivePanel("friends",["main"]);case 9:a.showNewAd(),a.setPopout(null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):(a.setActivePanel("search",["main"]),a.showNewAd());case 13:case"end":return t.stop()}}),t,null,[[2,8]])})))},"\u0418\u0433\u0440\u0430\u0442\u044c \u0435\u0449\u0451 \u0440\u0430\u0437"),l.a.createElement("div",{style:{display:"flex",gap:8,marginTop:8,width:"100%"}},l.a.createElement(d.h,{stretched:!0,size:"l",mode:"pink_secondary",before:l.a.createElement(en.a,{width:16,height:16}),getRef:function(t){return e.shareButton=t},onClick:function(){a.setPopout(l.a.createElement(d.a,{onClose:function(){return a.setPopout(null)},iosCloseItem:l.a.createElement(d.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),toggleRef:e.shareButton},l.a.createElement(d.b,{autoclose:!0,before:l.a.createElement(tn.a,null),onClick:function(){yn.bind(e)(x)}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"),l.a.createElement(d.b,{autoclose:!0,before:l.a.createElement(an.a,null),onClick:function(){var e=JSON.stringify(a.state.game_logs);h.a.send("VKWebAppCopyText",{text:e}),a.setSnackbar("\u041b\u043e\u0433\u0438 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u044b")}},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043b\u043e\u0433\u0438")))}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f"),u&&l.a.createElement(d.h,{stretched:!0,size:"l",mode:"pink_secondary",before:l.a.createElement(nn.a,{width:16,height:16}),onClick:function(){wn.bind(e)(x)}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))),l.a.createElement("div",{className:"Actions_Container"},L&&l.a.createElement(d.r,{onClick:function(){a.setPopout(l.a.createElement(d.E,null)),a.socket.call("pictures.like",{game_id:n},(function(t){t.response?e.setState({isLiked:t.response.isLiked}):a.setSnackbar(t.error.message),a.setPopout(null)}))}},y?l.a.createElement(rn.a,{fill:"#F16384",width:28,height:28}):l.a.createElement(on.a,{fill:"var(--color_secondary)"})),!u&&L&&l.a.createElement(d.r,{onClick:function(){a.setPopout(l.a.createElement(d.E,null)),a.socket.call("games.report",{game_id:n},(function(e){e.response?a.setSnackbar("\u0416\u0430\u043b\u043e\u0431\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"):a.setSnackbar("\u0416\u0430\u043b\u043e\u0431\u0430 \u0443\u0436\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"),a.setPopout(null)}))}},l.a.createElement(sn.a,{fill:"var(--color_secondary)"})))))}}]),t}(i.PureComponent);An.defaultProps={};var In=An,Dn=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.t,a=e.icon,n=e.title,r=e.description,o=e.buttonText,s=e.buttonIcon,c=e.buttonOnClick,i=e.buttonMode,u=e.buttonBack,p=e.buttonBackOnClick,m=e.buttonBackText;return l.a.createElement(l.a.Fragment,null,u&&!1,l.a.createElement("div",{className:"Placeholder_Clean"},l.a.cloneElement(a,{className:"Placeholder__Icon"}),l.a.createElement("div",null,l.a.createElement("h1",null,n),l.a.createElement("p",null,r),l.a.createElement("div",{className:u?"TwoButtons":"OneButton"},o&&l.a.createElement(d.h,{after:s,size:"m",mode:i||"gradient",onClick:c},o),u&&l.a.createElement(d.h,{size:"m",mode:"secondary",onClick:function(){p&&"function"===typeof p?p():t.back()}},m||"\u041d\u0430\u0437\u0430\u0434")))))}}]),t}(i.PureComponent);Dn.defaultProps={};var Fn=Dn,Nn=a(385),Wn=a.n(Nn),Tn=function(){function e(){Object(n.a)(this,e),this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.onConnectionError=this.onConnectionError.bind(this),this.getSocket=this.getSocket.bind(this)}return Object(r.a)(e,[{key:"onConnect",value:function(e){this.socket.on("connect",e)}},{key:"onDisconnect",value:function(e){this.socket.on("disconnect",e)}},{key:"onConnectionError",value:function(e){this.socket.on("connect_error",e)}},{key:"call",value:function(e,t,a){this.socket.emit(e,t,a)}},{key:"subscribe",value:function(e,t){this.socket.on(e,t)}},{key:"unsubscribe",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];for(var n=0,r=t;n<r.length;n++){var o=r[n];this.socket.removeAllListeners(o)}}},{key:"connect",value:function(e,t){this.socket?this.socket.connect():this.socket=Wn.a.connect(e,{path:"/socket.io",query:t,transports:["websocket","polling","flashsocket"],reconnection:!1,pingTimeout:6e4})}},{key:"getSocket",value:function(){return this.socket}}]),e}();function Mn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Bn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Mn(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mn(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}T();var Un=W(),Gn=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={offset:e.t.state.picturesFeed.length,limit:3,canGetMore:!0,prevY:0},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef),this.props.t.state.scrollPositionFeed&&(console.log("Scroll to ".concat(this.props.t.state.scrollPositionFeed)),setTimeout((function(){return document.body.scrollTop=t.props.t.state.scrollPositionFeed}),800));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleObserver",value:function(e,t){var a=this,n=e[0].boundingClientRect.y,r=this.props.t,o=this.state,s=o.prevY,c=o.offset,i=o.limit,l=o.canGetMore;(0===s||s>n)&&l&&(this.setState({spinner:!0}),r.socket.call("pictures.getFeed",{offset:c,limit:i},function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(t.response.map((function(e){return e.drawerId})));case 2:r.setState({picturesFeed:Object(E.a)(new Set([].concat(Object(E.a)(r.state.picturesFeed),Object(E.a)(t.response))))}),a.setState({canGetMore:t.response.length>0,spinner:!1}),a.forceUpdate();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({offset:c+i})),this.setState({prevY:n})}},{key:"render",value:function(){var e=this,t=this.props.t,a=t.state,n=t.socket,r=a.picturesFeed,o=this.state.spinner;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:t.back}),separator:!1}),l.a.createElement("div",{className:"Panel_Container_Card Panel_Container_Card-ManyCards"},l.a.createElement("div",null,l.a.createElement(Ft.a,{width:36,height:36}),l.a.createElement("div",{className:"Panel_Container_Card-Text"},l.a.createElement("h2",null,"\u041b\u0435\u043d\u0442\u0430"),l.a.createElement("p",null,"\u041e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0439\u0442\u0435 \u043d\u0435\u0434\u0430\u0432\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u044b \u043f\u0440\u044f\u043c\u043e \u0437\u0434\u0435\u0441\u044c. \u0422\u043e\u043b\u044c\u043a\u043e \u043d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u043e\u0446\u0435\u043d\u0438\u0442\u044c \u0438\u0445"))),Object(E.a)(new Set(r)).map((function(a,o){var s=Q[a.drawerId],c=s.photo_100,i=s.first_name,u=s.last_name,p=s.frame_type,m=s.frame_color;return l.a.createElement("div",{key:"Card-".concat(o)},l.a.createElement("div",{onClick:function(){t.setPopout(l.a.createElement(d.E,null)),t.socket.call("users.getById",{id:a.drawerId},function(){var e=Object(g.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.socket.call("games.getByDrawerId",{id:a.drawerId},function(){var e=Object(g.a)(b.a.mark((function e(r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({author:Bn({id:a.drawerId},n.response||{}),author_works:r.response,scrollPositionFeed:document.body.scrollTop});case 2:t.go("author"),t.setPopout(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},l.a.createElement(oa,{size:36,src:c,frame:p,color:m,iosOptimize:Un}),l.a.createElement("div",null,l.a.createElement("p",null,i," ",u),l.a.createElement("p",null,a.Word.nom," \xb7 ",Math.round((a.endTime-a.startTime)/1e3),"\u0441."))),l.a.createElement("div",null,l.a.createElement("img",{alt:"picture",src:a.Picture.url})),l.a.createElement("div",null,l.a.createElement("div",{style:Bn({},a.isLiked?{background:"var(--gradient_pink)",color:"var(--panel_container_card_background)"}:{}),onClick:function(){t.setPopout(l.a.createElement(d.E,null)),n.call("pictures.like",{game_id:a.id},function(){var n=Object(g.a)(b.a.mark((function n(s){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!s.response){n.next=7;break}return a.Picture.likes=s.response.likes,a.isLiked=s.response.isLiked,r[o]=a,n.next=6,t.setState({picturesFeed:r});case 6:e.forceUpdate();case 7:t.setPopout(null);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},l.a.createElement(on.a,{width:20,height:20}),l.a.createElement("span",null,I(a.Picture.likes))),l.a.createElement("div",{onClick:function(){return Cn.bind(e)(a,e["pictureActionsButton".concat(o)])},ref:function(t){e["pictureActionsButton".concat(o)]=t}},l.a.createElement(en.a,{width:20,height:20})),l.a.createElement("div",{onClick:function(){t.setPopout(l.a.createElement(d.E,null)),t.socket.call("games.report",{game_id:a.id},(function(a){a.response?t.setSnackbar("\u0416\u0430\u043b\u043e\u0431\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430."):t.setSnackbar(a.error.message),e.setState({isReported:!0}),t.setPopout(null)}))}},l.a.createElement(sn.a,{width:20,height:20}))))})),o&&l.a.createElement("div",null,l.a.createElement(d.J,{size:"small"})),l.a.createElement("div",{ref:function(t){return e.loadingRef=t},className:"LoadingRef"})))}}]),t}(i.PureComponent);Gn.defaultProps={};var Rn=Gn,zn=a(729),Vn=a(730),Kn=a(731),Hn=a(732),Yn=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={offset:e.t.state.author_works.length,limit:50,canGetMore:!0,prevY:0,sort:"DESC"},a.onChangeSort=a.onChangeSort.bind(Object(y.a)(a)),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef);var e=this.props.t.state.scrollPositionAuthor;e&&(console.log("Scroll to ".concat(e)),setTimeout((function(){return document.body.scrollTop=e}),800))}},{key:"handleObserver",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{boundingClientRect:{y:0}}],a=(arguments.length>1&&arguments[1],t[0].boundingClientRect.y),n=this.props.t,r=this.state,o=r.prevY,s=r.offset,c=r.limit,i=r.canGetMore,l=r.sort;(0===o||o>a)&&i&&(this.setState({spinner:!0}),n.socket.call("games.getByDrawerId",{id:n.state.author.id,offset:s,limit:c,sort:l},function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.setState({author_works:[].concat(Object(E.a)(n.state.author_works),Object(E.a)(a.response))}),e.setState({canGetMore:a.response.length>0,spinner:!1}),e.forceUpdate();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.setState({offset:s+c})),this.setState({prevY:a})}},{key:"onChangeSort",value:function(){var e=Object(g.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.t,e.next=3,this.setState({spinner:!0,sort:t.target.value,offset:0,prevY:0,canGetMore:!0});case 3:return e.next=5,a.setState({author_works:[]});case 5:this.forceUpdate(),this.handleObserver();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render_old",value:function(){var e=this,t=this.props.t,a=t.state,n=t._tags,r=T(),o=a.author,s=a.author_works,c=a.banners,i=this.state,u=i.sort,p=i.spinner;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:t.back}),separator:!1}),l.a.createElement("div",{className:"Author"},l.a.createElement("div",{className:"User_Header"},l.a.createElement(d.f,{src:Q[o.id].photo_100,size:48,shadow:!1},l.a.createElement("div",{className:o.online?"online":"offline"})),l.a.createElement("div",{className:"UserTags"},n().map((function(e,a){return o[e[0]]&&l.a.cloneElement(e[1],{onClick:function(){return t.setActiveModal(e[0])}})})))),l.a.createElement("h3",null,Q[o.id].first_name," ",Q[o.id].last_name.substring(0,1),"."),l.a.createElement("div",{className:"Author_Title_Container"},l.a.createElement("h1",null,"\u0420\u0430\u0431\u043e\u0442\u044b \u0438\u0433\u0440\u043e\u043a\u0430"),l.a.createElement(d.h,{mode:"tertiary",after:l.a.createElement(zn.a,null),onClick:function(){t.setPopout(l.a.createElement(d.a,{onClose:function(){return t.setPopout(null)},iosCloseItem:l.a.createElement(d.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")},l.a.createElement(d.b,{autoclose:!0,before:l.a.createElement(Vn.a,null),onChange:e.onChangeSort,name:"sort",value:"DESC",checked:"DESC"===u,selectable:!0},"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u043e\u0432\u044b\u0435"),l.a.createElement(d.b,{autoclose:!0,before:l.a.createElement(Kn.a,null),onChange:e.onChangeSort,name:"sort",value:"ASC",checked:"ASC"===u,selectable:!0},"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0440\u044b\u0435")))}},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430")),l.a.createElement("div",{style:{marginTop:24,gridGap:r?8:15,paddingBottom:!t.newAdSupports&&c[6]&&140},className:"Images_Grid"},s.map((function(e,a){return l.a.createElement("div",{key:"Image_".concat(a),onClick:Object(g.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({like_currentPictureSelected:a,like_method:"games.getByDrawerId",like_param:"author_works",like_user_id:o.id,scrollPositionAuthor:document.body.scrollTop});case 2:"picture_info"===(n=t.state.history)[n.length-1]?t.back():t.go("picture_info");case 4:case"end":return e.stop()}}),e)})))},l.a.createElement("img",{alt:"img",src:e["Picture.url"]}))})),p&&l.a.createElement(d.J,{size:"small"})),!t.newAdSupports&&c[6]&&l.a.createElement(d.D,{bannerData:c[6],onClose:Object(g.a)(b.a.mark((function a(){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c[6]=!1,a.next=3,t.setState({banners:c});case 3:e.forceUpdate();case 4:case"end":return a.stop()}}),a)})))})),l.a.createElement("div",{ref:function(t){return e.loadingRef=t}}))}},{key:"render",value:function(){var e=this,t=this.props.t,a=t.state,n=t._tags,r=a.author,o=a.author_works,s=Q[r.id],c=this.state,i=c.sort,u=c.spinner,p=T(),m=function(){t.setPopout(l.a.createElement(d.a,{onClose:function(){return t.setPopout(null)},iosCloseItem:l.a.createElement(d.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),toggleRef:e.buttonSort},l.a.createElement(d.b,{autoclose:!0,before:l.a.createElement(Vn.a,null),onChange:e.onChangeSort,name:"sort",value:"DESC",checked:"DESC"===i,selectable:!0},"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u043e\u0432\u044b\u0435"),l.a.createElement(d.b,{autoclose:!0,before:l.a.createElement(Kn.a,null),onChange:e.onChangeSort,name:"sort",value:"ASC",checked:"ASC"===i,selectable:!0},"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0440\u044b\u0435")))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:t.back}),separator:!1}),l.a.createElement("div",{className:"Profile Author"},l.a.createElement("div",{className:"UserAvatarCover"},l.a.createElement("img",{alt:"cover",src:s.photo_max_orig})),l.a.createElement("div",{className:"UserInfoContainer"},l.a.createElement(oa,{size:100,src:s.photo_100,frame:s.frame_type,color:s.frame_color,badge:!0,badgeValue:r.online}),l.a.createElement("div",{className:"UserNameTags"},l.a.createElement("div",{className:"AuthorName"},l.a.createElement("h1",null,s.first_name," ",s.last_name),!p&&l.a.createElement(d.r,{onClick:m,ref:function(t){return e.buttonSort=t}},l.a.createElement(Hn.a,null))),l.a.createElement("div",{className:"UserTags"},n().map((function(e,a){return r[e[0]]&&l.a.cloneElement(e[1],{onClick:function(){return t.setActiveModal(e[0])}})})))),l.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},p&&l.a.createElement(d.h,{mode:"secondary",before:l.a.createElement(Hn.a,{width:16,height:16}),ref:function(t){return e.buttonSort=t},onClick:m,style:{marginTop:9}},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430"),l.a.createElement("div",{className:"AuthorWorks"},o.map((function(e,a){return l.a.createElement("div",{key:"Image_".concat(a),onClick:Object(g.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({like_currentPictureSelected:a,like_method:"games.getByDrawerId",like_param:"author_works",like_user_id:r.id,scrollPositionAuthor:document.body.scrollTop});case 2:"picture_info"===(n=t.state.history)[n.length-1]?t.back():t.go("picture_info");case 4:case"end":return e.stop()}}),e)})))},l.a.createElement("img",{alt:"img",src:e["Picture.url"]}))})),u&&l.a.createElement(d.J,{size:"small"}),l.a.createElement("div",{ref:function(t){return e.loadingRef=t},className:"LoadingRef"}))))))}}]),t}(i.PureComponent);Yn.defaultProps={};var Xn=Yn,Zn=T(),Jn=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t,a=t.state.banners,n=t._tags;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:t.back}),separator:!1},Zn&&"\u041c\u0435\u0442\u043a\u0438"),l.a.createElement("div",{className:"Tags",style:{paddingBottom:24}},!Zn&&l.a.createElement("h2",{style:{textAlign:"left"}},"\u041c\u0435\u0442\u043a\u0438"),l.a.createElement("div",{className:"TagsList",style:{paddingBottom:!t.newAdSupports&&a[5]&&140}},n().map((function(e){return l.a.createElement("div",null,e[1],l.a.createElement("div",null,l.a.createElement("h1",null,e[2]),l.a.createElement("h3",null,e[3])))}))),!t.newAdSupports&&a[5]&&l.a.createElement(d.D,{bannerData:a[5],onClose:Object(g.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a[5]=!1,n.next=3,t.setState({banners:a});case 3:e.forceUpdate();case 4:case"end":return n.stop()}}),n)})))})))}}]),t}(i.PureComponent);Jn.defaultProps={};var qn=Jn,$n=a(733),Qn=a(734),er=T(),tr=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={friends:[],others:[],players_count:{}},a.updateFriends=a.updateFriends.bind(Object(y.a)(a)),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"updateFriends",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a,n,r,o,s,c=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.props.t.state.isNotApp){e.next=29;break}return e.prev=2,e.next=5,h.a.send("VKWebAppGetAuthToken",{app_id:parseInt(N().vk_app_id),scope:"friends"});case 5:return a=e.sent.access_token,e.next=8,h.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:{access_token:a,v:"5.131"}});case 8:n=e.sent,r=n.response.count,o=Math.floor(r/100),t=Object(E.a)(n.response.items),s=0;case 13:if(!(s<o)){e.next=22;break}return e.t0=t,e.next=17,h.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:{access_token:a,v:"5.131",offset:100*s}});case 17:e.t1=e.sent.response.items,t=e.t0.concat.call(e.t0,e.t1);case 19:s++,e.next=13;break;case 22:return t=Object(E.a)(new Set(t)),e.next=25,ae(t);case 25:e.next=29;break;case 27:e.prev=27,e.t2=e.catch(2);case 29:this.props.t.socket.call("friends.getLobbies",{ids:t},function(){var e=Object(g.a)(b.a.mark((function e(t){var a,n,r,o,s,i,l,u,p,d,m,h,f,v;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t.response,n=a.friend_lobbies,r=a.public_lobbies,o=[].concat(Object(E.a)(n),Object(E.a)(r)),s=n.map((function(e){return e.lobbyId})),i=r.map((function(e){return e.lobbyId})),l=Object(E.a)(new Set([].concat(Object(E.a)(s),Object(E.a)(i)))),u=c.state.players_count,p=!0,d=!1,m=void 0,e.prev=9,h=o[Symbol.iterator]();!(p=(f=h.next()).done);p=!0)v=f.value,u[v.lobbyId]=[v.count,v.max];e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),d=!0,m=e.t0;case 17:e.prev=17,e.prev=18,p||null==h.return||h.return();case 20:if(e.prev=20,!d){e.next=23;break}throw m;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.next=27,ae(l);case 27:c.setState({players_count:u,friends:s,others:i});case 28:case"end":return e.stop()}}),e,null,[[9,13,17,25],[18,,20,24]])})));return function(t){return e.apply(this,arguments)}}());case 31:case"end":return e.stop()}}),e,this,[[2,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this,t=this.props.t.socket;t.unsubscribe("createLobby","removeLobby"),t.subscribe("createLobby",function(){var t=Object(g.a)(b.a.mark((function t(a){var n,r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,r=n.friends,o=n.others,!a.changeMode||-1!==o.indexOf(a.id)||-1!==r.indexOf(a.id)){t.next=7;break}return t.next=4,ae([a.id]);case 4:e.setState({others:[].concat(Object(E.a)(o),[a.id])}),t.next=8;break;case 7:a.changeMode||-1!==r.indexOf(a.id)||e.setState({friends:[].concat(Object(E.a)(r),[a.id])});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.subscribe("removeLobby",function(){var t=Object(g.a)(b.a.mark((function t(a){var n,r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.state,r=n.friends,o=n.others,a.changeMode&&o.indexOf(a.id)>-1&&-1===r.indexOf(a.id)?(o.splice(o.indexOf(a.id),1),e.setState({others:o})):!a.changeMode&&r.indexOf(a.id)>-1&&(r.splice(r.indexOf(a.id),1),e.setState({friends:r})),e.forceUpdate();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.subscribe("changeLobbyPlayersCount",function(){var t=Object(g.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=e.state.players_count)[a.lobbyId]=[a.count,a.max],e.setState({players_count:n}),e.forceUpdate();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.updateFriends()}},{key:"render_old",value:function(){var e=this,t=this.props.t,a=t.socket,n=t.state,r=(n.user,n.banners),o=this.state,s=o.friends,c=o.others;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:t.back}),separator:!1},er&&"\u0414\u0440\u0443\u0436\u0435\u0441\u043a\u0430\u044f \u0438\u0433\u0440\u0430"),l.a.createElement("div",{className:"Friends"},!er&&l.a.createElement("h2",{style:{textAlign:"left"}},"\u0414\u0440\u0443\u0436\u0435\u0441\u043a\u0430\u044f \u0438\u0433\u0440\u0430"),l.a.createElement("p",{style:{margin:"8px 40px 0 0"}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043b\u043e\u0431\u0431\u0438 \u043c\u043e\u0436\u0435\u0442 \u043b\u044e\u0431\u043e\u0439 \u0447\u0435\u043b\u043e\u0432\u0435\u043a."),l.a.createElement("p",{style:{margin:"4px 40px 0 0"}},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432 \u2013 \u0434\u043e 20."),l.a.createElement("p",{style:{margin:"4px 40px 0 0"}},l.a.createElement(d.t,{target:"_blank",href:"https://vk.com/@draw_app-lobby"},"\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u0442\u0443\u0442 \ud83d\udd16")),l.a.createElement("div",{style:{display:"flex",marginTop:24}},l.a.createElement(d.h,{stretched:!0,size:"m",mode:"gradient_violet",onClick:function(){t.setPopout(l.a.createElement(d.E,null)),a.call("friends.createLobby",{},(function(e){e.response?(t.setState({friend_lobby:e.response}),t.go("friend_lobby"),t.setPopout(null)):t.setAlert("\u041e\u0448\u0438\u0431\u043a\u0430",e.error.message,[{title:"\u041e\u043a",mode:"cancel",autoclose:!0}])}))}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043b\u043e\u0431\u0431\u0438"),l.a.createElement(d.h,{style:{marginLeft:4},stretched:!0,size:"m",mode:"gradient_gray",onClick:Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateFriends();case 2:case"end":return t.stop()}}),t)})))},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a")),l.a.createElement("div",{className:"FriendsList",style:{paddingBottom:!t.newAdSupports&&r[7]&&140}},s.length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"Span"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u0430, \u0432 \u0447\u044c\u0451 \u043b\u043e\u0431\u0431\u0438 \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f:"),l.a.createElement("div",{style:{marginTop:8}},s.filter((function(e){return Q[e]})).map((function(e,n){return l.a.createElement(d.G,{key:"SCell_".concat(n),before:l.a.createElement(d.f,{size:32,shadow:!1,src:Q[e].photo_100}),expandable:!0,onClick:function(){a.call("friends.joinLobby",{owner_id:e},function(){var e=Object(g.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(a.response.members);case 2:return e.next=4,t.setState({friend_lobby:a.response});case 4:t.go("friend_lobby");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},Q[e].first_name," ",Q[e].last_name.substring(0,1),".")})))):l.a.createElement("span",{className:"Span"},"\u041d\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u0445 \u043b\u043e\u0431\u0431\u0438 \u043d\u0435\u0442."),c.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("br",null),l.a.createElement("div",{className:"Span",style:{marginTop:12}},"\u0414\u0440\u0443\u0433\u0438\u0435 \u0438\u0433\u0440\u043e\u043a\u0438:"),l.a.createElement("div",{style:{marginTop:8}},c.filter((function(e){return Q[e]})).map((function(e,n){return l.a.createElement(d.G,{key:"SCell_".concat(n),before:l.a.createElement(d.f,{size:32,shadow:!1,src:Q[e].photo_100}),expandable:!0,onClick:function(){a.call("friends.joinLobby",{owner_id:e},function(){var e=Object(g.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(a.response.members);case 2:return e.next=4,t.setState({friend_lobby:a.response});case 4:t.go("friend_lobby");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},Q[e].first_name," ",Q[e].last_name.substring(0,1),".")}))))),!t.newAdSupports&&r[7]&&l.a.createElement(d.D,{bannerData:r[7],onClose:Object(g.a)(b.a.mark((function a(){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r[7]=!1,a.next=3,t.setState({banners:r});case 3:e.forceUpdate();case 4:case"end":return a.stop()}}),a)})))})))}},{key:"render",value:function(){var e=this.props.t,t=e.socket,a=(e.state.user,this.state),n=a.friends,r=a.others,o=a.players_count,s=Object(E.a)(new Set([].concat(Object(E.a)(n),Object(E.a)(r)))).filter((function(e){return Q[e]&&o[e]}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:e.back}),separator:!1}),l.a.createElement("div",{className:"Panel_Container_Card Panel_Container_Card-TwoCards"},l.a.createElement("div",null,l.a.createElement($n.a,{width:36,height:36}),l.a.createElement("div",{className:"Panel_Container_Card-Text"},l.a.createElement("h2",null,"\u0414\u0440\u0443\u0436\u0435\u0441\u043a\u0430\u044f \u0438\u0433\u0440\u0430"),l.a.createElement("p",null,"\u0418\u0433\u0440\u0430\u0439\u0442\u0435 \u0432\u043c\u0435\u0441\u0442\u0435 \u0441\u043e \u0441\u0432\u043e\u0438\u043c\u0438 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438 \u0438 \u0443\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0439\u0442\u0435 \u0441\u043e\u0440\u0435\u0432\u043d\u043e\u0432\u0430\u043d\u0438\u044f!")),l.a.createElement("div",{className:"Panel_Container_Card-Buttons"},l.a.createElement(d.h,{stretched:!0,size:"m",mode:"gradient_violet",onClick:function(){e.setPopout(l.a.createElement(d.E,null)),t.call("friends.createLobby",{},(function(t){t.response?(e.setState({friend_lobby:t.response}),e.go("friend_lobby"),e.setPopout(null)):e.setAlert("\u041e\u0448\u0438\u0431\u043a\u0430",t.error.message,[{title:"\u041e\u043a",mode:"cancel",autoclose:!0}])}))}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043b\u043e\u0431\u0431\u0438"),l.a.createElement(d.h,{stretched:!0,size:"m",mode:"gradient_gray",onClick:function(){M("https://vk.com/@draw_app-avocadoplus")}},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"))),l.a.createElement("div",null,s.length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"Panel_Container_Card-Header"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0438\u0433\u0440\u043e\u043a\u043e\u0432"),l.a.createElement("div",{className:"MiniCards"},s.map((function(a,n){var r=Q[a],s=r.photo_100,c=r.first_name,i=r.last_name,u=r.frame_type,p=r.frame_color;return l.a.createElement("div",{className:"MiniCard",key:"Card-".concat(n),onClick:function(){t.call("friends.joinLobby",{owner_id:a},function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae(a.response.members);case 2:return t.next=4,e.setState({friend_lobby:a.response});case 4:e.go("friend_lobby");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},l.a.createElement(oa,{size:32,src:s,frame:u,color:p}),l.a.createElement("div",null,l.a.createElement("span",null,c," ",i.substring(0,1),"."),l.a.createElement("div",null,l.a.createElement(Qn.a,null),l.a.createElement("span",null,o[a][0]," \u0438\u0437 ",o[a][1]))))})))):l.a.createElement("p",{className:"Panel_Container_Card-Header Panel_Container_Card-Header-Center"},"\u041d\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u0445 \u043b\u043e\u0431\u0431\u0438 \u043d\u0435\u0442"))))}}]),t}(i.PureComponent);tr.defaultProps={};var ar=tr,nr=a(735),rr=a(736),or=T(),sr=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={removed:!1,ready:[],members:[],splashShow:!1},setTimeout(Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.t.state.friend_lobby,e.next=3,ae(t.members);case 3:a.setState({members:t.members,ready:t.ready}),console.log({friend_lobby:t});case 5:case"end":return e.stop()}}),e)}))),1),a.playerComponent=a.playerComponent.bind(Object(y.a)(a)),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.t,a=t.socket,n=t.state,r=t.setSnackbar,o=t.back,s=t.go;a.unsubscribe("changeLobbyUsers","gameStart","chooseWord","setWord","draw","removeLobby","wakeUp","ready"),a.subscribe("wakeUp",function(){var t=Object(g.a)(b.a.mark((function t(a){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.user_ids.indexOf(n.user.id)>-1)for(r=0;r<3;r++)setTimeout(Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.a.supports("VKWebAppTapticNotificationOccurred")){t.next=3;break}return t.next=3,h.a.send("VKWebAppTapticNotificationOccurred",{type:"success"});case 3:return t.next=5,e.setState({splashShow:!e.state.splashShow});case 5:setTimeout((function(){e.setState({splashShow:!e.state.splashShow})}),100);case 6:case"end":return t.stop()}}),t)}))),200+200*r);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a.subscribe("removeLobby",function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({removed:!0});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a.subscribe("changeLobbyUsers",function(){var a=Object(g.a)(b.a.mark((function a(s){var c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=e.props.friend_lobby,a.next=3,ae(s.players);case 3:c.members=s.players,t.setState({friend_lobby:c}),setTimeout(Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({members:c.members});case 2:e.forceUpdate(),-1===s.players.indexOf(n.user.id)&&e.props.friend_lobby.owner_id!==n.user.id&&(o(),e.state.removed?r("\u041b\u043e\u0431\u0431\u0438 \u0431\u044b\u043b\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e"):r("\u0412\u0430\u0441 \u0432\u044b\u0433\u043d\u0430\u043b\u0438 \u0438\u0437 \u043b\u043e\u0431\u0431\u0438"));case 4:case"end":return t.stop()}}),t)}))),400);case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),a.subscribe("ready",function(){var a=Object(g.a)(b.a.mark((function a(n){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(r=e.props.friend_lobby).ready=n.ready,t.setState({friend_lobby:r}),e.setState({ready:n.ready});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),a.subscribe("chooseWord",function(){var a=Object(g.a)(b.a.mark((function a(n){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.setState({chooseWords:n.words}),t.log("game_logs","c_word",{words:n.words}),setTimeout((function(){e.props.t.forceUpdate()}),400);case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),a.subscribe("setWord",function(){var a=Object(g.a)(b.a.mark((function a(n){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.setState({word:n.word}),t.log("game_logs","s_word",{word:n.word}),setTimeout((function(){e.props.t.forceUpdate()}),400);case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),a.subscribe("gameStart",function(){var n=Object(g.a)(b.a.mark((function n(r){var o,c,i,l,u;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.unsubscribe("changeLobbyUsers"),o=r.players,c=r.lobbyId,i=r.drawerId,l=r.timeout,u=e.props.friend_lobby,n.next=4,t.log("game_logs");case 4:return n.next=6,e.props.t.setState({api_manager:1});case 6:return t.log("game_logs","start",{drawer:i,lobby:c,manager:1}),n.next=9,t.setState({game_players:o,game_timeout:l,lobbyId:c,drawerId:i,gameStart:Date.now(),isOnlineDrawing:!0,subGameInfo:{friendly:!0,owner_id:u.owner_id,data:u}});case 9:s("game");case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"playerComponent",value:function(e){var t=this.props,a=t.t,n=t.friend_lobby,r=a.socket,o=a.state.user,s=this.state.ready,c=Q[e.id];return c||ae([e.id]),c&&l.a.createElement("div",{key:e.key},l.a.createElement(oa,{size:32,src:e.photo_100,frame:c.frame_type,color:c.frame_color,style:{opacity:s.indexOf(e.id)>-1?1:.5}}),l.a.createElement("span",{style:{opacity:s.indexOf(e.id)>-1?1:.5}},e.name),n.owner_id===o.id&&e.id!==o.id&&l.a.createElement(d.r,{className:"KickButton",onClick:function(){r.call("friends.kickFromLobby",{user_id:e.id})}},l.a.createElement(Na.a,{fill:"var(--icon_tertiary)"})))}},{key:"render",value:function(){var e=this,t=this.props,a=t.t,n=t.friend_lobby,r=a.socket,o=a.state,s=o.user,c=o.vk_user,i=this.state,u=i.members,p=i.ready,m=i.splashShow,f=p.indexOf(s.id)>-1,v=1===c.sex?"\u0433\u043e\u0442\u043e\u0432\u0430":"\u0433\u043e\u0442\u043e\u0432";return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:a.back}),separator:!1},or&&"\u0414\u0440\u0443\u0436\u0435\u0441\u043a\u0430\u044f \u0438\u0433\u0440\u0430"),l.a.createElement("div",{className:"FriendSplash",style:{opacity:m?1:0}}),l.a.createElement("div",{className:"FriendLobby"},!or&&l.a.createElement("h2",{style:{textAlign:"left"}},"\u0414\u0440\u0443\u0436\u0435\u0441\u043a\u0430\u044f \u0438\u0433\u0440\u0430"),n.owner_id!==s.id?l.a.createElement(d.g,{header:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",subheader:"\u0412\u044b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c \u0432 \u043b\u043e\u0431\u0431\u0438. \u0416\u0434\u0438\u0442\u0435, \u043f\u043e\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044c \u043d\u0430\u0447\u043d\u0451\u0442 \u0438\u0433\u0440\u0443, \u0430 \u043f\u043e\u043a\u0430 \u0447\u0442\u043e \u043f\u0440\u0438\u0433\u043e\u0442\u043e\u0432\u044c\u0442\u0435\u0441\u044c. \u0415\u0441\u043b\u0438 \u0437\u0430\u043a\u0440\u043e\u0435\u0442\u0435 \u044d\u0442\u0443 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443, \u0438\u0433\u0440\u0430 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u0441\u0447\u0438\u0442\u0430\u043d\u0430."}):l.a.createElement(d.g,{header:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",subheader:"\u0412\u044b \u044f\u0432\u043b\u044f\u0435\u0442\u0435\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u0435\u043c \u043b\u043e\u0431\u0431\u0438. \u0415\u0441\u043b\u0438 \u0437\u0430\u043a\u0440\u043e\u0435\u0442\u0435 \u044d\u0442\u0443 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443, \u043b\u043e\u0431\u0431\u0438 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u043e, \u0430 \u0432\u0441\u0435 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438 \u0431\u0443\u0434\u0443\u0442 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u044b. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435, \u043f\u043e\u043a\u0430 \u0438\u0433\u0440\u043e\u043a\u0438 \u0437\u0430\u0439\u0434\u0443\u0442 \u043a \u0432\u0430\u043c \u0432 \u043b\u043e\u0431\u0431\u0438, \u0438 \u0433\u043e\u0442\u043e\u0432\u044c\u0442\u0435\u0441\u044c \u043d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443."}),n.owner_id===s.id&&l.a.createElement("div",{style:{marginTop:24,width:"100%",display:"flex"}},l.a.createElement(d.h,{before:l.a.createElement(nr.a,{width:16,height:16}),size:"m",mode:"gradient_light_gray",stretched:!0,onClick:function(){s.vk_donut||s.admin||s.premium?a.go("friend_lobby_settings"):W()?a.go("vk_donut_blocked"):a.go("vk_donut_avocado")}},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),l.a.createElement(d.h,{style:{marginLeft:6},before:l.a.createElement(rr.a,{width:16,height:16}),size:"m",mode:"gradient_gray",stretched:!0,onClick:Object(g.a)(b.a.mark((function t(){var n,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(a.vkChatIntegration||a.isFromCatalogChat||a.isFromChatWidget)){t.next=9;break}return n=N(),o=n.vk_chat_id,t.next=5,h.a.send("VKWebAppAddToChat",{action_title:"\u0420\u0438\u0441\u0443\u0439 \u0441 \u043d\u0430\u043c\u0438",hash:"lobby".concat(s.id),close_app:!1});case 5:r.call("friends.shareLobbyChat",{chat_id:o},(function(t){return e.props.t.setState({friend_lobby:t.response})})),a.setAlert("\u0412\u0438\u0434\u0436\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d","\u0412\u044b \u043c\u043e\u043b\u043e\u0434\u0435\u0446! \u0422\u0435\u043f\u0435\u0440\u044c \u043e\u0441\u0442\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u043e\u0436\u0434\u0430\u0442\u044c, \u043f\u043e\u043a\u0430 \u0438\u0433\u0440\u043e\u043a\u0438 \u0438\u0437 \u0447\u0430\u0442\u0430 \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0442\u0441\u044f \u043a \u0432\u0430\u043c. \u0410 \u043f\u043e\u043a\u0430 \u0447\u0442\u043e \u043f\u0440\u0438\u0433\u043e\u0442\u043e\u0432\u044c\u0442\u0435\u0441\u044c \ud83d\ude0a",[{title:"\u0425\u043e\u0440\u043e\u0448\u043e",autoclose:!0}]),t.next=11;break;case 9:return t.next=11,h.a.send("VKWebAppShare",{link:"https://vk.com/drawapp#lobby".concat(s.id)});case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))},a.vkChatIntegration||a.isFromCatalogChat||a.isFromChatWidget?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0447\u0430\u0442":"\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u044c")),l.a.createElement("div",{className:"Span",style:{marginTop:24}},"\u0421\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044c \u043b\u043e\u0431\u0431\u0438"),l.a.createElement("div",{className:"LobbyList"},this.playerComponent({photo_100:Q[n.owner_id]&&Q[n.owner_id].photo_100,name:"".concat(Q[n.owner_id]?Q[n.owner_id].first_name:""," ").concat(Q[n.owner_id]?Q[n.owner_id].last_name.substring(0,1):"","."),id:n.owner_id})),l.a.createElement("div",{className:"Span",style:{marginTop:24}},u.length>0?"\u0418\u0433\u0440\u043e\u043a\u0438":"\u0414\u0440\u0443\u0433\u0438\u0435 \u0438\u0433\u0440\u043e\u043a\u0438 \u043f\u043e\u043a\u0430 \u0435\u0449\u0451 \u043d\u0435 \u0437\u0430\u0448\u043b\u0438 \ud83e\udd71"),l.a.createElement("div",{className:"LobbyList"},u.length>0&&u.map((function(t,a){return e.playerComponent({photo_100:Q[t]&&Q[t].photo_100,name:"".concat(Q[t]?Q[t].first_name:""," ").concat(Q[t]?Q[t].last_name.substring(0,1):"","."),id:t,key:"user-".concat(a)})}))),l.a.createElement("div",{className:"LobbyActions"},l.a.createElement(d.h,{size:"l",mode:f?"gradient_light_gray":"gradient_gray",stretched:!0,onClick:function(){r.call("friends.ready",{owner_id:n.owner_id})}},f?"\u042f \u043d\u0435 ".concat(v):"\u042f ".concat(v,"!")),n.owner_id===s.id&&l.a.createElement(d.h,{disabled:0===u.length||p.length<u.length+1,size:"l",mode:"gradient_blue",stretched:!0,onClick:function(){r.call("friends.startGame",{},(function(t){t.error&&(e.props.t.setActivePanel("main"),e.props.t.setAlert("\u041e\u0448\u0438\u0431\u043a\u0430",t.error.message,[{title:"\u041e\u043a",autoclose:!0}]))}))}},"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443"))))}}]),t}(i.PureComponent);sr.defaultProps={};var cr=sr,ir=a(737),lr=a(738);function ur(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ur(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ur(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var dr=T(),mr=W(),hr=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render_old",value:function(){var e=this,t=this.props.t,a=t.state,n=t.socket,r=t.state,o=r.user,s=r.banners;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:t.back}),separator:!1},dr&&"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"),l.a.createElement("div",{className:"Stats"},!dr&&l.a.createElement("h2",{style:{textAlign:"left"}},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"),l.a.createElement("p",{style:{margin:"8px 40px 0 0"}},"\u0417\u0434\u0435\u0441\u044c \u0441\u043e\u0431\u0440\u0430\u043d\u0430 \u0432\u0441\u044f \u0442\u0432\u043e\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0438 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0438 \u0438\u0433\u0440\u043e\u043a\u043e\u0432."),l.a.createElement("div",{className:"StatsCards__Container"},l.a.createElement("div",{onClick:function(){return t.setAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u041c\u043e\u043d\u0435\u0442\u044b \u2013 \u044d\u0442\u043e \u0438\u0433\u0440\u043e\u0432\u0430\u044f \u0432\u0430\u043b\u044e\u0442\u0430. \u0417\u0430 \u043d\u0435\u0451 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b \u0438\u0437 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430. \u041c\u043e\u043d\u0435\u0442\u044b \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c: 20 \u043c\u043e\u043d\u0435\u0442, \u0435\u0441\u043b\u0438 \u0442\u0432\u043e\u0439 \u0440\u0438\u0441\u0443\u043d\u043e\u043a \u0443\u0433\u0430\u0434\u0430\u043b\u0438; 10 \u043c\u043e\u043d\u0435\u0442, \u0435\u0441\u043b\u0438 \u0442\u0432\u043e\u0439 \u0440\u0438\u0441\u0443\u043d\u043e\u043a \u043d\u0435 \u0443\u0433\u0430\u0434\u0430\u043b\u0438, \u0438\u043b\u0438 \u0435\u0441\u043b\u0438 \u0442\u044b \u0443\u0433\u0430\u0434\u0430\u043b \u0447\u0435\u0439-\u0442\u043e \u0440\u0438\u0441\u0443\u043d\u043e\u043a.",[{title:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e",autoclose:!0}])}},l.a.createElement(ir.a,{width:16,height:16}),l.a.createElement("span",null,I(o.coins))),l.a.createElement("div",{onClick:function(){return t.setAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u0415\u0441\u043b\u0438 \u0431\u0443\u0434\u0435\u0448\u044c \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u043a\u0440\u0430\u0441\u0438\u0432\u043e, \u0442\u0432\u043e\u0438 \u0440\u0430\u0431\u043e\u0442\u044b \u0431\u0443\u0434\u0443\u0442 \u043b\u0430\u0439\u043a\u0430\u0442\u044c. \u0421\u043e\u0431\u0438\u0440\u0430\u0439 \u0431\u043e\u043b\u044c\u0448\u0435 \u043b\u0430\u0439\u043a\u043e\u0432 \u0438 \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0441\u044c \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u043c \ud83d\ude0e",[{title:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e",autoclose:!0}])}},l.a.createElement("span",null,I(o.likes)),l.a.createElement(lr.a,{width:16,height:16}))),l.a.createElement("div",{className:"Rating__List",style:{paddingBottom:!t.newAdSupports&&s[4]&&140}},[["users_topPictures","\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0443 \u043a\u0430\u0440\u0442\u0438\u043d","pictures"],["users_topGuessedPictures","\u0443\u0433\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u043a\u0430\u0440\u0442\u0438\u043d\u0430\u043c","guessedPictures"],["users_topLikes","\u043b\u0430\u0439\u043a\u0430\u043c","likes"]].map((function(e,r){return l.a.createElement("div",null,l.a.createElement("span",{className:"Span"},"\u041b\u0443\u0447\u0448\u0438\u0435 \u0438\u0433\u0440\u043e\u043a\u0438 \u043f\u043e ",e[1],":"),l.a.createElement(d.q,{showArrows:!0,getScrollToLeft:function(e){return e-128},getScrollToRight:function(e){return e+128}},l.a.createElement("div",{style:{display:"flex"}},a[e[0]].map((function(a,r){return l.a.createElement(d.p,{key:"Cell_".concat(r),header:Q[a.id].first_name,subtitle:a[e[2]],onClick:function(){t.setPopout(l.a.createElement(d.E,null)),n.call("users.getById",{id:a.id},function(){var e=Object(g.a)(b.a.mark((function e(r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.call("games.getByDrawerId",{id:a.id},function(){var e=Object(g.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({author:pr({id:a.id},r.response||{}),author_works:n.response});case 2:t.go("author"),t.setPopout(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},l.a.createElement(oa,{size:48,src:Q[a.id].photo_100,frame:Q[a.id].frame_type,color:Q[a.id].frame_color}))})))))}))),!t.newAdSupports&&s[4]&&l.a.createElement(d.D,{bannerData:s[4],onClose:Object(g.a)(b.a.mark((function a(){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s[4]=!1,a.next=3,t.setState({banners:s});case 3:e.forceUpdate();case 4:case"end":return a.stop()}}),a)})))})))}},{key:"render",value:function(){var e=this.props.t,t=e.state,a=e.socket,n=e.state.user;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:e.back}),separator:!1}),l.a.createElement("div",{className:"Panel_Container_Card Panel_Container_Card-ManyCards"},l.a.createElement("div",null,l.a.createElement(Nt.a,{width:36,height:36}),l.a.createElement("div",{className:"Panel_Container_Card-Text"},l.a.createElement("h2",null,"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"),l.a.createElement("p",null,"\u0417\u0434\u0435\u0441\u044c \u0441\u043e\u0431\u0440\u0430\u043d\u0430 \u0432\u0441\u044f \u0442\u0432\u043e\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430, \u0438 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0438 \u043b\u0443\u0447\u0448\u0438\u0445 \u0438\u0433\u0440\u043e\u043a\u043e\u0432 \u043f\u043e \u0440\u0430\u0437\u043d\u044b\u043c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u043c \u043e\u0446\u0435\u043d\u0438\u0432\u0430\u043d\u0438\u044f")),l.a.createElement(d.F,{value:"likes",onClick:function(t){"likes"===t.target.value?e.setAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u0415\u0441\u043b\u0438 \u0431\u0443\u0434\u0435\u0448\u044c \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u043a\u0440\u0430\u0441\u0438\u0432\u043e, \u0442\u0432\u043e\u0438 \u0440\u0430\u0431\u043e\u0442\u044b \u0431\u0443\u0434\u0443\u0442 \u043b\u0430\u0439\u043a\u0430\u0442\u044c. \u0421\u043e\u0431\u0438\u0440\u0430\u0439 \u0431\u043e\u043b\u044c\u0448\u0435 \u043b\u0430\u0439\u043a\u043e\u0432 \u0438 \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0441\u044c \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u043c \ud83d\ude0e",[{title:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e",autoclose:!0}]):e.setAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u041c\u043e\u043d\u0435\u0442\u044b \u2013 \u044d\u0442\u043e \u0438\u0433\u0440\u043e\u0432\u0430\u044f \u0432\u0430\u043b\u044e\u0442\u0430. \u0417\u0430 \u043d\u0435\u0451 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b \u0438\u0437 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430. \u041c\u043e\u043d\u0435\u0442\u044b \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c: 20 \u043c\u043e\u043d\u0435\u0442, \u0435\u0441\u043b\u0438 \u0442\u0432\u043e\u0439 \u0440\u0438\u0441\u0443\u043d\u043e\u043a \u0443\u0433\u0430\u0434\u0430\u043b\u0438; 10 \u043c\u043e\u043d\u0435\u0442, \u0435\u0441\u043b\u0438 \u0442\u0432\u043e\u0439 \u0440\u0438\u0441\u0443\u043d\u043e\u043a \u043d\u0435 \u0443\u0433\u0430\u0434\u0430\u043b\u0438, \u0438\u043b\u0438 \u0435\u0441\u043b\u0438 \u0442\u044b \u0443\u0433\u0430\u0434\u0430\u043b \u0447\u0435\u0439-\u0442\u043e \u0440\u0438\u0441\u0443\u043d\u043e\u043a.",[{title:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e",autoclose:!0}])},options:[{label:l.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:4}},l.a.createElement(on.a,{width:20,height:20}),l.a.createElement("span",null,I(n.likes))),value:"likes"},{label:l.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:4}},l.a.createElement(Gt.a,{width:20,height:20}),l.a.createElement("span",null,I(n.coins))),value:"money"}]})),[["top","\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439 \u0442\u043e\u043f \u043f\u043e \u0443\u0433\u0430\u0434\u0430\u043d\u043d\u044b\u043c","guessedPicturesToday"],["users_topPictures","\u041f\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0443 \u043a\u0430\u0440\u0442\u0438\u043d","pictures"],["users_topGuessedPictures","\u041f\u043e \u0443\u0433\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u043a\u0430\u0440\u0442\u0438\u043d\u0430\u043c","guessedPictures"],["users_topLikes","\u041f\u043e \u043b\u0430\u0439\u043a\u0430\u043c","likes"]].map((function(n,r){return l.a.createElement("div",{key:"Card-".concat(r)},l.a.createElement("p",{className:"Panel_Container_Card-Header"},n[1]),l.a.createElement(d.q,{showArrows:!0,getScrollToLeft:function(e){return e-128},getScrollToRight:function(e){return e+128}},l.a.createElement("div",{style:{display:"flex"}},t[n[0]].map((function(t,r){return l.a.createElement(d.p,{key:"User-".concat(r),header:Q[t.id].first_name,subtitle:t[n[2]],onClick:function(){e.setPopout(l.a.createElement(d.E,null)),a.call("users.getById",{id:t.id},function(){var n=Object(g.a)(b.a.mark((function n(r){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a.call("games.getByDrawerId",{id:t.id},function(){var a=Object(g.a)(b.a.mark((function a(n){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.setState({author:pr({id:t.id},r.response||{}),author_works:n.response});case 2:e.go("author"),e.setPopout(null);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},mr?l.a.createElement(d.f,{size:36,shadow:!1,src:Q[t.id].photo_100}):l.a.createElement(oa,{size:48,src:Q[t.id].photo_100,frame:Q[t.id].frame_type,color:Q[t.id].frame_color}))})))))}))))}}]),t}(i.PureComponent);hr.defaultProps={};var fr,vr=hr,br=a(739),gr=T(),Er=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={items:[]},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.t.socket,fr=setInterval((function(){a.forceUpdate()}),1e3),t.call("shop.getList",{},function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({items:t.response});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(fr)}},{key:"render_old",value:function(){var e=this,t=this.props,a=t.t,n=t.watchedShopItems,r=t.boughtShopItems,o=a.state,s=o.banners,c=o.isNotApp,i=(o.notifications_allowed,this.state.items),u=a.socket;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:a.back}),separator:!1},gr&&"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"),l.a.createElement("div",{className:"Shop"},!gr&&l.a.createElement("h2",{style:{textAlign:"left"}},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"),l.a.createElement("p",{style:{margin:"8px 40px 0 0"}},"\u0417\u0434\u0435\u0441\u044c \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u044f\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u0430\u043a\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0441\u0442\u0438 \u0437\u0430 \u043c\u043e\u043d\u0435\u0442\u044b."),l.a.createElement("div",{className:"ShopItems",style:{paddingBottom:!a.newAdSupports&&s[3]&&140}},i.length>0?i.map((function(e,t){var o=e.id,s=e.startTime,i=(e.count,e.title),p=e.price,m=e.img,f=e.needAdvert,v=e.singleBuy,y=F(s-Date.now()).str,k=y.hours,w=y.minutes,_=y.seconds;return l.a.createElement("div",{key:"Shop_".concat(t),onClick:function(){Date.now()<s||-1===n.indexOf(o)&&f||(v&&r.indexOf(o)>-1?a.setSnackbar("\u0412\u044b \u0443\u0436\u0435 \u043a\u0443\u043f\u0438\u043b\u0438 \u044d\u0442\u043e\u0442 \u0442\u043e\u0432\u0430\u0440"):(a.setPopout(l.a.createElement(d.E,null)),u.call("shop.buy",{product_id:o},function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.response){e.next=8;break}return v&&a.setState({boughtShopItems:[].concat(Object(E.a)(r),[o])}),a.setSnackbar("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043a\u0443\u043f\u0438\u043b\u0438 \u0442\u043e\u0432\u0430\u0440"),e.next=5,a.updateData();case 5:a.forceUpdate(),e.next=9;break;case 8:a.setSnackbar(t.message);case 9:a.setPopout(null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())))}},Date.now()<s?l.a.createElement("div",{className:"TimeCounter"},l.a.createElement(dn.a,null),l.a.createElement("span",null,k,":",w,":",_)):-1===n.indexOf(o)&&f&&l.a.createElement("div",{className:"WatchAdvert",onClick:Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setPopout(l.a.createElement(d.E,null)),e.prev=1,c){e.next=5;break}return e.next=5,h.a.send("VKWebAppShowNativeAds",{ad_format:"reward"});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:a.setPopout(null),a.setState({watchedShopItems:[].concat(Object(E.a)(n),[o])});case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))},l.a.createElement(br.a,null),l.a.createElement("span",null,"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435")),l.a.createElement("img",{className:"icon",alt:"icon",src:m}),l.a.createElement("div",{className:"titles"},l.a.createElement("span",null,i),l.a.createElement("br",null),l.a.createElement("span",null,A(p,["\u043c\u043e\u043d\u0435\u0442\u0430","\u043c\u043e\u043d\u0435\u0442\u044b","\u043c\u043e\u043d\u0435\u0442"]))))})):l.a.createElement("div",{onClick:function(){h.a.send("VKWebAppAllowNotifications")}},l.a.createElement("div",{className:"titles"},l.a.createElement("span",null,"\u0422\u0443\u0442 \u043f\u0443\u0441\u0442\u043e :("),l.a.createElement("br",null),l.a.createElement("span",null,"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e \u043d\u043e\u0432\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u0430\u0445. \u041c\u044b \u0412\u0430\u0441 \u043e\u043f\u043e\u0432\u0435\u0441\u0442\u0438\u043c, \u043a\u043e\u0433\u0434\u0430 \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u0447\u0442\u043e-\u0442\u043e \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e\u0435.")))),!a.newAdSupports&&s[3]&&l.a.createElement(d.D,{bannerData:s[3],onClose:Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s[3]=!1,t.next=3,a.setState({banners:s});case 3:e.forceUpdate();case 4:case"end":return t.stop()}}),t)})))})))}},{key:"render",value:function(){var e=this.props,t=e.t,a=e.watchedShopItems,n=e.boughtShopItems,r=t.state.notifications_allowed,o=this.state.items,s=t.socket;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:t.back}),separator:!1}),l.a.createElement("div",{className:"Panel_Container_Card Panel_Container_Card-".concat(o.length>0?"ManyCards":"TwoCards")},l.a.createElement("div",null,l.a.createElement(Wt.a,{width:36,height:36}),l.a.createElement("div",{className:"Panel_Container_Card-Text"},l.a.createElement("h2",null,"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"),l.a.createElement("p",null,"\u0417\u0434\u0435\u0441\u044c \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u044f\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u0430\u043a\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0441\u0442\u0438 \u0437\u0430 \u043c\u043e\u043d\u0435\u0442\u044b")),0===o.length&&!1===r&&l.a.createElement("div",{className:"Panel_Container_Card-Buttons"},l.a.createElement(d.h,{stretched:!0,size:"m",mode:"gradient_pink",onClick:Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.send("VKWebAppAllowNotifications");case 3:s.call("users.enableNotifications"),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))},"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"))),o.length>0?o.map((function(e,r){var o=e.id,c=e.startTime,i=(e.count,e.title),u=e.price,p=e.img,m=e.needAdvert,f=e.singleBuy,v=F(c-Date.now()).str,y=v.hours,k=v.minutes,w=v.seconds;return l.a.createElement("div",{key:"Card-".concat(r),onClick:function(){Date.now()<c||-1===a.indexOf(o)&&m||(f&&n.indexOf(o)>-1?t.setSnackbar("\u0412\u044b \u0443\u0436\u0435 \u043a\u0443\u043f\u0438\u043b\u0438 \u044d\u0442\u043e\u0442 \u0442\u043e\u0432\u0430\u0440"):(t.setPopout(l.a.createElement(d.E,null)),s.call("shop.buy",{product_id:o},function(){var e=Object(g.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.response){e.next=8;break}return f&&t.setState({boughtShopItems:[].concat(Object(E.a)(n),[o])}),t.setSnackbar("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043a\u0443\u043f\u0438\u043b\u0438 \u0442\u043e\u0432\u0430\u0440"),e.next=5,t.updateData();case 5:t.forceUpdate(),e.next=9;break;case 8:t.setSnackbar(a.message);case 9:t.setPopout(null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())))}},Date.now()<c?l.a.createElement("div",{className:"TimeCounter"},l.a.createElement(dn.a,null),l.a.createElement("span",null,y,":",k,":",w)):-1===a.indexOf(o)&&m&&l.a.createElement("div",{className:"WatchAdvert",onClick:Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setPopout(l.a.createElement(d.E,null)),e.prev=1,e.next=4,h.a.send("VKWebAppShowNativeAds",{ad_format:"reward"});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:t.setPopout(null),t.setState({watchedShopItems:[].concat(Object(E.a)(a),[o])});case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))},l.a.createElement(br.a,null),l.a.createElement("span",null,"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435")),l.a.createElement("img",{alt:"icon",src:p}),l.a.createElement("div",null,l.a.createElement("span",null,i),l.a.createElement("span",null,A(u,["\u043c\u043e\u043d\u0435\u0442\u0430","\u043c\u043e\u043d\u0435\u0442\u044b","\u043c\u043e\u043d\u0435\u0442"]))))})):l.a.createElement("p",{className:"Panel_Container_Card-Header Panel_Container_Card-Header-Center"},"\u041d\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0442\u0443\u0442 \u043f\u0443\u0441\u0442\u043e.",l.a.createElement("br",null),r?"\u043c\u044b \u043e\u043f\u043e\u0432\u0435\u0441\u0442\u0438\u043c \u0412\u0410\u0421 \u043a\u043e\u0433\u0434\u0430 \u0442\u0443\u0442 \u0447\u0442\u043e-\u0442\u043e \u0431\u0443\u0434\u0435\u0442.":"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f, \u043c\u044b \u043e\u043f\u043e\u0432\u0435\u0441\u0442\u0438\u043c \u043a\u043e\u0433\u0434\u0430 \u0442\u0443\u0442 \u0447\u0442\u043e-\u0442\u043e \u0431\u0443\u0434\u0435\u0442.")))}}]),t}(i.PureComponent);Er.defaultProps={};var yr=Er,kr=a(740),wr=a(741),_r=a(742),Cr=a(743),xr=a(744),Lr=a(745),Or=a(746),Sr=a(747),jr=a(748),Pr=a(749);function Ar(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ir(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ar(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ar(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Dr,Fr={},Nr=0,Wr=0,Tr={x:0,y:0},Mr=T(),Br=W(),Ur=[],Gr=[],Rr=[],zr=0,Vr=0,Kr={},Hr=function(e){function t(e){var a;Object(n.a)(this,t),a=Object(o.a)(this,Object(s.a)(t).call(this,e));var r=e.t;return a.state={color:e.color,drawing:!1,isCrop:!1,isEraser:!1,isStroke:!1,isShowAreas:!1,isCompassActive:!0,isBrushActive:!1,isFullCanvasShowed:!1,canvasTransformX:0,canvasTransformY:0,canvasScale:1,fullCanvasData:null,lineWidth:2,areas:[],areas_time:{}},a.onMouseDown=a.onMouseDown.bind(Object(y.a)(a)),a.onMouseUp=a.onMouseUp.bind(Object(y.a)(a)),a.throttle=a.throttle.bind(Object(y.a)(a)),a.onMouseMove=a.onMouseMove.bind(Object(y.a)(a)),a.drawLine=a.drawLine.bind(Object(y.a)(a)),a.onStartCrop=a.onStartCrop.bind(Object(y.a)(a)),a.onEndCrop=a.onEndCrop.bind(Object(y.a)(a)),a.onCropMove=a.onCropMove.bind(Object(y.a)(a)),r.socket.subscribe("draw",function(){var t=Object(g.a)(b.a.mark((function t(n){var r,o,s,c,i,l,u,p,d,m,h,f,v,g;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.user_id==e.t.state.vk_user.id){t.next=21;break}for(r=n.data,o=!0,s=!1,c=void 0,t.prev=5,i=r[Symbol.iterator]();!(o=(l=i.next()).done);o=!0)u=l.value,p=u.x0,d=u.y0,m=u.x1,h=u.y1,f=u.color,v=u.isEraser,g=u.lineWidth,a.drawLine(p,d,m,h,f,v,g,!1,!1);t.next=13;break;case 9:t.prev=9,t.t0=t.catch(5),s=!0,c=t.t0;case 13:t.prev=13,t.prev=14,o||null==i.return||i.return();case 16:if(t.prev=16,!s){t.next=19;break}throw c;case 19:return t.finish(16);case 20:return t.finish(13);case 21:case"end":return t.stop()}}),t,null,[[5,9,13,21],[14,,16,20]])})));return function(e){return t.apply(this,arguments)}}()),r.socket.subscribe("updateAreas",function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.updateAreas(t.areas);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a,n,r,o,s,c,i,u,p,m=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.a.send("VKWebAppDisableSwipeBack"),this.props.t.setPopout(l.a.createElement(d.E,null)),L(["Manrope Semibold","Manrope Bold"]),setTimeout((function(){m.props.t.state.isShowGlobalCanvasOnboard&&m.props.t.setActiveModal(ts)}),500),t=this.canvas,a=this.canvas_,n=this.onMouseDown,r=this.onMouseUp,o=this.throttle,s=this.onMouseMove,c=this.onStartCrop,i=this.onEndCrop,u=this.onCropMove,this.canvasContext=t.getContext("2d"),e.next=8,new Promise((function(e){return m.props.t.socket.call("canvas.getAreas",{},function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(a.response);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 8:return p=e.sent,e.next=11,new Promise((function(e){return m.props.t.socket.call("canvas.join",{},function(){var t=Object(g.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{(n=new Image).onload=function(){m.props.t.setPopout(null),m.canvasContext.drawImage(n,0,0);var e=!0,t=!1,r=void 0;try{for(var o,s=a.lines[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var c=o.value,i=c.x0,l=c.y0,u=c.x1,p=c.y1,d=c.color,h=c.isEraser,f=c.lineWidth;m.drawLine(i,l,u,p,d,h,f,!1,!1)}}catch(v){t=!0,r=v}finally{try{e||null==s.return||s.return()}finally{if(t)throw r}}},n.src=a.canvasData}catch(r){console.error(r)}e(!0);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 11:return e.next=13,this.updateAreas(p);case 13:this.lastScheme=document.body.attributes.getNamedItem("scheme").value,this.clientHeight=this.props.t.clientHeight,this.clientWidth=this.props.t.clientWidth,t.addEventListener("mousedown",n,!1),t.addEventListener("mouseup",r,!1),t.addEventListener("mouseout",r,!1),t.addEventListener("mousemove",(function(e){return m.state.isCompassActive?s(e):o(s(e),10)}),!1),t.addEventListener("touchstart",n,!1),t.addEventListener("touchend",r,!1),t.addEventListener("touchcancel",r,!1),t.addEventListener("touchmove",(function(e){return m.state.isCompassActive?s(e):o(s(e),10)}),!1),a.addEventListener("mousedown",c,!1),a.addEventListener("mouseup",i,!1),a.addEventListener("mouseout",i,!1),a.addEventListener("mousemove",u,!1),a.addEventListener("touchstart",c,!1),a.addEventListener("touchend",i,!1),a.addEventListener("touchcancel",i,!1),a.addEventListener("touchmove",u,!1);case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a,n,r,o,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(h.a.send("VKWebAppEnableSwipeBack"),this.props.t.socket.call("canvas.leave",{}),document.body.setAttribute("scheme",this.lastScheme),t=!0,a=!1,n=void 0,e.prev=6,r=Ur[Symbol.iterator]();!(t=(o=r.next()).done);t=!0)s=o.value,clearInterval(s);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),a=!0,n=e.t0;case 14:e.prev=14,e.prev=15,t||null==r.return||r.return();case 17:if(e.prev=17,!a){e.next=20;break}throw n;case 20:return e.finish(17);case 21:return e.finish(14);case 22:Ur=[],clearInterval(Dr);case 24:case"end":return e.stop()}}),e,this,[[6,10,14,22],[15,,17,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t,a){"bright_light"!==document.body.attributes.getNamedItem("scheme").value&&setTimeout((function(){return document.body.setAttribute("scheme","bright_light")}),500),e.color!==this.props.color&&("pipette"===this.props.color?this.setState({isPipette:!0}):this.setState({color:this.props.color}))}},{key:"updateAreas",value:function(){var e=Object(g.a)(b.a.mark((function e(t){var a,n,r,o,s=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in Ur=[],a={},n=[],r=function(e){t[e].owner_id>0&&n.push(t[e].owner_id),Ur.push(setInterval((function(){if(t[e].owner_id>0){var n=F(t[e].time-Date.now()).str,r=n.hours,o=n.minutes,c=n.seconds;a[e]="".concat(r,":").concat(o,":").concat(c),s.setState({areas_time:a}),s.state.drawing||s.forceUpdate(),t[e].time<=Date.now()&&(t[e]={owner_id:0,time:0})}}),1e3))},t)r(o);return e.next=6,ae(n);case 6:this.setState({areas:t.sort((function(e,t){return e.id-t.id})),areas_time:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onMouseDown",value:function(e){console.log("onMouseDown");try{this.setState({drawing:!0}),Fr.x=e.clientX||e.touches[0].clientX,Fr.y=e.clientY||e.touches[0].clientY,Gr=[]}catch(e){console.log("Error onMouseDown"),console.error(e)}}},{key:"onMouseUp",value:function(e){console.log("onMouseUp");try{var t=this.state,a=t.drawing,n=t.color,r=t.isEraser,o=t.lineWidth,s=t.isPipette;if(!a)return;if(this.setState({drawing:!1}),s)return void this.setState({isPipette:!1});try{var c=this.canvas.getBoundingClientRect();try{this.drawLine(Fr.x-c.left,Fr.y-c.top,(e.clientX||e.touches[0].clientX)-c.left,(e.clientY||e.touches[0].clientY)-c.top,n,r,o)}catch(e){}console.log("Lines to send: ".concat(Gr.length)),Gr.length>0&&(this.props.t.socket.call("canvas.draw",{data:Gr,user_id:this.props.t.state.vk_user.id}),Gr=[])}catch(u){console.log("Error onMouseUp2"),console.log(e),console.error(u)}var i=this.canvas_container.style.transform,l=i.substring(i.indexOf("(")+1,i.indexOf(")")).split(",");Tr.x=parseInt(l[0]),Tr.y=parseInt(l[1]),(isNaN(Tr.x)||isNaN(Tr.y))&&(Tr.x=0,Tr.y=0)}catch(e){console.log("Error onMouseUp1"),console.error(e)}}},{key:"onMouseMove",value:function(e){try{var t=this.state,a=t.drawing,n=t.color,r=t.isEraser,o=t.lineWidth,s=t.canvasScale;if(!a)return;var c=this.canvas,i=this.canvasContext,l=c.getBoundingClientRect();if(this.state.isPipette){var u=i.getImageData(((e.clientX||e.touches[0].clientX)-l.left)/s,((e.clientY||e.touches[0].clientY)-l.top)/s,1,1),p=S(u.data[0],u.data[1],u.data[2]);return this.setState({color:p}),void this.props.t.setState({pickedColor:p})}if(this.state.isCompassActive){try{var d={x:e.clientX||e.touches[0].clientX,y:e.clientY||e.touches[0].clientY},m={x:(d.x-Fr.x)/s,y:(d.y-Fr.y)/s},h=Math.max(Math.min(this.clientWidth-200,Tr.x+Nr+m.x),200-this.canvas.width),f=Math.max(Math.min(this.clientHeight-200,Tr.y+Wr+m.y),200-this.canvas.height);this.setState({canvasTransformX:h,canvasTransformY:f})}catch(e){console.log(e)}return}try{this.drawLine(Fr.x-l.left,Fr.y-l.top,(e.clientX||e.touches[0].clientX)-l.left,(e.clientY||e.touches[0].clientY)-l.top,n,r,o),Fr.x=e.clientX||e.touches[0].clientX,Fr.y=e.clientY||e.touches[0].clientY}catch(e){console.log("Error onMouseMove2"),console.error(e)}}catch(e){console.log("Error onMouseMove1"),console.error(e)}return!1}},{key:"drawLine",value:function(e,t,a,n,r,o,s){var c=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],i=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];try{if(this.state.isCompassActive&&c)return;if(i){var l=this.state.canvasScale;e/=l,a/=l,t/=l,n/=l}if(c&&!this.isAllowToDraw(e,t,a,n))return;if("object"===typeof r){var u=r[zr]||r[0],p=r[zr+1]||r[0];r=j(u,p,Vr,r.length),0===(Vr+=r.length===Vr?-Vr:1)&&(zr+=r.length===zr?-zr:1)}try{var d=this.canvasContext;d.beginPath(),o?(d.globalCompositeOperation="destination-out",d.arc(e,t,s,0,2*Math.PI,!1),d.fill()):(d.globalCompositeOperation="source-over",d.moveTo(e,t),d.lineTo(a,n),d.strokeStyle=r,d.fill(),d.lineWidth=s,d.lineCap=d.lineJoin="round",d.stroke()),d.closePath(),i&&(Gr.push({x0:e,y0:t,x1:a,y1:n,color:r,isEraser:o,lineWidth:s}),Gr.length>800&&(console.log("Lines to send: ".concat(Gr.length)),this.props.t.socket.call("canvas.draw",{data:Gr,user_id:this.props.t.state.vk_user.id}),Gr=[]))}catch(m){}}catch(m){console.log("Error drawLine"),console.error(m)}}},{key:"throttle",value:function(e,t){var a=(new Date).getTime();return function(){var n=(new Date).getTime();n-a>=t&&(a=n,e.apply(null,arguments))}}},{key:"onStartCrop",value:function(e){this.state.isCrop&&(Fr.x=e.clientX||e.touches[0].clientX,Fr.y=e.clientY||e.touches[0].clientY,console.log("start crop",Fr),this.setState({crop_process:!0}))}},{key:"onEndCrop",value:function(e){var t=this.state,a=t.crop_process,n=t.isCrop;a&&n&&(console.log("end crop"),this.setState({crop_process:!1}))}},{key:"onCropMove",value:function(e){var t=this.state,a=t.crop_process,n=t.isCrop;if(a&&n){var r=this.canvas_,o=this.canvasContext_,s=this.state.canvasScale,c=r.getBoundingClientRect();o.clearRect(0,0,r.width,r.height),o.drawImage(this.canvas,0,0);var i=(e.clientX||e.touches[0].clientX)-c.left,l=(e.clientY||e.touches[0].clientY)-c.top,u=i-(Fr.x-c.left),p=l-(Fr.y-c.top);Kr={x:(Fr.x-c.left)/s,y:(Fr.y-c.top)/s,width:u/s,height:p/s},o.strokeRect(Kr.x,Kr.y,Kr.width,Kr.height)}}},{key:"isAllowToDraw",value:function(e,t,a,n){if(245481845===this.props.t.state.vk_user.id)return!0;var r=!0,o=this.state.areas.filter((function(r){var o=r.x0,s=r.y0,c=r.x1,i=r.y1;return e>=o&&t>=s&&a<=c&&n<=i})),s=!0,c=!1,i=void 0;try{for(var l,u=o[Symbol.iterator]();!(s=(l=u.next()).done);s=!0){var p=l.value;if(!(r=0===p.owner_id||p.owner_id==this.props.t.state.vk_user.id))return r}}catch(d){c=!0,i=d}finally{try{s||null==u.return||u.return()}finally{if(c)throw i}}return o.length>0&&r}},{key:"render",value:function(){var e=this,t=this.state,a=this.props.t,n=t.isCompassActive,r=t.drawing,o=t.isFullCanvasShowed,s=t.fullCanvasData,c=t.lineWidth,i=t.canvasScale,u=(t.isStroke,t.isPipette),p=t.isCrop,m=t.color,h=t.canvasTransformX,v=t.canvasTransformY;return l.a.createElement("div",{className:"GlobalCanvas"},l.a.createElement("div",{style:{height:!Br&&!Mr&&37},className:"GlobalCanvasBack",onClick:function(){e.componentWillUnmount(),a.back()}},l.a.createElement(kr.a,null)),o&&l.a.createElement("img",{src:s,alt:"canvas"}),l.a.createElement("div",{className:"GlobalCanvas_canvas",style:{transform:"scale(".concat(i,")"),width:"100vw",height:"100vh"}},l.a.createElement("div",{className:"GlobalCanvas_canvas",ref:function(t){return e.canvas_container=t},style:{transform:"translate(".concat(h,"px, ").concat(v,"px)"),width:1595,height:1595}},this.areas,l.a.createElement("canvas",{style:{cursor:n?r?"grabbing":"grab":"crosshair",display:p&&"none"},width:1595,height:1595,ref:function(t){return e.canvas=t},id:"canvas"}),l.a.createElement("canvas",{style:{display:!p&&"none"},width:1595,height:1595,ref:function(t){return e.canvas_=t},id:"canvas_"}))),!1,l.a.createElement("div",{className:"GlobalCanvasActions"},p?l.a.createElement("div",{style:{width:"calc(100% - 32px)"}},l.a.createElement("span",null,"\u0412\u044b\u0434\u0435\u043b\u0438\u0442\u0435 \u043e\u0431\u043b\u0430\u0441\u0442\u044c \u0434\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f"),l.a.createElement(d.h,{style:{marginTop:8},stretched:!0,size:"l",mode:"gradient_blue",onClick:Object(g.a)(b.a.mark((function t(){var n,r,o,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.canvasContext_.clearRect(0,0,e.canvas_.width,e.canvas_.height),t.next=3,e.setState({isCrop:!1});case 3:return a.setPopout(l.a.createElement(d.E,null)),n=Object(C.createCanvas)(Math.abs(Kr.width),Math.abs(Kr.height)),r=(Kr.width<0?-Kr.width:0)-Kr.x,o=(Kr.height<0?-Kr.height:0)-Kr.y,n.getContext("2d").drawImage(e.canvas,r,o),t.t0=ea,t.next=11,new Promise((function(e){return n.toBlob((function(t){return e(t)}))}));case 11:return t.t1=t.sent,t.t2="\u0420\u0438\u0441\u0443\u043d\u043e\u043a \u0441\u0434\u0435\u043b\u0430\u043d \u0432 \u043c\u0438\u043d\u0438-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 vk.com/app".concat(N().vk_app_id),t.next=15,(0,t.t0)(t.t1,"\u0423\u0433\u0430\u0434\u0430\u0439, \u0447\u0442\u043e \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043d\u043e [\u041e\u0431\u0449\u0438\u0439 \u0445\u043e\u043b\u0441\u0442]",t.t2,!1,!0,"global_canvas");case 15:s=t.sent,a.setSnackbar(-1===s?"\u0414\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u0432 \u0430\u043b\u044c\u0431\u043e\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c \u0434\u043e\u0441\u0442\u0443\u043f":s<0?"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 :(":"\u0420\u0438\u0441\u0443\u043d\u043e\u043a \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d \u0432 \u0430\u043b\u044c\u0431\u043e\u043c \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435"),a.setPopout(null);case 18:case"end":return t.stop()}}),t)})))},"\u0413\u043e\u0442\u043e\u0432\u043e"),l.a.createElement(d.h,{style:{marginTop:6},stretched:!0,size:"l",mode:"secondary",onClick:Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.canvasContext_.clearRect(0,0,e.canvas_.width,e.canvas_.height),e.setState({isCrop:!1});case 2:case"end":return t.stop()}}),t)})))},"\u041e\u0442\u043c\u0435\u043d\u0430")):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"GlobalCanvasActions_Buttons"},this.canvas_actions.map((function(t,a){return 0===t?l.a.createElement("div",{key:"g-a-".concat(a),className:"Actions_Separator"}):l.a.createElement("div",{key:"g-a-".concat(a),onClick:t[1],style:Ir({outline:t[2]&&"2px solid var(--custom_card_solo_text_color)"},u?{background:m,color:m}:{}),ref:function(t){return e["action".concat(a)]=t}},l.a.cloneElement(t[0],{width:21,height:21}))}))),l.a.createElement("div",{className:"GlobalCanvasActions_Slider"},l.a.createElement(d.H,{step:n?.05:1,min:n?.2:2,max:n?5:20,value:Number(n?i:c),onChange:function(t){e.setState(Object(f.a)({},n?"canvasScale":"lineWidth",t))}}),l.a.createElement("span",null,n?"\u043f\u0440\u0438\u0431\u043b\u0438\u0436\u0435\u043d\u0438\u0435":"\u0442\u043e\u043b\u0449\u0438\u043d\u0430")))))}},{key:"navbar_items",get:function(){var e=this,t=this.state,a=this.props.t,n=t.isCompassActive,r=t.isEraser,o=t.isFullCanvasShowed,s=t.isStroke;return[].concat(Object(E.a)(a.state.user.admin?[{icon:l.a.createElement(pa.a,{width:21,height:21}),onClick:function(){a.setPopout(e.alert_load_picture)}}]:[]),[{icon:l.a.createElement(wr.a,{width:21,height:21}),onClick:function(){e.setState({isCompassActive:!n,isEraser:!1,isFullCanvasShowed:!1,isStroke:!1})},selected:n},{icon:l.a.createElement(Da.a,{width:21,height:21}),onClick:function(){a.setPopout(e.alert_color)}},{icon:l.a.createElement(Ca,null),onClick:function(){e.setState({isEraser:!r,isCompassActive:!1,isFullCanvasShowed:!1})},selected:r},{icon:l.a.createElement(Aa,null),onClick:function(){e.setState({isStroke:!s,isCompassActive:!1,isFullCanvasShowed:!1})},selected:s},{icon:l.a.createElement(_r.a,{width:21,height:21}),onClick:function(){var t=Object(g.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o?e.setState({fullCanvasData:null}):(a=e.canvas.toDataURL("image/png"),e.setState({fullCanvasData:a}),clearInterval(Dr),Dr=setInterval((function(){var t=e.canvas.toDataURL("image/png");e.setState({fullCanvasData:t})}),500)),e.setState({isFullCanvasShowed:!o,isEraser:!1,isCompassActive:!1,isStroke:!1});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),selected:o},{icon:l.a.createElement(Cr.a,{width:21,height:21}),onClick:function(){M("https://vk.me/join/DFIbwK_w537NhbqDIWPd8JjoW/qfkWn5tzk=")}},{icon:l.a.createElement(xr.a,{width:21,height:21}),onClick:function(){e.componentWillUnmount(),a.go("global_canvas_info")}}])}},{key:"canvas_actions",get:function(){var e=this,t=this.state,a=t.isCompassActive,n=t.isBrushActive,r=t.isEraser,o=t.isShowAreas,s=this.props.t;return[[l.a.createElement(Da.a,null),function(){s.setActiveModal(ns)}],0,[l.a.createElement(wr.a,null),function(){e.setState({isCompassActive:!0,isShowAreas:!!a&&!o,isBrushActive:!1,isEraser:!1})},a],[l.a.createElement(Lr.a,null),function(){e.setState({isCompassActive:!1,isShowAreas:!1,isBrushActive:!0,isEraser:!1})},n],[l.a.createElement(Or.a,null),function(){e.setState({isCompassActive:!1,isShowAreas:!1,isBrushActive:!1,isEraser:!0})},r],0,[l.a.createElement(nr.a,null),function(){s.setPopout(l.a.createElement(d.a,{onClose:function(){return s.setPopout(null)},iosCloseItem:l.a.createElement(d.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),toggleRef:e["action".concat(6)]},l.a.createElement(d.b,{autoclose:!0,onClick:function(){e.componentWillUnmount(),s.go("global_canvas_info")},before:l.a.createElement(xr.a,null)},"\u041e\u0431\u0443\u0447\u0435\u043d\u0438\u0435"),l.a.createElement(d.b,{autoclose:!0,onClick:function(){M("https://vk.me/join/DFIbwK_w537NhbqDIWPd8JjoW/qfkWn5tzk=")},before:l.a.createElement(Sr.a,null)},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0447\u0430\u0442"),l.a.createElement(d.b,{autoclose:!0,onClick:Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s.setPopout(l.a.createElement(d.E,null)),e.canvasContext_=e.canvas_.getContext("2d"),e.canvasContext_.drawImage(e.canvas,0,0),e.canvasContext_.lineWidth=10,e.canvasContext_.strokeStyle="#ff0000",e.setState({isCrop:!0,crop_process:!1,isShowAreas:!1}),s.setPopout(null);case 7:case"end":return t.stop()}}),t)}))),before:l.a.createElement(nn.a,null)},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0445\u043e\u043b\u0441\u0442")))}]]}},{key:"alert_load_picture",get:function(){var e=this,t=this.props.t;return l.a.createElement(d.C,{onClick:function(){return e.props.t.setPopout(null)},onClose:function(){return e.props.t.setPopout(null)}},l.a.createElement(d.m,{className:"GlobaCanvas_Load_Picture"},l.a.createElement("input",{accept:".png",type:"file",multiple:!1,ref:function(t){return e.uploadImage=t},style:{display:"none"},onChange:function(){var a=Object(g.a)(b.a.mark((function a(n){var r,o,s,c,i;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Y(n);case 2:r=a.sent,2,o=r.image.width,s=r.image.height,c=797.5-o/2,i=797.5-s/2,e.uploadImageTag.onload=Object(g.a)(b.a.mark((function a(){var n,u,p,m,h,f,v,g,E;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("Image loaded"),(n=e.canvasUploadImage.getContext("2d")).mozImageSmoothingEnabled=!1,n.webkitImageSmoothingEnabled=!1,n.imageSmoothingEnabled=!1,n.drawImage(e.uploadImageTag,0,0,o,s),console.log("Start processing..."),Rr=[],t.setPopout(l.a.createElement(d.E,null)),a.next=11,P(500);case 11:for(u=0;u<s;u++)for(console.log("".concat(Math.ceil(100/s*u),"%")),p=0;p<o;p++)m=n.getImageData(p,u,1,1).data,void 0,void 0,h=f=c===o?p:c+p,void 0,void 0,v=g=i===s?u:i+u,E=S(m[0],m[1],m[2]),Rr.push({x0:h,y0:v,x1:f,y1:g,color:E,isEraser:!1,lineWidth:2}),e.drawLine(h,v,f,g,E,!1,2,!1,!1);return console.log("Process end!"),a.next=15,t.setPopout(e.alert_load_picture);case 15:e.uploadImageTag.src=r.data;case 16:case"end":return a.stop()}}),a)}))),e.uploadImageTag.src=r.data;case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}),l.a.createElement("img",{width:200,height:200,alt:"img",onClick:function(){return e.uploadImage.click()},ref:function(t){return e.uploadImageTag=t}}),l.a.createElement("canvas",{ref:function(t){return e.canvasUploadImage=t},width:1595,height:1595,style:{display:"none"}}),l.a.createElement(d.h,{style:{marginTop:12},size:"m",mode:"gradient_blue",onClick:Object(g.a)(b.a.mark((function a(){var n,r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.setPopout(l.a.createElement(d.E,null)),a.next=3,P(500);case 3:n=0;case 4:if(!(n<Rr.length)){a.next=13;break}return console.log("".concat(Math.ceil(100/Rr.length*n),"%")),r=Rr.slice(n,n+100),t.socket.call("canvas.draw",{data:r,user_id:t.state.vk_user.id}),a.next=10,P(10);case 10:n+=100,a.next=4;break;case 13:e.props.t.setPopout(null);case 14:case"end":return a.stop()}}),a)})))},"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c")))}},{key:"alert_color",get:function(){var e=this;return l.a.createElement(d.C,{onClick:function(){return e.props.t.setPopout(null)},onClose:function(){return e.props.t.setPopout(null)}},l.a.createElement(d.m,null,l.a.createElement(_.a,{color:this.state.color,onChange:function(t){return e.setState({color:t})}}),l.a.createElement(d.h,{style:{marginTop:12},stretched:!0,size:"m",before:l.a.createElement(jr.a,null),mode:"gradient_blue",onClick:function(){e.props.t.setPopout(null),e.setState({isPipette:!0})}},"\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0446\u0432\u0435\u0442"),this.props.t.state.user.admin&&l.a.createElement(d.h,{style:{marginTop:8},stretched:!0,size:"m",before:l.a.createElement(Pr.a,null),mode:"gradient_gray",onClick:function(){e.props.t.setPopout(null),e.drawLine(0,0,1595,1595,e.state.color,!1,2500,!1),e.props.t.socket.call("canvas.draw",{data:Gr,user_id:e.props.t.state.vk_user.id})}},"\u0417\u0430\u043b\u0438\u0442\u044c \u0445\u043e\u043b\u0441\u0442")))}},{key:"areas",get:function(){var e=this,t=this.state,a=t.areas,n=t.areas_time,r=t.isShowAreas,o=this.props.t;return l.a.createElement("div",{className:"Canvas_Areas",style:{transition:"all 200ms",opacity:!r&&0,visibility:!r&&"hidden"}},a.map((function(t,a){return l.a.createElement("div",{key:"area_".concat(a),style:{pointerEvents:r&&"none"}},0!==t.owner_id&&l.a.createElement(d.f,{size:48,shadow:!1,src:Q[t.owner_id]&&Q[t.owner_id].photo_100}),l.a.createElement("h1",{style:{marginTop:0!==t.owner_id&&2}},0===t.owner_id?"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c":t.owner_id===e.props.t.state.vk_user.id?"\u0422\u0432\u043e\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c":"\u0427\u0443\u0436\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c"),l.a.createElement("h3",{style:{marginTop:2}},0!==t.owner_id&&n[a]),0===t.owner_id&&l.a.createElement("div",{className:"CustomButton",onClick:function(){o.state.user.coins>=1e3?o.setPopout(l.a.createElement(d.d,{actions:[{title:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c",autoclose:!0,mode:"positive",action:function(){o.socket.call("canvas.rentArea",{area_id:t.id},(function(e){o.updateData()}))}},{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],actionsLayout:"horizontal",onClose:function(){return o.setPopout(null)},header:"\u0410\u0440\u0435\u043d\u0434\u0430 \u043e\u0431\u043b\u0430\u0441\u0442\u0438",text:"\u0410\u0440\u0435\u043d\u0434\u0430 \u0441\u0442\u043e\u0438\u0442 1000 \u043c\u043e\u043d\u0435\u0442 \u043d\u0430 1 \u0447\u0430\u0441. \u041f\u0440\u043e\u0434\u043b\u0438\u0442\u044c \u0430\u0440\u0435\u043d\u0434\u0443 \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u043e\u0433\u0434\u0430, \u043a\u043e\u0433\u0434\u0430 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u0441\u044f \u0441\u0440\u043e\u043a (1 \u0447\u0430\u0441). \u0423 \u0412\u0430\u0441 ".concat(I(o.state.user.coins)," ").concat(A(o.state.user.coins,["\u043c\u043e\u043d\u0435\u0442\u0430","\u043c\u043e\u043d\u0435\u0442\u044b","\u043c\u043e\u043d\u0435\u0442"],!1),".")})):o.setPopout(l.a.createElement(d.d,{actions:[{title:"\u041e\u043a",autoclose:!0,mode:"cancel"}],actionsLayout:"horizontal",onClose:function(){return o.setPopout(null)},header:"\u0410\u0440\u0435\u043d\u0434\u0430 \u043e\u0431\u043b\u0430\u0441\u0442\u0438",text:"\u0422\u0435\u0431\u0435 \u043d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 ".concat(A(1e3-o.state.user.coins,["\u043c\u043e\u043d\u0435\u0442\u044b","\u043c\u043e\u043d\u0435\u0442\u044b","\u043c\u043e\u043d\u0435\u0442"]),".")}))}},"\u0430\u0440\u0435\u043d\u0434\u043e\u0432\u0430\u0442\u044c"))})))}}]),t}(i.PureComponent);Hr.defaultProps={};var Yr=Hr;function Xr(){return(Xr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Zr(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Jr=l.a.createElement("path",{d:"M3.84316 13.0355L5.96448 15.1568C6.74553 15.9378 8.01186 15.9378 8.79291 15.1568L11.6213 12.3284L6.67159 7.37862L3.84316 10.207C3.06211 10.9881 3.06211 12.2544 3.84316 13.0355Z",fill:"#A4A6AA"}),qr=l.a.createElement("path",{d:"M3.31279 13.5658L5.43411 15.6872C6.50806 16.7611 8.24926 16.7611 9.3232 15.6872L15.6872 9.32321C16.7611 8.24926 16.7611 6.50806 15.6872 5.43412L13.5658 3.3128C12.4919 2.23886 10.7507 2.23886 9.67675 3.3128L3.31279 9.67676C2.23885 10.7507 2.23885 12.4919 3.31279 13.5658Z",stroke:"#A4A6AA",strokeWidth:1.5}),$r=function(e){var t=e.svgRef,a=e.title,n=Zr(e,["svgRef","title"]);return l.a.createElement("svg",Xr({width:20,height:20,viewBox:"0 0 20 20",fill:"none",ref:t},n),a?l.a.createElement("title",null,a):null,Jr,qr)},Qr=(l.a.forwardRef((function(e,t){return l.a.createElement($r,Xr({svgRef:t},e))})),a.p,T()),eo=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.t;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:e.back}),separator:!1},Qr&&"\u041e\u0431\u0449\u0438\u0439 \u0445\u043e\u043b\u0441\u0442"),l.a.createElement("div",{className:"GlobalCanvasInfo",style:{paddingBottom:24}},!Qr&&l.a.createElement("h2",{style:{textAlign:"left"}},"\u041e\u0431\u0449\u0438\u0439 \u0445\u043e\u043b\u0441\u0442"),l.a.createElement("p",{style:{margin:!Qr&&"8px 0 0 0"}},"\u041d\u0430 \u043e\u0431\u0449\u0435\u043c \u0445\u043e\u043b\u0441\u0442\u0435 \u043c\u043e\u0433\u0443\u0442 \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0438\u0433\u0440\u043e\u043a\u0438. \u0420\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u043c\u043e\u0436\u043d\u043e \u043d\u0430 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438. \u0412\u0441\u0435\u0433\u043e \u0442\u0430\u043a\u0438\u0445 \u043e\u0431\u043b\u0430\u0441\u0442\u0435\u0439 25."),l.a.createElement("div",{className:"GlobalCanvas_Items__List"},[[l.a.createElement(Da.a,null),"\u041c\u0435\u043d\u044e \u043f\u0430\u043b\u0438\u0442\u0440\u044b"],[l.a.createElement(wr.a,null),"\u0420\u0435\u0436\u0438\u043c \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u044f","\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0435 \u043d\u0430\u0436\u0430\u0442\u0438\u0435 \u043f\u043e\u043a\u0430\u0436\u0435\u0442 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0434\u043b\u044f \u0430\u0440\u0435\u043d\u0434\u044b"],[l.a.createElement(Lr.a,null),"\u0420\u0435\u0436\u0438\u043c \u0440\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u044f"],[l.a.createElement(Or.a,null),"\u0420\u0435\u0436\u0438\u043c \u043b\u0430\u0441\u0442\u0438\u043a\u0430"]].map((function(e,t){return l.a.createElement("div",{key:"item_".concat(t)},l.a.cloneElement(e[0],{width:20,height:20}),l.a.createElement("div",null,l.a.createElement("span",null,e[1]),e[2]&&l.a.createElement("span",null,e[2])))}))),l.a.createElement("p",{style:{margin:"18px 0 0 0"}},"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u0443\u044e \u043e\u0431\u043b\u0430\u0441\u0442\u044c \u043c\u043e\u0436\u043d\u043e \u0430\u0440\u0435\u043d\u0434\u043e\u0432\u0430\u0442\u044c (1000 \u043c\u043e\u043d\u0435\u0442 \u043d\u0430 \u0447\u0430\u0441). \u041d\u0430 \u0430\u0440\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043c\u043e\u0436\u0435\u0442 \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446. \u041f\u0440\u043e\u0434\u043b\u0438\u0442\u044c \u0430\u0440\u0435\u043d\u0434\u0443 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u2014 \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u043a\u0443\u043f\u0438\u0442\u044c \u0435\u0451 \u0441\u043d\u043e\u0432\u0430 \u043f\u043e \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044e \u0441\u0440\u043e\u043a\u0430.")))}}]),t}(i.PureComponent);eo.defaultProps={};var to=eo;function ao(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function no(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ao(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ao(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ro=T(),oo=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={friend_lobby:no({},e.friend_lobby)},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t,a=t.socket,n=t.state.user,r=this.state.friend_lobby;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:t.back}),separator:!1},ro&&"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043b\u043e\u0431\u0431\u0438"),l.a.createElement("div",{className:"FriendLobbySettings"},!ro&&l.a.createElement("h2",{style:{textAlign:"left",marginLeft:28}},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043b\u043e\u0431\u0431\u0438"),l.a.createElement(d.g,{header:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",subheader:"\u0415\u0441\u043b\u0438 \u0432\u044b \u0432\u0432\u043e\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0451 \u0441\u043b\u043e\u0432\u043e \u0434\u043b\u044f \u0438\u0433\u0440\u044b, \u0442\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0438\u0441\u0443\u043d\u043e\u043a \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f. \u0422\u0430\u043a \u0436\u0435, \u0435\u0441\u043b\u0438 \u0432\u044b \u0437\u0430\u0434\u0430\u0451\u0442\u0435 \u0441\u0432\u043e\u0451 \u0441\u043b\u043e\u0432\u043e, \u0442\u043e \u0432\u044b \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435\u0441\u044c \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a\u043e\u043c \u0432 \u0438\u0433\u0440\u0435."}),l.a.createElement(d.m,{style:{paddingBottom:24}},l.a.createElement("div",{className:"Span"},"\u0412\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u043b\u043e\u0431\u0431\u0438"),l.a.createElement(d.F,{style:{marginTop:8},value:r.friendsOnly?"private":"public",onChange:function(t){console.log(t),r.friendsOnly="private"===t,e.setState({friend_lobby:r}),e.forceUpdate()},options:[{label:"\u0414\u043b\u044f \u0432\u0441\u0435\u0445",value:"public"},{label:"\u0414\u043b\u044f \u0434\u0440\u0443\u0437\u0435\u0439",value:"private"}]}),l.a.createElement("div",{className:"Span",style:{marginTop:8}},"\u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u0438\u0433\u0440\u044b"),l.a.createElement(d.F,{style:{marginTop:8},value:r.timeout,onChange:function(t){r.timeout=t,e.setState({friend_lobby:r}),e.forceUpdate()},options:[{label:"90 \u0441\u0435\u043a",value:90},{label:"10 \u043c\u0438\u043d",value:600}]}),l.a.createElement(d.G,{style:{marginTop:8},Component:"label",after:l.a.createElement(d.M,{getRef:function(t){return e.saveGame=t},checked:r.saveGame,onChange:function(t){r.saveGame=t.currentTarget.checked,r.saveGame&&(r.setCustomWord=!1,e.setCustomWord.checked=!1),e.setState({friend_lobby:r}),e.forceUpdate()}})},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0438\u0441\u0443\u043d\u043e\u043a"),l.a.createElement(d.G,{Component:"label",after:l.a.createElement(d.M,{getRef:function(t){return e.setCustomWord=t},checked:r.setCustomWord,onChange:function(t){r.setCustomWord=t.currentTarget.checked,r.setCustomWord&&(r.saveGame=!1,e.saveGame.checked=!1),e.setState({friend_lobby:r}),e.forceUpdate()}})},"\u0417\u0430\u0434\u0430\u0442\u044c \u0441\u0432\u043e\u0451 \u0441\u043b\u043e\u0432\u043e"),r.setCustomWord&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"Span",style:{marginTop:8}},"\u0421\u043b\u043e\u0432\u043e"),l.a.createElement(d.s,{style:{marginTop:8},placeholder:"\u041a\u0440\u043e\u043a\u043e\u0434\u0438\u043b",defaultValue:r.customWord||"",onChange:function(t){r.customWord=t.currentTarget.value,e.setState({friend_lobby:r})}})),(n.premium||n.admin)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"Span",style:{marginTop:8}},"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b-\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432"),l.a.createElement(d.s,{style:{marginTop:8},placeholder:"\u0427\u0438\u0441\u043b\u043e (\u043c\u0430\u043a\u0441 500)",type:"number",min:2,max:500,defaultValue:r.maxPlayers||20,onChange:function(t){r.maxPlayers=parseInt(t.currentTarget.value),e.setState({friend_lobby:r})}})),l.a.createElement(d.h,{style:{marginTop:18,width:"100%"},size:"m",mode:"gradient_blue",stretched:!0,onClick:Object(g.a)(b.a.mark((function n(){var o,s,c,i,u,p;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.props.t.setPopout(l.a.createElement(d.E,null)),o=r.friendsOnly,s=r.timeout,c=r.saveGame,i=r.setCustomWord,u=r.customWord,p=r.maxPlayers,a.call("friends.saveSettings",{friendsOnly:o,timeout:s,saveGame:c,setCustomWord:i,customWord:u,maxPlayers:p},(function(e){e.response&&t.setState({friend_lobby:e.response}),t.setPopout(null),t.back()}));case 3:case"end":return n.stop()}}),n)})))},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))}}]),t}(i.PureComponent);oo.defaultProps={};var so,co=oo,io=T(),lo=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={isFullCanvasShowed:!0,fullCanvasData:null},a.drawLine=a.drawLine.bind(Object(y.a)(a)),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a,n,r,o,s,c,i,l,u,p,d,m,h,f,v,E,y,k,w,_,C,x,L,O,S,j,A,I,D,F,N=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.lastScheme=document.body.attributes.getNamedItem("scheme").value,this.clientHeight=this.props.t.clientHeight,this.clientWidth=this.props.t.clientWidth,t=this.canvas,a=this.props,n=a.t.socket,this.canvasContext=t.getContext("2d"),this.componentDidUpdate(),so=setInterval((function(){var e=N.canvas.toDataURL("image/png");N.setState({fullCanvasData:e})}),200),1,r=0,o=0,s=!1,c=300,i=[],setTimeout(Object(g.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<1)){e.next=9;break}return e.next=4,new Promise((function(e){return n.call("canvas.getHistory",{limit:1,offset:r},(function(t){e(t)}))}));case 4:(a=e.sent).response.length>0?(i.push(a.response),console.log({allData:i.length}),r+=1,t--,i.length-o>2?c-=10:c+=10):s=!0;case 6:t++,e.next=1;break;case 9:case"end":return e.stop()}}),e)}))),100),l=0;case 11:if(!(l<1)){e.next=71;break}if(s){e.next=68;break}if(u=i[o],l--,!u){e.next=66;break}console.log({currentData:o}),o++,p=this.canvasContext,d=!0,m=!1,h=void 0,e.prev=22,f=u[Symbol.iterator]();case 24:if(d=(v=f.next()).done){e.next=50;break}for(E=v.value,y=!0,k=!1,w=void 0,e.prev=29,_=E.lines[Symbol.iterator]();!(y=(C=_.next()).done);y=!0)x=C.value,O=(L=x||{}).x0,S=L.y0,j=L.x1,A=L.y1,I=L.color,D=L.isEraser,F=L.lineWidth,p.beginPath(),D?(p.globalCompositeOperation="destination-out",p.arc(O,S,F,0,2*Math.PI,!1),p.fill()):(p.globalCompositeOperation="source-over",p.moveTo(O,S),p.lineTo(j,A),p.strokeStyle=I,p.fill(),p.lineWidth=F,p.lineCap=p.lineJoin="round",p.stroke()),p.closePath();e.next=37;break;case 33:e.prev=33,e.t0=e.catch(29),k=!0,w=e.t0;case 37:e.prev=37,e.prev=38,y||null==_.return||_.return();case 40:if(e.prev=40,!k){e.next=43;break}throw w;case 43:return e.finish(40);case 44:return e.finish(37);case 45:return e.next=47,P(c);case 47:d=!0,e.next=24;break;case 50:e.next=56;break;case 52:e.prev=52,e.t1=e.catch(22),m=!0,h=e.t1;case 56:e.prev=56,e.prev=57,d||null==f.return||f.return();case 59:if(e.prev=59,!m){e.next=62;break}throw h;case 62:return e.finish(59);case 63:return e.finish(56);case 64:e.next=68;break;case 66:return e.next=68,P(100);case 68:l++,e.next=11;break;case 71:case"end":return e.stop()}}),e,this,[[22,52,56,64],[29,33,37,45],[38,,40,44],[57,,59,63]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.body.setAttribute("scheme",this.lastScheme),clearInterval(so);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t,a){"bright_light"!==document.body.attributes.getNamedItem("scheme").value&&setTimeout((function(){return document.body.setAttribute("scheme","bright_light")}),500)}},{key:"drawLine",value:function(e,t,a,n,r,o,s){try{try{var c=this.canvasContext;c.beginPath(),o?(c.globalCompositeOperation="destination-out",c.arc(e,t,s,0,2*Math.PI,!1),c.fill()):(c.globalCompositeOperation="source-over",c.moveTo(e,t),c.lineTo(a,n),c.strokeStyle=r,c.fill(),c.lineWidth=s,c.lineCap=c.lineJoin="round",c.stroke()),c.closePath()}catch(i){}}catch(i){console.log("Error drawLine"),console.error(i)}}},{key:"render",value:function(){var e=this,t=this.state,a=this.props.t,n=t.isFullCanvasShowed,r=t.fullCanvasData;return l.a.createElement("div",{className:"GlobalCanvas"},io?l.a.createElement("div",{className:"CircleButtonBack",onClick:function(){e.componentWillUnmount(),a.back()}},l.a.createElement(kr.a,null)):l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:function(){e.componentWillUnmount(),a.back()}}),separator:!1}),n&&l.a.createElement("img",{src:r,alt:"canvas"}),l.a.createElement("div",{className:"GlobalCanvas_canvas",ref:function(t){return e.canvas_container=t}},l.a.createElement("canvas",{style:{display:n&&"none"},width:1595,height:1595,ref:function(t){return e.canvas=t},id:"canvas"})))}}]),t}(i.PureComponent);lo.defaultProps={};var uo=lo,po=a(750),mo=a(751),ho=T(),fo=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.t,t=e.state.user;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:e.back}),separator:!1},ho&&"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f"),l.a.createElement("div",{className:"Suggestions"},!ho&&l.a.createElement("h2",{style:{textAlign:"left"}},"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f"),l.a.createElement("div",{className:"Span",style:{marginTop:8}},"\u041c\u044b \u0433\u043e\u0442\u043e\u0432\u044b \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043e\u0442 \u043d\u0430\u0448\u0435\u0439 \u043b\u044e\u0431\u0438\u043c\u043e\u0439 \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u0438, \u0442\u0430\u043a \u0447\u0442\u043e \u0432\u043f\u0435\u0440\u0451\u0434!"),l.a.createElement("div",{className:"SuggestionsCards"},[["suggestions_idea",["\u0418\u0434\u0435\u044f","\u0418\u0434\u0435\u0438","\u0418\u0434\u0435\u0439"],"\u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e"],["suggestions_word",["\u0421\u043b\u043e\u0432\u043e","\u0421\u043b\u043e\u0432\u0430","\u0421\u043b\u043e\u0432"],"\u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u043e"]].map((function(e,a){return l.a.createElement("div",{key:"Card_".concat(a)},l.a.createElement("p",null,t[e[0]]),l.a.createElement("p",null,A(t[e[0]],e[1],!1)," ",e[2]))}))),l.a.createElement("div",{className:"SuggestionsVariants"},[{icon:l.a.createElement(po.a,null),text:"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u0438\u0434\u0435\u044e",onClick:function(){return e.go("suggestions_idea")}},{icon:l.a.createElement(mo.a,null),text:"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e",onClick:function(){return e.go("suggestions_word")}},{icon:l.a.createElement(an.a,null),text:"\u0421\u043e\u043e\u0431\u0449\u0438\u0442\u044c \u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435",onClick:function(){return M("https://vk.com/@draw_app-bug")}}].map((function(e,t){var a=e.icon,n=e.text,r=e.onClick;return l.a.createElement("div",{key:"Variant_".concat(t),className:"Variant_".concat(t),onClick:r},a,l.a.createElement("span",null,n))})))))}}]),t}(i.PureComponent);fo.defaultProps={};var vo=fo,bo=T(),go=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={input1:"",input2:""},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.t,a=this.state,n=a.input1,r=a.input2;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:t.back}),separator:!1},bo&&"\u041d\u043e\u0432\u0430\u044f \u0438\u0434\u0435\u044f"),l.a.createElement("div",{className:"SuggestionsIdea"},!bo&&l.a.createElement("h2",{style:{textAlign:"left"}},"\u041d\u043e\u0432\u0430\u044f \u0438\u0434\u0435\u044f"),l.a.createElement("div",{className:"SuggestionsIdea_Container"},l.a.createElement("div",{className:"Span"},"\u041a\u0440\u0430\u0442\u043a\u043e \u043e\u043f\u0438\u0448\u0438\u0442\u0435 \u0438\u0434\u0435\u044e"),l.a.createElement(d.s,{style:{marginTop:8},placeholder:"\u041d\u043e\u0432\u0430\u044f \u043c\u0435\u0442\u043a\u0430",getRef:function(t){return e.inputIdeaTitle=t},value:n,onChange:function(t){var a=t.currentTarget.value;console.log("Input (title), value = ",a),console.log("Math (title) = ",a.match(/^[0-9a-zA-Z\u0430-\u044f\u0410-\u042f ,.:-]+$/)),(a.match(/^[0-9a-zA-Z\u0430-\u044f\u0410-\u042f ,.:-]+$/)||""===a)&&a.length<=200&&e.setState({input1:a})}}),l.a.createElement("div",{className:"Span",style:{marginTop:8}},"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u043e\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u0432\u043e\u044e \u0438\u0434\u0435\u044e"),l.a.createElement(d.N,{style:{marginTop:8},placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u043c\u0435\u0442\u043a\u0443 \u041a\u043b\u0438\u043f\u0435\u0440. \u042d\u0442\u0443 \u043c\u0435\u0442\u043a\u0443 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0434\u0430\u0432\u0430\u0442\u044c \u0438\u0433\u0440\u043e\u043a\u0430\u043c, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u043d\u0438\u043c\u0430\u044e\u0442 \u043a\u043b\u0438\u043f\u044b \u043f\u043e \u0438\u0433\u0440\u0435.",getRef:function(t){return e.inputIdeaDescription=t},value:r,onChange:function(t){var a=t.currentTarget.value;console.log("Input (desc), value = ",a),console.log("Math (desc) = ",a.match(/^[0-9a-zA-Z\u0430-\u044f\u0410-\u042f ,.:-]+$/)),(a.match(/^[0-9a-zA-Z\u0430-\u044f\u0410-\u042f ,.:-]+$/)||""===a)&&a.length<=600&&e.setState({input2:a})}})),l.a.createElement(d.h,{style:{marginTop:12,width:"100%"},size:"m",mode:"gradient_blue",stretched:!0,onClick:Object(g.a)(b.a.mark((function a(){var n,r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.inputIdeaTitle.value,r=e.inputIdeaDescription.value,0!==n.length&&0!==r.length){a.next=5;break}return t.setSnackbar("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f."),a.abrupt("return");case 5:if(!(r.split(" ").length<3)){a.next=8;break}return t.setSnackbar("\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435."),a.abrupt("return");case 8:if(0!==n.replace(/^[0-9 ,.:-]+$/,"").length&&0!==r.replace(/^[0-9 ,.:-]+$/,"").length){a.next=11;break}return t.setSnackbar("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435."),a.abrupt("return");case 11:if(!(n.length>200||r.length>600)){a.next=14;break}return t.setSnackbar("\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435."),a.abrupt("return");case 14:if(!(n.length<5||r.length<5)){a.next=17;break}return t.setSnackbar("\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435."),a.abrupt("return");case 17:t.setPopout(l.a.createElement(d.E,null)),t.socket.call("suggestions.add",{type:"idea",title:n,description:r},(function(e){t.setPopout(null),e.response?t.go("suggestions_done"):t.setSnackbar(e.error.message)}));case 19:case"end":return a.stop()}}),a)})))},"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c"),t.state.user.admin&&l.a.createElement(d.h,{style:{marginTop:6,width:"100%"},size:"m",mode:"gradient_gray",stretched:!0,onClick:Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.socket.call("suggestions.getList",{type:"idea"},function(){var e=Object(g.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({suggestions_type:"idea",suggestions_list:a.response});case 2:t.go("suggestions_list");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))},"\u0421\u043f\u0438\u0441\u043e\u043a")))}}]),t}(i.PureComponent);go.defaultProps={};var Eo=go,yo=T(),ko=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={input:""},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t,a=this.state.input;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:t.back}),separator:!1},yo&&"\u041d\u043e\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e"),l.a.createElement("div",{className:"SuggestionsWord"},!yo&&l.a.createElement("h2",{style:{textAlign:"left"}},"\u041d\u043e\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e"),l.a.createElement("div",{className:"Span"},"\u041f\u043e\u0441\u0442\u0430\u0440\u0430\u0439\u0442\u0435\u0441\u044c \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043b\u043e\u0432\u043e \u0431\u0435\u0437 \u043e\u0448\u0438\u0431\u043e\u043a. \u0418 \u0441\u0430\u043c\u043e\u0435 \u0433\u043b\u0430\u0432\u043d\u043e\u0435, \u0447\u0442\u043e\u0431\u044b \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0443 \u0438\u0433\u0440\u043e\u043a\u043e\u0432 \u0431\u044b\u043b\u043e \u043f\u043e\u043d\u044f\u0442\u043d\u043e, \u043a\u0430\u043a \u0435\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c \u0438 \u043e\u0442\u0433\u0430\u0434\u0430\u0442\u044c \u0440\u0438\u0441\u0443\u043d\u043e\u043a."),l.a.createElement("div",{className:"SuggestionsWord_Container"},l.a.createElement("div",{className:"Span"},"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043b\u043e\u0432\u043e"),l.a.createElement(d.s,{style:{marginTop:8},placeholder:"\u041c\u043e\u0440\u043a\u043e\u0432\u044c",getRef:function(t){return e.inputWord=t},value:a,onChange:function(t){var a=t.currentTarget.value;console.log("Input (word), value = ",a),console.log("Math (word) = ",a.match(/^[\u0430-\u044f\u0410-\u042f-]+$/)),(a.match(/^[\u0430-\u044f\u0410-\u042f-]+$/)||""===a)&&a.length<=33&&e.setState({input:a})}})),l.a.createElement(d.h,{style:{marginTop:12,width:"100%"},size:"m",mode:"gradient_blue",stretched:!0,onClick:Object(g.a)(b.a.mark((function a(){var n;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==(n=e.inputWord.value).length){a.next=4;break}return t.setSnackbar("\u0412\u044b \u043d\u0435 \u0432\u0432\u0435\u043b\u0438 \u0441\u043b\u043e\u0432\u043e."),a.abrupt("return");case 4:if(!(n.length>33)){a.next=7;break}return t.setSnackbar("\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435 \u0441\u043b\u043e\u0432\u043e."),a.abrupt("return");case 7:t.setPopout(l.a.createElement(d.E,null)),t.socket.call("suggestions.add",{type:"word",title:n},(function(e){t.setPopout(null),e.response?t.go("suggestions_done"):t.setSnackbar(e.error.message)}));case 9:case"end":return a.stop()}}),a)})))},"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c"),t.state.user.admin&&l.a.createElement(d.h,{style:{marginTop:6,width:"100%"},size:"m",mode:"gradient_gray",stretched:!0,onClick:Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.socket.call("suggestions.getList",{type:"word"},function(){var e=Object(g.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({suggestions_type:"word",suggestions_list:a.response});case 2:t.go("suggestions_list");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))},"\u0421\u043f\u0438\u0441\u043e\u043a")))}}]),t}(i.PureComponent);ko.defaultProps={};var wo=ko,_o=T(),Co=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={offset:e.list.length,limit:10,canGetMore:e.list.length>0,prevY:0},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef)}},{key:"handleObserver",value:function(e,t){var a=this,n=e[0].boundingClientRect.y,r=this.props.t,o=this.state,s=o.prevY,c=o.offset,i=o.limit,l=o.canGetMore;(0===s||s>n)&&l&&(this.setState({spinner:!0}),r.socket.call("suggestions.getList",{type:this.props.type,offset:c,limit:i},function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({suggestions_list:[].concat(Object(E.a)(r.state.suggestions_list),Object(E.a)(t.response))}),a.setState({canGetMore:t.response.length>0,spinner:!1}),a.forceUpdate();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({offset:c+i})),this.setState({prevY:n})}},{key:"actionButtons",value:function(e,t){var a=this,n=this.props.t;return l.a.createElement("div",{style:{display:"flex",marginTop:12}},l.a.createElement(d.h,{mode:"gradient_blue",onClick:function(){n.socket.call("suggestions.approve",{id:e},function(){var e=Object(g.a)(b.a.mark((function e(r){var o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.response){e.next=8;break}return(o=n.state.suggestions_list).splice(t,1),e.next=5,n.setState({suggestions_list:o});case 5:a.forceUpdate(),e.next=10;break;case 8:n.setSnackbar(r.error.message),a.forceUpdate();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},"\u041e\u0434\u043e\u0431\u0440\u0438\u0442\u044c"),l.a.createElement(d.h,{mode:"gradient_",style:{marginLeft:6},onClick:function(){n.socket.call("suggestions.decline",{id:e},function(){var e=Object(g.a)(b.a.mark((function e(r){var o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.response){e.next=8;break}return(o=n.state.suggestions_list).splice(t,1),e.next=5,n.setState({suggestions_list:o});case 5:a.forceUpdate(),e.next=10;break;case 8:n.setSnackbar(r.error.message),a.forceUpdate();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.t,n=t.list,r=t.type,o=this.state.spinner;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:a.back}),separator:!1},_o&&"\u0421\u043f\u0438\u0441\u043e\u043a ".concat("idea"===r?"\u0438\u0434\u0435\u0439":"\u0441\u043b\u043e\u0432")),l.a.createElement("div",{className:"SuggestionsList"},!_o&&l.a.createElement("h2",{style:{textAlign:"left"}},"\u0421\u043f\u0438\u0441\u043e\u043a ".concat("idea"===r?"\u0438\u0434\u0435\u0439":"\u0441\u043b\u043e\u0432")),l.a.createElement("div",{className:"SuggestionsList_Container"},l.a.createElement(d.i,{size:"l"},n.map((function(t,a){return"idea"===r?l.a.createElement(d.k,{key:"Card_".concat(a),header:t.title,caption:l.a.createElement(l.a.Fragment,null,t.description,e.actionButtons(t.id,a))}):l.a.createElement(d.k,{disabled:!1,key:"Card_".concat(a),header:t.title,caption:e.actionButtons(t.id,a)})}))))),o&&l.a.createElement(d.J,{size:"small",style:{margin:"20px 0"}}),l.a.createElement("div",{ref:function(t){return e.loadingRef=t}}))}}]),t}(i.PureComponent);Co.defaultProps={};var xo=Co,Lo=function(e){function t(e){return Object(n.a)(this,t),Object(o.a)(this,Object(s.a)(t).call(this,e))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.t,t=e.state.user,a=Math.min(10*t.lvl,100);return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:e.back}),separator:!1}),l.a.createElement("div",{className:"Panel_Container_Card Panel_Container_Card-TwoCards"},l.a.createElement("div",null,l.a.createElement(Ut.a,{width:36,height:36}),l.a.createElement("div",{className:"Panel_Container_Card-Text"},l.a.createElement("h2",null,"\u0423\u0440\u043e\u0432\u0435\u043d\u044c"),l.a.createElement("p",null,"\u041f\u043e\u043b\u0443\u0447\u0430\u0439\u0442\u0435 \u043e\u043f\u044b\u0442, \u0440\u0438\u0441\u0443\u044f \u0438 \u0443\u0433\u0430\u0434\u044b\u0432\u0430\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u044b. \u0421 \u043a\u0430\u0436\u0434\u044b\u043c \u043d\u043e\u0432\u044b\u043c \u0443\u0440\u043e\u0432\u043d\u0435\u043c \u0432\u044b \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442\u0435 +10% \u0446\u0432\u0435\u0442\u043e\u0432\u043e\u0439 \u043f\u0430\u043b\u0438\u0442\u0440\u044b.")),l.a.createElement("div",{className:"UserLvl"},l.a.createElement("div",{className:"UserLvlProgress"},l.a.createElement("div",null,l.a.createElement("div",{style:{width:100/(100*t.lvl)*t.xp+"%"}})),l.a.createElement("div",null,l.a.createElement("span",null,t.xp,"XP ",l.a.createElement("span",null,"/")," ",100*t.lvl,"XP"),l.a.createElement("span",null,"LVL ",t.lvl))))),l.a.createElement("div",null,l.a.createElement("p",{className:"Panel_Container_Card-Header"},"\u0421\u0435\u0439\u0447\u0430\u0441 \u0442\u0435\u0431\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e ",a,"%"),l.a.createElement("div",{className:"UserLvlTemp"},l.a.createElement("div",{className:"Opacity",style:{left:a+"%"}})))))}}]),t}(i.PureComponent);Lo.defaultProps={};var Oo=Lo,So=function(e){function t(e){return Object(n.a)(this,t),Object(o.a)(this,Object(s.a)(t).call(this,e))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.t;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{left:l.a.createElement(d.A,{onClick:e.back}),separator:!1}),l.a.createElement("div",{className:"WeekGifts"},l.a.createElement("div",{className:"WeekGifts_Texts"},l.a.createElement("h1",null,"\u0420\u043e\u0437\u044b\u0433\u0440\u044b\u0448"),l.a.createElement("p",null,"\u041a\u0430\u0436\u0434\u0443\u044e \u043d\u0435\u0434\u0435\u043b\u044e \u043c\u044b \u0434\u0430\u0440\u0438\u043c \u0441\u0442\u0438\u043a\u0435\u0440\u044b \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435 \u0442\u0440\u0451\u043c \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u043c \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a\u0430\u043c"),l.a.createElement("p",null,"\u0427\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u043a\u0430\u0440\u0442\u0438\u043d \u0432\u044b \u043d\u0430\u0440\u0438\u0441\u0443\u0435\u0442\u0435 \u0437\u0430 \u043d\u0435\u0434\u0435\u043b\u044e, \u0442\u0435\u043c \u0432\u044b\u0448\u0435 \u0448\u0430\u043d\u0441 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0432\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u043f\u0440\u0438\u0437")),l.a.createElement("div",{className:"WeekGifts_Users"},l.a.createElement("div",{className:"UserContainer"},l.a.createElement(oa,{size:80,src:e.state.vk_user.photo_100}),l.a.createElement("div",{className:"UserNameScore"},l.a.createElement("h2",null,e.state.vk_user.first_name),l.a.createElement("p",null,"100"))),l.a.createElement("div",{className:"UsersContainer"},l.a.createElement("div",{className:"UserContainer"},l.a.createElement(oa,{size:56,src:e.state.vk_user.photo_100}),l.a.createElement("div",{className:"UserNameScore"},l.a.createElement("h2",null,e.state.vk_user.first_name),l.a.createElement("p",null,"98"))),l.a.createElement("div",{className:"UserContainer"},l.a.createElement(oa,{size:56,src:e.state.vk_user.photo_100}),l.a.createElement("div",{className:"UserNameScore"},l.a.createElement("h2",null,e.state.vk_user.first_name),l.a.createElement("p",null,"76")))),l.a.createElement("div",{className:"UserContainer"},l.a.createElement(oa,{size:46,src:e.state.vk_user.photo_100}),l.a.createElement("div",{className:"UserNameScore"},l.a.createElement("h2",null,"\u0412\u044b"),l.a.createElement("p",null,"52")))),l.a.createElement("img",{alt:"background",className:"Background",src:B(a(667))})))}}]),t}(i.PureComponent);So.defaultProps={};var jo,Po,Ao=So,Io=a(305),Do=a(407),Fo=a(427),No={},Wo=0,To=0,Mo=[],Bo=[],Uo=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={drawing:!1,isEraser:!1,lineWidth:6},a.onMouseDown=a.onMouseDown.bind(Object(y.a)(a)),a.onMouseUp=a.onMouseUp.bind(Object(y.a)(a)),a.throttle=a.throttle.bind(Object(y.a)(a)),a.onMouseMove=a.onMouseMove.bind(Object(y.a)(a)),a.drawLine=a.drawLine.bind(Object(y.a)(a)),a.undoDraw=a.undoDraw.bind(Object(y.a)(a)),a.clear=a.clear.bind(Object(y.a)(a)),a.train=a.train.bind(Object(y.a)(a)),a.predict=a.predict.bind(Object(y.a)(a)),a.canvasSize=319,a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillUnmount",value:function(){h.a.send("VKWebAppEnableSwipeBack")}},{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a,n,r,o,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bo=[],h.a.send("VKWebAppDisableSwipeBack"),t=this.canvas,a=this.onMouseDown,n=this.onMouseUp,r=this.throttle,o=this.onMouseMove,s=this.props,c=s.t,this.canvasContext=t.getContext("2d"),c.setState({pickedColor:"#000000",color_gradient:void 0,color_percent:0}),t.addEventListener("mousedown",a,!1),t.addEventListener("mouseup",n,!1),t.addEventListener("mouseout",n,!1),t.addEventListener("mousemove",r(o,10),!1),t.addEventListener("touchstart",a,!1),t.addEventListener("touchend",n,!1),t.addEventListener("touchcancel",n,!1),t.addEventListener("touchmove",r(o,10),!1),c.setPopout(l.a.createElement(d.E,null)),jo=Do.a(),e.next=17,Fo.a();case 17:Po=e.sent,c.setPopout(null);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onMouseDown",value:function(e){this.setState({drawing:!0}),No.x=e.clientX||e.touches[0].clientX,No.y=e.clientY||e.touches[0].clientY,Mo=[]}},{key:"onMouseUp",value:function(e){var t=this.state,a=t.drawing,n=t.isEraser,r=t.lineWidth;if(a){this.setState({drawing:!1});try{var o=this.canvas.getBoundingClientRect();try{this.drawLine(No.x-o.left,No.y-o.top,(e.clientX||e.touches[0].clientX)-o.left,(e.clientY||e.touches[0].clientY)-o.top,this.props.color,n,r)}catch(e){}console.log("Lines: ".concat(Mo.length)),Mo.length>0&&(Bo.push(Mo),Mo=[])}catch(s){console.log(s)}}}},{key:"onMouseMove",value:function(e){var t=this.state,a=t.drawing,n=t.isEraser,r=t.lineWidth;if(a){try{var o=this.canvas.getBoundingClientRect();this.drawLine(No.x-o.left,No.y-o.top,(e.clientX||e.touches[0].clientX)-o.left,(e.clientY||e.touches[0].clientY)-o.top,this.props.color,n,r),No.x=e.clientX||e.touches[0].clientX,No.y=e.clientY||e.touches[0].clientY}catch(s){console.log(s)}return!1}}},{key:"drawLine",value:function(e,t,a,n,r,o,s){var c=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],i=arguments.length>8?arguments[8]:void 0;try{this.props.t;var l=i?i.getContext("2d"):this.canvasContext;if("object"===typeof r){var u=r[Wo]||r[0],p=r[Wo+1]||r[0];r=j(u,p,To,r.length),0===(To+=r.length===To?-To:1)&&(Wo+=r.length===Wo?-Wo:1)}l.beginPath(),o?(l.globalCompositeOperation="destination-out",l.arc(2*e,2*t,1.2*s,0,2*Math.PI,!1),l.fill()):(l.globalCompositeOperation="source-over",l.moveTo(2*e,2*t),l.lineTo(2*a,2*n),l.strokeStyle=r,l.fill(),l.lineWidth=s,l.lineCap=l.lineJoin="round",l.stroke()),l.closePath(),c&&Mo.push({x0:e,y0:t,x1:a,y1:n,color:r,isEraser:o,lineWidth:s})}catch(d){}}},{key:"throttle",value:function(e,t){var a=(new Date).getTime();return function(){var n=(new Date).getTime();n-a>=t&&(a=n,e.apply(null,arguments))}}},{key:"undoDraw",value:function(){var e=this.canvasContext;Bo.splice(Bo.length-1,1),e.clearRect(0,0,638,638),Bo.length>0&&(Bo.forEach((function(t){t.forEach((function(t){var a=t.x0,n=t.y0,r=t.x1,o=t.y1,s=t.color,c=t.isEraser,i=t.lineWidth;e.beginPath(),c?(e.globalCompositeOperation="destination-out",e.arc(2*a,2*n,1.2*i,0,2*Math.PI,!1),e.fill()):(e.globalCompositeOperation="source-over",e.moveTo(2*a,2*n),e.lineTo(2*r,2*o),e.strokeStyle=s,e.fill(),e.lineWidth=i,e.lineCap=e.lineJoin="round",e.stroke())}))})),e.closePath())}},{key:"clear",value:function(){Bo=[],this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"train",value:function(){var e=this.props.t,t=this.state.trainLabel;e.setPopout(l.a.createElement(d.E,null));var a=Io.a.fromPixels(this.canvas),n=Po.infer(a,!0);jo.addExample(n,t),this.clear(),a.dispose(),e.setPopout(null)}},{key:"predict",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.props.t).setPopout(l.a.createElement(d.E,null)),a=Io.a.fromPixels(this.canvas),n=Po.infer(a,!0),e.next=6,jo.predictClass(n);case 6:r=e.sent,console.log(r),t.setAlert("Predict",r.label,[{title:"True",autoclose:!0},{title:"False",mode:"cancel",action:this.train,autoclose:!0}],"horizontal");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.t,a=this.state,n=a.isEraser,r=a.lineWidth,o=a.trainLabel,s=T(),c=function(){return t.setActivePanel("main")};return l.a.createElement("div",{className:"Game"},!s&&l.a.createElement("div",{className:"NativeButtonMiniAppTop",onClick:c,style:{height:!W()&&37}},"\u0412\u044b\u0439\u0442\u0438"),l.a.createElement("div",{style:{display:s&&"flex"}},l.a.createElement("div",{className:"Canvas__"},l.a.createElement("div",{className:"Canvas_Container_Clear",style:{width:this.canvasSize,height:this.canvasSize}},l.a.createElement("canvas",{style:{width:this.canvasSize,height:this.canvasSize},width:638,height:638,ref:function(t){return e.canvas=t},id:"canvas"})),l.a.createElement("div",{className:"Canvas_Items_Container"},l.a.createElement(d.H,{step:1,min:4,max:30,value:Number(r),onChange:function(t){return e.setState({lineWidth:t})}}),l.a.createElement("div",{className:"Canvas_SubItems_Container"},l.a.createElement(d.r,{hasHover:!1,onClick:function(){t.setActiveModal(ns)}},l.a.createElement(Da.a,{width:21,height:21})),l.a.createElement(d.r,{style:{border:n&&"2px solid var(--color_secondary)"},hasHover:!1,onClick:function(){e.setState({isEraser:!n})}},l.a.createElement(Ca,null)),l.a.createElement(d.r,{hasHover:!1,onClick:function(){Bo.length>0&&e.undoDraw()}},l.a.createElement(Fa.a,{width:21,height:21})))),s&&l.a.createElement(d.h,{style:{marginTop:28},stretched:!0,size:"l",mode:"secondary",onClick:c},"\u0412\u044b\u0439\u0442\u0438")),l.a.createElement("div",{className:"TrainActions"},l.a.createElement(d.s,{style:{marginTop:24},value:o,onChange:function(t){return e.setState({trainLabel:t.currentTarget.value})},placeholder:"\u0427\u0442\u043e \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043d\u043e?"}),l.a.createElement(d.h,{style:{marginTop:12},stretched:!0,size:"l",mode:"secondary",disabled:!o||0===o.length,onClick:this.train},"\u041d\u0430\u0443\u0447\u0438\u0442\u044c"),l.a.createElement(d.h,{style:{marginTop:24},stretched:!0,size:"l",mode:"secondary",onClick:this.predict},"\u0420\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0442\u044c"))))}}]),t}(i.PureComponent);Uo.defaultProps={};var Go,Ro=Uo,zo=a(752),Vo=T(),Ko=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"ArtBattlePlaceholder"},l.a.createElement("div",{className:"ArtBattlePlaceholder--Title"},l.a.createElement(At.a,{width:36,height:36}),l.a.createElement("h1",null,"\u0411\u0438\u0442\u0432\u0430 \u0430\u0440\u0442\u043e\u0432")),l.a.createElement("div",{className:"ArtBattlePlaceholder--Steps"},["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c","\u041f\u043e\u0441\u0442\u0430\u0440\u0430\u0439\u0442\u0435\u0441\u044c \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043a\u0440\u0430\u0441\u0438\u0432\u044b\u0439 \u0440\u0438\u0441\u0443\u043d\u043e\u043a","\u041f\u0440\u043e\u0433\u043e\u043b\u043e\u0441\u0443\u0439\u0442\u0435 \u0437\u0430 \u043b\u0443\u0447\u0448\u0438\u0439 \u0440\u0438\u0441\u0443\u043d\u043e\u043a"].map((function(e,t){return l.a.createElement("div",{key:"step-".concat(t)},l.a.createElement("span",null,t+1),l.a.createElement("span",null,e))}))),l.a.createElement("div",{className:"ArtBattlePlaceholder--Actions"},l.a.createElement(d.h,{stretched:!0,size:"l",mode:"gradient_red",onClick:Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.t.setState({game_timeout:120,lobbyId:-1,drawerId:e.props.t.state.user.id,gameStart:Date.now(),isOnlineDrawing:!0,subGameInfo:{battle:!0},api_manager:2}),e.props.t.go("search");case 2:case"end":return t.stop()}}),t)})))},"\u041d\u0430\u0439\u0442\u0438 \u0438\u0433\u0440\u0443"),l.a.createElement(d.h,{stretched:!0,size:"l",mode:"secondary",onClick:function(){return e.props.t.back()}},"\u041e\u0442\u043c\u0435\u043d\u0430")))}}]),t}(i.PureComponent),Ho={},Yo=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={time:5,step:0,steps:5,rates:[]},a.componentDidMount=a.componentDidMount.bind(Object(y.a)(a)),a.renderCanvas=a.renderCanvas.bind(Object(y.a)(a)),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.renderCanvas(),Go=setInterval(Object(g.a)(b.a.mark((function t(){var a,n,r,o,s,c,i,l,u,p;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,n=a.rates,r=a.time,o=a.step,s=a.steps,!(--r<0)){t.next=14;break}if(o!==s-1){t.next=7;break}clearInterval(Go),t.next=12;break;case 7:return r=5,o++,t.next=11,e.setState({time:r,step:o});case 11:e.renderCanvas();case 12:t.next=16;break;case 14:5!==r||n[o-1]||(c=e.props,i=c.lobbyId,l=c.t,u=l.state.artBattleHistory,p=Object.keys(u)[o-1],n[o-1]=D(1,5),l.socket.call("games.rateAuthor",{lobbyId:i,author:p,rate:n[o-1]-1}),e.setState({rates:n})),e.setState({time:r});case 16:case"end":return t.stop()}}),t)}))),1e3);var t=this.props.t;t.socket.subscribe("gameEnd",function(){var e=Object(g.a)(b.a.mark((function e(a){var n,r,o,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.winnerId,r=a.word,o=a.gameId,s=a.lobbyId,t.log("game_logs","end",{win:n,word:r,game:o,lobby_id:s}),0===n){e.next=5;break}return e.next=5,ae([n]);case 5:t.setState({canvas_:Ho[n],winnerId:n,word:r,gameId:o,gameEnd:Date.now()}),t.setActivePanel("result"),console.log("Game end");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"renderCanvas",value:function(){var e=this.props.t.state.artBattleHistory;if(e){this.props.t.setPopout(l.a.createElement(d.E,null));var t=e[Object.keys(e)[this.state.step]];if(t.length>0){window.requestAnimationFrame();var a=this.canvas.getContext("2d");a.clearRect(0,0,638,638),t.forEach((function(e){e.forEach((function(e){var t=e.x0,n=e.y0,r=e.x1,o=e.y1,s=e.color,c=e.isEraser,i=e.lineWidth,l=e.multiplier;a.beginPath(),c?(a.globalCompositeOperation="destination-out",a.arc(t*l,n*l,1.2*i,0,2*Math.PI,!1),a.fill()):(a.globalCompositeOperation="source-over",a.moveTo(t*l,n*l),a.lineTo(r*l,o*l),a.strokeStyle=s,a.fill(),a.lineWidth=i,a.lineCap=a.lineJoin="round",a.stroke())}))})),a.closePath()}Ho[Object.keys(e)[this.state.step]]=this.canvas.toDataURL("image/png"),this.props.t.setPopout(null)}}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.time,n=t.rates,r=t.step,o=this.props,s=o.t,c=o.lobbyId,i=s.state,u=(i.vk_user,i.artBattleHistory);if(!u)return l.a.createElement("div",null);var p=Object.keys(u),d=p[r];return l.a.createElement("div",{className:"ArtBattleRate"},l.a.createElement("div",{style:{width:Vo?319:"100%",alignSelf:"flex-start"},ref:function(t){return e.header=t}},l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("div",{style:{display:"flex",alignItems:"center"}},l.a.createElement("h2",{style:{textAlign:"left",marginLeft:6}},"\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u0440\u0438\u0441\u0443\u043d\u043e\u043a")),l.a.createElement("h2",{style:{textAlign:"right",width:"25%",color:"var(--color_secondary)",wordWrap:"normal"}},a>=0?a:0," \u0441\u0435\u043a"))),l.a.createElement("div",{style:{display:Vo&&"flex"}},l.a.createElement("div",{className:"Canvas__"},l.a.createElement("div",{className:"Canvas_Container_Clear",style:{width:319,height:319}},l.a.createElement("canvas",{style:{width:this.canvasSize,height:this.canvasSize},width:638,height:638,ref:function(t){return e.canvas=t},id:"canvas"})),l.a.createElement("div",{className:"ArtBattleRate--RateActions"},["https://em-content.zobj.net/thumbs/160/apple/354/frowning-face_2639-fe0f.png","https://em-content.zobj.net/thumbs/160/apple/354/neutral-face_1f610.png","https://em-content.zobj.net/thumbs/160/apple/354/thinking-face_1f914.png","https://em-content.zobj.net/thumbs/160/apple/354/slightly-smiling-face_1f642.png","https://em-content.zobj.net/thumbs/160/apple/354/star-struck_1f929.png"].map((function(t,a){return l.a.createElement("div",{key:"act-".concat(a),style:{opacity:n[r]&&n[r]!==a+1&&.25,pointerEvents:n[r]&&"none"},onClick:function(){n[r]||(n[r]=a+1,e.setState({rates:n}),s.socket.call("games.rateAuthor",{lobbyId:c,author:d,rate:a}),e.forceUpdate())}},l.a.createElement("img",{alt:"icon",src:t}))}))),!Vo&&l.a.createElement("div",{className:"ArtBattleRate--Author"},l.a.createElement(oa,{size:36,src:Q[d].photo_100,frame:Q[d].frame_type,color:Q[d].frame_color}),l.a.createElement("span",null,Q[d].first_name," ",Q[d].last_name),l.a.createElement("div",{style:{display:void 0===p[r+1]&&"none"}},p[r+1]&&l.a.createElement(l.a.Fragment,null,l.a.createElement(oa,{size:32,src:Q[p[r+1]].photo_100,frame:Q[p[r+1]].frame_type,color:Q[p[r+1]].frame_color}),l.a.createElement("div",null,l.a.createElement(zo.a,{width:10,height:10,fill:"#99A2AD"})))))),Vo&&l.a.createElement("div",{className:"ArtBattle--Users"},p.map((function(e,t){return l.a.createElement("div",{key:"author-".concat(t),style:{opacity:r!==t&&.5}},l.a.createElement(oa,{size:32,src:Q[e].photo_100,frame:Q[e].frame_type,color:Q[e].frame_color}),l.a.createElement("span",null,Q[e].first_name," ",Q[e].last_name.substring(0,1),"."),l.a.createElement(zo.a,{style:{display:r!==t&&"none"},fill:"#99A2AD"}))})))))}}]),t}(i.PureComponent);function Xo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Zo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xo(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xo(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}a(684)("./".concat(window.location.search.length>0&&"desktop_web"===JSON.parse('{"'+decodeURI(window.location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}').vk_platform?"Desktop":"Mobile",".css"));var Jo,qo,$o=new Tn,Qo="1.3.7",es="outdated-version",ts="global-canvas",as="change-url-params",ns="palette",rs=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={bridge_inited:!1,appearance:"light",notifications_allowed:"1"===N().vk_are_notifications_enabled,isNotApp:!1,activePanel:"main",history:["main"],activeModal:null,modalHistory:[],color:void 0,pickedColor:"#000000",color_percent:0,colors:[["#FD5C5C","#FE77C4","#C47EFF","#508DFA","#5FE3FF","#50E98E","#FFED63","#FFB063"],"#000000","#FFFFFF","#E63902","#EA5A03","#FA8A00","#FBB101","#FDE401","#85B201","#019317","#019C8B","#035AA2","#00247A","#500A6D","#A9236B","#964B00","#F57C7C"],gradients:[["#FFB063","#FD5C5C","#FE77C4","#C47EFF","#508DFA","#5FE3FF","#50E98E","#FFED63","#FFB063","#FD5C5C"],["#34A5D2","#508DFA","#38587E","#3A8DD7","#466AC0","#3D5164","#34A5D2"],["#F8D465","#FF5990","#FF635C","#E08B53","#DDB173","#FFBC78","#F8D465","#FF5990"],["#B970E6","#F2B888","#8ED6FF","#FF6746","#CC976F","#B970E6","#F2B888"],["#DCD6FF","#EFBED0","#FF75E1","#FF7CE2","#FEBFFF","#DCD6FF"],["#666CFF","#6653DF","#92B0FF","#57AAD9","#666CFF","#6653DF"],["#FFCD4B","#FC71FF","#FF8C67","#8471F9","#FFCD4B","#FC71FF"],["#2A0567","#8C3CFF","#FFA7E6","#2A0567","#8C3CFF"],["#99E600","#FFB36D","#C2D357","#FFC886","#99E600","#FFB36D"]],btnSelectColorPaletteDefault:"#6862DA",__v_clicks:0,online:0,chooseWords:[],voteWords:[],drawerId:0,lobbyId:0,isOnlineDrawing:!0,bannersCount:9,banners:[],defaultBannerData:{title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",domain:"vk.com",trackingLink:"https://vk.com",ctaText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438",advertisingLabel:"\u0420\u0435\u043a\u043b\u0430\u043c\u0430",iconLink:"https://sun9-7.userapi.com/c846420/v846420985/1526c3/ISX7VF8NjZk.jpg",description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u043a\u043b\u0430\u043c\u044b",ageRestrictions:"14+",statistics:[{url:"",type:"playbackStarted"},{url:"",type:"click"}]},connected:!1,trying_reconnect:!1,dataUpdated:!1,author_works:[],subGameInfo:{},watchedShopItems:[],boughtShopItems:[],user:{},friend_lobby:{},game_timeout:90,suggestions_type:"",suggestions_list:[],game_canceled_reason:"",showStaticFeed:0,game_logs:[],api_manager:0},a.componentDidMount=a.componentDidMount.bind(Object(y.a)(a)),a.updateData=a.updateData.bind(Object(y.a)(a)),a.setAlert=a.setAlert.bind(Object(y.a)(a)),a.back=function(){var e=a.state,t=e.history,n=e.popout,r=e.activeModal,o=t[t.length-1];if(null===n||void 0===n){if(null!==r)return a.setState({activeModal:null}),void window.history.pushState({pop:"popout"},"Title");if("game"===o){var s=a.state,c=s.lobbyId;if(s.isOnlineDrawing)return a.socket.call("games.leaveGame",{lobbyId:c}),void a.setActivePanel("main");a.showNewAd()}"author"===o&&"picture_info"===t[t.length-2]&&"guessed_pictures"===t[t.length-3]&&a.setState({like_currentPictureSelected:a.state.like_currentPictureSelected_,like_method:"games.getByWinnerId",like_param:"gamesAsWinner",like_user_id:a.state.vk_user.id}),t.length<=1&&"main"!==t[0]&&"placeholder"!==t[0]?a.setActivePanel("main"):t.length>1?("search"===o?($o.call("games.search",{manager:a.state.api_manager}),a.setSnackbar("\u041f\u043e\u0438\u0441\u043a \u0438\u0433\u0440\u044b \u043e\u0442\u043c\u0435\u043d\u0451\u043d")):"friend_lobby"===o?$o.call("friends.leaveLobby",{owner_id:a.state.friend_lobby.owner_id}):"gallery"===o||"guessed_pictures"===o?a.setState({scrollPosition:null}):"feed"===o?a.setState({scrollPositionFeed:null}):"author"===o&&a.setState({scrollPositionAuthor:null}),t.pop(),a.setState({activePanel:t[t.length-1],history:t}),"search"!==t[t.length-1]&&a.setState({snackbar:null})):h.a.send("VKWebAppClose",{status:"success"})}else"ScreenSpinner"!==n.type.name&&a.setPopout(null)},a.go=function(e){var t=a.state,n=t.history;null!==t.activeModal&&a.setState({activeModal:null,modalHistory:[]}),n[n.length-1]!==e&&(n.push(e),window.history.pushState({activePanel:e},"Title"),"game"===e&&h.a.send("VKWebAppHideBannerAd"),a.setState({activePanel:e,history:n,snackbar:null}))},a.setActivePanel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];a.setState({activePanel:e,history:[].concat(Object(E.a)(t),[e]),snackbar:null})},a.setActiveModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=a.state.modalHistory;null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),a.setState({activeModal:e,modalHistory:t}),window.history.pushState({activeModal:e},"Modal")},a.setPopout=function(e){a.setState({popout:e})},a.setSnackbar=function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.snackbar){e.next=5;break}return e.next=3,a.setState({snackbar:null});case 3:return e.next=5,P(100);case 5:a.setState({snackbar:l.a.createElement(d.I,{onClose:function(){return a.setState({snackbar:null})}},t)});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.socket=$o,a.newAdSupports=h.a.supports("VKWebAppShowBannerAd"),a.showNewAd=function(){h.a.send("VKWebAppShowBannerAd",{banner_location:"bottom",layout_type:"resize"})},a.log=function(){var e=Object(g.a)(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,a.setState(Object(f.a)({},t,[].concat(Object(E.a)(a.state[t]||[]),[{e:n,d:r}])));case 3:e.next=7;break;case 5:return e.next=7,a.setState(Object(f.a)({},t,[]));case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),w.a.init(),w.a.scale(0),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a,n,r,o,s,c,i,l,u,p=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=N(),this.vkChatIntegration="im_attach_picker"===t.vk_ref&&""===window.location.hash,this.isFromCatalogChat="catalog_messenger_apps_with_action"===t.vk_ref,this.isFromChatWidget="im_app_action"===t.vk_ref,console.log({urlParams:t,vkChatIntegration:this.vkChatIntegration,isFromCatalogChat:this.isFromCatalogChat,isFromChatWidget:this.isFromChatWidget}),h.a.send("VKWebAppInit"),setTimeout(Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.newAdSupports?p.showNewAd():(clearInterval(Jo),Jo=setInterval(Object(g.a)(b.a.mark((function e(){var t,a,n,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.state,a=t.banners,n=t.bannersCount,e.next=3,h.a.send("VKWebAppGetAds",{});case 3:for(r=e.sent,o=0;o<n;o++)!1!==a[o]&&(a[o]=r);p.setState({banners:a});case 6:case"end":return e.stop()}}),e)}))),3e3));case 1:case"end":return e.stop()}}),e)}))),5e3),this.setState({bridge_inited:!0}),L(),L(["Inter Black"]),window.addEventListener("popstate",(function(e){e.preventDefault(),p.back()})),h.a.subscribe(function(){var e=Object(g.a)(b.a.mark((function e(t){var a,n,r,o,s,c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.detail,n=a.type,r=a.data,void 0!==n&&("vk-connect"!==n||r)&&console.log(n,r),"VKWebAppUpdateConfig"===n?((o=document.createAttribute("scheme")).value=r.scheme?"client_light"===r.scheme?"bright_light":r.scheme:"bright_light",document.body.attributes.setNamedItem(o),p.setState({appearance:r.scheme&&r.scheme.indexOf("light")>-1?"light":"dark"}),s=document.documentElement.clientHeight,c=document.documentElement.clientWidth,i=100/812*(s>0?s:812)/100,document.body.style.setProperty("--scale-value",i),document.body.setAttribute("_width",c),document.body.setAttribute("_height",s),p.clientHeight=s,p.clientWidth=c,console.log("windowHeight = ".concat(document.documentElement.clientHeight))):"VKWebAppViewRestore"===n?(p.setState({popout:null}),"global_canvas"===p.state.activePanel&&setTimeout((function(){return document.body.setAttribute("scheme","bright_light")}),500)):"VKWebAppChangeFragment"===n?window.location.hash="#".concat(r.location):"VKWebAppAllowNotificationsResult"===n?($o.call("users.enableNotifications",{allow:!0}),p.setState({notifications_allowed:!0})):"VKWebAppDenyNotificationsResult"===n&&($o.call("users.enableNotifications",{allow:!1}),p.setState({notifications_allowed:!1}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a=this.state.isNotApp,e.t0=!a,!e.t0){e.next=19;break}return e.next=17,h.a.send("VKWebAppStorageGet",{keys:["onboard"]});case 17:e.t1=e.sent.keys[0].value,e.t0=""===e.t1;case 19:if(n=e.t0,e.t2=!a,!e.t2){e.next=26;break}return e.next=24,h.a.send("VKWebAppStorageGet",{keys:["vk_group3"]});case 24:e.t3=e.sent.keys[0].value,e.t2=""===e.t3;case 26:if(r=e.t2,e.t4=!a,!e.t4){e.next=33;break}return e.next=31,h.a.send("VKWebAppStorageGet",{keys:["vk_chat"]});case 31:e.t5=e.sent.keys[0].value,e.t4=""===e.t5;case 33:if(o=e.t4,e.t6=!a,!e.t6){e.next=40;break}return e.next=38,h.a.send("VKWebAppStorageGet",{keys:["update_01062022"]});case 38:e.t7=e.sent.keys[0].value,e.t6=""===e.t7;case 40:if(s=e.t6,e.t8=!a,!e.t8){e.next=47;break}return e.next=45,h.a.send("VKWebAppStorageGet",{keys:["canvas_new_mode"]});case 45:e.t9=e.sent.keys[0].value,e.t8=""===e.t9;case 47:if(c=e.t8,e.t10=!a,!e.t10){e.next=54;break}return e.next=52,h.a.send("VKWebAppStorageGet",{keys:["canvas_new_mode_onboard_2"]});case 52:e.t11=e.sent.keys[0].value,e.t10=""===e.t11;case 54:if(i=e.t10,e.t12=!a,!e.t12){e.next=60;break}return e.next=59,h.a.send("VKWebAppGetUserInfo");case 59:e.t12=e.sent;case 60:return l=e.t12,e.prev=61,e.next=64,ae([t.vk_user_id]);case 64:u=e.sent,e.next=69;break;case 67:e.prev=67,e.t13=e.catch(61);case 69:return e.next=71,this.setState({isShowOnboard:n,isShowVkGroup:r,isShowVkChat:o,isShowGlobalCanvasOnboard:i,isShowGlobalCanvas:c,vk_user:l.id==t.vk_user_id?l:u[0]||l});case 71:return h.a.send("VKWebAppEnableSwipeBack"),this.connect(),$o.subscribe("exit",function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.setState({placeholderText:t.title,banned:t.banned,dataUpdated:!0});case 2:p.setPopout(null),t.banned?(p.setState({placeholderNeed:2}),p.setActivePanel("banned")):(p.setState({placeholderNeed:1}),p.setActivePanel("placeholder")),p.state.bridge_inited||(h.a.send("VKWebAppInit"),p.setState({bridge_inited:!0}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),$o.subscribe("app_version",(function(e){p.setState({app_version:e.app_version})})),$o.subscribe("restart",(function(e){p.setAlert("\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435","\u041f\u043e \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438 \u0432\u0441\u0435\u0445 \u0438\u0433\u0440 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d \u0440\u0435\u0441\u0442\u0430\u0440\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430.",[{title:"\u041e\u043a",autoclose:!0}])})),$o.onConnectionError((function(e){console.log("Connection error"),p.setState({connected:!1}),p.state.trying_reconnect||(p.setState({placeholderText:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443",placeholderNeed:1}),p.setPopout(null),p.setActivePanel("placeholder")),p.state.bridge_inited||(h.a.send("VKWebAppInit"),p.setState({bridge_inited:!0}))})),$o.onDisconnect((function(e){console.log("Disconnected. Reason: ",e),p.setState({connected:!1}),p.setPopout(null),0===p.state.placeholderNeed&&(p.setState({placeholderText:""}),p.setActivePanel("placeholder")),p.state.bridge_inited||(h.a.send("VKWebAppInit"),p.setState({bridge_inited:!0}))})),e.next=80,new Promise((function(e){return $o.onConnect(Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.setState({connected:!0,placeholderNeed:0});case 2:return console.log("Connected"),p.setActivePanel("main"),console.log("Update user data..."),t.next=7,new Promise(function(){var e=Object(g.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.updateData(),a=0,n=0;case 3:if(!(n<1)){e.next=11;break}return(!p.state.dataUpdated||a>=30)&&n--,a++,e.next=8,P(100);case 8:n++,e.next=3;break;case 11:t(!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:console.log("Data updated"),console.log({isShowVkGroup:r,isShowVkChat:o,isShowUpdate:s,isShowOnboard:n}),n||(r?setTimeout((function(){p.go("group_vk")}),1e3):o?setTimeout((function(){p.go("chat_vk"),h.a.send("VKWebAppStorageSet",{key:"vk_chat",value:"1"}),p.setState({isShowVkChat:!1})}),1e3):(console.log("Trying to check hash..."),p.onChangeHash())),e(!0);case 11:case"end":return t.stop()}}),t)}))))}));case 80:K("stats.join");case 81:case"end":return e.stop()}}),e,this,[[61,67]])})));return function(){return e.apply(this,arguments)}}()},{key:"setAlert",value:function(e,t,a){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vertical";this.setPopout(l.a.createElement(d.d,{actions:a,actionsLayout:r,onClose:function(){return n.setPopout(null)},header:e,text:t})),window.history.pushState({pop:"alert"},"Alert")}},{key:"connect",value:function(){var e=this;console.log("Try to connect..."),$o.connect("https://draw.avocado.special.vk-apps.com",N()),setTimeout((function(){e.state.banned||(e.state.dataUpdated||e.updateData(),e.state.connected||e.state.placeholderText||(clearInterval(qo),qo=setInterval((function(){e.state.connected?clearInterval(qo):(console.log("connecting..."),$o.connect("https://draw.avocado.special.vk-apps.com",N()))}),1e3)))}),1e3)}},{key:"updateData",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){$o.call("users.getTopNumber",{},(function(e){t.setState({top_number:e.response})})),$o.call("users.getTop",{},function(){var e=Object(g.a)(b.a.mark((function e(a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.response.map((function(e){return e.id})),e.next=3,ae(n);case 3:t.setState({top:a.response.map((function(e){return Zo({},Q[e.id],{},e)}))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),$o.call("users.get",{},(function(a){t.setState({user:a.response}),$o.call("games.getByDrawerId",{id:t.state.vk_user.id,limit:50},(function(a){t.setState({gamesAsDrawer:a.response});var n=a.response.map((function(e){return e.drawerId}));$o.call("games.getByWinnerId",{id:t.state.vk_user.id,limit:50},(function(a){ae(n=[].concat(Object(E.a)(n),Object(E.a)(a.response.map((function(e){return e.drawerId}))))),setTimeout(Object(g.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.setState({gamesAsWinner:a.response,dataUpdated:!0});case 2:e(!0);case 3:case"end":return n.stop()}}),n)}))),400)}))}))}))}));case 2:return this.setState({time:Date.now()}),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onChangeHash",value:function(){var e=this;if(console.log("Watch hash: ".concat(window.location.hash)),this.vkChatIntegration)return console.log("create chat lobby"),this.setPopout(l.a.createElement(d.E,null)),void $o.call("friends.createLobby",{},(function(t){t.response?(e.setState({friend_lobby:t.response}),e.go("friend_lobby"),e.setPopout(null)):e.setAlert("\u041e\u0448\u0438\u0431\u043a\u0430",t.error.message,[{title:"\u041e\u043a",mode:"cancel",autoclose:!0}])}));if(window.location.hash.startsWith("#"))for(var t=window.location.hash.substring(1),a=0,n=[{key:"author",do:function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setPopout(l.a.createElement(d.E,null)),t.next=3,ae([a]);case 3:t.sent[0]?e.socket.call("users.getById",{id:a},function(){var t=Object(g.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.socket.call("games.getByDrawerId",{id:a},function(){var t=Object(g.a)(b.a.mark((function t(r){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({author:Zo({id:a},n.response||{}),author_works:r.response});case 2:setTimeout((function(){e.go("author"),e.setPopout(null)}),400);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):e.setPopout(null);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"picture",do:function(){var t=Object(g.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n=parseInt(a),e.setPopout(l.a.createElement(d.E,null)),e.socket.call("games.getById",{id:n},function(){var t=Object(g.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===a.response){t.next=14;break}return n=a.response.drawerId,t.next=4,ae([n]);case 4:if(!t.sent[0]){t.next=11;break}return t.next=8,e.setState({gamesAsAuthor:[a.response],like_currentPictureSelected:0,like_method:"",like_param:"gamesAsAuthor",like_user_id:n});case 8:setTimeout((function(){e.go("picture_info"),e.setPopout(null)}),400),t.next=12;break;case 11:e.setPopout(null);case 12:t.next=15;break;case 14:e.setPopout(null);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(r){console.error(r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"lobby",do:function(t){""===t?e.go("friends"):(e.setPopout(l.a.createElement(d.E,null)),e.socket.call("friends.joinLobby",{owner_id:parseInt(t),url:!0},function(){var t=Object(g.a)(b.a.mark((function t(a){var n,r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.response){t.next=8;break}return t.next=3,ae([].concat(Object(E.a)(a.response.members),[a.response.owner_id]));case 3:return t.next=5,e.setState({friend_lobby:a.response});case 5:setTimeout((function(){e.go("friend_lobby"),e.setPopout(null)}),400),t.next=13;break;case 8:if(e.setPopout(null),a.error){t.next=11;break}return t.abrupt("return");case 11:n=a.error,r=n.code,o=n.message,6===r?e.setAlert("\u0423\u043f\u0441",o,[{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043b\u043e\u0431\u0431\u0438",action:function(){e.setPopout(l.a.createElement(d.E,null)),$o.call("friends.createLobby",{},(function(t){t.response?(e.setState({friend_lobby:t.response}),e.go("friend_lobby"),e.setPopout(null)):e.setAlert("\u041e\u0448\u0438\u0431\u043a\u0430",t.error.message,[{title:"\u041e\u043a",mode:"cancel",autoclose:!0}])}))}},{title:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e",mode:"cancel",autoclose:!0}]):e.setAlert("\u0423\u043f\u0441",o,[{title:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e",mode:"cancel",autoclose:!0}]);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}}];a<n.length;a++){var r=n[a];if(console.log("".concat(r.key," === ").concat(t," ?")),t.startsWith(r.key)){console.log("Did action with key = "+r.key),r.do(t.substring(r.key.length));break}}}},{key:"_tags",value:function(){return[["tag_interesting",l.a.createElement(se.a,null),"\u0418\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u0440","\u041c\u0435\u0442\u043a\u0430 \u0432\u044b\u0434\u0430\u0451\u0442\u0441\u044f \u043f\u0440\u0438 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0438 1.000 \u043b\u0430\u0439\u043a\u043e\u0432"],["tag_rater",l.a.createElement(ce.a,null),"\u041e\u0446\u0435\u043d\u0449\u0438\u043a","\u041e\u0446\u0435\u043d\u0438\u0442\u044c 100 \u043a\u0430\u0440\u0442\u0438\u043d"],["tag_agitator",l.a.createElement(ie.a,null),"\u0410\u0433\u0438\u0442\u0430\u0442\u043e\u0440","\u0420\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u043e \u0441\u0432\u043e\u0438\u0445 \u0440\u0430\u0431\u043e\u0442\u0430\u0445 \u0434\u0440\u0443\u0437\u044c\u044f\u043c (10 \u0440\u0430\u0437)"],["tag_savepoint",l.a.createElement(le.a,null),"\u0422\u043e\u0447\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435 10 \u0440\u0438\u0441\u0443\u043d\u043a\u043e\u0432"],["tag_rapidfire",l.a.createElement(ue.a,null),"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u0440\u0435\u043b","\u041c\u0435\u0442\u043a\u0430 \u0432\u044b\u0434\u0430\u0451\u0442\u0441\u044f \u0437\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u0443, \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043d\u043d\u0443\u044e \u0438 \u0443\u0433\u0430\u0434\u0430\u043d\u043d\u0443\u044e \u0437\u0430 5 \u0441\u0435\u043a\u0443\u043d\u0434"],["tag_turtle",l.a.createElement(pe.a,{width:20,height:20}),"\u0427\u0435\u0440\u0435\u043f\u0430\u0445\u0430","\u041c\u0435\u0442\u043a\u0430 \u0432\u044b\u0434\u0430\u0451\u0442\u0441\u044f \u0437\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u0443, \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043d\u043d\u0443\u044e \u0438 \u0443\u0433\u0430\u0434\u0430\u043d\u043d\u0443\u044e \u0437\u0430 85-90 \u0441\u0435\u043a\u0443\u043d\u0434"],["tag_creative",l.a.createElement(de.a,null),"\u041a\u0440\u0435\u0430\u0442\u0438\u0432\u043d\u044b\u0439","\u041c\u0435\u0442\u043a\u0430 \u0432\u044b\u0434\u0430\u0451\u0442\u0441\u044f \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0435\u0439, \u0435\u0441\u043b\u0438 \u0442\u0430 \u043f\u043e\u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u0442\u0432\u043e\u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u044b \u043a\u0440\u0435\u0430\u0442\u0438\u0432\u043d\u044b\u043c\u0438"],["tag_banned",l.a.createElement(me.a,null),"\u041d\u0430\u0440\u0443\u0448\u0438\u0442\u0435\u043b\u044c","\u041c\u0435\u0442\u043a\u0430 \u0441\u0432\u0438\u0434\u0435\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0443\u0435\u0442 \u043e \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0438 \u043f\u0440\u0430\u0432\u0438\u043b \u0438\u0433\u0440\u044b"],["tag_veteran",l.a.createElement(he.a,null),"\u0412\u0435\u0442\u0435\u0440\u0430\u043d","\u0423 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430 \u044d\u0442\u043e\u0439 \u043c\u0435\u0442\u043a\u0438 \u0431\u043e\u043b\u044c\u0448\u0435 500 \u043a\u0430\u0440\u0442\u0438\u043d"],["tag_banana",l.a.createElement(Ot,null),"\u0411\u0430\u043d\u0430\u043d\u043e\u0432\u044b\u0439 \u043e\u0441\u0442\u0440\u043e\u0432","\u041d\u0430\u0440\u0438\u0441\u0443\u0439\u0442\u0435 100 \u0431\u0430\u043d\u0430\u043d\u043e\u0432"],["tag_smart",l.a.createElement(fe.a,null),"\u0423\u043c\u043d\u0438\u043a","\u0412\u043b\u0430\u0434\u0435\u043b\u0435\u0446 \u043c\u0435\u0442\u043a\u0438 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u043b \u0432 \u0441\u0443\u043c\u043c\u0435 100 \u0438\u0434\u0435\u0439 \u0438 \u0441\u043b\u043e\u0432"],["tag_psychic",l.a.createElement(ve.a,null),"\u042d\u043a\u0441\u0442\u0440\u0430\u0441\u0435\u043d\u0441","\u0423\u0433\u0430\u0434\u0430\u0439\u0442\u0435, \u043a\u0430\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u0432\u044b\u043f\u0430\u043b\u043e \u0438\u0433\u0440\u043e\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043e\u043d \u043d\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0437\u0438\u043b \u043d\u0430 \u0445\u043e\u043b\u0441\u0442\u0435"]]}},{key:"_tag_modal",value:function(e){var t=this,a=this._tags().find((function(t){return t[0]===e}));return l.a.createElement(d.u,{key:e,id:e,onClose:function(){return t.setActiveModal(null)},icon:l.a.cloneElement(a[1],{width:56,height:56}),header:a[2],subheader:a[3],actions:l.a.createElement(d.h,{size:"l",mode:"gradient_pink",onClick:function(){return t.go("tags")}},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")})}},{key:"isNonScrollingElement",value:function(e){return["global_canvas","search","game"].indexOf(e)>-1}},{key:"isPanelWithContainerCards",value:function(e){return["friends","gallery","guessed_pictures","feed","stats","shop","lvl_help"].indexOf(e)>-1}},{key:"render",value:function(){var e=this,t=this.state,a=t.test_game,n=t.activePanel,r=t.activeModal,o=t.popout,s=t.snackbar,c=t.isShowOnboard,i=t.vk_user,u=t.user,p=t.banned,m=t.placeholderText,f=t.gameErrorText,v=t.gamesAsWinner,y=t.gamesAsDrawer,k=t.drawerId,w=t.winnerId,C=t.lobbyId,x=t.gameId,L=t.word,O=t.chooseWords,S=t.voteWords,j=t.like_currentPictureSelected,A=t.like_method,I=t.like_param,D=t.like_user_id,F=t.isOnlineDrawing,N=t.friend_lobby,W=t.watchedShopItems,B=t.boughtShopItems,U=t.suggestions_type,G=t.suggestions_list,R=t.game_canceled_reason,z=t.color,V=t.color_percent,H=t.gradients,Y=t.btnSelectColorPaletteDefault,X=t.color_gradient,q=t.pickedColor,$=void 0!==X?Y:z||Y,Q=!(i&&u&&v&&y),ee=u.vk_donut||u.premium||u.admin,te=void 0!==X&&!1===ee||void 0===X&&"game"===n&&V>10*u.lvl,ae=l.a.createElement(d.x,{activeModal:r},this._tags().map((function(t){return e._tag_modal(t[0])})),l.a.createElement(d.u,{id:"new-update",onClose:function(){e.setActiveModal(null),e.onChangeHash()},icon:l.a.createElement(be.a,null),header:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435",subheader:"\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u0432\u043d\u0435\u0441\u0435\u043d\u0438\u0435 \u043f\u043e\u043f\u0440\u0430\u0432\u043e\u043a \u0432 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0438\u0433\u0440\u044b.",actions:l.a.createElement(d.h,{size:"l",mode:"gradient_violet",onClick:function(){h.a.send("VKWebAppStorageSet",{key:"update_01062022",value:"1"}),e.setActiveModal(null),e.onChangeHash(),M("https://vk.com/@draw_app-update-01-06-2022")}},"\u0427\u0438\u0442\u0430\u0442\u044c")}),l.a.createElement(d.u,{id:ts,onClose:function(){return e.setActiveModal(null)},icon:l.a.createElement(ge.a,null),header:"\u041d\u043e\u0432\u044b\u0439 \u0440\u0435\u0436\u0438\u043c",subheader:"\u0414\u0430\u0432\u0430\u0439 \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0443\u0447\u0438\u043c\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u0433\u043e\u0434\u044f\u0442\u0441\u044f \u0432 \u044d\u0442\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435.",actions:l.a.createElement(d.h,{size:"l",mode:"gradient_blue",onClick:function(){h.a.send("VKWebAppStorageSet",{key:"canvas_new_mode_onboard_2",value:"1"}),e.setState({isShowGlobalCanvasOnboard:!1}),e.setActiveModal(null),e.go("global_canvas_info")}},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0435")}),l.a.createElement(d.u,{id:as,onClose:function(){return e.setActiveModal(null)},header:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",actions:[l.a.createElement(d.h,{size:"l",mode:"gradient_blue",onClick:function(){e._urlParams&&(window.location.search=e._urlParams,e.connect())}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")]},l.a.createElement(d.o,null,l.a.createElement(d.n,null,l.a.createElement(d.s,{defaultValue:window.location.search,onChange:function(t){return e._urlParams=t.target.value}})))),l.a.createElement(d.u,{id:es,onClose:function(){return e.setActiveModal(null)},icon:l.a.createElement(Ee.a,{fill:"#E63902"}),header:"\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435",subheader:"\u0412\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 \u0443\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u043c\u0438\u043d\u0438-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u0415\u0441\u043b\u0438 \u043d\u0430\u0436\u0430\u0442\u0438\u0435 \u043a\u043d\u043e\u043f\u043a\u0438 \u0432\u043d\u0438\u0437\u0443 \u043d\u0435 \u043f\u043e\u043c\u043e\u0436\u0435\u0442, \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u0435 \u043a\u044d\u0448 \u0447\u0435\u0440\u0435\u0437 \u0442\u0440\u0438 \u0442\u043e\u0447\u043a\u0438 \u0441\u043f\u0440\u0430\u0432\u0430 \u0432\u0432\u0435\u0440\u0445\u0443.",actions:l.a.createElement(d.h,{size:"l",mode:"primary",stretched:!0,onClick:function(){return window.location.reload()}},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c")}),l.a.createElement(d.v,{id:ns,onClose:function(){return e.setActiveModal(null)},settlingHeight:100,header:l.a.createElement(d.w,{left:l.a.createElement(d.r,{onClick:Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({pickedColor:"pipette"});case 2:e.setActiveModal(null);case 3:case"end":return t.stop()}}),t)})))},l.a.createElement(ye.a,null)),right:!T()&&l.a.createElement(d.B,{onClick:function(){return e.setActiveModal(null)}},l.a.createElement(ke.a,null))},"\u041f\u0430\u043b\u0438\u0442\u0440\u0430")},l.a.createElement("div",{className:"PaletteContainer"},l.a.createElement(_.a,{color:z,onChange:function(t){var a=parseInt(document.getElementsByClassName("react-colorful__hue-pointer")[0].style.left.replace("%",""));e.setState({color:t,color_gradient:void 0,color_percent:a})}}),l.a.createElement("div",{className:"GradientContainer"},l.a.createElement("h2",null,"\u0413\u0440\u0430\u0434\u0438\u0435\u043d\u0442"),l.a.createElement("div",null,H.map((function(t,a){var n="conic-gradient(from 180deg at 50% 50%, ".concat([].concat(Object(E.a)(t.slice(0,t.length-2)),[t[0]]).join(", "),")");return l.a.createElement("div",{key:"gradient-".concat(a),style:{background:n},onClick:function(){e.setState({color_gradient:a})}},l.a.createElement("div",null,l.a.createElement("div",{style:{display:X!==a&&"none",background:n}})))}))))),te&&l.a.createElement("div",{className:"PaletteBlock"},void 0!==X?"\u0413\u0440\u0430\u0434\u0438\u0435\u043d\u0442":"\u0426\u0432\u0435\u0442"," \u043d\u0435 \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d"),l.a.createElement("div",{className:"ButtonsContainer"},l.a.createElement(d.h,{size:"l",stretched:!0,style:{background:$,color:J($)?"#FFFFFF":"#000000"},disabled:te,onClick:Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(te){t.next=3;break}return t.next=3,e.setState({pickedColor:void 0!==X?H[X]:z});case 3:e.setActiveModal(null);case 4:case"end":return t.stop()}}),t)})))},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),l.a.createElement(d.h,{size:"l",stretched:!0,style:{background:"rgba(".concat(Z($).arr.join(","),", .05)"),color:"var(--color_primary)"},onClick:Object(g.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a={},"object"===typeof q?a.color_gradient=H.findIndex((function(e){return JSON.stringify(e)===JSON.stringify(q)})):(a.color_gradient=-1,a.color=q),e.setState(a),e.setActiveModal(null);case 4:case"end":return t.stop()}}),t)})))},"\u041e\u0442\u043c\u0435\u043d\u0430"))));return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.L,{popout:o,modal:ae},l.a.createElement(d.K,{animate:!T()},l.a.createElement(d.Q,{style:Zo({overflow:this.isNonScrollingElement(n)&&"hidden"},this.isPanelWithContainerCards(n)?{"--background_content":"var(--panel_container_background)","--header_background":"var(--panel_container_card_background)"}:{}),activePanel:a?"game":"placeholder"!==n&&"banned"!==n?Q?"connecting":c?"onboard":n:n,onSwipeBack:this.back,history:this.state.history},[{id:"onboard",component:l.a.createElement(Fn,{icon:l.a.createElement(Oe,null),title:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c",description:"\u0417\u0434\u0435\u0441\u044c \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0447\u0443\u0432\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0431\u044f \u0432 \u0440\u043e\u043b\u0438 \u043a\u0430\u043a \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a\u0430, \u0442\u0430\u043a \u0438 \u0428\u0435\u0440\u043b\u043e\u043a\u0430. \u0420\u0438\u0441\u0443\u0439\u0442\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u044b \u0438 \u0443\u0433\u0430\u0434\u044b\u0432\u0430\u0439\u0442\u0435 \u0447\u0443\u0436\u0438\u0435.",buttonIcon:!1,buttonText:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c",buttonMode:"primary_2",buttonOnClick:function(){h.a.send("VKWebAppStorageSet",{key:"onboard",value:"1"}),e.setState({isShowOnboard:!1}),e.onChangeHash()}})},{id:"connecting",component:l.a.createElement(Fn,{icon:l.a.createElement(Oe,null),title:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435",description:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443..."})},{id:"placeholder",component:l.a.createElement(Fn,{icon:l.a.createElement(Fe,null),title:"\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u043e",description:m,buttonText:"\u041f\u0435\u0440\u0435\u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f",buttonMode:"primary_2",buttonOnClick:Object(g.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setActivePanel("connecting"),e.setState({trying_reconnect:!0}),a=0;case 3:if(!(a<5)){t.next=12;break}return e.connect(),t.next=7,P(1e3);case 7:if(!e.state.connected){t.next=9;break}return t.abrupt("break",12);case 9:a++,t.next=3;break;case 12:return t.next=14,e.setState({trying_reconnect:!1});case 14:e.connect();case 15:case"end":return t.stop()}}),t)})))})},{id:"main",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(ua,{t:this,time:this.state.time}),s)},{id:"avatar_frames",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(ia,{t:this}),s)},{id:"lvl_help",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(Oo,{t:this}),s)},{id:"week_gifts",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(Ao,{t:this}),s)},{id:"art_battle_placeholder",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(Ko,{t:this}),s)},{id:"art_battle_rate",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(Yo,{t:this,lobbyId:C}),s)},{id:"suggestions",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(vo,{t:this}),s)},{id:"suggestions_idea",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(Eo,{t:this}),s)},{id:"suggestions_word",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(wo,{t:this}),s)},{id:"suggestions_list",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(xo,{t:this,type:U,list:G}),s)},{id:"shop",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(yr,{t:this,watchedShopItems:W,boughtShopItems:B}),s)},{id:"stats",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(vr,{t:this}),s)},{id:"gallery",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(ma,{t:this}),s)},{id:"guessed_pictures",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(fa,{t:this}),s)},{id:"feed",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(Rn,{t:this}),s)},{id:"picture_info",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(On,{t:this,current:j,method:A,param:I,user_id:D}),s)},{id:"author",component:l.a.createElement(Xn,{t:this})},{id:"search",component:l.a.createElement(ga,{t:this})},{id:"game",component:l.a.createElement(l.a.Fragment,null,l.a.createElement($a,{color:q,t:this,drawerId:k,lobbyId:C,online:F,chooseWords:O,voteWords:S,word:L}),s)},{id:"neural",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(Ro,{t:this,color:q}),s)},{id:"global_canvas_history",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(uo,{t:this}),s)},{id:"global_canvas",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(Yr,{color:q,t:this}),s)},{id:"global_canvas_info",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(to,{t:this}),s)},{id:"result",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(In,{t:this,drawerId:k,winnerId:w,word:L,gameId:x}),s)},{id:"tags",component:l.a.createElement(qn,{t:this})},{id:"friends",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(ar,{t:this}),s)},{id:"friend_lobby",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(cr,{t:this,friend_lobby:N}),s)},{id:"friend_lobby_settings",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(co,{t:this,friend_lobby:N}),s)},{id:"group_vk",component:l.a.createElement(Fn,{icon:l.a.createElement(Ue,null),title:"\u0421 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435\u043c!",description:"\u041d\u0435 \u0445\u043e\u0447\u0435\u0448\u044c \u0432\u0441\u0442\u0443\u043f\u0438\u0442\u044c \u0432 \u043d\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435? \u0418\u043c\u0435\u043d\u043d\u043e \u0442\u0430\u043c \u043f\u0443\u0431\u043b\u0438\u043a\u0443\u044e\u0442\u0441\u044f \u0432\u0441\u0435 \u043a\u0440\u0443\u0442\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0438 \u043a\u043e\u043d\u043a\u0443\u0440\u0441\u044b",buttonText:"\u0412\u0441\u0442\u0443\u043f\u0438\u0442\u044c",buttonOnClick:Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h.a.send("VKWebAppStorageSet",{key:"vk_group3",value:"1"}),e.setState({isShowVkGroup:!1}),t.prev=2,t.next=5,h.a.send("VKWebAppJoinGroup",{group_id:208964042});case 5:K("stats.subscribe",{group_id:208964042}),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(2);case 10:e.back(),e.onChangeHash();case 12:case"end":return t.stop()}}),t,null,[[2,8]])}))),buttonMode:"gradient_gray",buttonBack:!0,buttonBackOnClick:function(){(e.vkChatIntegration||e.isFromCatalogChat)&&h.a.send("VKWebAppStorageSet",{key:"vk_group3",value:"1"}),e.back(),e.onChangeHash()},t:this})},{id:"chat_vk",component:l.a.createElement(Fn,{icon:l.a.createElement(Ue,null),title:"\u0418 \u0441\u043d\u043e\u0432\u0430 \u043f\u0440\u0438\u0432\u0435\u0442!",description:"\u041f\u0440\u0438\u0433\u043b\u0430\u0448\u0430\u0435\u043c \u0442\u0435\u0431\u044f \u043a \u043d\u0430\u043c \u0432 \u0431\u0435\u0441\u0435\u0434\u0443, \u0442\u0430\u043c \u043c\u044b \u0430\u043a\u0442\u0438\u0432\u043d\u043e \u043e\u0431\u0449\u0430\u0435\u043c\u0441\u044f \u0434\u0440\u0443\u0433 \u0441 \u0434\u0440\u0443\u0433\u043e\u043c :)",buttonText:"\u0412\u0441\u0442\u0443\u043f\u0438\u0442\u044c",buttonOnClick:Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:M("https://vk.me/join/DFIbwK_w537NhbqDIWPd8JjoW/qfkWn5tzk="),e.back(),e.onChangeHash();case 3:case"end":return t.stop()}}),t)}))),buttonMode:"gradient_gray",buttonBack:!0,t:this})},{id:"vk_donut_avocado",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(d.z,{separator:!1,left:l.a.createElement(d.A,{onClick:function(){return e.back()}})}),l.a.createElement("iframe",{src:"https://avocadoteam.github.io/app-sub-modal/?appearance=".concat(this.state.appearance,"&app=draw"),style:{height:T()?"93vh":"calc(100vh - 120px)",border:0},width:"100%"}))},{id:"vk_donut_blocked",component:l.a.createElement(Fn,{icon:l.a.createElement(Ue,null),title:"\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043e",description:"\u0414\u043e\u0441\u0442\u0443\u043f \u043a \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u0443 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d. \u041e\u0436\u0438\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439 \u0432 \u043d\u0430\u0448\u0435\u0439 \u0433\u0440\u0443\u043f\u043f\u0435 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435.",buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438",buttonOnClick:function(){M("https://vk.com/draw_app")},buttonMode:"gradient_gray",buttonBack:!0,t:this})},{id:"vk_donut_ios",component:l.a.createElement(Fn,{icon:l.a.createElement(it,null),title:"VK Donut",description:"\u041d\u0430 \u0412\u0430\u0448\u0435\u043c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0435 \u0434\u0430\u043d\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043d\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430. \u0423\u0442\u043e\u0447\u043d\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043c\u043e\u0436\u0435\u0442\u0435 \u0432 \u043d\u0430\u0448\u0435\u0439 \u0433\u0440\u0443\u043f\u043f\u0435.",buttonText:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c",buttonOnClick:function(){M("https://vk.com/draw_app")},buttonMode:"primary_2",buttonBack:!0,t:this})},{id:"banned",component:l.a.createElement(Fn,{icon:l.a.createElement(Ue,null),title:"\u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430",description:"\u0412\u044b \u0431\u044b\u043b\u0438 \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0437\u0430 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b. \u0414\u0430\u0442\u0430 \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438: ".concat(new Date(p+864e5).toLocaleDateString("ru",{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric"})),buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0433\u0440\u0443\u043f\u043f\u0443",buttonOnClick:function(){M("https://vk.com/club208964042")},buttonMode:"gradient_gray",t:this})},{id:"april1",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(Fn,{icon:l.a.createElement(Ee.a,{width:96,height:96}),title:"\u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430",description:"\u0412\u0430\u0441 \u043d\u0430\u0432\u0441\u0435\u0433\u0434\u0430 \u0437\u0430\u0431\u0430\u043d\u0438\u043b\u0438. \u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u0435\u043c \ud83e\udd73",buttonText:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e",buttonOnClick:function(){e.setAlert("\u0413\u0435\u043e\u043c\u0435\u0442\u0440\u0438\u044f","\u0427\u0442\u043e\u0431\u044b \u0441\u043d\u044f\u0442\u044c \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0443, \u0440\u0435\u0448\u0438\u0442\u0435 \u043f\u0440\u0438\u043c\u0435\u0440: 2+2",[{title:"4",autoclose:!0,action:function(){e.setSnackbar("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e")}},{title:"5",autoclose:!0,action:function(){e.setActivePanel("main"),e.setSnackbar("\u0412\u0430\u0441 \u0440\u0430\u0437\u0431\u0430\u043d\u0438\u043b\u0438")}}])},buttonMode:"gradient_gray",t:this}),s)},{id:"suggestions_done",component:l.a.createElement(Fn,{icon:l.a.createElement(ht,null),title:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e! \u041c\u044b \u0443\u0447\u0442\u0451\u043c.",buttonBack:!0,buttonBackText:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f",t:this})},{id:"game_canceled",component:l.a.createElement(Fn,{icon:l.a.createElement(yt,null),title:R,buttonBack:!1,buttonText:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e",buttonMode:"secondary",buttonOnClick:function(){return e.setActivePanel("main")},t:this})},{id:"game_error",component:l.a.createElement(Fn,{icon:l.a.createElement(yt,null),title:f,buttonBack:!1,buttonText:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e",buttonMode:"secondary",buttonOnClick:function(){return e.setActivePanel("main")},t:this})}].map((function(e,t){var a=e.id,n=e.component;return l.a.createElement(d.y,{id:a,key:"Panel__".concat(t),"data-vkui-swipe-back":!("game"===a||"global_canvas"===a)},n)}))))),l.a.createElement("div",{className:"SVGMaterials"},Object.keys(ra).map((function(e){return ra[e]}))))}}]),t}(l.a.Component),os=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.a.subscribe((function(t){var a=t.detail,n=a.type,r=a.data;"VKWebAppUpdateConfig"===n&&e.setState({appearance:r.appearance})}))}},{key:"render",value:function(){return l.a.createElement(d.j,{webviewType:d.R.INTERNAL,appearance:this.state.appearance},l.a.createElement(d.c,null,l.a.createElement(d.e,null,l.a.createElement(rs,null))))}}]),t}(l.a.Component);p.a.render(l.a.createElement(os,null),document.getElementById("root"))}},[[492,1,2]]]);
//# sourceMappingURL=main.5adcbd5c.chunk.js.map