(window.webpackJsonpminiapp=window.webpackJsonpminiapp||[]).push([[0],{188:function(e,t,n){e.exports=n.p+"static/media/Story1.c1713922.png"},216:function(e,t,n){},289:function(e,t,n){e.exports=n.p+"static/media/Story2.28d56ba9.png"},290:function(e,t,n){e.exports=n.p+"static/media/Story3.2f47cccb.png"},304:function(e,t,n){e.exports=n.p+"static/media/Icon_Group.9fbb0b78.png"},305:function(e,t){e.exports="data:image/png;base64,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"},391:function(e,t,n){e.exports=n(719)},481:function(e,t,n){},482:function(e,t,n){},483:function(e,t,n){},502:function(e,t){},504:function(e,t){},534:function(e,t){},535:function(e,t){},579:function(e,t){},581:function(e,t){},604:function(e,t){},695:function(e,t,n){var a={"./Story1.png":188,"./Story2.png":289,"./Story3.png":290};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id=695},718:function(e,t,n){var a={"./Desktop.css":[720,3],"./Global.css":[216],"./Mobile.css":[721,4]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(r,7)}))}r.keys=function(){return Object.keys(a)},r.id=718,e.exports=r},719:function(e,t,n){"use strict";n.r(t);n(392),n(418),n(420),n(421),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(432),n(433),n(434),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460);var a=n(0),r=n.n(a),s=n(142),o=n.n(s),c=(n(468),n(469),n(3)),i=(n(481),n(482),n(483),n(56)),l=n(2),u=n.n(l),p=n(7),m=n(20),d=n(23),f=n(24),h=n(28),v=n(27),b=n(39),g=n(29),y=n(13),k=n.n(y);n(216),n(62);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){return C.apply(this,arguments)}function C(){return(C=Object(p.a)(u.a.mark((function e(t){var n,a,r,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},a=n?"?"+Object.keys(n).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])})).join("&"):"",r="".concat(t).concat(a),e.next=4,new Promise((function(e,t){fetch(r,{method:"GET"}).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(t){return e({error:{code:-1,text:t.toString()}})}))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=["SF Pro Text","SF Pro Text Heavy","SF Pro Text Semibold","SF Pro Display","SF Pro Display Bold","SF Pro Display Semibold","SF Pro Display Medium","SF Pro Rounded","SF Pro Rounded Semibold","SF Pro Rounded Bold","SF UI Display","SF UI Text","TT Commons","TT Commons Bold","TT Commons Demibold","Manrope ExtraBold"];function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=!0,n=!1,a=void 0;try{for(var r,s=function(){var e=r.value,t=document.createElement("span");t.style.fontFamily=e,t.innerText=".",document.body.appendChild(t),setTimeout((function(){return t.remove()}),1)},o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0)s()}catch(c){n=!0,a=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}}function S(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e){var a=[];return a[e]||(a[e]=e%100>4&&e%100<20?2:[2,0,1,1,1,2][Math.min(e%10,5)]),(n?e+" ":"")+t[a[e]]}}function j(e){try{return e.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}catch(t){return 0}}function P(e){var t,n,a,r,s,o;return o=parseInt(Math.floor(e/1e3)),s=parseInt(Math.floor(o/60)),r=parseInt(Math.floor(s/60)),a=parseInt(o%60),n=parseInt(s%60),{hours:t=parseInt(r%24),minutes:n,seconds:a,str:{hours:t.toLocaleString("ru",{minimumIntegerDigits:2}),minutes:n.toLocaleString("ru",{minimumIntegerDigits:2}),seconds:a.toLocaleString("ru",{minimumIntegerDigits:2})}}}function A(){return window.location.search.length>0&&JSON.parse('{"'+decodeURI(window.location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}function I(){return"mobile_iphone"===A().vk_platform}function D(){return"desktop_web"===A().vk_platform}function L(e){var t=document.createElement("a");t.href=e,t.target="_blank",t.click(),t.remove()}function F(e){return window.location.origin+window.location.pathname.replace("/index.html","")+e.substring(1)}function M(e){return B.apply(this,arguments)}function B(){return(B=Object(p.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.createElement("canvas"),a=n.getContext("2d"),(r=new Image).src="https://murmuring-bastion-20764.herokuapp.com/"+t,r.crossOrigin="Anonymous",e.next=5,new Promise((function(e){return r.onload=function(){n.width=this.width,n.height=this.height,a.drawImage(r,0,0,this.width,this.height),e(n.toDataURL("image/png"))}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return T.apply(this,arguments)}function T(){return(T=Object(p.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("https://api.ad-app.ru/method/"+t,w({},A(),{},n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U={},G=["first_name","last_name","first_name_dat","first_name_nom","first_name_gen","first_name_acc","first_name_ins","first_name_abl","last_name_dat","last_name_nom","last_name_gen","last_name_acc","last_name_ins","last_name_abl"];function K(e){return V.apply(this,arguments)}function V(){return(V=Object(p.a)(u.a.mark((function e(t){var n,a,r,s,o,c,i,l,d,f,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(m.a)(new Set(t.filter((function(e){return void 0===U[e]&&void 0!==e&&0!==e})).map((function(e){return"number"===typeof e?e:e.replace("@","").replace("id","").replace("vk.com/","").replace("http://","").replace("https://","")})))),a=Math.floor(n.length/100),!(n.length>0)){e.next=29;break}r=[],s=u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y("users.getVK",{user_ids:n.slice(100*t,100*t+100).join(","),fields:["screen_name","photo_100","photo_200","photo_max_orig","sex"].concat(G).join(",")});case 2:if(null!==(a=e.sent.response)){e.next=7;break}return e.next=6,new Promise((function(e){var a,r=0,s=!1;a=setInterval(Object(p.a)(u.a.mark((function o(){var c;return u.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s){o.next=8;break}return s=!0,r++,o.next=5,Y("users.getVK",{user_ids:n.slice(100*t,100*t+100).join(","),fields:["screen_name","photo_100","photo_200","photo_max_orig","sex"].concat(G).join(",")});case 5:null!==(c=o.sent.response)?(e(c),clearInterval(a)):r>=10&&(e([]),clearInterval(a)),s=!1;case 8:case"end":return o.stop()}}),o)}))),400)}));case 6:a=e.sent;case 7:r=r.concat(a);case 8:case"end":return e.stop()}}),e)})),o=0;case 5:if(!(o<a+1)){e.next=10;break}return e.delegateYield(s(o),"t0",7);case 7:o++,e.next=5;break;case 10:for(c=!0,i=!1,l=void 0,e.prev=13,d=r[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)h=f.value,U[h.id]=h;e.next=21;break;case 17:e.prev=17,e.t1=e.catch(13),i=!0,l=e.t1;case 21:e.prev=21,e.prev=22,c||null==d.return||d.return();case 24:if(e.prev=24,!i){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",t.map((function(e){return U[e]||U[Object.keys(U).find((function(t){return U[t].screen_name===e}))]})));case 30:case"end":return e.stop()}}),e,null,[[13,17,21,29],[22,,24,28]])})))).apply(this,arguments)}function Y(e){return z.apply(this,arguments)}function z(){return(z=Object(p.a)(u.a.mark((function e(t){var n,a,r,s,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},a=R({},A(),{query:JSON.stringify(n)}),r=a?"?"+Object.keys(a).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(a[e])})).join("&"):"",s="https://draw.avocado.special.vk-apps.com/api/".concat(t).concat(r),e.next=4,new Promise((function(e,t){var n,a=!1;n=setInterval((function(){a||(a=!0,fetch(s,{method:"GET"}).then((function(e){return e.json()})).then((function(t){clearInterval(n),a=!1,e(t)})).catch((function(e){a=!1})))}),400)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=n(755),H=n(756),Z=n(757),X=n(758),J=n(759),q=n(760),$=n(761),ee=n(762),te=n(763),ne=n(764),ae=n(765),re=n(727),se=n(766),oe=n(767);n(486),n(487);function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ie(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var le=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M110 3.0095V184.326C54.6271 180.939 -0.694326 132.316 31.5388 55.8662C48.1357 16.502 79.4017 2.58244 110 3.0095Z",fill:"white"}),ue=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M110 184.326V3.00952C149.416 3.55965 187.724 27.9163 192.141 52.3571C192.5 54.3448 190.978 56.1206 189 56.5322C129.309 68.9569 155.694 126.363 186.92 132.782C189.625 133.338 191.547 136.155 190.451 138.689C175.893 172.35 142.937 186.341 110 184.326Z",fill:"#E7D0A9"}),pe=r.a.createElement("path",{d:"M38 61.5C76.8338 -30.605 173.437 7.4338 180.196 52.3506C180.497 54.3466 178.98 56.1203 177.004 56.5316C117.201 68.977 143.788 126.568 175.088 132.816C177.748 133.347 179.662 136.087 178.68 138.616C142.96 230.579 -5.46898 164.599 38 61.5Z",fill:"#FFE4B8"}),me=r.a.createElement("path",{d:"M150 40C150 49.3888 142.389 57 133 57C133 57 133 49.3888 133 40C133 30.6112 133 23 133 23C142.389 23 150 30.6112 150 40Z",fill:"#3769A5"}),de=r.a.createElement("path",{d:"M116 40C116 49.3888 123.611 57 133 57C133 57 133 49.3888 133 40C133 30.6112 133 23 133 23C123.611 23 116 30.6112 116 40Z",fill:"white"}),fe=r.a.createElement("ellipse",{cx:131.5,cy:40,rx:11.5,ry:17,fill:"#4E9BD4"}),he=r.a.createElement("circle",{cx:133,cy:40,r:18.5,stroke:"#171C1F",strokeWidth:5}),ve=r.a.createElement("path",{d:"M97 49C97 58.3888 89.3888 66 80 66C80 66 80 58.3888 80 49C80 39.6112 80 32 80 32C89.3888 32 97 39.6112 97 49Z",fill:"#EE3C7A"}),be=r.a.createElement("path",{d:"M63 49C63 58.3888 70.6112 66 80 66C80 66 80 58.3888 80 49C80 39.6112 80 32 80 32C70.6112 32 63 39.6112 63 49Z",fill:"white"}),ge=r.a.createElement("ellipse",{cx:78.5,cy:49,rx:11.5,ry:17,fill:"#F05F88"}),ye=r.a.createElement("circle",{cx:80,cy:49,r:18.5,stroke:"#171C1F",strokeWidth:5}),ke=r.a.createElement("path",{d:"M74 98C74 107.389 66.3888 115 57 115C57 115 57 107.389 57 98C57 88.6112 57 81 57 81C66.3888 81 74 88.6112 74 98Z",fill:"#FAAF1A"}),Ee=r.a.createElement("path",{d:"M40 98C40 107.389 47.6112 115 57 115C57 115 57 107.389 57 98C57 88.6112 57 81 57 81C47.6112 81 40 88.6112 40 98Z",fill:"white"}),we=r.a.createElement("ellipse",{cx:55.5,cy:98,rx:11.5,ry:17,fill:"#FBD20A"}),xe=r.a.createElement("circle",{cx:57,cy:98,r:18.5,stroke:"#171C1F",strokeWidth:5}),Ce=r.a.createElement("path",{d:"M97 142C97 151.389 89.3888 159 80 159C80 159 80 151.389 80 142C80 132.611 80 125 80 125C89.3888 125 97 132.611 97 142Z",fill:"#F05225"}),Oe=r.a.createElement("path",{d:"M63 142C63 151.389 70.6112 159 80 159C80 159 80 151.389 80 142C80 132.611 80 125 80 125C70.6112 125 63 132.611 63 142Z",fill:"white"}),_e=r.a.createElement("ellipse",{cx:78.5,cy:142,rx:11.5,ry:17,fill:"#F16723"}),Se=r.a.createElement("circle",{cx:80,cy:142,r:18.5,stroke:"#171C1F",strokeWidth:5}),je=r.a.createElement("circle",{cx:132,cy:145,r:14.1471,fill:"#FFD1B0",stroke:"#171C1F",strokeWidth:3.82353}),Pe=r.a.createElement("path",{d:"M31.5384 55.8662C63.9928 -24.637 176.923 -2.44941 191.655 51.924C192.236 54.0694 190.691 56.1691 188.517 56.634C129.451 69.267 155.778 126.38 186.92 132.782C189.625 133.338 191.547 136.155 190.452 138.69C151.491 228.969 -17.9357 178.587 31.5384 55.8662Z",stroke:"#171C1F",strokeWidth:5}),Ae=r.a.createElement("path",{d:"M28.789 74.0071H18.789L21.7286 184.733C21.7671 186.184 22.3378 188.007 23.789 188.007C25.2402 188.007 25.8108 186.184 25.8494 184.733L28.789 74.0071Z",fill:"#FFE4B8"}),Ie=r.a.createElement("path",{d:"M6.28899 48.0071C5.88899 35.2071 15.789 24.3405 20.789 20.5071C22.789 30.5071 26.7889 35.0071 36.2889 42.0071C45.7889 49.0071 40.7889 67.0071 28.789 67.5071C16.789 68.0071 6.78899 64.0071 6.28899 48.0071Z",fill:"#FFE4B8"}),De=r.a.createElement("path",{d:"M24.2888 50.0071C19.7888 51.2929 9.4555 45.5071 5.28883 42.0071C3.78883 52.6738 7.79443 67.5698 25.2889 68.0071C45.2889 68.5071 44.2889 46.0071 36.2888 39.5071C18.2888 40.5071 26.7888 49.2929 24.2888 50.0071Z",fill:"#E1E1E1"}),Le=r.a.createElement("path",{d:"M24.2888 46.0071C19.7888 47.2929 9.4555 41.5071 5.28883 38.0071C3.78883 48.6738 7.79443 63.5698 25.2889 64.0071C45.2889 64.5071 44.2889 42.0071 36.2888 35.5071C18.2888 36.5071 26.7888 45.2929 24.2888 46.0071Z",fill:"white"}),Fe=r.a.createElement("path",{d:"M24.2889 50.0071C19.7889 51.2929 9.45561 45.5071 5.28894 42.0071C7.12227 35.0071 12.7889 20.4072 20.7889 18.0071C22.2889 17.5571 25.7889 38.5071 36.2889 39.5071C18.2889 40.5071 26.7889 49.2929 24.2889 50.0071Z",fill:"#F05F88"}),Me=r.a.createElement("path",{d:"M31.7879 74.0868L31.8697 71.0071H28.789H18.789H15.7083L15.79 74.0868L18.7297 184.813C18.7565 185.825 18.9627 187.127 19.5632 188.29C20.1841 189.493 21.5263 191.007 23.789 191.007C26.0516 191.007 27.3939 189.493 28.0148 188.29C28.6153 187.127 28.8214 185.825 28.8483 184.813L31.7879 74.0868ZM23.7307 19.9188L22.7861 15.1958L18.9637 18.1263C16.2 20.2452 12.2308 24.1771 8.98255 29.2847C5.73379 34.3931 3.06551 40.9028 3.29045 48.1008C3.5607 56.7488 6.45078 62.7474 11.4687 66.3757C16.3317 69.8921 22.6414 70.7659 28.9139 70.5045C36.5885 70.1848 41.6847 64.2875 43.4848 58.0232C45.2806 51.7736 44.1224 44.0527 38.0685 39.592C33.3636 36.1252 30.2875 33.4635 28.1265 30.5821C26.0198 27.7733 24.6657 24.5937 23.7307 19.9188Z",stroke:"#171C1F",strokeWidth:6}),Be=r.a.createElement("path",{d:"M5.28894 42.0071C9.45561 45.5071 19.7889 51.2929 24.2889 50.0071C26.7889 49.2929 18.2889 40.5071 36.2889 39.5071",stroke:"#171C1F",strokeWidth:4}),Ne=function(e){var t=e.svgRef,n=e.title,a=ie(e,["svgRef","title"]);return r.a.createElement("svg",ce({width:195,height:195,viewBox:"0 0 195 195",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,le,ue,pe,me,de,fe,he,ve,be,ge,ye,ke,Ee,we,xe,Ce,Oe,_e,Se,je,Pe,Ae,Ie,De,Le,Fe,Me,Be)},Te=r.a.forwardRef((function(e,t){return r.a.createElement(Ne,ce({svgRef:t},e))}));n.p;function We(){return(We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Re(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Ue,Ge=r.a.createElement("path",{d:"M80.4243 72.7816L73.3533 79.8527L153.727 156.069C154.78 157.068 156.473 157.953 157.499 156.927C158.525 155.901 157.639 154.208 156.641 153.155L80.4243 72.7816Z",fill:"#FFE4B8"}),Ke=r.a.createElement("path",{d:"M46.1297 70.3067C36.7958 61.5386 36.1123 46.8544 36.9373 40.6083C45.4226 46.2651 51.4329 46.6187 63.1002 44.8509C74.7675 43.0832 83.9598 59.3466 75.8281 68.1854C67.6964 77.0242 57.7969 81.2669 46.1297 70.3067Z",fill:"#FFE4B8"}),Ve=r.a.createElement("path",{d:"M60.2718 58.9932C57.9989 63.0844 46.601 66.3 41.1799 66.7714C47.6617 75.3745 61.0271 83.0752 73.7068 71.014C88.2026 57.2254 71.5855 42.0226 61.3324 43.0833C49.3116 56.5184 61.5345 56.7204 60.2718 58.9932Z",fill:"#E1E1E1"}),Ye=r.a.createElement("path",{d:"M57.4433 56.1648C55.1704 60.2559 43.7725 63.4715 38.3514 63.9429C44.8332 72.5461 58.1986 80.2467 70.8783 68.1855C85.3741 54.3969 68.757 39.1941 58.5039 40.2548C46.4831 53.6899 58.706 53.8919 57.4433 56.1648Z",fill:"white"}),ze=r.a.createElement("path",{d:"M60.2718 58.9931C57.999 63.0842 46.6011 66.2999 41.18 66.7713C37.5266 60.5252 31.2098 46.1945 35.1696 38.8406C35.912 37.4617 53.2008 49.8007 61.3325 43.0832C49.3117 56.5182 61.5345 56.7203 60.2718 58.9931Z",fill:"#F05F88"}),Qe=r.a.createElement("path",{d:"M71.2319 77.7314L69.0536 79.9098L71.289 82.0296L151.663 158.246C152.397 158.943 153.464 159.717 154.711 160.116C156.001 160.527 158.02 160.649 159.62 159.049C161.22 157.449 161.099 155.429 160.687 154.139C160.289 152.892 159.514 151.826 158.818 151.091L82.6012 70.7173L80.4814 68.4819L78.303 70.6603L71.2319 77.7314ZM38.6014 38.1121L34.5938 35.4404L33.9631 40.2154C33.5071 43.668 33.4808 49.2548 34.7955 55.1634C36.1105 61.0727 38.8268 67.5626 44.0756 72.4933C50.3818 78.4173 56.667 80.6153 62.7808 79.6327C68.7059 78.6804 73.7854 74.8367 78.0359 70.2166C83.2366 64.5637 82.6701 56.7901 79.5135 51.0878C76.3642 45.3988 70.0857 40.7583 62.6508 41.8848C56.8725 42.7603 52.8153 43.0534 49.2498 42.544C45.7739 42.0474 42.5682 40.7566 38.6014 38.1121Z",stroke:"#171C1F",strokeWidth:6}),He=r.a.createElement("path",{d:"M41.1799 66.7713C46.601 66.2999 57.9989 63.0843 60.2718 58.9931C61.5344 56.7203 49.3116 56.5183 61.3324 43.0832",stroke:"#171C1F",strokeWidth:4}),Ze=r.a.createElement("path",{d:"M121.432 80.5199L114.36 73.4488L38.144 153.823C37.1454 154.876 36.2596 156.568 37.2858 157.595C38.312 158.621 40.0047 157.735 41.0578 156.736L121.432 80.5199Z",fill:"#FFE4B8"}),Xe=r.a.createElement("path",{d:"M123.906 46.2252C132.675 36.8914 147.359 36.2079 153.605 37.0329C147.948 45.5181 147.594 51.5285 149.362 63.1958C151.13 74.863 134.867 84.0554 126.028 75.9237C117.189 67.792 112.946 57.8925 123.906 46.2252Z",fill:"#FFE4B8"}),Je=r.a.createElement("path",{d:"M135.22 60.3674C131.129 58.0945 127.913 46.6966 127.442 41.2755C118.839 47.7573 111.138 61.1227 123.199 73.8024C136.988 88.2981 152.191 71.6811 151.13 61.428C137.695 49.4072 137.493 61.63 135.22 60.3674Z",fill:"#E1E1E1"}),qe=r.a.createElement("path",{d:"M138.048 57.5389C133.957 55.266 130.742 43.8681 130.27 38.447C121.667 44.9288 113.966 58.2942 126.028 70.9739C139.816 85.4697 155.019 68.8526 153.958 58.5995C140.523 46.5787 140.321 58.8016 138.048 57.5389Z",fill:"white"}),$e=r.a.createElement("path",{d:"M135.22 60.3674C131.129 58.0946 127.913 46.6967 127.442 41.2755C133.688 37.6222 148.019 31.3053 155.373 35.2651C156.751 36.0076 144.412 53.2964 151.13 61.4281C137.695 49.4073 137.493 61.6301 135.22 60.3674Z",fill:"#FBD20A"}),et=r.a.createElement("path",{d:"M116.482 71.3275L114.303 69.1491L112.184 71.3846L35.9671 151.758C35.2706 152.493 34.4957 153.559 34.0976 154.807C33.6861 156.096 33.5646 158.116 35.1645 159.716C36.7644 161.316 38.7842 161.194 40.0738 160.783C41.3211 160.385 42.3876 159.61 43.122 158.913L123.496 82.6968L125.731 80.577L123.553 78.3986L116.482 71.3275ZM156.101 38.697L158.773 34.6893L153.998 34.0587C150.545 33.6027 144.958 33.5764 139.05 34.8911C133.14 36.2061 126.651 38.9224 121.72 44.1712C115.796 50.4774 113.598 56.7626 114.58 62.8764C115.533 68.8015 119.376 73.881 123.997 78.1315C129.649 83.3322 137.423 82.7657 143.125 79.609C148.814 76.4598 153.455 70.1813 152.328 62.7464C151.453 56.968 151.16 52.9109 151.669 49.3453C152.166 45.8695 153.457 42.6637 156.101 38.697Z",stroke:"#171C1F",strokeWidth:6}),tt=r.a.createElement("path",{d:"M127.442 41.2755C127.913 46.6966 131.129 58.0945 135.22 60.3673C137.493 61.63 137.695 49.4072 151.13 61.428",stroke:"#171C1F",strokeWidth:4}),nt=function(e){var t=e.svgRef,n=e.title,a=Re(e,["svgRef","title"]);return r.a.createElement("svg",We({width:195,height:195,viewBox:"0 0 195 195",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,Ge,Ke,Ve,Ye,ze,Qe,He,Ze,Xe,Je,qe,$e,et,tt)},at=r.a.forwardRef((function(e,t){return r.a.createElement(nt,We({svgRef:t},e))})),rt=(n.p,n(768)),st=n(730),ot=n(731),ct=n(732),it=n(733),lt=n(734),ut=n(729),pt=n(728),mt=n(310),dt=n.n(mt),ft=D(),ht=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={isShowGlobalCanvas:e.t.state.isShowGlobalCanvas,canvas_status:{status:!1},globalCanvasShowTimer:!1},e.t.socket.unsubscribe("changeOnline"),e.t.socket.subscribe("changeOnline",(function(t){e.t.setState({online:t.count}),n.forceUpdate()})),n.goToStats=n.goToStats.bind(Object(b.a)(n)),n.goToFeed=n.goToFeed.bind(Object(b.a)(n)),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"goToStats",value:function(){var e=this.props.t;e.setPopout(r.a.createElement(c.x,null)),e.socket.call("users.getTop",{type:"pictures"},(function(t){e.setState({users_topPictures:t.response});var n=t.response.map((function(e){return e.id}));e.socket.call("users.getTop",{type:"guessed_pictures"},(function(t){e.setState({users_topGuessedPictures:t.response}),n=[].concat(Object(m.a)(n),Object(m.a)(t.response.map((function(e){return e.id})))),e.socket.call("users.getTop",{type:"likes"},function(){var t=Object(p.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({users_topLikes:a.response}),n=[].concat(Object(m.a)(n),Object(m.a)(a.response.map((function(e){return e.id})))),t.next=4,K(n);case 4:e.setPopout(null),e.go("stats");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}))}},{key:"goToFeed",value:function(){var e=this.props.t;e.setPopout(r.a.createElement(c.x,null)),e.socket.call("pictures.getRandomLikes",{limit:10},(function(t){e.setState({randomGamesLike:t.response});var n=t.response.map((function(e){return e.drawerId}));e.socket.call("pictures.getLikesTop",{limit:10},function(){var t=Object(p.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({topLikes:a.response}),n=[].concat(Object(m.a)(n),Object(m.a)(a.response.map((function(e){return e.drawerId})))),t.next=4,K(n);case 4:e.setPopout(null),e.go("likes");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}},{key:"componentDidMount",value:function(){var e=this;this.props.t.socket.call("canvas.getStatus",{},function(){var t=Object(p.a)(u.a.mark((function t(n){var a,r,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.response,r=a.start-Date.now(),(s=r<=864e5&&r>0)&&(Ue=setInterval((function(){a.start-Date.now()<=0&&(e.setState({globalCanvasShowTimer:!1}),clearInterval(Ue)),e.forceUpdate()}),1e3)),e.setState({canvas_status:a,globalCanvasShowTimer:s});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillMount",value:function(){clearInterval(Ue)}},{key:"render",value:function(){var e=this,t=this.props.t,n=t.state,a=t._tags,s=n.gamesAsWinner,o=n.gamesAsDrawer,i=n.top_number,l=n.online,m=n.user,d=m.lvl,f=m.pictures,h=m.successfulPictures,v=m.guessedPictures,b=(m.likes,[Math.min(t.state.colors.length-3,Math.max(d,4)-4),Math.min(t.state.colors.length,Math.max(d,3)+3)]),g=(t.state.colors.slice(b[0],b[1]),Math.min(d,t.state.colors.length)),y=this.state,E=y.isShowGlobalCanvas,w=y.canvas_status,x=y.globalCanvasShowTimer,C=x?P(w.start-Date.now()).str:{};return b[0]>t.state.colors.length-6&&(b[0]=t.state.colors.length-6),r.a.createElement("div",{className:"Main"},r.a.createElement("div",{className:"app_version",onClick:Object(p.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.app_version!==ka&&t.setActiveModal(Ea),a.next=3,t.setState({__v_clicks:4===n.__v_clicks?4:n.__v_clicks+1});case 3:e.forceUpdate(),3===n.__v_clicks&&dt.a.init();case 5:case"end":return a.stop()}}),a)})))},"v",ka," ",n.app_version!==ka&&r.a.createElement("span",null,"(\u043d\u0435\u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u0430\u044f)")),r.a.createElement("div",{className:"User_Header"},r.a.createElement(c.f,{src:t.state.vk_user.photo_100,size:48,shadow:!1}),r.a.createElement("div",{className:"UserTags"},a().map((function(e){return m[e[0]]&&r.a.createElement(rt.a,{action:"hover",content:r.a.createElement(c.i,null,r.a.createElement(c.E,null,e[2]))},r.a.cloneElement(e[1],{onClick:function(){return t.setActiveModal(e[0])}}))})))),r.a.createElement("h3",null,"\u041f\u0440\u0438\u0432\u0435\u0442, ",t.state.vk_user.first_name),r.a.createElement("h1",null,"\u0422\u0432\u043e\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"),r.a.createElement("div",{className:"Colors__Container"},r.a.createElement("div",{className:"Gradient_Opacity"}),t.state.colors.map((function(e,t){return r.a.createElement("div",{className:"Color",key:"Color__".concat(t),style:{display:(b[0]>t||b[1]<t)&&"none",marginLeft:t>0&&12,background:t+1===g&&"linear-gradient(156.04deg, #F05F88 0%, #FBD20A 100%)",border:t+1===g&&"none"}},r.a.createElement("span",null,t+1),r.a.createElement("div",{style:{background:"object"===typeof e?"conic-gradient(from 180deg at 50% 50%, ".concat(e.join(", "),")"):e}}))}))),r.a.createElement("p",null,"\u041e\u0442\u0433\u0430\u0434\u044b\u0432\u0430\u0439 \u0438 \u0440\u0438\u0441\u0443\u0439 \u043a\u0430\u0440\u0442\u0438\u043d\u044b, \u0447\u0442\u043e\u0431\u044b \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0446\u0432\u0435\u0442\u0430"),r.a.createElement("div",{className:"PlayCards__Container"},r.a.createElement("div",{className:"PlayCards_Lobbies__Container"},r.a.createElement("div",{className:"PlayCard GlobalLobby",onClick:function(){return t.go("search")}},r.a.createElement(ut.a,null),r.a.createElement("span",null,"\u0418\u0433\u0440\u0430\u0442\u044c")),r.a.createElement("div",{className:"PlayCard SelfLobby",onClick:function(){return t.go("friends")}},r.a.createElement(pt.a,null),r.a.createElement("span",null,"\u0421\u0432\u043e\u044f \u0438\u0433\u0440\u0430"))),r.a.createElement("div",{style:{display:0!==w.end&&Date.now()>=w.end?"none":x?"":w.status?"":w.admins_allow&&m.admin||w.donut_allow&&m.vk_donut?"":"none"},className:"PlayCard GlobalCanvasButton",onClick:Object(p.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:x||(k.a.send("VKWebAppStorageSet",{key:"canvas_new_mode",value:"1"}),t.setState({isShowGlobalCanvas:!1}),e.setState({isShowGlobalCanvas:!1}),t.go("global_canvas"));case 1:case"end":return n.stop()}}),n)})))},x&&r.a.createElement("div",{className:"TimeCounter"},r.a.createElement(st.a,null),r.a.createElement("span",null,C.hours,":",C.minutes,":",C.seconds)),r.a.createElement(ot.a,null),r.a.createElement("span",null,"\u041e\u0431\u0449\u0438\u0439 \u0445\u043e\u043b\u0441\u0442"),E&&r.a.createElement("div",{className:"Point_New_Notify"})),ft&&r.a.createElement("p",{className:"OnlineText"},"\u041e\u043d\u043b\u0430\u0439\u043d: ",l)),r.a.createElement("div",{className:"PlayerPics__Container"},r.a.createElement("div",{className:"Card_Button_Stretch"},r.a.createElement("div",{className:"Images"},[1,0,2].map((function(e,t){return r.a.createElement("div",{num:t,key:"div__".concat(t)},o[e]&&r.a.createElement("img",{alt:"img",src:o[e]["Picture.url"]}))}))),r.a.createElement("div",{className:"Card_Text__Container",onClick:function(){o.length>0&&t.go("gallery")}},r.a.createElement("div",null,r.a.createElement("span",null,"\u041c\u043e\u0438 \u0440\u0430\u0431\u043e\u0442\u044b"),r.a.createElement("span",null,S(h,["\u0443\u0441\u043f\u0435\u0448\u043d\u0430\u044f","\u0443\u0441\u043f\u0435\u0448\u043d\u044b\u0435","\u0443\u0441\u043f\u0435\u0448\u043d\u044b\u0445"]))),r.a.createElement("div",null,S(f,["\u043a\u0430\u0440\u0442\u0438\u043d\u0430","\u043a\u0430\u0440\u0442\u0438\u043d\u044b","\u043a\u0430\u0440\u0442\u0438\u043d"])))),r.a.createElement("div",{className:"Card_Button_Stretch"},r.a.createElement("div",{className:"Images"},[1,0,2].map((function(e,t){return r.a.createElement("div",{num:t,key:"div__".concat(t)},s[e]&&r.a.createElement("img",{alt:"img",src:s[e]["Picture.url"]}))}))),r.a.createElement("div",{className:"Card_Text__Container",onClick:function(){return t.go("rating")}},r.a.createElement("div",null,r.a.createElement("span",null,"\u041e\u0442\u0433\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0440\u0430\u0431\u043e\u0442\u044b"),r.a.createElement("span",null,i&&"".concat(function(e){var t=j(e).split(" ");return t[0]+new Array(t.length-1).fill("\u041a").join("")}(i)," \u043c\u0435\u0441\u0442\u043e"))),r.a.createElement("div",null,S(v,["\u043a\u0430\u0440\u0442\u0438\u043d\u0430","\u043a\u0430\u0440\u0442\u0438\u043d\u044b","\u043a\u0430\u0440\u0442\u0438\u043d"]))))),r.a.createElement("div",{className:"SubCards__Container"},[[r.a.createElement(ct.a,null),"\u041b\u0435\u043d\u0442\u0430",function(){return e.goToFeed()}],[r.a.createElement(it.a,null),"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",function(){return e.goToStats()}],[r.a.createElement(lt.a,null),"\u041c\u0430\u0433\u0430\u0437\u0438\u043d",function(){return t.go("shop")}]].map((function(e,t){return r.a.createElement("div",{key:"SubCard_".concat(t),onClick:function(){return e[2]()},style:{marginLeft:0!==t&&8}},e[0],r.a.createElement("span",null,e[1]))}))),!ft&&r.a.createElement("p",{className:"OnlineText"},"\u041e\u043d\u043b\u0430\u0439\u043d: ",l),!1)}}]),t}(a.PureComponent);ht.defaultProps={};var vt=ht,bt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={offset:e.t.state.gamesAsDrawer.length,limit:10,canGetMore:!0,prevY:0},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef)}},{key:"handleObserver",value:function(e,t){var n=this,a=e[0].boundingClientRect.y,r=this.props.t,s=this.state,o=s.prevY,c=s.offset,i=s.limit,l=s.canGetMore;(0===o||o>a)&&l&&(r.socket.call("games.getByDrawerId",{id:r.state.vk_user.id,offset:c,limit:i},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t.response.map((function(e){return e.drawerId})));case 2:r.setState({gamesAsDrawer:[].concat(Object(m.a)(r.state.gamesAsDrawer),Object(m.a)(t.response))}),n.setState({canGetMore:t.response.length>0}),n.forceUpdate();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({offset:c+10})),this.setState({prevY:a})}},{key:"shareStory",value:function(e,t,a){var s=this;try{this.props.t.setPopout(r.a.createElement(c.x,null));var o=n(62),i=o.createCanvas,l=o.loadImage;l(F(n(188))).then(function(){var n=Object(p.a)(u.a.mark((function n(o){var p,m,d,f;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,p=i(o.width,o.height),m=p.getContext("2d"),n.next=5,M(a);case 5:return d=n.sent,f=e.substring(0,1).toUpperCase()+e.substring(1),m.drawImage(o,0,0),m.font="64px TT Commons Demibold",m.textAlign="center",m.fillStyle="#616161",m.fillText(f,539,1210),n.t0=m,n.next=15,l(d);case 15:return n.t1=n.sent,n.t0.drawImage.call(n.t0,n.t1,198,618,683,683),n.next=19,k.a.send("VKWebAppShowStoryBox",{background_type:"image",blob:p.toDataURL("image/png"),attachment:{url:"https://vk.com/app"+A().vk_app_id,text:"go_to",type:"url"}});case 19:s.props.t.socket.call("games.share",{gameId:t}),s.props.t.setPopout(null),n.next=28;break;case 23:n.prev=23,n.t2=n.catch(0),console.error(n.t2),s.props.t.setPopout(null),s.props.t.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return s.props.t.setState({snackbar:null})}},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")});case 28:case"end":return n.stop()}}),n,null,[[0,23]])})));return function(e){return n.apply(this,arguments)}}())}catch(m){console.error(m),this.props.t.setPopout(null),this.props.t.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return s.props.t.setState({snackbar:null})}},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})}}},{key:"render",value:function(){var e=this,t=this.props.t,n=t.state,a=n.banners,s=(n.defaultBannerData,D()),o=t.state.gamesAsDrawer;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.s,{left:r.a.createElement(c.t,{onClick:t.back}),separator:!1},s&&"\u0422\u0432\u043e\u044f \u0433\u0430\u043b\u0435\u0440\u0435\u044f"),r.a.createElement("div",{className:"Gallery"},!s&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u0422\u0432\u043e\u044f \u0433\u0430\u043b\u0435\u0440\u0435\u044f"),r.a.createElement("p",{style:{margin:!s&&"8px 0 0 0"}},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0443\u0436\u043d\u0443\u044e \u043a\u0430\u0440\u0442\u0438\u043d\u0443, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0438 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435:"),r.a.createElement("div",{style:{marginTop:s?18:24,gridGap:s?8:15,paddingBottom:a[0]||140},className:"Images_Grid"},o.map((function(e,n){return r.a.createElement("div",{key:"Image_".concat(n),onClick:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({like_currentPictureSelected:n,like_method:"games.getByDrawerId",like_param:"gamesAsDrawer",like_user_id:t.state.vk_user.id});case 2:t.go("picture_info");case 3:case"end":return e.stop()}}),e)})))},r.a.createElement("img",{alt:"img",src:e["Picture.url"]}))}))),a[0]&&r.a.createElement(c.w,{bannerData:a[0],onClose:Object(p.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a[0]=!1,n.next=3,t.setState({banners:a});case 3:e.forceUpdate();case 4:case"end":return n.stop()}}),n)})))})),r.a.createElement("div",{ref:function(t){return e.loadingRef=t}}))}}]),t}(a.PureComponent);bt.defaultProps={};var gt=bt,yt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={offset:e.t.state.gamesAsWinner.length,limit:10,canGetMore:!0,prevY:0},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleObserver",value:function(e,t){var n=this,a=e[0].boundingClientRect.y,r=this.props.t,s=this.state,o=s.prevY,c=s.offset,i=s.limit,l=s.canGetMore;(0===o||o>a)&&l&&(r.socket.call("games.getByWinnerId",{id:r.state.vk_user.id,offset:c,limit:i},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t.response.map((function(e){return e.drawerId})));case 2:r.setState({gamesAsWinner:[].concat(Object(m.a)(r.state.gamesAsWinner),Object(m.a)(t.response))}),n.setState({canGetMore:t.response.length>0}),n.forceUpdate();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({offset:c+10})),this.setState({prevY:a})}},{key:"shareStory",value:function(e,t){var a=this;this.props.t.setPopout(r.a.createElement(c.x,null));try{var s=n(62),o=s.createCanvas,i=s.loadImage;i(F(n(289))).then(function(){var n=Object(p.a)(u.a.mark((function n(r){var s,c,l;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=o(r.width,r.height),c=s.getContext("2d"),n.next=4,M(t);case 4:return l=n.sent,c.drawImage(r,0,0),n.t0=c,n.next=9,i(l);case 9:return n.t1=n.sent,n.t0.drawImage.call(n.t0,n.t1,198,618,683,683),n.prev=11,n.next=14,k.a.send("VKWebAppShowStoryBox",{background_type:"image",blob:s.toDataURL("image/png"),attachment:{url:"https://vk.com/app"+A().vk_app_id,text:"go_to",type:"url"}});case 14:a.props.t.socket.call("games.share",{gameId:e}),n.next=19;break;case 17:n.prev=17,n.t2=n.catch(11);case 19:a.props.t.setPopout(null);case 20:case"end":return n.stop()}}),n,null,[[11,17]])})));return function(e){return n.apply(this,arguments)}}())}catch(l){console.error(l),this.props.t.setPopout(null),this.props.t.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return a.props.t.setState({snackbar:null})}},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})}}},{key:"render",value:function(){var e=this,t=this.props.t,n=t.state.banners,a=D(),s=t.state,o=s.user,i=s.gamesAsWinner,l=s.top,m=o.guessedPictures;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.s,{left:r.a.createElement(c.t,{onClick:t.back}),separator:!1}),r.a.createElement("div",{className:"Rating"},l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u041b\u0443\u0447\u0448\u0438\u0435 \u0438\u0433\u0440\u043e\u043a\u0438 \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"),r.a.createElement("div",{className:"Users_List"},l.map((function(e,n){return r.a.createElement("div",{key:"div__".concat(n),onClick:function(){t.socket.call("users.getById",{id:e.id},function(){var n=Object(p.a)(u.a.mark((function n(a){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.setState({author:a.response});case 2:t.socket.call("games.getByDrawerId",{id:e.id},function(){var e=Object(p.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({author_works:n.response});case 2:t.go("author"),t.setPopout(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},r.a.createElement(c.f,{size:48,shadow:!1,src:e.photo_100}),r.a.createElement("div",null,r.a.createElement("div",null,e.first_name," ",e.last_name.substring(0,1),"."),r.a.createElement("div",null,"\u041e\u0442\u0433\u0430\u0434\u0430\u043b",1===e.sex&&"\u0430"," ",S(e.guessedPicturesToday,["\u043a\u0430\u0440\u0442\u0438\u043d\u0443","\u043a\u0430\u0440\u0442\u0438\u043d\u044b","\u043a\u0430\u0440\u0442\u0438\u043d"]))))})))),i.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:{margin:"24px 0 0 0"}},"\u0412\u044b \u043e\u0442\u0433\u0430\u0434\u0430\u043b\u0438 ",S(m,["\u043a\u0430\u0440\u0442\u0438\u043d\u0443","\u043a\u0430\u0440\u0442\u0438\u043d\u044b","\u043a\u0430\u0440\u0442\u0438\u043d"])," (\u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u0443, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043d\u0435\u0439):"),r.a.createElement("div",{style:{marginTop:18,gridGap:a?8:15,paddingBottom:n[1]&&140},className:"Images_Grid"},i.map((function(e,n){return r.a.createElement("div",{key:"Image_".concat(n),onClick:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({like_currentPictureSelected:n,like_method:"games.getByWinnerId",like_param:"gamesAsWinner",like_user_id:t.state.vk_user.id});case 2:t.go("picture_info");case 3:case"end":return e.stop()}}),e)})))},r.a.createElement("img",{alt:"img",src:e["Picture.url"]}))}))),n[1]&&r.a.createElement(c.w,{bannerData:n[1],onClose:Object(p.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n[1]=!1,a.next=3,t.setState({banners:n});case 3:e.forceUpdate();case 4:case"end":return a.stop()}}),a)})))})),r.a.createElement("div",{ref:function(t){return e.loadingRef=t}})))}}]),t}(a.PureComponent);yt.defaultProps={};var kt,Et=yt,wt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={lobbyPlayers:[],lobbyPlayers_:[],point_count:0,starting:!1},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(kt)}},{key:"componentDidMount",value:function(){var e=this;kt=setInterval((function(){var t=e.state.point_count;e.setState({point_count:t>=3?0:t+1})}),800);var t=this.props.t.socket;t.unsubscribe("changeLobbyUsers","gameStart","setWord","gameEnd","draw","gameStarting","message"),t.subscribe("changeLobbyUsers",function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,K(n.players);case 3:t.t1=t.sent,t.t2=n.players,t.t3={lobbyPlayers:t.t1,lobbyPlayers_:t.t2},t.t0.setState.call(t.t0,t.t3);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.subscribe("setWord",function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.t.setState({word:n.word}),setTimeout((function(){e.props.t.forceUpdate()}),400);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.subscribe("gameStart",function(){var t=Object(p.a)(u.a.mark((function t(n){var a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.lobbyId,r=n.drawerId,t.next=3,e.props.t.setState({lobbyId:a,drawerId:r,gameStart:Date.now(),isOnlineDrawing:!0,subGameInfo:{friendly:!1}});case 3:return t.next=5,new Promise((function(t){var n,a=e.state,r=a.lobbyPlayers,s=a.lobbyPlayers_;n=setInterval((function(){s.length===r.length&&(clearInterval(n),console.log("All players find"),t(!0))}),400)}));case 5:console.log("Game start. lobbyId = ".concat(a,", drawerId = ").concat(r)),e.props.t.setState({history:["main","game"],activePanel:"game"});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.subscribe("gameStarting",function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({starting:!0});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.call("games.search")}},{key:"render",value:function(){var e=this,t=this.props.t,n=this.state.lobbyPlayers.filter((function(e){return e.id!==t.state.vk_user.id})),a=r.a.createElement("svg",{width:"274",height:"316",viewBox:"0 0 274 316",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginTop:D()?72:"8.86699507vh"},onClick:function(){e.state.starting||t.back()}},r.a.createElement("rect",{x:"63",y:"84",width:"148",height:"148",rx:"74",fill:"url(#paint0_linear)"}),r.a.createElement("circle",{className:"Search_Avatar",cx:"137",cy:"158",r:"48",fill:"url(#pattern0)"}),r.a.createElement("line",{x1:"27.866",y1:"26.5",x2:"60.366",y2:"82.7916",stroke:"var(--border_players_color)",strokeWidth:"2",strokeDasharray:"4 4"}),r.a.createElement("rect",{x:"1.5",y:"1.5",width:"51",height:"51",rx:"25.5",fill:"var(--background_content)"}),r.a.createElement("circle",{cx:"27",cy:"27",r:"24",fill:"url(#pattern1)"}),r.a.createElement("rect",{x:"1.5",y:"1.5",width:"51",height:"51",rx:"25.5",stroke:"var(--border_players_color)",strokeWidth:"3"}),r.a.createElement("line",{y1:"-1",x2:"65",y2:"-1",transform:"matrix(-0.5 0.866025 0.866025 0.5 246.88 27)",stroke:"var(--border_players_color)",strokeWidth:"2",strokeDasharray:"4 4"}),r.a.createElement("rect",{x:"1.5",y:"-1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(-1 0 0 1 274 3)",fill:"var(--background_content)"}),r.a.createElement("rect",{x:"1.5",y:"-1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(-1 0 0 1 274 3)"}),r.a.createElement("circle",{cx:"247",cy:"27",r:"24",fill:"url(#pattern2)"}),r.a.createElement("rect",{x:"1.5",y:"-1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(-1 0 0 1 274 3)",stroke:"var(--border_players_color)",strokeWidth:"3"}),r.a.createElement("line",{y1:"-1",x2:"65",y2:"-1",transform:"matrix(0.5 -0.866025 -0.866025 -0.5 27 289)",stroke:"var(--border_players_color)",strokeWidth:"2",strokeDasharray:"4 4"}),r.a.createElement("rect",{x:"-1.5",y:"1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(1 0 0 -1 3 316)",fill:"var(--background_content)"}),r.a.createElement("rect",{x:"-1.5",y:"1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(1 0 0 -1 3 316)"}),r.a.createElement("circle",{cx:"27",cy:"289",r:"24",fill:"url(#pattern3)"}),r.a.createElement("rect",{x:"-1.5",y:"1.5",width:"51",height:"51",rx:"25.5",transform:"matrix(1 0 0 -1 3 316)",stroke:"var(--border_players_color)",strokeWidth:"3"}),r.a.createElement("line",{x1:"246.014",y1:"289.5",x2:"213.514",y2:"233.208",stroke:"var(--border_players_color)",strokeWidth:"2",strokeDasharray:"4 4"}),r.a.createElement("rect",{x:"272.5",y:"314.5",width:"51",height:"51",rx:"25.5",transform:"rotate(-180 272.5 314.5)",fill:"var(--background_content)"}),r.a.createElement("rect",{x:"272.5",y:"314.5",width:"51",height:"51",rx:"25.5",transform:"rotate(-180 272.5 314.5)"}),r.a.createElement("circle",{cx:"247",cy:"289",r:"24",fill:"url(#pattern4)"}),r.a.createElement("rect",{x:"272.5",y:"314.5",width:"51",height:"51",rx:"25.5",transform:"rotate(-180 272.5 314.5)",stroke:"var(--border_players_color)",strokeWidth:"3"}),r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"paint0_linear",x1:"63",y1:"84",x2:"211",y2:"232",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{stopColor:"#F05F88"}),r.a.createElement("stop",{offset:"1",stopColor:"#FAAF1A"})),r.a.createElement("pattern",{id:"pattern0",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},r.a.createElement("use",{href:"#image0",transform:"scale(0.005)"})),r.a.createElement("image",{href:t.state.vk_user.photo_max_orig,id:"image0",width:"200",height:"200"}),r.a.createElement("pattern",{id:"pattern1",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},r.a.createElement("use",{href:"#image1",transform:"scale(0.005)"})),r.a.createElement("image",{href:n[0]&&n[0].photo_max_orig,id:"image1",width:"200",height:"200"}),r.a.createElement("pattern",{id:"pattern2",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},r.a.createElement("use",{href:"#image2",transform:"scale(0.005)"})),r.a.createElement("image",{href:n[1]&&n[1].photo_max_orig,id:"image2",width:"200",height:"200"}),r.a.createElement("pattern",{id:"pattern3",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},r.a.createElement("use",{href:"#image3",transform:"scale(0.005)"})),r.a.createElement("image",{href:n[2]&&n[2].photo_max_orig,id:"image3",width:"200",height:"200"}),r.a.createElement("pattern",{id:"pattern4",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},r.a.createElement("use",{href:"#image4",transform:"scale(0.005)"})),r.a.createElement("image",{href:n[3]&&n[3].photo_max_orig,id:"image4",width:"200",height:"200"}))),s=this.state.point_count;return r.a.createElement("div",{className:"Search"},r.a.createElement("h1",null,this.state.starting?"\u041e\u0447\u0438\u0449\u0430\u0435\u043c \u0445\u043e\u043b\u0441\u0442".concat(new Array(s).fill(".").join("")):"\u0418\u0449\u0435\u043c \u0438\u0433\u0440\u043e\u043a\u043e\u0432".concat(new Array(s).fill(".").join(""))),r.a.createElement("h3",null,n.length+1,"/5"),a)}}]),t}(a.PureComponent);wt.defaultProps={};var xt=wt;function Ct(){return(Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ot(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _t=r.a.createElement("path",{d:"M16.1568 6.96446L14.0355 4.84314C13.2545 4.06209 11.9881 4.06209 11.2071 4.84314L8.37866 7.67157L13.3284 12.6213L16.1568 9.79289C16.9379 9.01184 16.9379 7.74551 16.1568 6.96446Z",fill:"#C3C3C3"}),St=r.a.createElement("path",{d:"M16.864 6.25738L14.7427 4.13606C13.5711 2.96448 11.6716 2.96448 10.5 4.13606L4.13606 10.5C2.96449 11.6716 2.96449 13.5711 4.13606 14.7427L6.25738 16.864C7.42895 18.0356 9.32845 18.0356 10.5 16.864L16.864 10.5C18.0356 9.32844 18.0356 7.42895 16.864 6.25738Z",stroke:"#C3C3C3",strokeWidth:2}),jt=function(e){var t=e.svgRef,n=e.title,a=Ot(e,["svgRef","title"]);return r.a.createElement("svg",Ct({width:21,height:21,viewBox:"0 0 21 21",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,_t,St)};r.a.forwardRef((function(e,t){return r.a.createElement(jt,Ct({svgRef:t},e))})),n.p;function Pt(){return(Pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function At(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var It=r.a.createElement("path",{d:"M2.34316 12.0355L4.46448 14.1568C5.24553 14.9378 6.51186 14.9378 7.29291 14.1568L10.1213 11.3284L5.17159 6.37862L2.34316 9.20705C1.56211 9.9881 1.56211 11.2544 2.34316 12.0355Z",fill:"currentColor"}),Dt=r.a.createElement("path",{d:"M1.81279 12.5658L3.93411 14.6872C5.00806 15.7611 6.74926 15.7611 7.8232 14.6872L14.1872 8.32321C15.2611 7.24926 15.2611 5.50806 14.1872 4.43412L12.0658 2.3128C10.9919 1.23886 9.2507 1.23886 8.17675 2.3128L1.81279 8.67676C0.738852 9.7507 0.738851 11.4919 1.81279 12.5658Z",stroke:"currentColor",strokeWidth:1.5}),Lt=function(e){var t=e.svgRef,n=e.title,a=At(e,["svgRef","title"]);return r.a.createElement("svg",Pt({width:16,height:17,viewBox:"0 0 16 17",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,It,Dt)},Ft=r.a.forwardRef((function(e,t){return r.a.createElement(Lt,Pt({svgRef:t},e))}));n.p;function Mt(){return(Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Bt(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Nt=r.a.createElement("rect",{x:1.5,y:1,width:12.5,height:1,rx:.5,fill:"currentColor",stroke:"currentColor",strokeWidth:.3}),Tt=r.a.createElement("rect",{x:1.25,y:4.75,width:13,height:1,rx:.5,fill:"currentColor",stroke:"currentColor",strokeWidth:.7}),Wt=r.a.createElement("rect",{x:1,y:8.5,width:13.5,height:1,rx:.5,fill:"currentColor",stroke:"currentColor",strokeWidth:1.25}),Rt=function(e){var t=e.svgRef,n=e.title,a=Bt(e,["svgRef","title"]);return r.a.createElement("svg",Mt({width:16,height:11,viewBox:"0 0 16 11",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,Nt,Tt,Wt)},Ut=r.a.forwardRef((function(e,t){return r.a.createElement(Rt,Mt({svgRef:t},e))})),Gt=(n.p,n(735)),Kt=n(736),Vt=n(726);function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qt,Ht={},Zt=0,Xt=function(e){function t(e){var n;Object(d.a)(this,t),n=Object(h.a)(this,Object(v.a)(t).call(this,e));var a=e.t.state,r=a.user,s=a.test_game;return n.state={drawer:U[e.drawerId],isDrawer:s||!1===e.online||e.drawerId===e.t.state.vk_user.id,text:"",selectedColor:r.vk_donut||r.admin?0:1,drawing:!1,time:90,messages:[],isEraser:!1,isStroke:!1,lineWidth:2},n.state.drawer||setTimeout(Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K([e.drawerId]);case 2:n.setState({drawer:U[e.drawerId]});case 3:case"end":return t.stop()}}),t)}))),1),n.onMouseDown=n.onMouseDown.bind(Object(b.a)(n)),n.onMouseUp=n.onMouseUp.bind(Object(b.a)(n)),n.throttle=n.throttle.bind(Object(b.a)(n)),n.onMouseMove=n.onMouseMove.bind(Object(b.a)(n)),n.drawLine=n.drawLine.bind(Object(b.a)(n)),e.online&&!s&&(Qt=setInterval((function(){n.setState({time:n.state.time-1}),n.state.time<=-5&&(n.props.t.setState({canvas_:n.canvas.toDataURL("image/png"),winnerId:0,word:{nom:""},gameId:0,gameEnd:Date.now()}),n.props.t.setActivePanel("result"),console.log("Game end (timeout)"),clearInterval(Qt))}),1e3),e.t.socket.subscribe("gameEnd",function(){var e=Object(p.a)(u.a.mark((function e(t){var a,r,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout((function(){n.canvas.toBlob((function(){e(n.canvas.toDataURL("image/png"))}))}),100)}));case 2:a=e.sent,r=t.winnerId,s=t.word,o=t.gameId,n.state.isDrawer&&n.props.t.socket.call("games.end",{canvasData:a,lobbyId:n.props.lobbyId,gameId:o}),n.props.t.setState({canvas_:a,winnerId:r,word:s,gameId:o,gameEnd:Date.now()}),n.props.t.setActivePanel("result"),console.log("Game end");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.state.isDrawer||(e.t.socket.subscribe("draw",(function(e){var t=e.data,a=t.x0,r=t.y0,s=t.x1,o=t.y1,c=t.color,i=t.isEraser,l=t.lineWidth;l||(l=2),n.drawLine(a,r,s,o,c,i,l)})),e.t.socket.subscribe("clear",(function(e){n.canvasContext.clearRect(0,0,319,319)}))),e.t.socket.subscribe("message",function(){var e=Object(p.a)(u.a.mark((function e(t){var a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user_id,r=t.message,console.log("New message from ".concat(a,": ").concat(r)),e.next=4,n.setState({messages:[].concat(Object(m.a)(n.state.messages),[zt({user_id:a,message:r},U[a])])});case 4:try{(s=document.getElementsByClassName("Comment"))[s.length-1].scrollIntoView(!1)}catch(o){}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentWillUnmount",value:function(){this.props.online&&clearInterval(Qt)}},{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,a,s,o,i,l,p,m,d,f,h,v,b,g;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.canvas,a=this.onMouseDown,s=this.onMouseUp,o=this.throttle,i=this.onMouseMove,l=this.props,p=this.state,p.drawer,m=p.isDrawer,d=l.online,f=l.t,this.canvasContext=t.getContext("2d"),m&&(t.addEventListener("mousedown",a,!1),t.addEventListener("mouseup",s,!1),t.addEventListener("mouseout",s,!1),t.addEventListener("mousemove",o(i,10),!1),t.addEventListener("touchstart",a,!1),t.addEventListener("touchend",s,!1),t.addEventListener("touchcancel",s,!1),t.addEventListener("touchmove",o(i,10),!1)),d){e.next=17;break}return f.setPopout(r.a.createElement(c.x,null)),h=f.state.pictureUrl_,e.next=8,M(h);case 8:return v=e.sent,b=n(62),g=b.loadImage,e.t0=this.canvasContext,e.next=14,g(v);case 14:e.t1=e.sent,e.t0.drawImage.call(e.t0,e.t1,0,0),f.setPopout(null);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onMouseDown",value:function(e){this.setState({drawing:!0}),Ht.x=e.clientX||e.touches[0].clientX,Ht.y=e.clientY||e.touches[0].clientY}},{key:"onMouseUp",value:function(e){var t=this.state,n=t.drawing,a=t.selectedColor,r=t.isEraser,s=t.lineWidth;if(n){this.setState({drawing:!1});try{var o=this.canvas.getBoundingClientRect();this.drawLine(Ht.x-o.left,Ht.y-o.top,(e.clientX||e.touches[0].clientX)-o.left,(e.clientY||e.touches[0].clientY)-o.top,this.props.t.state.colors[a],r,s)}catch(c){}}}},{key:"onMouseMove",value:function(e){var t=this.state,n=t.drawing,a=t.selectedColor,r=t.isEraser,s=t.lineWidth;if(n){var o=this.canvas.getBoundingClientRect();return this.drawLine(Ht.x-o.left,Ht.y-o.top,(e.clientX||e.touches[0].clientX)-o.left,(e.clientY||e.touches[0].clientY)-o.top,this.props.t.state.colors[a],r,s),Ht.x=e.clientX||e.touches[0].clientX,Ht.y=e.clientY||e.touches[0].clientY,!1}}},{key:"drawLine",value:function(e,t,n,a,r,s,o){try{var c=this.props,i=c.lobbyId,l=c.t,u=(this.canvas,this.canvasContext);this.state;"object"===typeof r&&(r=r[Zt],Zt+=r.length-1===Zt?-Zt:1),u.beginPath(),s?(u.globalCompositeOperation="destination-out",u.arc(e,t,o,0,2*Math.PI,!1),u.fill()):(u.globalCompositeOperation="source-over",u.moveTo(e,t),u.lineTo(n,a),u.strokeStyle=r,u.fill(),u.lineWidth=o,u.lineCap=u.lineJoin="round",u.stroke()),u.closePath(),this.state.isDrawer&&this.props.online&&!l.state.test_game&&this.props.t.socket.call("games.draw",{lobbyId:i,data:{x0:e,y0:t,x1:n,y1:a,color:r,isEraser:s,lineWidth:o}})}catch(p){}}},{key:"throttle",value:function(e,t){var n=(new Date).getTime();return function(){var a=(new Date).getTime();a-n>=t&&(n=a,e.apply(null,arguments))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,a=t.lobbyId,s=t.online,o=t.word,i=n.state,l=i.colors,m=i.user,d=this.state,f=d.drawer,h=d.isDrawer,v=d.text,b=d.selectedColor,g=d.time,y=d.messages,k=d.isEraser,E=d.isStroke,w=d.lineWidth,x=D();return n.state.test_game&&(o={nom:"\u0416\u0438\u0440\u0430\u0444"},h=!0,f=n.state.vk_user),r.a.createElement("div",{className:"Game"},r.a.createElement("div",{style:{width:x?319:"100%",alignSelf:"flex-start"},ref:function(t){return e.header=t}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},!h&&r.a.createElement(c.f,{size:24,shadow:!1,src:f.photo_100}),r.a.createElement("h2",{style:{textAlign:"left",marginLeft:6}},h?"\u0417\u0430\u0434\u0430\u0447\u0430: "+o.nom:"\u0420\u0438\u0441\u0443\u0435\u0442: "+f.first_name)),s&&r.a.createElement("h2",{style:{textAlign:"right",width:"25%",color:"var(--color_secondary)",wordWrap:"normal"}},g>=0?g:0," \u0441\u0435\u043a"))),r.a.createElement("div",{style:{display:x&&s&&"flex"}},r.a.createElement("div",{className:"Canvas__"},r.a.createElement("div",{className:"Canvas_Container_Clear"},r.a.createElement("canvas",{width:319,height:319,ref:function(t){return e.canvas=t},id:"canvas"})),r.a.createElement("div",{style:{display:!h&&"none"},className:"Canvas_Items_Container"},r.a.createElement("div",{className:"Canvas_Colors_Container"},l.map((function(t,n){return r.a.createElement("div",{onClick:function(){("object"!==typeof t||m.vk_donut||m.admin)&&e.setState({selectedColor:n,isEraser:!1})},className:"Color",key:"Color__".concat(n),style:{marginLeft:n>0&&8,background:"object"===typeof t?"conic-gradient(from 180deg at 50% 50%, ".concat(t.join(", "),")"):t,outline:b===n&&"4px solid #F3F2F2",opacity:m.lvl<n+1&&.25,pointerEvents:m.lvl<n+1&&"none"}})}))),r.a.createElement("div",{className:"Canvas_SubItems_Container"},r.a.createElement(c.l,{style:{background:k?"#A4A6AA":"#F8F8F8",color:k?"#F8F8F8":"#A4A6AA"},hasHover:!1,onClick:function(){e.setState({isEraser:!0,selectedColor:-1})}},r.a.createElement(Ft,null)),r.a.createElement(c.l,{style:{background:E?"#A4A6AA":"#F8F8F8",color:E?"#F8F8F8":"#A4A6AA"},hasHover:!1,onClick:function(){e.setState({isStroke:!E})}},r.a.createElement(Ut,null)),r.a.createElement(c.l,{style:{background:"#F8F8F8",color:"#A4A6AA"},hasHover:!1,onClick:function(){s&&n.socket.call("games.clear",{lobbyId:a}),e.canvasContext.clearRect(0,0,319,319)}},r.a.createElement(Gt.a,{width:21,height:21})))),r.a.createElement("div",{style:{transition:"all 200ms",height:!E&&0,opacity:!E&&0}},r.a.createElement(c.A,{step:1,min:2,max:20,value:Number(w),onChange:function(t){return e.setState({lineWidth:t})}}))),!s&&r.a.createElement("div",{className:"Offline_Drawing__Buttons"},r.a.createElement(c.g,{before:r.a.createElement(Kt.a,{fill:"var(--color_secondary)"}),size:"m",mode:"secondary",onClick:function(){n.back()}},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement(c.g,{style:{marginLeft:!x&&10,marginTop:x&&10},before:r.a.createElement(Vt.a,{fill:"var(--color_secondary)"}),size:"m",mode:"secondary",onClick:Object(p.a)(u.a.mark((function t(){var a,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.setPopout(r.a.createElement(c.x,null)),t.next=3,new Promise((function(t){setTimeout((function(){e.canvas.toBlob((function(){t(e.canvas.toDataURL("image/png"))}))}),100)}));case 3:a=t.sent,s=n.state.gameId_,e.state.isDrawer&&e.props.t.socket.call("games.savePicture",{canvasData:a,gameId:s},function(){var t=Object(p.a)(u.a.mark((function t(s){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s.response){t.next=7;break}return n.setState({n_canvasData:a,snackbar:r.a.createElement(c.B,{onClose:function(){return n.setState({snackbar:null})}},"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430")}),t.next=4,new Promise((function(t){return e.props.t.socket.call("games.getByDrawerId",{id:e.props.t.state.vk_user.id,limit:e.props.t.state.gamesAsDrawer.length},function(){var n=Object(p.a)(u.a.mark((function n(a){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.props.t.setState({gamesAsDrawer:a.response});case 2:t(!0);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}));case 4:n.forceUpdate(),t.next=8;break;case 7:n.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return n.setState({snackbar:null})}},"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")});case 8:setTimeout((function(){n.setPopout(null),n.back(),n.forceUpdate()}),1e3);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return t.stop()}}),t)})))},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")),s&&r.a.createElement("div",{className:"Comments_Container"},r.a.createElement("div",{className:"Comments",ref:function(t){return e.comments=t}},y.map((function(e,t){return r.a.createElement("div",{className:"Comment",key:"div__".concat(t),style:{marginTop:t>0&&6,cursor:e.id===n.state.vk_user.id&&"default"},onClick:function(){e.id!==n.state.vk_user.id&&e.message.replaceAll("*","").length>0&&n.setPopout(r.a.createElement(c.a,{onClose:function(){return n.setPopout(null)},iosCloseItem:r.a.createElement(c.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")},r.a.createElement(c.b,{autoclose:!0,mode:"destructive",onClick:function(){n.socket.call("games.reportWord",{message:e.message}),n.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return n.setState({snackbar:null})}},"\u0416\u0430\u043b\u043e\u0431\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430")})}},"\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))}},r.a.createElement(c.f,{size:32,shadow:!1,src:e.photo_100}),r.a.createElement("div",null,r.a.createElement("div",null,e.first_name," ",e.last_name),r.a.createElement("div",null,e.message)))}))),!h&&r.a.createElement("div",{className:"Comment_Input"},r.a.createElement(c.m,{autoFocus:!0,id:"inputComment",value:v,onChange:function(t){t.currentTarget.value.length<=120&&e.setState({text:t.currentTarget.value})},placeholder:"\u0415\u0441\u0442\u044c \u0434\u043e\u0433\u0430\u0434\u043a\u0438?",onKeyDown:function(t){"Enter"===t.key&&v.trim().length>0&&(console.log("Send message (key) (lobbyId = ".concat(a,"): ").concat(v)),n.socket.call("games.message",{lobbyId:a,message:v}),e.setState({text:""}))},onFocus:function(){setTimeout((function(){document.getElementById("inputComment").scrollIntoView(!1)}),100)}}),r.a.createElement(c.G,{style:{display:0===v.length&&"none"},mode:"send",onClick:function(){v.trim().length>0?(console.log("Send message (btn) (lobbyId = ".concat(a,"): ").concat(v)),n.socket.call("games.message",{lobbyId:a,message:v})):console.log("Message is empty: ".concat(v)),e.setState({text:""})}})))))}}]),t}(a.PureComponent);Xt.defaultProps={};var Jt=Xt,qt=n(737),$t=n(738),en=n(739),tn=function(e){function t(e){var n;Object(d.a)(this,t),n=Object(h.a)(this,Object(v.a)(t).call(this,e));var a=e.drawerId,r=e.winnerId,s=e.word,o=e.t;return n.state={isDrawer:a===o.state.vk_user.id,isWinner:r===o.state.vk_user.id,winnerId:r,drawerId:a,word:s},n.shareStory=n.shareStory.bind(Object(b.a)(n)),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){}},{key:"shareStory",value:function(){var e=this;this.props.t.setPopout(r.a.createElement(c.x,null));var t=n(62),a=t.createCanvas,s=t.loadImage,o=this.state,i=o.isDrawer,l=(o.winnerId,o.isWinner),m=i?1:l?2:3;s(F(n(695)("./Story".concat(m,".png")))).then(function(){var t=Object(p.a)(u.a.mark((function t(n){var r,s,o,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a(n.width,n.height),s=r.getContext("2d"),o=new Image,c=e.state.word,i=c.nom.substring(0,1).toUpperCase()+c.nom.substring(1),s.drawImage(n,0,0),1===m&&(s.font="64px TT Commons Demibold",s.textAlign="center",s.fillStyle="#616161",s.fillText(i,539,1210)),o.src=e.props.t.state.canvas_,s.drawImage(o,198,618,683,683),t.prev=5,t.next=8,k.a.send("VKWebAppShowStoryBox",{background_type:"image",blob:r.toDataURL("image/png"),attachment:{url:"https://vk.com/app"+A().vk_app_id,text:"go_to",type:"url"}});case 8:e.props.t.socket.call("games.share",{gameId:e.props.gameId}),N("stats.shareStory"),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(5);case 14:e.props.t.updateData(),e.props.t.setPopout(null),e.props.t.setActivePanel("main");case 17:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,a=t.gameId,s=n.state,o=s.vk_user,i=s.isNotApp,l=this.state,m=l.isDrawer,d=l.isWinner,f=l.winnerId,h=l.drawerId,v=l.word,b=l.isLiked,g=Math.round((n.state.gameEnd-n.state.gameStart)/1e3);return r.a.createElement("div",{className:"Result"},m?0!==f?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u0422\u044b \u043c\u043e\u043b\u043e\u0434\u0435\u0446!"),r.a.createElement("p",null,"\u0422\u0432\u043e\u044e \u043a\u0430\u0440\u0442\u0438\u043d\u0443 \u0443\u0433\u0430\u0434\u0430\u043b\u0438 \u0437\u0430 ",S(g||0,["\u0441\u0435\u043a\u0443\u043d\u0434\u0443","\u0441\u0435\u043a\u0443\u043d\u0434\u044b","\u0441\u0435\u043a\u0443\u043d\u0434"]))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u0448\u043b\u043e"),r.a.createElement("p",null,"\u041d\u0438\u043a\u0442\u043e \u043d\u0435 \u0443\u0433\u0430\u0434\u0430\u043b, \u0447\u0442\u043e \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043d\u043e \u043d\u0430 \u0442\u0432\u043e\u0435\u0439 \u043a\u0430\u0440\u0442\u0438\u043d\u0435")):0!==f?d?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u0422\u044b \u043c\u043e\u043b\u043e\u0434\u0435\u0446!"),r.a.createElement("p",null,"\u0422\u044b \u043f\u0435\u0440\u0432",1===o.sex?"\u0430\u044f":"\u044b\u0439"," \u0443\u0433\u0430\u0434\u0430\u043b",1===o.sex&&"\u0430",", \u0447\u0442\u043e ",U[h].first_name," \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043b",1===U[h].sex&&"\u0430"," \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u0435")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u0418\u0433\u0440\u0430 \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430"),U[f]&&r.a.createElement("p",null,U[f].first_name," \u0431\u044b\u043b",1===U[h].sex&&"\u0430"," \u043f\u0435\u0440\u0432\u044b\u043c, \u043a\u0442\u043e \u0443\u0433\u0430\u0434\u0430\u043b, \u0447\u0442\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043e \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u0435")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u0448\u043b\u043e"),r.a.createElement("p",null,"\u041d\u0438\u043a\u0442\u043e \u043d\u0435 \u0443\u0433\u0430\u0434\u0430\u043b, \u0447\u0442\u043e \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043d\u043e \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u0435")),r.a.createElement("div",{className:"Canvas_Container"},!m&&r.a.createElement(qt.a,{className:"Report",onClick:function(){n.setPopout(r.a.createElement(c.x,null)),n.socket.call("games.report",{game_id:a},(function(e){e.response?n.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return n.setState({snackbar:null})}},"\u0416\u0430\u043b\u043e\u0431\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430")}):n.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return n.setState({snackbar:null})}},"\u0416\u0430\u043b\u043e\u0431\u0430 \u0443\u0436\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430")}),n.setPopout(null)}))}}),r.a.createElement($t.a,{fill:b?"#F16384":"var(--color_secondary)",className:"Like",onClick:function(){n.setPopout(r.a.createElement(c.x,null)),n.socket.call("pictures.like",{game_id:a},(function(t){e.setState({isLiked:t.response.isLiked}),n.setPopout(null)}))}}),v&&v.nom&&r.a.createElement("h2",null,v.nom.substring(0,1).toUpperCase()+v.nom.substring(1)),r.a.createElement("img",{alt:"canvas",src:n.state.canvas_}),r.a.createElement(c.g,{before:r.a.createElement(en.a,{width:16,height:16}),size:"m",mode:"gradient",onClick:function(){e.shareStory()}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f")),r.a.createElement(c.g,{size:"m",mode:"secondary",onClick:Object(p.a)(u.a.mark((function t(){var a,s,o,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.t,s=a.socket,o=a.state,l=o.subGameInfo,n.setPopout(r.a.createElement(c.x,null)),t.prev=2,i){t.next=6;break}return t.next=6,k.a.send("VKWebAppShowNativeAds",{ad_format:"interstitial"});case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(2);case 10:if(n.setPopout(null),n.updateData(),!l.friendly){t.next=23;break}if(l.owner_id!==n.state.user.id){t.next=20;break}return s.call("friends.createLobby"),t.next=17,n.setState({friend_lobby:{owner_id:n.state.user.id,members:[]}});case 17:n.setActivePanel("friend_lobby",["main","friends"]),t.next=21;break;case 20:s.call("friends.joinLobby",{owner_id:l.owner_id},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.response){e.next=8;break}return e.next=3,K(t.response.members);case 3:return e.next=5,n.setState({friend_lobby:t.response});case 5:n.setActivePanel("friend_lobby",["main","friends"]),e.next=9;break;case 8:n.setActivePanel("friends",["main"]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 21:t.next=24;break;case 23:n.setActivePanel("main");case 24:case"end":return t.stop()}}),t,null,[[2,8]])})))},"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"))}}]),t}(a.PureComponent);tn.defaultProps={};var nn=tn,an=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.icon,a=e.title,s=e.description,o=e.buttonText,i=e.buttonIcon,l=e.buttonOnClick,u=e.buttonMode,p=e.buttonBack;return r.a.createElement(r.a.Fragment,null,p&&!1,r.a.createElement("div",{className:"Placeholder"},r.a.cloneElement(n,{className:"Placeholder__Icon"}),r.a.createElement("div",null,r.a.createElement("h1",null,a),r.a.createElement("p",null,s),r.a.createElement("div",{className:p?"TwoButtons":"OneButton"},o&&r.a.createElement(c.g,{after:i,size:"m",mode:u||"gradient",onClick:l},o),p&&r.a.createElement(c.g,{style:{marginLeft:8},size:"m",mode:"secondary",onClick:function(){return t.back()}},"\u041d\u0430\u0437\u0430\u0434")))))}}]),t}(a.PureComponent);an.defaultProps={};var rn=an,sn=n(311),on=n.n(sn),cn=function(){function e(){Object(d.a)(this,e),this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.onConnectionError=this.onConnectionError.bind(this),this.getSocket=this.getSocket.bind(this)}return Object(f.a)(e,[{key:"onConnect",value:function(e){this.socket.on("connect",e)}},{key:"onDisconnect",value:function(e){this.socket.on("disconnect",e)}},{key:"onConnectionError",value:function(e){this.socket.on("connect_error",e)}},{key:"call",value:function(e,t,n){this.socket.emit(e,t,n)}},{key:"subscribe",value:function(e,t){this.socket.on(e,t)}},{key:"unsubscribe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var a=0,r=t;a<r.length;a++){var s=r[a];this.socket.removeAllListeners(s)}}},{key:"connect",value:function(e,t){this.socket?this.socket.connect():this.socket=on.a.connect(e,{path:"/socket.io",query:t,transports:["websocket","polling","flashsocket"],reconnection:!1})}},{key:"getSocket",value:function(){return this.socket}}]),e}(),ln=(D(),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={offset:e.t.state.randomGamesLike.length,limit:10,canGetMore:!0,prevY:0},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleObserver",value:function(e,t){var n=this,a=e[0].boundingClientRect.y,r=this.props.t,s=this.state,o=s.prevY,c=s.offset,i=s.limit,l=s.canGetMore;(0===o||o>a)&&l&&(r.socket.call("pictures.getRandomLikes",{offset:c,limit:i},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t.response.map((function(e){return e.drawerId})));case 2:r.setState({randomGamesLike:[].concat(Object(m.a)(r.state.randomGamesLike),Object(m.a)(t.response))}),n.setState({canGetMore:t.response.length>0}),n.forceUpdate();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({offset:c+10})),this.setState({prevY:a})}},{key:"render",value:function(){var e=this,t=this.props.t,n=t.state.banners,a=D(),s=t.state,o=s.randomGamesLike,i=s.topLikes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.s,{left:r.a.createElement(c.t,{onClick:t.back}),separator:!1}),r.a.createElement("div",{className:"Likes"},i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u041b\u0443\u0447\u0448\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u044b:"),r.a.createElement(c.k,{showArrows:!0,getScrollToLeft:function(e){return e-184},getScrollToRight:function(e){return e+184}},r.a.createElement("div",{style:{display:"flex"},className:"Pictures_List__"},i.map((function(e,n){return r.a.createElement("div",{key:"div__".concat(n),onClick:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({like_currentPictureSelected:n,like_method:"",like_param:"topLikes"});case 2:t.go("picture_info");case 3:case"end":return e.stop()}}),e)})))},r.a.createElement("img",{alt:"img",src:e["Picture.url"]}),r.a.createElement("div",null,j(e["Picture.likes"]),r.a.createElement($t.a,{width:10,height:10,style:{marginLeft:4}})))}))))),o.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:{margin:"24px 0 0 0"}},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0443\u0436\u043d\u0443\u044e \u043a\u0430\u0440\u0442\u0438\u043d\u0443, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0438 \u043e\u0446\u0435\u043d\u0438\u0442\u044c \u0435\u0451:"),r.a.createElement("div",{style:{marginTop:18,gridGap:a?8:15,paddingBottom:n[2]&&140},className:"Images_Grid"},o.map((function(e,n){return r.a.createElement("div",{key:"Image_".concat(n),onClick:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({like_currentPictureSelected:n,like_method:"pictures.getRandomLikes",like_param:"randomGamesLike",like_user_id:t.state.vk_user.id});case 2:t.go("picture_info");case 3:case"end":return e.stop()}}),e)})))},r.a.createElement("img",{alt:"img",src:e["Picture.url"]}))}))),n[2]&&r.a.createElement(c.w,{bannerData:n[2],onClose:Object(p.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n[2]=!1,a.next=3,t.setState({banners:n});case 3:e.forceUpdate();case 4:case"end":return a.stop()}}),a)})))})),r.a.createElement("div",{ref:function(t){return e.loadingRef=t}})))}}]),t}(a.PureComponent));ln.defaultProps={};var un=ln,pn=n(740),mn=n(741),dn=n(742),fn=n(743),hn=n(744);function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var bn=D(),gn=function(e){function t(e){var n;Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={canGetMore:!0},n.shareStory1=n.shareStory1.bind(Object(b.a)(n)),n.shareStory2=n.shareStory2.bind(Object(b.a)(n));var a=n.props,r=a.t,s=a.param,o=a.current,c=r.socket,i=r.state[s];return c.call("pictures.isLiked",{game_id:i[o].id},(function(e){n.setState({isLiked:e.response})})),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){}},{key:"shareStory1",value:function(e,t){var a=this;this.props.t.setPopout(r.a.createElement(c.x,null));try{var s=n(62),o=s.createCanvas,i=s.loadImage;i(F(n(290))).then(function(){var n=Object(p.a)(u.a.mark((function n(r){var s,c,l;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=o(r.width,r.height),c=s.getContext("2d"),n.next=4,M(t);case 4:return l=n.sent,c.drawImage(r,0,0),n.t0=c,n.next=9,i(l);case 9:return n.t1=n.sent,n.t0.drawImage.call(n.t0,n.t1,198,618,683,683),n.prev=11,n.next=14,k.a.send("VKWebAppShowStoryBox",{background_type:"image",blob:s.toDataURL("image/png"),attachment:{url:"https://vk.com/app".concat(A().vk_app_id,"#picture").concat(e),text:"go_to",type:"url"}});case 14:a.props.t.socket.call("games.share",{gameId:e}),N("stats.shareStory"),n.next=20;break;case 18:n.prev=18,n.t2=n.catch(11);case 20:a.props.t.setPopout(null);case 21:case"end":return n.stop()}}),n,null,[[11,18]])})));return function(e){return n.apply(this,arguments)}}())}catch(l){console.error(l),this.props.t.setPopout(null),this.props.t.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return a.props.t.setState({snackbar:null})}},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})}}},{key:"shareStory2",value:function(e,t,a){var s=this;try{this.props.t.setPopout(r.a.createElement(c.x,null));var o=n(62),i=o.createCanvas,l=o.loadImage;l(F(n(188))).then(function(){var n=Object(p.a)(u.a.mark((function n(o){var p,m,d,f;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,p=i(o.width,o.height),m=p.getContext("2d"),n.next=5,M(a);case 5:return d=n.sent,f=e.substring(0,1).toUpperCase()+e.substring(1),m.drawImage(o,0,0),m.font="64px TT Commons Demibold",m.textAlign="center",m.fillStyle="#616161",m.fillText(f,539,1210),n.t0=m,n.next=15,l(d);case 15:return n.t1=n.sent,n.t0.drawImage.call(n.t0,n.t1,198,618,683,683),n.next=19,k.a.send("VKWebAppShowStoryBox",{background_type:"image",blob:p.toDataURL("image/png"),attachment:{url:"https://vk.com/app".concat(A().vk_app_id,"#picture").concat(t),text:"go_to",type:"url"}});case 19:s.props.t.socket.call("games.share",{gameId:t}),N("stats.shareStory"),n.next=27;break;case 23:n.prev=23,n.t2=n.catch(0),console.error(n.t2),s.props.t.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return s.props.t.setState({snackbar:null})}},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")});case 27:s.props.t.setPopout(null);case 28:case"end":return n.stop()}}),n,null,[[0,23]])})));return function(e){return n.apply(this,arguments)}}())}catch(m){console.error(m),this.props.t.setPopout(null),this.props.t.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return s.props.t.setState({snackbar:null})}},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,a=t.current,s=t.method,o=t.param,l=t.user_id,d=n.state,f=d.n_canvasData,h=d.banners,v=n.state[o],b=v[a],g=this.state,y=g.isLiked,E=g.canGetMore,w=b.drawerId===n.state.vk_user.id,x=w&&r.a.createElement(c.g,{style:{marginTop:bn?10:16},className:"ButtonResumeDraw",before:r.a.createElement(pn.a,{width:16,height:16}),size:"m",mode:"gradient",stretched:!0,onClick:Object(p.a)(u.a.mark((function e(){var t,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state.user,a=t.admin,r=t.vk_donut,!a&&!r){e.next=7;break}return e.next=4,n.setState({isOnlineDrawing:!1,word:{nom:b["Word.nom"]},pictureUrl_:b["Picture.url"],gameId_:b.id});case 4:n.go("game"),e.next=8;break;case 7:I()?n.go("vk_donut_ios"):n.go("vk_donut");case 8:case"end":return e.stop()}}),e)})))},"\u0414\u043e\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c");return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.s,{left:r.a.createElement(c.t,{onClick:n.back}),separator:!1}),r.a.createElement("div",{className:"PictureInfo"},r.a.createElement("div",{className:"Canvas_Container"},r.a.createElement("h2",null,(b["Word.nom"]&&b["Word.nom"].substring(0,1).toUpperCase())+(b["Word.nom"]&&b["Word.nom"].substring(1))),r.a.createElement("img",{alt:"canvas",src:f||b["Picture.url"]}),r.a.createElement("div",{className:"Actions_Container"},r.a.createElement("div",{className:"PictureTime"},Math.round((b.endTime-b.startTime)/1e3)," \u0441."),r.a.createElement("div",{style:y?{color:"#F9F9F9",background:"#F16384"}:{},className:"LikeButton",onClick:function(){n.setPopout(r.a.createElement(c.x,null)),n.socket.call("pictures.like",{game_id:b.id},(function(t){t.response&&(v[a]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},b,Object(i.a)({},"Picture.likes",t.response.likes)),n.setState({like_picturesList:v}),e.setState({isLiked:t.response.isLiked})),n.setPopout(null)}))}},j(b["Picture.likes"])," ",r.a.createElement($t.a,{style:{marginLeft:4}})),r.a.createElement("div",{className:"ReportButton",onClick:function(){n.setPopout(r.a.createElement(c.x,null)),n.socket.call("games.report",{game_id:b.id},(function(e){e.response?n.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return n.setState({snackbar:null})}},"\u0416\u0430\u043b\u043e\u0431\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430")}):n.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return n.setState({snackbar:null})}},"\u0416\u0430\u043b\u043e\u0431\u0430 \u0443\u0436\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430")}),n.setPopout(null)}))}},r.a.createElement(qt.a,{width:16,height:16})))),r.a.createElement("div",{className:"Author_Container",onClick:function(){n.setPopout(r.a.createElement(c.x,null)),n.socket.call("users.getById",{id:b.drawerId},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({author:t.response});case 2:n.socket.call("games.getByDrawerId",{id:b.drawerId},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({author_works:t.response});case 2:n.go("author"),n.setPopout(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},r.a.createElement("div",null,"\u0410\u0432\u0442\u043e\u0440"),r.a.createElement("div",null,r.a.createElement(c.f,{shadow:!1,size:36,src:U[b.drawerId].photo_100}),r.a.createElement("div",null,U[b.drawerId].first_name," ",U[b.drawerId].last_name))),r.a.createElement("div",{className:"Actions_Container"},r.a.createElement(c.g,{before:r.a.createElement(en.a,{width:16,height:16}),size:"m",mode:w?"secondary":"gradient",onClick:function(){n.setPopout(r.a.createElement(c.a,{onClose:function(){return n.setPopout(null)},iosCloseItem:r.a.createElement(c.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")},r.a.createElement(c.b,{autoclose:!0,before:r.a.createElement(mn.a,null),onClick:function(){b.drawerId!==n.state.vk_user.id?e.shareStory1(b.id,b["Picture.url"]):e.shareStory2(b["Word.nom"],b.id,b["Picture.url"])}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"),r.a.createElement(c.b,{autoclose:!0,before:r.a.createElement(dn.a,null),onClick:function(){k.a.send("VKWebAppCopyText",{text:"https://vk.com/app".concat(A().vk_app_id,"#picture").concat(b.id)}),n.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return e.props.t.setState({snackbar:null})}},"\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430")})}},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u0443"),r.a.createElement(c.b,{autoclose:!0,before:r.a.createElement(fn.a,null),onClick:function(){k.a.send("VKWebAppCopyText",{text:"https://vk.com/app".concat(A().vk_app_id,"#author").concat(b.drawerId)}),n.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return e.props.t.setState({snackbar:null})}},"\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430")})}},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0430\u0432\u0442\u043e\u0440\u0430")))}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f"),r.a.createElement(c.g,{style:{marginTop:bn&&10},disabled:!E,after:r.a.createElement(hn.a,null),size:"m",mode:"secondary",onClick:function(){a+1===v.length-1?s&&s.length>0?(n.setPopout(r.a.createElement(c.x,null)),n.socket.call(s,{offset:n.state[o].length,limit:10,id:l},function(){var t=Object(p.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.response.length>0)){t.next=7;break}return t.next=3,K(r.response.map((function(e){return e.drawerId})));case 3:return t.next=5,n.setState(Object(i.a)({},o,[].concat(Object(m.a)(n.state[o]),Object(m.a)(r.response))));case 5:n.socket.call("pictures.isLiked",{game_id:r.response[0].id},(function(t){e.setState({isLiked:t.response})})),n.setState({like_currentPictureSelected:a+1,n_canvasData:void 0});case 7:e.setState({canGetMore:r.response.length>0}),n.setPopout(null);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())):e.setState({canGetMore:!1}):(n.socket.call("pictures.isLiked",{game_id:v[a+1].id},(function(t){e.setState({isLiked:t.response})})),n.setState({like_currentPictureSelected:a+1,n_canvasData:void 0}))}},"\u0414\u0430\u043b\u044c\u0448\u0435"),w&&bn&&x),w&&!bn&&x,h[8]&&r.a.createElement(c.w,{bannerData:h[8],onClose:Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h[8]=!1,t.next=3,n.setState({banners:h});case 3:e.forceUpdate();case 4:case"end":return t.stop()}}),t)})))})))}}]),t}(a.PureComponent);gn.defaultProps={};var yn=gn,kn=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={offset:e.t.state.author_works.length,limit:10,canGetMore:!0,prevY:0},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef)}},{key:"handleObserver",value:function(e,t){var n=this,a=e[0].boundingClientRect.y,r=this.props.t,s=this.state,o=s.prevY,c=s.offset,i=s.limit,l=s.canGetMore;(0===o||o>a)&&l&&(r.socket.call("games.getByDrawerId",{id:r.state.author.id,offset:c,limit:i},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({author_works:[].concat(Object(m.a)(r.state.author_works),Object(m.a)(t.response))}),n.setState({canGetMore:t.response.length>0}),n.forceUpdate();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({offset:c+10})),this.setState({prevY:a})}},{key:"render",value:function(){var e=this,t=this.props.t,n=t.state,a=t._tags,s=D(),o=n.author,i=n.author_works,l=n.banners;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.s,{left:r.a.createElement(c.t,{onClick:t.back}),separator:!1}),r.a.createElement("div",{className:"Author"},r.a.createElement("div",{className:"User_Header"},r.a.createElement(c.f,{src:U[o.id].photo_100,size:48,shadow:!1}),r.a.createElement("div",{className:"UserTags"},a().map((function(e){return o[e[0]]&&r.a.createElement(rt.a,{action:"hover",content:r.a.createElement(c.i,null,r.a.createElement(c.E,null,e[2]))},r.a.cloneElement(e[1],{onClick:function(){return t.setActiveModal(e[0])}}))})))),r.a.createElement("h3",null,U[o.id].first_name," ",U[o.id].last_name.substring(0,1),"."),r.a.createElement("h1",null,"\u0420\u0430\u0431\u043e\u0442\u044b \u0438\u0433\u0440\u043e\u043a\u0430"),r.a.createElement("div",{style:{marginTop:24,gridGap:s?8:15,paddingBottom:l[6]&&140},className:"Images_Grid"},i.map((function(e,n){return r.a.createElement("div",{key:"Image_".concat(n),onClick:Object(p.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({like_currentPictureSelected:n,like_method:"games.getByDrawerId",like_param:"author_works",like_user_id:o.id});case 2:"picture_info"===(a=t.state.history)[a.length-1]?t.back():t.go("picture_info");case 4:case"end":return e.stop()}}),e)})))},r.a.createElement("img",{alt:"img",src:e["Picture.url"]}))}))),l[6]&&r.a.createElement(c.w,{bannerData:l[6],onClose:Object(p.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l[6]=!1,n.next=3,t.setState({banners:l});case 3:e.forceUpdate();case 4:case"end":return n.stop()}}),n)})))})),r.a.createElement("div",{ref:function(t){return e.loadingRef=t}}))}}]),t}(a.PureComponent);kn.defaultProps={};var En=kn,wn=D(),xn=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t,n=t.state.banners,a=t._tags;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.s,{left:r.a.createElement(c.t,{onClick:t.back}),separator:!1},wn&&"\u041c\u0435\u0442\u043a\u0438"),r.a.createElement("div",{className:"Tags",style:{paddingBottom:24}},!wn&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u041c\u0435\u0442\u043a\u0438"),r.a.createElement("div",{className:"TagsList",style:{paddingBottom:n[5]&&140}},a().map((function(e){return r.a.createElement("div",null,e[1],r.a.createElement("div",null,r.a.createElement("h1",null,e[2]),r.a.createElement("h3",null,e[3])))}))),n[5]&&r.a.createElement(c.w,{bannerData:n[5],onClose:Object(p.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n[5]=!1,a.next=3,t.setState({banners:n});case 3:e.forceUpdate();case 4:case"end":return a.stop()}}),a)})))})))}}]),t}(a.PureComponent);xn.defaultProps={};var Cn=xn,On=D(),_n=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={friends:[],others:[]},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"updateFriends",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,n,a,r,s,o,c=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.props.t.state.isNotApp){e.next=23;break}return e.next=4,k.a.send("VKWebAppGetAuthToken",{app_id:parseInt(A().vk_app_id),scope:"friends"});case 4:return n=e.sent.access_token,e.next=7,k.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:{access_token:n,v:"5.131"}});case 7:a=e.sent,r=a.response.count,s=Math.floor(r/100),t=Object(m.a)(a.response.items),o=0;case 12:if(!(o<s)){e.next=21;break}return e.t0=t,e.next=16,k.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:{access_token:n,v:"5.131",offset:100*o}});case 16:e.t1=e.sent.response.items,t=e.t0.concat.call(e.t0,e.t1);case 18:o++,e.next=12;break;case 21:return e.next=23,K(t);case 23:this.props.t.socket.call("friends.getLobbies",{ids:t},function(){var e=Object(p.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.response,e.next=3,K(t.public_lobbies);case 3:c.setState({friends:n,others:t.public_lobbies});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this,t=this.props.t.socket;t.unsubscribe("createLobby","removeLobby"),t.subscribe("createLobby",function(){var t=Object(p.a)(u.a.mark((function t(n){var a,r,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,r=a.friends,s=a.others,!n.changeMode||-1!==s.indexOf(n.id)||-1!==r.indexOf(n.id)){t.next=7;break}return t.next=4,K([n.id]);case 4:e.setState({others:[].concat(Object(m.a)(s),[n.id])}),t.next=8;break;case 7:n.changeMode||-1!==r.indexOf(n.id)||e.setState({friends:[].concat(Object(m.a)(r),[n.id])});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.subscribe("removeLobby",function(){var t=Object(p.a)(u.a.mark((function t(n){var a,r,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.state,r=a.friends,s=a.others,n.changeMode&&s.indexOf(n.id)>-1&&-1===r.indexOf(n.id)?(s.splice(s.indexOf(n.id),1),e.setState({others:s})):!n.changeMode&&r.indexOf(n.id)>-1&&(r.splice(r.indexOf(n.id),1),e.setState({friends:r})),e.forceUpdate();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.updateFriends()}},{key:"render",value:function(){var e=this,t=this.props.t,n=t.socket,a=t.state,s=a.user,o=a.banners,i=this.state,l=i.friends,m=i.others;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.s,{left:r.a.createElement(c.t,{onClick:t.back}),separator:!1},On&&"\u0414\u0440\u0443\u0436\u0435\u0441\u043a\u0430\u044f \u0438\u0433\u0440\u0430"),r.a.createElement("div",{className:"Friends"},!On&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u0414\u0440\u0443\u0436\u0435\u0441\u043a\u0430\u044f \u0438\u0433\u0440\u0430"),r.a.createElement("p",{style:{margin:"8px 40px 0 0"}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043b\u043e\u0431\u0431\u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0439 \u0447\u0435\u043b\u043e\u0432\u0435\u043a."),r.a.createElement("p",{style:{margin:"4px 40px 0 0"}},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432 \u0432 \u043b\u043e\u0431\u0431\u0438 \u043c\u043e\u0436\u0435\u0442 \u0434\u043e\u0441\u0442\u0438\u0433\u0430\u0442\u044c \u0434\u043e 20."),r.a.createElement("div",{style:{display:"flex",marginTop:24}},r.a.createElement(c.g,{stretched:!0,size:"m",mode:"gradient_violet",onClick:function(){s.vk_donut||s.admin?n.call("friends.createLobby",{},(function(e){e.response&&(t.setState({friend_lobby:e.response}),t.go("friend_lobby"))})):I()?t.go("vk_donut_ios"):t.go("vk_donut")}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043b\u043e\u0431\u0431\u0438"),r.a.createElement(c.g,{style:{marginLeft:4},stretched:!0,size:"m",mode:"gradient_gray",onClick:Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateFriends();case 2:case"end":return t.stop()}}),t)})))},"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0440\u0443\u0437\u0435\u0439")),r.a.createElement("div",{className:"FriendsList",style:{paddingBottom:o[7]&&140}},l.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"Span"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u0430, \u0432 \u0447\u044c\u0451 \u043b\u043e\u0431\u0431\u0438 \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f:"),r.a.createElement("div",{style:{marginTop:8}},l.map((function(e,a){return r.a.createElement(c.z,{key:"SCell_".concat(a),before:r.a.createElement(c.f,{size:32,shadow:!1,src:U[e].photo_100}),expandable:!0,onClick:function(){n.call("friends.joinLobby",{owner_id:e},function(){var e=Object(p.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(n.response.members);case 2:return e.next=4,t.setState({friend_lobby:n.response});case 4:t.go("friend_lobby");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},U[e].first_name," ",U[e].last_name.substring(0,1),".")})))):r.a.createElement("span",{className:"Span"},"\u0412\u0430\u0448\u0438 \u0434\u0440\u0443\u0437\u044c\u044f \u043d\u0435 \u0438\u0433\u0440\u0430\u044e\u0442 \u0432 \u0438\u0433\u0440\u0443 :("),m.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("div",{className:"Span",style:{marginTop:12}},"\u0414\u0440\u0443\u0433\u0438\u0435 \u0438\u0433\u0440\u043e\u043a\u0438:"),r.a.createElement("div",{style:{marginTop:8}},m.map((function(e,a){return r.a.createElement(c.z,{key:"SCell_".concat(a),before:r.a.createElement(c.f,{size:32,shadow:!1,src:U[e].photo_100}),expandable:!0,onClick:function(){n.call("friends.joinLobby",{owner_id:e},function(){var e=Object(p.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(n.response.members);case 2:return e.next=4,t.setState({friend_lobby:n.response});case 4:t.go("friend_lobby");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},U[e].first_name," ",U[e].last_name.substring(0,1),".")}))))),o[7]&&r.a.createElement(c.w,{bannerData:o[7],onClose:Object(p.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o[7]=!1,n.next=3,t.setState({banners:o});case 3:e.forceUpdate();case 4:case"end":return n.stop()}}),n)})))})))}}]),t}(a.PureComponent);_n.defaultProps={};var Sn=_n,jn=n(745),Pn=D(),An=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={removed:!1,members:[],splashShow:!1},setTimeout(Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.t.state.friend_lobby,e.next=3,K(t.members);case 3:n.setState({members:t.members});case 4:case"end":return e.stop()}}),e)}))),1),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.t,n=t.socket,a=t.state;n.unsubscribe("changeLobbyUsers","gameStart","setWord","gameEnd","draw","removeLobby","wakeUp"),n.subscribe("wakeUp",function(){var t=Object(p.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.user_ids.indexOf(a.user.id)>-1)for(r=0;r<3;r++)setTimeout(Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!k.a.supports("VKWebAppTapticNotificationOccurred")){t.next=3;break}return t.next=3,k.a.send("VKWebAppTapticNotificationOccurred",{type:"success"});case 3:return t.next=5,e.setState({splashShow:!e.state.splashShow});case 5:setTimeout((function(){e.setState({splashShow:!e.state.splashShow})}),100);case 6:case"end":return t.stop()}}),t)}))),200+200*r);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.subscribe("removeLobby",function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({removed:!0});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.subscribe("changeLobbyUsers",function(){var t=Object(p.a)(u.a.mark((function t(n){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.props.friend_lobby,t.next=3,K(n.players);case 3:s.members=n.players,e.props.t.setState({friend_lobby:s}),setTimeout(Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({members:s.members});case 2:e.forceUpdate(),-1===n.players.indexOf(a.user.id)&&e.props.friend_lobby.owner_id!==a.user.id&&(e.props.t.back(),e.state.removed?e.props.t.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return e.setState({snackbar:null})}},"\u041b\u043e\u0431\u0431\u0438 \u0431\u044b\u043b\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e")}):e.props.t.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return e.setState({snackbar:null})}},"\u0412\u0430\u0441 \u0432\u044b\u0433\u043d\u0430\u043b\u0438 \u0438\u0437 \u043b\u043e\u0431\u0431\u0438")}));case 4:case"end":return t.stop()}}),t)}))),400);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.subscribe("setWord",function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.t.setState({word:n.word});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.subscribe("gameStart",function(){var t=Object(p.a)(u.a.mark((function t(n){var a,r,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.lobbyId,r=n.drawerId,s=e.props.friend_lobby,t.next=3,e.props.t.setState({lobbyId:a,drawerId:r,gameStart:Date.now(),isOnlineDrawing:!0,subGameInfo:{friendly:!0,owner_id:s.owner_id}});case 3:e.props.t.go("game");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this.props,t=e.t,n=e.friend_lobby,a=t.socket,s=t.state.user,o=this.state,i=o.members,l=o.splashShow;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.s,{left:r.a.createElement(c.t,{onClick:t.back}),separator:!1},Pn&&"\u0414\u0440\u0443\u0436\u0435\u0441\u043a\u0430\u044f \u0438\u0433\u0440\u0430"),r.a.createElement("div",{className:"FriendSplash",style:{opacity:l?1:0}}),r.a.createElement("div",{className:"FriendLobby"},!Pn&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u0414\u0440\u0443\u0436\u0435\u0441\u043a\u0430\u044f \u0438\u0433\u0440\u0430"),n.owner_id===s.id&&r.a.createElement(c.g,{style:{marginTop:Pn?10:16,width:"100%"},before:r.a.createElement(jn.a,{width:16,height:16}),size:"m",mode:"gradient_light_gray",stretched:!0,onClick:function(){t.setActiveModal(xa)}},"\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043b\u043e\u0431\u0431\u0438"),r.a.createElement("div",{className:"Span",style:{marginTop:16}},"\u0418\u0433\u0440\u043e\u043a\u0438"),r.a.createElement("div",{className:"FriendsList"},r.a.createElement("div",{style:{marginTop:8}},r.a.createElement(c.z,{onClick:function(){n.owner_id===s.id?a.call("friends.wakeUp",{user_ids:[s.id].concat(Object(m.a)(i)),owner_id:n.owner_id}):a.call("friends.wakeUp",{user_ids:[n.owner_id],owner_id:n.owner_id})},before:r.a.createElement(c.f,{size:32,shadow:!1,src:U[n.owner_id].photo_100})},U[n.owner_id].first_name," ",U[n.owner_id].last_name.substring(0,1),"."),i.map((function(e,t){return r.a.createElement(c.z,{onClick:function(){a.call("friends.wakeUp",{user_ids:[e],owner_id:n.owner_id})},key:"SCell_".concat(t),before:r.a.createElement(c.f,{size:32,shadow:!1,src:U[e].photo_100}),after:n.owner_id===s.id&&r.a.createElement(c.l,{onClick:function(){a.call("friends.kickFromLobby",{user_id:e})}},r.a.createElement(Kt.a,{fill:"var(--icon_tertiary)"}))},U[e].first_name," ",U[e].last_name.substring(0,1),".")})))),n.owner_id===s.id&&i.length>0&&r.a.createElement(c.g,{style:{marginTop:24},size:"m",mode:"gradient_violet",onClick:function(){a.call("friends.startGame")}},"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443")))}}]),t}(a.PureComponent);An.defaultProps={};var In=An,Dn=n(746),Ln=n(747),Fn=D(),Mn=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t,n=t.state,a=t.socket,s=t.state,o=s.user,i=s.banners;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.s,{left:r.a.createElement(c.t,{onClick:t.back}),separator:!1},Fn&&"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"),r.a.createElement("div",{className:"Stats"},!Fn&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"),r.a.createElement("p",{style:{margin:"8px 40px 0 0"}},"\u0417\u0434\u0435\u0441\u044c \u0441\u043e\u0431\u0440\u0430\u043d\u0430 \u0432\u0441\u044f \u0442\u0432\u043e\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430, \u0438 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0438 \u0438\u0433\u0440\u043e\u043a\u043e\u0432."),r.a.createElement("div",{className:"StatsCards__Container"},r.a.createElement("div",null,r.a.createElement(Dn.a,{width:16,height:16}),r.a.createElement("span",null,j(o.coins))),r.a.createElement("div",null,r.a.createElement("span",null,j(o.likes)),r.a.createElement(Ln.a,{width:16,height:16}))),r.a.createElement("div",{className:"Rating__List",style:{paddingBottom:i[4]&&140}},[["users_topPictures","\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0443 \u043a\u0430\u0440\u0442\u0438\u043d","pictures"],["users_topGuessedPictures","\u0443\u0433\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u043a\u0430\u0440\u0442\u0438\u043d\u0430\u043c","guessedPictures"],["users_topLikes","\u043b\u0430\u0439\u043a\u0430\u043c","likes"]].map((function(e,s){return r.a.createElement("div",null,r.a.createElement("span",{className:"Span"},"\u041b\u0443\u0447\u0448\u0438\u0435 \u0438\u0433\u0440\u043e\u043a\u0438 \u043f\u043e ",e[1],":"),r.a.createElement(c.k,{showArrows:!0,getScrollToLeft:function(e){return e-128},getScrollToRight:function(e){return e+128}},r.a.createElement("div",{style:{display:"flex"}},n[e[0]].map((function(n,s){return r.a.createElement(c.j,{key:"Cell_".concat(s),header:U[n.id].first_name,subtitle:n[e[2]],onClick:function(){t.setPopout(r.a.createElement(c.x,null)),a.call("users.getById",{id:n.id},function(){var e=Object(p.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===r.response){e.next=6;break}return e.next=3,t.setState({author:r.response});case 3:a.call("games.getByDrawerId",{id:n.id},function(){var e=Object(p.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({author_works:n.response});case 2:t.go("author"),t.setPopout(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7;break;case 6:t.setPopout(null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},r.a.createElement(c.f,{size:48,shadow:!1,src:U[n.id].photo_100}))})))))}))),i[4]&&r.a.createElement(c.w,{bannerData:i[4],onClose:Object(p.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i[4]=!1,n.next=3,t.setState({banners:i});case 3:e.forceUpdate();case 4:case"end":return n.stop()}}),n)})))})))}}]),t}(a.PureComponent);Mn.defaultProps={};var Bn,Nn=Mn,Tn=n(748),Wn=D(),Rn=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={items:[]},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.t.socket;Bn=setInterval((function(){e.forceUpdate()}),1e3),t.call("shop.getList",{},function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({items:n.response});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){clearInterval(Bn)}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,a=t.watchedShopItems,s=t.boughtShopItems,o=n.state,i=o.banners,l=o.isNotApp,d=this.state.items,f=n.socket;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.s,{left:r.a.createElement(c.t,{onClick:n.back}),separator:!1},Wn&&"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"),r.a.createElement("div",{className:"Shop"},!Wn&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"),r.a.createElement("p",{style:{margin:"8px 40px 0 0"}},"\u0417\u0434\u0435\u0441\u044c \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u044f\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u0430\u043a\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0441\u0442\u0438 \u0437\u0430 \u043c\u043e\u043d\u0435\u0442\u044b."),r.a.createElement("div",{className:"ShopItems",style:{paddingBottom:i[3]&&140}},d.length>0?d.map((function(e,t){var o=e.id,i=e.startTime,d=(e.count,e.title),h=e.price,v=e.img,b=e.needAdvert,g=e.singleBuy,y=P(i-Date.now()).str,E=y.hours,w=y.minutes,x=y.seconds;return r.a.createElement("div",{key:"Shop_".concat(t),onClick:function(){Date.now()<i||-1===a.indexOf(o)&&b||(g&&s.indexOf(o)>-1?n.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return n.setState({snackbar:null})}},"\u0412\u044b \u0443\u0436\u0435 \u043a\u0443\u043f\u0438\u043b\u0438 \u044d\u0442\u043e\u0442 \u0442\u043e\u0432\u0430\u0440")}):(n.setPopout(r.a.createElement(c.x,null)),f.call("shop.buy",{product_id:o},function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.response){e.next=8;break}return g&&n.setState({boughtShopItems:[].concat(Object(m.a)(s),[o])}),n.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return n.setState({snackbar:null})}},"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043a\u0443\u043f\u0438\u043b\u0438 \u0442\u043e\u0432\u0430\u0440")}),e.next=5,n.updateData();case 5:n.forceUpdate(),e.next=9;break;case 8:n.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return n.setState({snackbar:null})}},t.message)});case 9:n.setPopout(null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())))}},Date.now()<i?r.a.createElement("div",{className:"TimeCounter"},r.a.createElement(st.a,null),r.a.createElement("span",null,E,":",w,":",x)):-1===a.indexOf(o)&&b&&r.a.createElement("div",{className:"WatchAdvert",onClick:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setPopout(r.a.createElement(c.x,null)),e.prev=1,l){e.next=5;break}return e.next=5,k.a.send("VKWebAppShowNativeAds",{ad_format:"reward"});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:n.setPopout(null),n.setState({watchedShopItems:[].concat(Object(m.a)(a),[o])});case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))},r.a.createElement(Tn.a,null),r.a.createElement("span",null,"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435")),r.a.createElement("img",{className:"icon",alt:"icon",src:v}),r.a.createElement("div",{className:"titles"},r.a.createElement("span",null,d),r.a.createElement("br",null),r.a.createElement("span",null,S(h,["\u043c\u043e\u043d\u0435\u0442\u0430","\u043c\u043e\u043d\u0435\u0442\u044b","\u043c\u043e\u043d\u0435\u0442"]))))})):r.a.createElement("div",{key:"Shop_-1",onClick:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l){e.next=5;break}return e.next=4,k.a.send("VKWebAppAllowNotifications");case 4:f.call("users.enableNotifications");case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))},r.a.createElement("div",{className:"titles"},r.a.createElement("span",null,"\u0422\u0443\u0442 \u043f\u0443\u0441\u0442\u043e :("),r.a.createElement("br",null),r.a.createElement("span",null,"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e \u043d\u043e\u0432\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u0430\u0445. \u041c\u044b \u0412\u0430\u0441 \u043e\u043f\u043e\u0432\u0435\u0441\u0442\u0438\u043c, \u043a\u043e\u0433\u0434\u0430 \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u0447\u0442\u043e-\u0442\u043e \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e\u0435.")))),i[3]&&r.a.createElement(c.w,{bannerData:i[3],onClose:Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i[3]=!1,t.next=3,n.setState({banners:i});case 3:e.forceUpdate();case 4:case"end":return t.stop()}}),t)})))})))}}]),t}(a.PureComponent);Rn.defaultProps={};var Un=Rn,Gn=n(749),Kn=n(750),Vn=n(751),Yn=n(752),zn=n(753),Qn=n(754),Hn=n(312);function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jn={},qn=0,$n=0,ea={x:0,y:0},ta=D(),na=[],aa=[],ra=function(e){function t(e){var n;Object(d.a)(this,t),n=Object(h.a)(this,Object(v.a)(t).call(this,e));e.t.state.user;return n.state={color:"#000000",drawing:!1,isEraser:!1,isStroke:!1,isCompassActive:!1,isFullCanvasShowed:!1,fullCanvasData:null,lineWidth:2,areas:[],areas_time:{}},n.onMouseDown=n.onMouseDown.bind(Object(b.a)(n)),n.onMouseUp=n.onMouseUp.bind(Object(b.a)(n)),n.throttle=n.throttle.bind(Object(b.a)(n)),n.onMouseMove=n.onMouseMove.bind(Object(b.a)(n)),n.drawLine=n.drawLine.bind(Object(b.a)(n)),e.t.socket.subscribe("draw",function(){var t=Object(p.a)(u.a.mark((function t(a){var r,s,o,c,i,l,p,m,d,f,h,v,b,g;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.user_id==e.t.state.vk_user.id){t.next=21;break}for(r=a.data,s=!0,o=!1,c=void 0,t.prev=5,i=r[Symbol.iterator]();!(s=(l=i.next()).done);s=!0)p=l.value,m=p.x0,d=p.y0,f=p.x1,h=p.y1,v=p.color,b=p.isEraser,g=p.lineWidth,n.drawLine(m,d,f,h,v,b,g,!1);t.next=13;break;case 9:t.prev=9,t.t0=t.catch(5),o=!0,c=t.t0;case 13:t.prev=13,t.prev=14,s||null==i.return||i.return();case 16:if(t.prev=16,!o){t.next=19;break}throw c;case 19:return t.finish(16);case 20:return t.finish(13);case 21:case"end":return t.stop()}}),t,null,[[5,9,13,21],[14,,16,20]])})));return function(e){return t.apply(this,arguments)}}()),e.t.socket.subscribe("updateAreas",function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.updateAreas(t.areas);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,n,a,s,o,i,l,m,d=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.t.setPopout(r.a.createElement(c.x,null)),_(["Manrope SemiBold","Manrope Bold"]),setTimeout((function(){d.props.t.setPopout(null),d.props.t.state.isShowGlobalCanvasOnboard&&d.props.t.setActiveModal(wa)}),500),e.next=5,new Promise((function(e){return d.props.t.socket.call("canvas.getAreas",{},function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(n.response);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 5:return t=e.sent,e.next=8,new Promise((function(e){return d.props.t.socket.call("canvas.join",{},function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(n.canvasData);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 8:return n=e.sent,e.next=11,this.updateAreas(t);case 11:try{(a=new Image).onload=function(){d.canvasContext.drawImage(a,0,0)},a.src=n}catch(f){console.error(f)}this.lastScheme=document.body.attributes.getNamedItem("scheme").value,this.clientHeight=parseInt(document.body.attributes.getNamedItem("_height").value),this.clientWidth=parseInt(document.body.attributes.getNamedItem("_width").value),s=this.canvas,o=this.onMouseDown,i=this.onMouseUp,l=this.throttle,m=this.onMouseMove,this.props,this.canvasContext=s.getContext("2d"),s.addEventListener("mousedown",o,!1),s.addEventListener("mouseup",i,!1),s.addEventListener("mouseout",i,!1),s.addEventListener("mousemove",(function(e){return d.state.isCompassActive?m(e):l(m(e),10)}),!1),s.addEventListener("touchstart",o,!1),s.addEventListener("touchend",i,!1),s.addEventListener("touchcancel",i,!1),s.addEventListener("touchmove",(function(e){return d.state.isCompassActive?m(e):l(m(e),10)}),!1);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,n,a,r,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.props.t.socket.call("canvas.leave",{}),document.body.setAttribute("scheme",this.lastScheme),t=!0,n=!1,a=void 0,e.prev=5,r=na[Symbol.iterator]();!(t=(s=r.next()).done);t=!0)o=s.value,clearInterval(o);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),n=!0,a=e.t0;case 13:e.prev=13,e.prev=14,t||null==r.return||r.return();case 16:if(e.prev=16,!n){e.next=19;break}throw a;case 19:return e.finish(16);case 20:return e.finish(13);case 21:na=[];case 22:case"end":return e.stop()}}),e,this,[[5,9,13,21],[14,,16,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t,n){"bright_light"!==document.body.attributes.getNamedItem("scheme").value&&setTimeout((function(){return document.body.setAttribute("scheme","bright_light")}),500)}},{key:"updateAreas",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,r,s,o=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in na=[],n={},a=[],r=function(e){t[e].owner_id>0&&a.push(t[e].owner_id),na.push(setInterval((function(){if(t[e].owner_id>0){var a=P(t[e].time-Date.now()).str,r=a.hours,s=a.minutes,c=a.seconds;n[e]="".concat(r,":").concat(s,":").concat(c),o.setState({areas_time:n}),o.state.drawing||o.forceUpdate(),t[e].time<=Date.now()&&(t[e]={owner_id:0,time:0})}}),1e3))},t)r(s);return e.next=6,K(a);case 6:this.setState({areas:t.sort((function(e,t){return e.id-t.id})),areas_time:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onMouseDown",value:function(e){console.log("onMouseDown"),this.setState({drawing:!0}),Jn.x=e.clientX||e.touches[0].clientX,Jn.y=e.clientY||e.touches[0].clientY,aa=[]}},{key:"onMouseUp",value:function(e){console.log("onMouseUp");var t=this.state,n=t.drawing,a=t.color,r=t.isEraser,s=t.lineWidth;if(n){this.setState({drawing:!1});try{var o=this.canvas.getBoundingClientRect();console.log("Lines to send: ".concat(aa.length)),aa.length>0&&(this.props.t.socket.call("canvas.draw",{data:aa,user_id:this.props.t.state.vk_user.id}),aa=[]),this.drawLine(Jn.x-o.left,Jn.y-o.top,(e.clientX||e.touches[0].clientX)-o.left,(e.clientY||e.touches[0].clientY)-o.top,a,r,s)}catch(l){}var c=this.canvas_container.style.transform,i=c.substring(c.indexOf("(")+1,c.indexOf(")")).split(",");ea.x=parseInt(i[0]),ea.y=parseInt(i[1]),(isNaN(ea.x)||isNaN(ea.y))&&(ea.x=0,ea.y=0)}}},{key:"onMouseMove",value:function(e){var t=this.state,n=t.drawing,a=t.color,r=t.isEraser,s=t.lineWidth;if(n){var o=this.canvas.getBoundingClientRect();if(!this.state.isCompassActive){try{this.drawLine(Jn.x-o.left,Jn.y-o.top,(e.clientX||e.touches[0].clientX)-o.left,(e.clientY||e.touches[0].clientY)-o.top,a,r,s),Jn.x=e.clientX||e.touches[0].clientX,Jn.y=e.clientY||e.touches[0].clientY}catch(e){}return!1}try{var c={x:e.clientX||e.touches[0].clientX,y:e.clientY||e.touches[0].clientY},i={x:c.x-Jn.x,y:c.y-Jn.y},l=Math.max(Math.min(this.clientWidth-200,ea.x+qn+i.x),200-this.canvas.width),u=Math.max(Math.min(this.clientHeight-200,ea.y+$n+i.y),200-this.canvas.height);this.canvas_container.style.transform="translate(".concat(l,"px, ").concat(u,"px)")}catch(e){console.log(e)}}}},{key:"drawLine",value:function(e,t,n,a,r,s,o){var c=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];if((!this.state.isCompassActive||!c)&&(console.log({x0:e,y0:t,x1:n,y1:a}),!c||this.isAllowToDraw(e,t,n,a)))try{var i=this.canvasContext;i.beginPath(),s?(i.globalCompositeOperation="destination-out",i.arc(e,t,o,0,2*Math.PI,!1),i.fill()):(i.globalCompositeOperation="source-over",i.moveTo(e,t),i.lineTo(n,a),i.strokeStyle=r,i.fill(),i.lineWidth=o,i.lineCap=i.lineJoin="round",i.stroke()),i.closePath(),aa.push({x0:e,y0:t,x1:n,y1:a,color:r,isEraser:s,lineWidth:o})}catch(l){}}},{key:"throttle",value:function(e,t){var n=(new Date).getTime();return function(){var a=(new Date).getTime();a-n>=t&&(n=a,e.apply(null,arguments))}}},{key:"isAllowToDraw",value:function(e,t,n,a){var r=this.state.areas.find((function(r){var s=r.x0,o=r.y0,c=r.x1,i=r.y1;return e>=s&&t>=o&&n<=c&&a<=i}));return!!r&&(0===r.owner_id||r.owner_id===this.props.t.state.vk_user.id)}},{key:"render",value:function(){var e=this,t=this.state,n=this.props.t,a=t.isCompassActive,s=t.drawing,o=t.isFullCanvasShowed,i=t.fullCanvasData,l=t.lineWidth,u=t.isStroke;return r.a.createElement("div",{className:"GlobalCanvas"},ta?r.a.createElement("div",{className:"CircleButtonBack",onClick:function(){e.componentWillUnmount(),n.back()}},r.a.createElement(Gn.a,null)):r.a.createElement(c.s,{left:r.a.createElement(c.t,{onClick:function(){e.componentWillUnmount(),n.back()}}),separator:!1}),o&&r.a.createElement("img",{src:i,alt:"canvas"}),r.a.createElement("div",{className:"GlobalCanvas_canvas",ref:function(t){return e.canvas_container=t}},this.areas,r.a.createElement("canvas",{style:{cursor:a?s?"grabbing":"grab":"crosshair",display:o&&"none"},width:1595,height:1595,ref:function(t){return e.canvas=t},id:"canvas"})),r.a.createElement("div",{className:"NavigationBar"},r.a.createElement("div",{className:"Items"},this.navbar_items.map((function(e,t){var n=e.icon,a=e.onClick,s=e.selected;return r.a.createElement("div",{style:Xn({},s?{background:"#A4A6AA",color:"#F8F8F8"}:{background:"#F8F8F8",color:"#A4A6AA"}),key:"Item_".concat(t),onClick:a},n)}))),r.a.createElement("div",{className:"SubItems",style:{transition:"all 200ms",opacity:!u&&0,visibility:!u&&"hidden"}},r.a.createElement("div",null,r.a.createElement(c.A,{step:1,min:2,max:20,value:Number(l),onChange:function(t){return e.setState({lineWidth:t})}})))))}},{key:"navbar_items",get:function(){var e=this,t=this.state,n=this.props.t,a=t.isCompassActive,s=t.isEraser,o=t.isFullCanvasShowed,c=t.isStroke;return[{icon:r.a.createElement(Kn.a,{width:21,height:21}),onClick:function(){e.setState({isCompassActive:!a,isEraser:!1,isFullCanvasShowed:!1,isStroke:!1})},selected:a},{icon:r.a.createElement(Vn.a,{width:21,height:21}),onClick:function(){n.setPopout(e.alert_color)}},{icon:r.a.createElement(Ft,null),onClick:function(){e.setState({isEraser:!s,isCompassActive:!1,isFullCanvasShowed:!1})},selected:s},{icon:r.a.createElement(Ut,null),onClick:function(){e.setState({isStroke:!c,isCompassActive:!1,isFullCanvasShowed:!1})},selected:c},{icon:r.a.createElement(Yn.a,{width:21,height:21}),onClick:function(){var t=Object(p.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o?e.setState({fullCanvasData:null}):(n=e.canvas.toDataURL("image/png"),e.setState({fullCanvasData:n})),e.setState({isFullCanvasShowed:!o,isEraser:!1,isCompassActive:!1,isStroke:!1});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),selected:o},{icon:r.a.createElement(zn.a,{width:21,height:21}),onClick:function(){L("https://vk.me/join/DFIbwK_w537NhbqDIWPd8JjoW/qfkWn5tzk=")}},{icon:r.a.createElement(Qn.a,{width:21,height:21}),onClick:function(){e.componentWillUnmount(),n.go("global_canvas_info")}}]}},{key:"alert_color",get:function(){var e=this;return r.a.createElement(c.v,{onClick:function(){return e.props.t.setPopout(null)},onClose:function(){return e.props.t.setPopout(null)}},r.a.createElement(c.i,null,r.a.createElement(Hn.a,{color:this.state.color,onChange:function(t){return e.setState({color:t})}})))}},{key:"areas",get:function(){var e=this,t=this.state,n=t.areas,a=t.areas_time,s=t.isCompassActive,o=this.props.t;return console.log({isCompassActive:s}),r.a.createElement("div",{className:"Canvas_Areas",style:{transition:"all 200ms",opacity:!s&&0,visibility:!s&&"hidden"}},n.map((function(t,n){return r.a.createElement("div",{key:"area_".concat(n),style:{pointerEvents:s&&"none"}},0!==t.owner_id&&r.a.createElement(c.f,{size:48,shadow:!1,src:U[t.owner_id]&&U[t.owner_id].photo_100}),r.a.createElement("h1",{style:{marginTop:0!==t.owner_id&&2}},0===t.owner_id?"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c":t.owner_id===e.props.t.state.vk_user.id?"\u0422\u0432\u043e\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c":"\u0427\u0443\u0436\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c"),r.a.createElement("h3",{style:{marginTop:2}},0!==t.owner_id&&a[n]),0===t.owner_id&&r.a.createElement("div",{className:"CustomButton",onClick:function(){o.state.user.coins>=1e3?o.setPopout(r.a.createElement(c.d,{actions:[{title:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c",autoclose:!0,mode:"positive",action:function(){o.socket.call("canvas.rentArea",{area_id:t.id})}},{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],actionsLayout:"horizontal",onClose:function(){return o.setPopout(null)},header:"\u0410\u0440\u0435\u043d\u0434\u0430 \u043e\u0431\u043b\u0430\u0441\u0442\u0438",text:"\u0410\u0440\u0435\u043d\u0434\u0430 \u0441\u0442\u043e\u0438\u0442 1000 \u043c\u043e\u043d\u0435\u0442 \u043d\u0430 1 \u0447\u0430\u0441. \u041f\u0440\u043e\u0434\u043b\u0438\u0442\u044c \u0430\u0440\u0435\u043d\u0434\u0443 \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u043e\u0433\u0434\u0430, \u043a\u043e\u0433\u0434\u0430 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u0441\u044f \u0441\u0440\u043e\u043a (1 \u0447\u0430\u0441). \u0423 \u0412\u0430\u0441 ".concat(j(o.state.user.coins)," ").concat(S(o.state.user.coins,["\u043c\u043e\u043d\u0435\u0442\u0430","\u043c\u043e\u043d\u0435\u0442\u044b","\u043c\u043e\u043d\u0435\u0442"],!1),".")})):o.setPopout(r.a.createElement(c.d,{actions:[{title:"\u041e\u043a",autoclose:!0,mode:"cancel"}],actionsLayout:"horizontal",onClose:function(){return o.setPopout(null)},header:"\u0410\u0440\u0435\u043d\u0434\u0430 \u043e\u0431\u043b\u0430\u0441\u0442\u0438",text:"\u0422\u0435\u0431\u0435 \u043d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 ".concat(S(1e3-o.state.user.coins,["\u043c\u043e\u043d\u0435\u0442\u044b","\u043c\u043e\u043d\u0435\u0442\u044b","\u043c\u043e\u043d\u0435\u0442"]),".")}))}},"\u0430\u0440\u0435\u043d\u0434\u043e\u0432\u0430\u0442\u044c"))})))}}]),t}(a.PureComponent);ra.defaultProps={};var sa=ra;function oa(){return(oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ca(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ia=r.a.createElement("path",{d:"M3.84316 13.0355L5.96448 15.1568C6.74553 15.9378 8.01186 15.9378 8.79291 15.1568L11.6213 12.3284L6.67159 7.37862L3.84316 10.207C3.06211 10.9881 3.06211 12.2544 3.84316 13.0355Z",fill:"#A4A6AA"}),la=r.a.createElement("path",{d:"M3.31279 13.5658L5.43411 15.6872C6.50806 16.7611 8.24926 16.7611 9.3232 15.6872L15.6872 9.32321C16.7611 8.24926 16.7611 6.50806 15.6872 5.43412L13.5658 3.3128C12.4919 2.23886 10.7507 2.23886 9.67675 3.3128L3.31279 9.67676C2.23885 10.7507 2.23885 12.4919 3.31279 13.5658Z",stroke:"#A4A6AA",strokeWidth:1.5}),ua=function(e){var t=e.svgRef,n=e.title,a=ca(e,["svgRef","title"]);return r.a.createElement("svg",oa({width:20,height:20,viewBox:"0 0 20 20",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,ia,la)},pa=r.a.forwardRef((function(e,t){return r.a.createElement(ua,oa({svgRef:t},e))})),ma=(n.p,D()),da=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.s,{left:r.a.createElement(c.t,{onClick:e.back}),separator:!1},ma&&"\u041e\u0431\u0449\u0438\u0439 \u0445\u043e\u043b\u0441\u0442"),r.a.createElement("div",{className:"GlobalCanvasInfo",style:{paddingBottom:24}},!ma&&r.a.createElement("h2",{style:{textAlign:"left"}},"\u041e\u0431\u0449\u0438\u0439 \u0445\u043e\u043b\u0441\u0442"),r.a.createElement("p",{style:{margin:!ma&&"8px 0 0 0"}},"\u041d\u0430 \u043e\u0431\u0449\u0435\u043c \u0445\u043e\u043b\u0441\u0442\u0435 \u043c\u043e\u0433\u0443\u0442 \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0438\u0433\u0440\u043e\u043a\u0438. \u0420\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u043c\u043e\u0436\u043d\u043e \u043d\u0430 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438. \u0412\u0441\u0435\u0433\u043e \u0442\u0430\u043a\u0438\u0445 \u043e\u0431\u043b\u0430\u0441\u0442\u0435\u0439 25."),r.a.createElement("div",{className:"GlobalCanvas_Items__List"},[[r.a.createElement(Kn.a,{width:20,height:20}),"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u043f\u043e \u0445\u043e\u043b\u0441\u0442\u0443"],[r.a.createElement(Vn.a,{width:20,height:20}),"\u041c\u0435\u043d\u044e \u043f\u0430\u043b\u0438\u0442\u0440\u044b"],[r.a.createElement(pa,null),"\u041b\u0430\u0441\u0442\u0438\u043a \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u0442\u0438\u0440\u0430\u0442\u044c \u0440\u0438\u0441\u0443\u043d\u043e\u043a \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u043c \u043c\u0435\u0441\u0442\u0435"],[r.a.createElement(Yn.a,{width:20,height:20}),"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0435\u0441\u044c \u0445\u043e\u043b\u0441\u0442"],[r.a.createElement(zn.a,{width:20,height:20}),"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0447\u0430\u0442"]].map((function(e,t){return r.a.createElement("div",{key:"item_".concat(t)},e[0],r.a.createElement("span",null,e[1]))}))),r.a.createElement("p",{style:{margin:"18px 0 0 0"}},"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u0443\u044e \u043e\u0431\u043b\u0430\u0441\u0442\u044c \u043c\u043e\u0436\u043d\u043e \u0430\u0440\u0435\u043d\u0434\u043e\u0432\u0430\u0442\u044c (1000 \u043c\u043e\u043d\u0435\u0442 \u043d\u0430 \u0447\u0430\u0441). \u041d\u0430 \u0430\u0440\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043c\u043e\u0436\u0435\u0442 \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446. \u041f\u0440\u043e\u0434\u043b\u0438\u0442\u044c \u0430\u0440\u0435\u043d\u0434\u0443 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u2014 \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u043a\u0443\u043f\u0438\u0442\u044c \u0435\u0451 \u0441\u043d\u043e\u0432\u0430 \u043f\u043e \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044e \u0441\u0440\u043e\u043a\u0430.")))}}]),t}(a.PureComponent);da.defaultProps={};var fa=da;function ha(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ha(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ha(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(718)("./".concat(window.location.search.length>0&&"desktop_web"===JSON.parse('{"'+decodeURI(window.location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}').vk_platform?"Desktop":"Mobile",".css"));var ba,ga,ya=new cn,ka="1.1.6",Ea="outdated-version",wa="global-canvas",xa="friend-lobby-settings",Ca=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={isNotApp:!1,activePanel:"main",history:["main"],activeModal:null,modalHistory:[],colors:[["#ff0000","#ff9a00","#d0de21","#4fdc4a","#3fdad8","#2fc9e2","#1c7fee","#ba0cf8","#fb07d9","#ff0000"],"#000000","#FFFFFF","#E63902","#EA5A03","#FA8A00","#FBB101","#FDE401","#85B201","#019317","#019C8B","#035AA2","#00247A","#500A6D","#A9236B","#964B00","#F57C7C"],__v_clicks:0,online:0,drawerId:0,lobbyId:0,isOnlineDrawing:!0,bannersCount:9,banners:[],defaultBannerData:{title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",domain:"vk.com",trackingLink:"https://vk.com",ctaText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438",advertisingLabel:"\u0420\u0435\u043a\u043b\u0430\u043c\u0430",iconLink:"https://sun9-7.userapi.com/c846420/v846420985/1526c3/ISX7VF8NjZk.jpg",description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u043a\u043b\u0430\u043c\u044b",ageRestrictions:"14+",statistics:[{url:"",type:"playbackStarted"},{url:"",type:"click"}]},connected:!1,dataUpdated:!1,author_works:[],subGameInfo:{},watchedShopItems:[],boughtShopItems:[],user:{},friend_lobby:{}},n.componentDidMount=n.componentDidMount.bind(Object(b.a)(n)),n.updateData=n.updateData.bind(Object(b.a)(n)),n.back=function(){var e=n.state,t=e.history,a=e.popout,s=e.activeModal;if(null===a||void 0===a)return null!==s?(n.setState({activeModal:null}),void window.history.pushState({pop:"popout"},"Title")):void(t.length>1?("search"===t[t.length-1]&&(ya.call("games.search"),n.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return n.setState({snackbar:null})}},"\u041f\u043e\u0438\u0441\u043a \u0438\u0433\u0440\u044b \u043e\u0442\u043c\u0435\u043d\u0451\u043d")})),"friend_lobby"===t[t.length-1]&&ya.call("friends.leaveLobby",{owner_id:n.state.friend_lobby.owner_id}),t.pop(),n.setState({activePanel:t[t.length-1],history:t}),"search"!==t[t.length-1]&&n.setState({snackbar:null})):k.a.send("VKWebAppClose",{status:"success"}))},n.go=function(e){var t=n.state,a=t.history;null!==t.activeModal&&n.setState({activeModal:null,modalHistory:[]}),a[a.length-1]!==e&&(a.push(e),window.history.pushState({activePanel:e},"Title"),n.setState({activePanel:e,history:a,snackbar:null}))},n.setActivePanel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.setState({activePanel:e,history:[].concat(Object(m.a)(t),[e]),snackbar:null})},n.setActiveModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=n.state.modalHistory;null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),n.setState({activeModal:e,modalHistory:t})},n.setPopout=function(e){n.setState({popout:e})},n.socket=ya,n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,n,a,r,s,o,c,i,l=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(),window.addEventListener("popstate",(function(e){e.preventDefault(),l.back()})),k.a.subscribe(function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,r,s,o,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.detail,a=n.type,r=n.data,void 0===a){e.next=17;break}if("vk-connect"!==a||r){e.next=16;break}if(l.state.isNotApp){e.next=14;break}return e.next=6,l.setState({isNotApp:!0});case 6:document.body.style.width="660px",document.body.style.height="600px",document.body.style.position="absolute",document.body.style.top="50%",document.body.style.left="50%",document.body.style.transform="translate(-50%, -50%)",console.log("Log in as not app version"),l.componentDidMount();case 14:e.next=17;break;case 16:console.log(a,r);case 17:"VKWebAppUpdateConfig"===a?((s=document.createAttribute("scheme")).value=r.scheme?"client_light"===r.scheme?"bright_light":r.scheme:"bright_light",document.body.attributes.setNamedItem(s),o=document.documentElement.clientHeight,c=document.documentElement.clientWidth,i=100/812*(o>0?o:812)/100,document.body.style.setProperty("--scale-value",i),console.log("windowHeight = ".concat(document.documentElement.clientHeight)),document.body.setAttribute("_width",c),document.body.setAttribute("_height",o)):"VKWebAppViewRestore"===a&&(l.setState({popout:null}),"global_canvas"===l.state.activePanel&&setTimeout((function(){return document.body.setAttribute("scheme","bright_light")}),500));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t=this.state.isNotApp,e.t0=!t,!e.t0){e.next=10;break}return e.next=8,k.a.send("VKWebAppStorageGet",{keys:["onboard"]});case 8:e.t1=e.sent.keys[0].value,e.t0=""===e.t1;case 10:if(n=e.t0,e.t2=!t,!e.t2){e.next=17;break}return e.next=15,k.a.send("VKWebAppStorageGet",{keys:["vk_group1"]});case 15:e.t3=e.sent.keys[0].value,e.t2=""===e.t3;case 17:if(a=e.t2,e.t4=!t,!e.t4){e.next=24;break}return e.next=22,k.a.send("VKWebAppStorageGet",{keys:["update_01062022"]});case 22:e.t5=e.sent.keys[0].value,e.t4=""===e.t5;case 24:if(r=e.t4,e.t6=!t,!e.t6){e.next=31;break}return e.next=29,k.a.send("VKWebAppStorageGet",{keys:["canvas_new_mode"]});case 29:e.t7=e.sent.keys[0].value,e.t6=""===e.t7;case 31:if(s=e.t6,e.t8=!t,!e.t8){e.next=38;break}return e.next=36,k.a.send("VKWebAppStorageGet",{keys:["canvas_new_mode_onboard"]});case 36:e.t9=e.sent.keys[0].value,e.t8=""===e.t9;case 38:if(o=e.t8,e.t10=!t,!e.t10){e.next=44;break}return e.next=43,k.a.send("VKWebAppGetUserInfo");case 43:e.t10=e.sent;case 44:return c=e.t10,e.next=47,K([c?c.id:A().vk_user_id]);case 47:return i=e.sent,e.next=50,this.setState({isShowOnboard:n,isShowVkGroup:a,isShowGlobalCanvasOnboard:o,isShowGlobalCanvas:s,vk_user:c||i[0]});case 50:return k.a.send("VKWebAppEnableSwipeBack"),this.connect(),ya.subscribe("exit",(function(e){l.setState({placeholderText:e.title,banned:e.banned}),l.setPopout(null),e.banned?(l.setState({placeholderNeed:2}),l.setActivePanel("banned")):(l.setState({placeholderNeed:1}),l.setActivePanel("placeholder")),k.a.send("VKWebAppInit")})),ya.subscribe("app_version",(function(e){l.setState({app_version:e.app_version})})),ya.onConnectionError((function(e){console.error(e),l.setState({placeholderText:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443.",placeholderNeed:1}),l.setPopout(null),l.setActivePanel("placeholder"),k.a.send("VKWebAppInit")})),ya.onDisconnect((function(){l.setPopout(null),2!==l.state.placeholderNeed&&(l.setState({placeholderText:""}),l.setActivePanel("placeholder")),k.a.send("VKWebAppInit")})),e.next=58,new Promise((function(e){return ya.onConnect(Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.setState({connected:!0,placeholderNeed:0});case 2:return console.log("Connected"),l.setActivePanel("main"),t.next=6,l.updateData();case 6:a&&!n?setTimeout((function(){l.go("group_vk")}),1e3):r&&!n?setTimeout((function(){l.setActiveModal("new-update")}),1e3):n||l.onChangeHash(),e(!0);case 8:case"end":return t.stop()}}),t)}))))}));case 58:clearInterval(ba),ba=setInterval((function(){for(var e=l.state,t=e.banners,n=e.bannersCount,a=function(e){k.a.send("VKWebAppGetAds",{}).then((function(n){!1!==t[e]&&(t[e]=n)}))},r=0;r<n;r++)a(r);l.setState({banners:t})}),3e3),k.a.send("VKWebAppInit"),N("stats.join");case 62:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=this;ya.connect("https://draw.avocado.special.vk-apps.com",A()),setTimeout((function(){e.state.dataUpdated||e.updateData(),e.state.connected||(clearInterval(ga),ga=setInterval((function(){e.state.connected?clearInterval(ga):ya.connect("https://draw.avocado.special.vk-apps.com",A())}),1e3))}),1e3)}},{key:"updateData",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){ya.call("users.getTopNumber",{},(function(e){t.setState({top_number:e.response})})),ya.call("users.getTop",{},function(){var e=Object(p.a)(u.a.mark((function e(n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.response.map((function(e){return e.id})),e.next=3,K(a);case 3:t.setState({top:n.response.map((function(e){return va({},U[e.id],{},e)}))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ya.call("users.get",{},(function(n){t.setState({user:n.response}),ya.call("games.getByDrawerId",{id:t.state.vk_user.id,limit:10},(function(n){t.setState({gamesAsDrawer:n.response});var a=n.response.map((function(e){return e.drawerId}));ya.call("games.getByWinnerId",{id:t.state.vk_user.id,limit:10},(function(n){K(a=[].concat(Object(m.a)(a),Object(m.a)(n.response.map((function(e){return e.drawerId}))))),setTimeout(Object(p.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.setState({gamesAsWinner:n.response,dataUpdated:!0});case 2:e(!0);case 3:case"end":return a.stop()}}),a)}))),400)}))}))}))}));case 2:return this.setState({time:Date.now()}),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onChangeHash",value:function(){var e=this;if(window.location.hash.startsWith("#"))for(var t=window.location.hash.substring(1),n=0,a=[{key:"author",do:function(t){e.setPopout(r.a.createElement(c.x,null)),e.socket.call("users.getById",{id:t},function(){var n=Object(p.a)(u.a.mark((function n(a){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===a.response){n.next=8;break}return n.next=3,K([t]);case 3:return n.next=5,e.setState({author:a.response});case 5:e.socket.call("games.getByDrawerId",{id:t},function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({author_works:n.response});case 2:setTimeout((function(){e.go("author"),e.setPopout(null)}),400);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.next=9;break;case 8:e.setPopout(null);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"picture",do:function(){var t=Object(p.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a=parseInt(n),e.setPopout(r.a.createElement(c.x,null)),e.socket.call("games.getById",{id:a},function(){var t=Object(p.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===n.response){t.next=9;break}return a=n.response.drawerId,t.next=4,K([a]);case 4:return t.next=6,e.setState({gamesAsAuthor:[n.response],like_currentPictureSelected:0,like_method:"",like_param:"gamesAsAuthor",like_user_id:a});case 6:setTimeout((function(){e.go("picture_info"),e.setPopout(null)}),400),t.next=10;break;case 9:e.setPopout(null);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(s){console.error(s)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"lobby",do:function(t){e.setPopout(r.a.createElement(c.x,null)),e.socket.call("friends.joinLobby",{owner_id:parseInt(t),url:!0},function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.response){t.next=8;break}return t.next=3,K(n.response.members);case 3:return t.next=5,e.setState({friend_lobby:n.response});case 5:setTimeout((function(){e.go("friend_lobby"),e.setPopout(null)}),400),t.next=9;break;case 8:e.setPopout(null);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}];n<a.length;n++){var s=a[n];t.startsWith(s.key)&&s.do(t.substring(s.key.length))}}},{key:"_tags",value:function(){return[["tag_interesting",r.a.createElement(Q.a,null),"\u0418\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u0440","\u041c\u0435\u0442\u043a\u0430 \u0432\u044b\u0434\u0430\u0451\u0442\u0441\u044f \u043f\u0440\u0438 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0438 1000 \u043b\u0430\u0439\u043a\u043e\u0432"],["tag_rater",r.a.createElement(H.a,null),"\u041e\u0446\u0435\u043d\u0449\u0438\u043a","\u041e\u0446\u0435\u043d\u0438\u0442\u044c 100 \u043a\u0430\u0440\u0442\u0438\u043d"],["tag_agitator",r.a.createElement(Z.a,null),"\u0410\u0433\u0438\u0442\u0430\u0442\u043e\u0440","\u0420\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u043e \u0441\u0432\u043e\u0438\u0445 \u0440\u0430\u0431\u043e\u0442\u0430\u0445 \u0434\u0440\u0443\u0437\u044c\u044f\u043c (10 \u0440\u0430\u0437)"],["tag_rapidfire",r.a.createElement(X.a,null),"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u0440\u0435\u043b","\u041c\u0435\u0442\u043a\u0430 \u0432\u044b\u0434\u0430\u0451\u0442\u0441\u044f \u0437\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u0443, \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043d\u043d\u0443\u044e \u0438 \u0443\u0433\u0430\u0434\u0430\u043d\u043d\u0443\u044e \u0437\u0430 5 \u0441\u0435\u043a\u0443\u043d\u0434"],["tag_turtle",r.a.createElement(J.a,{width:20,height:20}),"\u0427\u0435\u0440\u0435\u043f\u0430\u0445\u0430","\u041c\u0435\u0442\u043a\u0430 \u0432\u044b\u0434\u0430\u0451\u0442\u0441\u044f \u0437\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u0443, \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043d\u043d\u0443\u044e \u0438 \u0443\u0433\u0430\u0434\u0430\u043d\u043d\u0443\u044e \u0437\u0430 85-90 \u0441\u0435\u043a\u0443\u043d\u0434"],["tag_creative",r.a.createElement(q.a,null),"\u041a\u0440\u0435\u0430\u0442\u0438\u0432\u043d\u044b\u0439","\u041c\u0435\u0442\u043a\u0430 \u0432\u044b\u0434\u0430\u0451\u0442\u0441\u044f \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0435\u0439, \u0435\u0441\u043b\u0438 \u0442\u0430 \u043f\u043e\u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u0442\u0432\u043e\u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u044b \u043a\u0440\u0435\u0430\u0442\u0438\u0432\u043d\u044b\u043c\u0438"],["tag_banned",r.a.createElement($.a,null),"\u041d\u0430\u0440\u0443\u0448\u0438\u0442\u0435\u043b\u044c","\u041c\u0435\u0442\u043a\u0430 \u0441\u0432\u0438\u0434\u0435\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0443\u0435\u0442 \u043e \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0438 \u043f\u0440\u0430\u0432\u0438\u043b \u0438\u0433\u0440\u044b"]]}},{key:"_tag_modal",value:function(e){var t=this,n=this._tags().find((function(t){return t[0]===e}));return r.a.createElement(c.n,{key:e,id:e,onClose:function(){return t.setActiveModal(null)},icon:r.a.cloneElement(n[1],{width:56,height:56}),header:n[2],subheader:n[3],actions:r.a.createElement(c.g,{size:"l",mode:"gradient_blue",onClick:function(){return t.go("tags")}},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")})}},{key:"isNonScrollingElement",value:function(e){return["global_canvas","search"].indexOf(e)>-1}},{key:"render",value:function(){var e=this,t=this.state,a=t.activePanel,s=t.activeModal,o=t.popout,i=t.snackbar,l=t.isShowOnboard,m=(t.isShowVkGroup,t.vk_user),d=t.user,f=t.banned,h=t.placeholderText,v=t.gamesAsWinner,b=t.gamesAsDrawer,g=t.drawerId,y=t.winnerId,E=t.lobbyId,w=t.gameId,x=t.word,C=(t.like_picturesList,t.like_currentPictureSelected),O=t.like_method,_=t.like_param,S=t.like_user_id,j=t.isOnlineDrawing,P=t.friend_lobby,A=t.watchedShopItems,F=t.boughtShopItems,M=!(m&&d&&v&&b),B=r.a.createElement(c.q,{activeModal:s},this._tags().map((function(t){return e._tag_modal(t[0])})),r.a.createElement(c.n,{id:"play-mode",onClose:function(){return e.setActiveModal(null)},icon:r.a.createElement(ee.a,null),header:"\u041a\u0430\u043a\u0443\u044e \u0438\u0433\u0440\u0443 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c?",actionsLayout:"horizontal",actions:[r.a.createElement(c.g,{size:"l",mode:"gradient_blue",onClick:function(){return e.go("search")}},"\u041e\u0431\u044b\u0447\u043d\u0430\u044f"),r.a.createElement(c.g,{size:"l",mode:"gradient_violet",onClick:function(){return e.go("friends")}},"\u0421 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438")]}),r.a.createElement(c.n,{id:"new-update",onClose:function(){return e.setActiveModal(null)},icon:r.a.createElement(te.a,null),header:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435",subheader:"\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u0432\u043d\u0435\u0441\u0435\u043d\u0438\u0435 \u043f\u043e\u043f\u0440\u0430\u0432\u043e\u043a \u0432 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0438\u0433\u0440\u044b.",actions:r.a.createElement(c.g,{size:"l",mode:"gradient_violet",onClick:function(){k.a.send("VKWebAppStorageSet",{key:"update_01062022",value:"1"}),e.setActiveModal(null),L("https://vk.com/@draw_app-update-01-06-2022")}},"\u0427\u0438\u0442\u0430\u0442\u044c")}),r.a.createElement(c.n,{id:wa,onClose:function(){return e.setActiveModal(null)},icon:r.a.createElement(ne.a,null),header:"\u041d\u043e\u0432\u044b\u0439 \u0440\u0435\u0436\u0438\u043c",subheader:"\u0414\u0430\u0432\u0430\u0439 \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0443\u0447\u0438\u043c\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u0433\u043e\u0434\u044f\u0442\u0441\u044f \u0432 \u044d\u0442\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435.",actions:r.a.createElement(c.g,{size:"l",mode:"gradient_blue",onClick:function(){k.a.send("VKWebAppStorageSet",{key:"canvas_new_mode_onboard",value:"1"}),e.setState({isShowGlobalCanvasOnboard:!1}),e.setActiveModal(null),e.go("global_canvas_info")}},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0435")}),r.a.createElement(c.n,{id:Ea,onClose:function(){return e.setActiveModal(null)},icon:r.a.createElement(ae.a,{fill:"#E63902"}),header:"\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435",subheader:"\u0412\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 \u0443\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u043c\u0438\u043d\u0438-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. ".concat(I()?"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435 \u0447\u0435\u0440\u0435\u0437 App Store.":"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u044d\u0448 (\u0447\u0435\u0440\u0435\u0437 \u0442\u0440\u0438 \u0442\u043e\u0447\u043a\u0438 \u0441\u043f\u0440\u0430\u0432\u0430).")}),r.a.createElement(c.o,{id:xa,onClose:function(){return e.setActiveModal(null)},dynamicContentHeight:!0,header:r.a.createElement(c.p,{right:r.a.createElement(c.u,{onClick:function(){return e.setActiveModal(null)}},r.a.createElement(re.a,null))},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")},r.a.createElement(c.i,{style:{paddingBottom:24}},r.a.createElement("div",{className:"Span"},"\u0412\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u043b\u043e\u0431\u0431\u0438"),r.a.createElement(c.y,{style:{marginTop:8},value:P.friendsOnly?"private":"public",onChange:function(t){P.friendsOnly="private"===t,e.setState({friend_lobby:P}),ya.call("friends.changeVisibility",{friendsOnly:P.friendsOnly})},options:[{label:"\u0414\u043b\u044f \u0432\u0441\u0435\u0445",value:"public"},{label:"\u0414\u043b\u044f \u0434\u0440\u0443\u0437\u0435\u0439",value:"private"}]}),(d.premium||d.admin)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Span",style:{marginTop:12}},"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b-\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432"),r.a.createElement(c.m,{style:{marginTop:8},placeholder:"\u0427\u0438\u0441\u043b\u043e (\u043c\u0430\u043a\u0441 500)",type:"number",defaultValue:20,min:2,max:500,onChange:function(e){ya.call("friends.changeMaxPlayers",{count:e.currentTarget.value})}})),!P.friendsOnly&&r.a.createElement(c.g,{style:{marginTop:12,width:"100%"},before:r.a.createElement(se.a,null),size:"m",mode:"gradient_gray",stretched:!0,onClick:Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.send("VKWebAppShare",{link:"https://vk.com/drawapp#lobby".concat(d.id)});case 3:t.next=10;break;case 5:t.prev=5,t.t0=t.catch(0),k.a.send("VKWebAppCopyText",{text:"https://vk.com/drawapp#lobby".concat(d.id)}),e.setActiveModal(null),e.setState({snackbar:r.a.createElement(c.B,{onClose:function(){return e.setState({snackbar:null})}},"\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430")});case 10:case"end":return t.stop()}}),t,null,[[0,5]])})))},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u0438\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435"))));return r.a.createElement(c.D,{popout:o,modal:B},r.a.createElement(c.C,{animate:!D()},r.a.createElement(c.F,{style:{overflow:this.isNonScrollingElement(a)&&"hidden"},activePanel:"placeholder"!==a&&"banned"!==a?M?"connecting":l?"onboard":a:a,onSwipeBack:this.back,history:this.state.history},[{id:"onboard",component:r.a.createElement(rn,{icon:r.a.createElement(Te,null),title:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c",description:"\u0417\u0434\u0435\u0441\u044c \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0447\u0443\u0432\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0431\u044f \u0432 \u0440\u043e\u043b\u0438 \u043a\u0430\u043a \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a\u0430, \u0442\u0430\u043a \u0438 \u0428\u0435\u0440\u043b\u043e\u043a\u0430. \u0420\u0438\u0441\u0443\u0439\u0442\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u044b \u0438 \u0443\u0433\u0430\u0434\u044b\u0432\u0430\u0439\u0442\u0435 \u0447\u0443\u0436\u0438\u0435.",buttonIcon:r.a.createElement(oe.a,{width:16,height:16}),buttonText:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c",buttonOnClick:function(){k.a.send("VKWebAppStorageSet",{key:"onboard",value:"1"}),e.setState({isShowOnboard:!1})}})},{id:"connecting",component:r.a.createElement(rn,{icon:r.a.createElement(Te,null),title:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435",description:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443..."})},{id:"placeholder",component:r.a.createElement(rn,{icon:r.a.createElement(at,null),title:"\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u043e",description:h,buttonText:"\u041f\u0435\u0440\u0435\u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f",buttonOnClick:function(){e.connect()}})},{id:"main",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(vt,{t:this,time:this.state.time}),i)},{id:"shop",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(Un,{t:this,watchedShopItems:A,boughtShopItems:F}),i)},{id:"stats",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(Nn,{t:this}),i)},{id:"gallery",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(gt,{t:this}),i)},{id:"rating",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(Et,{t:this}),i)},{id:"likes",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(un,{t:this}),i)},{id:"picture_info",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(yn,{t:this,current:C,method:O,param:_,user_id:S}),i)},{id:"author",component:r.a.createElement(En,{t:this})},{id:"search",component:r.a.createElement(xt,{t:this})},{id:"game",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(Jt,{t:this,drawerId:g,lobbyId:E,online:j,word:x}),i)},{id:"global_canvas",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(sa,{t:this}),i)},{id:"global_canvas_info",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(fa,{t:this}),i)},{id:"result",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(nn,{t:this,drawerId:g,winnerId:y,word:x,gameId:w}),i)},{id:"tags",component:r.a.createElement(Cn,{t:this})},{id:"friends",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(Sn,{t:this}),i)},{id:"friend_lobby",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(In,{t:this,friend_lobby:P}),i)},{id:"group_vk",component:r.a.createElement(rn,{icon:r.a.createElement("img",{src:n(304),alt:"icon"}),title:"\u0421 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435\u043c!",description:"\u041d\u0435 \u0445\u043e\u0447\u0435\u0448\u044c \u0432\u0441\u0442\u0443\u043f\u0438\u0442\u044c \u0432 \u043d\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435? \u0418\u043c\u0435\u043d\u043d\u043e \u0442\u0430\u043c \u043f\u0443\u0431\u043b\u0438\u043a\u0443\u044e\u0442\u0441\u044f \u0432\u0441\u0435 \u043a\u0440\u0443\u0442\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f",buttonText:"\u0412\u0441\u0442\u0443\u043f\u0438\u0442\u044c",buttonOnClick:Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k.a.send("VKWebAppStorageSet",{key:"vk_group1",value:"1"}),e.setState({isShowVkGroup:!1}),t.prev=2,t.next=5,k.a.send("VKWebAppJoinGroup",{group_id:208964042});case 5:N("stats.subscribe",{group_id:208964042}),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(2);case 10:e.back();case 11:case"end":return t.stop()}}),t,null,[[2,8]])}))),buttonMode:"gradient_gray",buttonBack:!0,t:this})},{id:"vk_donut",component:r.a.createElement(rn,{icon:r.a.createElement("img",{src:n(305),alt:"icon"}),title:"VK Donut",description:"\u0427\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u044f\u043c, \u043e\u0444\u043e\u0440\u043c\u0438\u0442\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0443.",buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438",buttonOnClick:function(){L("https://vk.com/donut/draw_app")},buttonMode:"gradient_donut",buttonBack:!0,t:this})},{id:"vk_donut_ios",component:r.a.createElement(rn,{icon:r.a.createElement("img",{src:n(305),alt:"icon"}),title:"VK Donut",description:"\u0414\u043b\u044f \u0443\u0442\u043e\u0447\u043d\u0435\u043d\u0438\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438, \u043d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043d\u0430\u043c \u0432 \u0433\u0440\u0443\u043f\u043f\u0443 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435.",buttonText:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c",buttonOnClick:function(){L("https://vk.com/draw_app")},buttonMode:"gradient_donut",buttonBack:!0,t:this})},{id:"banned",component:r.a.createElement(rn,{icon:r.a.createElement("img",{src:n(304),alt:"icon"}),title:"\u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430",description:"\u0412\u044b \u0431\u044b\u043b\u0438 \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0437\u0430 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b. \u0414\u0430\u0442\u0430 \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438: ".concat(new Date(f+864e5).toLocaleDateString("ru",{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric"})),buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0433\u0440\u0443\u043f\u043f\u0443",buttonOnClick:function(){L("https://vk.com/club208964042")},buttonMode:"gradient_gray",t:this})}].map((function(e,t){var n=e.id,a=e.component;return r.a.createElement(c.r,{id:n,key:"Panel__".concat(t)},a)})))))}}]),t}(r.a.Component);o.a.render(r.a.createElement(c.h,null,r.a.createElement(c.c,null,r.a.createElement(c.e,null,r.a.createElement(Ca,null)))),document.getElementById("root"))}},[[391,1,2]]]);
//# sourceMappingURL=main.1118b56b.chunk.js.map