{"version":3,"sources":["assets/drawing/stories/Story1.png","assets/drawing/stories/Story2.png","assets/drawing/stories sync /^/Story.*/.png$","assets/drawing/stories/Story3.png","css/Drawing lazy /^/.*/.css$/ groupOptions: {} namespace object","js/utils.js","assets/drawing/icons/Icon.svg","assets/drawing/icons/IconError.svg","apps/Drawing/Main.js","apps/Drawing/Gallery.js","apps/Drawing/Rating.js","apps/Drawing/Search.js","assets/drawing/icons/IconErase.svg","apps/Drawing/Game.js","apps/Drawing/Result.js","apps/Drawing/Placeholder.js","js/socket.js","apps/Drawing/Drawing.js","index.js"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","webpackAsyncContext","Promise","then","ids","all","slice","t","defaultFonts","loadFonts","fonts","font","span","document","createElement","style","fontFamily","innerText","body","appendChild","setTimeout","remove","decOfNum","number","titles","needNumber","undefined","decCache","Math","min","getUrlParams","window","location","search","length","JSON","parse","decodeURI","substring","replace","isPlatformDesktop","vk_platform","vk_local_users","name_cases","getVKUsers","a","user_ids","Set","filter","value","i","floor","users","j","vkApiRequest","join","fields","concat","user","find","key","screen_name","method","params","bridge","send","v","access_token","response","getSrcUrl","resource","origin","pathname","getBase64Image","imageUri","canvas","ctx","getContext","img","Image","src","crossOrigin","onload","width","this","height","drawImage","toDataURL","_extends","assign","target","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","fillRule","clipRule","d","fill","_ref6","_ref7","cx","cy","rx","ry","_ref8","r","stroke","strokeWidth","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","_ref24","_ref25","_ref26","_ref27","_ref28","_ref29","_ref","svgRef","title","props","viewBox","ref","ForwardRef","forwardRef","Main","state","lvl","pictures","successfulPictures","guessedPictures","gamesAsWinner","gamesAsDrawer","top_number","offset","colors","max","className","vk_user","photo_100","size","shadow","first_name","index","marginLeft","background","border","onClick","go","num","alt","PureComponent","defaultProps","Gallery","limit","canGetMore","prevY","observer","IntersectionObserver","handleObserver","bind","root","rootMargin","threshold","observe","loadingRef","entities","y","boundingClientRect","socket","setState","forceUpdate","word","gameId","pic","setPopout","require","createCanvas","loadImage","canvasData","toUpperCase","textAlign","fillStyle","fillText","background_type","blob","attachment","url","vk_app_id","text","type","isDesktop","Fragment","left","back","separator","margin","marginTop","gridGap","shareStory","Rating","console","log","top","last_name","sex","guessedPicturesToday","Search","lobbyPlayers","unsubscribe","subscribe","players","lobbyId","drawerId","gameStart","Date","now","xmlns","x","x1","y1","x2","y2","strokeDasharray","transform","gradientUnits","stopColor","patternContentUnits","href","photo_max_orig","interval","current","Game","drawer","isDrawer","selectedColor","drawing","time","messages","onMouseDown","onMouseUp","throttle","onMouseMove","drawLine","setInterval","winnerId","canvas_","gameEnd","data","x0","y0","color","canvasContext","clearRect","user_id","message","comments","getElementsByClassName","scrollIntoView","clearInterval","addEventListener","clientX","touches","clientY","canvasRect","getBoundingClientRect","er","beginPath","moveTo","lineTo","strokeStyle","lineWidth","closePath","callback","delay","previousCall","getTime","alignSelf","display","justifyContent","nom","outline","opacity","pointerEvents","hasHover","replaceAll","onClose","iosCloseItem","autoclose","mode","onChange","currentTarget","placeholder","onKeyDown","Result","isWinner","updateData","setActivePanel","round","before","Placeholder","icon","description","buttonText","buttonIcon","buttonOnClick","React","cloneElement","after","Socket","onConnect","onDisconnect","onConnectionError","getSocket","on","emit","event","events","removeAllListeners","query","connect","openSocket","path","transports","reconnection","Drawing","activePanel","history","componentDidMount","popout","pop","snackbar","status","panel","push","pushState","preventDefault","detail","schemeAttribute","createAttribute","scheme","attributes","setNamedItem","isShowOnboard","placeholderText","error","component","Component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.92ae85fa.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Story1.c1713922.png\";","module.exports = __webpack_public_path__ + \"static/media/Story2.28d56ba9.png\";","var map = {\n\t\"./Story1.png\": 265,\n\t\"./Story2.png\": 266,\n\t\"./Story3.png\": 669\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 668;","module.exports = __webpack_public_path__ + \"static/media/Story3.2f47cccb.png\";","var map = {\n\t\"./Desktop.css\": [\n\t\t694,\n\t\t3\n\t],\n\t\"./Global.css\": [\n\t\t192\n\t],\n\t\"./Mobile.css\": [\n\t\t695,\n\t\t4\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 692;\nmodule.exports = webpackAsyncContext;","import {default as bridge} from '@vkontakte/vk-bridge';\r\n\r\nexport function convertTextToLines(text, font, max_width) {\r\n    const\r\n        {createCanvas} = require('canvas'),\r\n        canvas = createCanvas(1080, 1920),\r\n        ctx = canvas.getContext('2d')\r\n    ;\r\n    ctx.font = font;\r\n    let width = 0, lines = [], result, i, j;\r\n\r\n    while (text.length) {\r\n        for (i = text.length; ctx.measureText(text.substr(0, i)).width > max_width; i--) ;\r\n        result = text.substr(0, i);\r\n\r\n        if (i !== text.length)\r\n\r\n            for (j = 0; result.indexOf(' ', j) !== -1; j = result.indexOf(' ', j) + 1) ;\r\n        lines.push(result.substr(0, j || result.length));\r\n\r\n        width = Math.max(width, ctx.measureText(lines[lines.length - 1]).width);\r\n        text = text.substr(lines[lines.length - 1].length, text.length);\r\n    }\r\n\r\n    return lines;\r\n}\r\n\r\nexport async function get(url, params) {\r\n    const\r\n        query = params ? '?' + Object.keys(params).map((value) =>\r\n            encodeURIComponent(value) + '=' + encodeURIComponent(params[value])\r\n        ).join('&') : '',\r\n        url_ = `${url}${query}`;\r\n    return await new Promise((res, rej) => {\r\n        fetch(url_, {method: 'GET'})\r\n            .then(res =>\r\n                res.json()\r\n            )\r\n            .then(answer =>\r\n                res(answer)\r\n            ).catch(err =>\r\n            res({error: {code: -1, text: err.toString()}})\r\n        );\r\n    });\r\n}\r\n\r\nexport const defaultFonts = [\r\n    'SF Pro Text',\r\n    'SF Pro Text Heavy',\r\n    'SF Pro Text Semibold',\r\n    'SF Pro Display',\r\n    'SF Pro Display Bold',\r\n    'SF Pro Display Semibold',\r\n    'SF Pro Display Medium',\r\n    'SF Pro Rounded',\r\n    'SF Pro Rounded Semibold',\r\n    'SF Pro Rounded Bold',\r\n    'SF UI Display',\r\n    'SF UI Text',\r\n    'TT Commons',\r\n    'TT Commons Bold',\r\n    'TT Commons Demibold',\r\n    'Manrope ExtraBold'\r\n];\r\n\r\nexport function loadFonts(fonts = defaultFonts) {\r\n    for (const font of fonts) {\r\n        const span = document.createElement('span');\r\n        span.style.fontFamily = font;\r\n        span.innerText = '.';\r\n        document.body.appendChild(span);\r\n        setTimeout(() => span.remove(), 1);\r\n    }\r\n}\r\n\r\nexport function animateValue(obj, start, end, duration) {\r\n    if (start === end || end - start === 1) {\r\n        obj.innerHTML = end;\r\n    } else {\r\n        let startTimestamp = null;\r\n        const step = (timestamp) => {\r\n            if (!startTimestamp) startTimestamp = timestamp;\r\n            const progress = Math.min((timestamp - startTimestamp) / duration, 1);\r\n            obj.innerHTML = Math.floor(progress * (end - start) + start);\r\n            if (progress < 1) {\r\n                window.requestAnimationFrame(step);\r\n            }\r\n        };\r\n        window.requestAnimationFrame(step);\r\n    }\r\n}\r\n\r\nexport function cps(array) {\r\n    if (array.length !== 0) {\r\n        let\r\n            first_date = array[0],\r\n            cur_pos = 0,\r\n            clicks_per_second = []\r\n        ;\r\n        array = array.map(value => value - first_date);\r\n\r\n        for (const click of array) {\r\n            cur_pos = click < 1000 ? 0 : parseInt((click + '').substring(0, (click + '').length - 3));\r\n            clicks_per_second[cur_pos] = clicks_per_second[cur_pos] > 0 ? clicks_per_second[cur_pos] + 1 : 1;\r\n        }\r\n\r\n        clicks_per_second = clicks_per_second.filter(value => value > 0);\r\n\r\n        const\r\n            max_cps = Math.max(...clicks_per_second),\r\n            min_cps = Math.min(...clicks_per_second),\r\n            mid_cps = Math.ceil((max_cps + min_cps) / 2)\r\n        ;\r\n        return {max_cps, min_cps, mid_cps};\r\n    } else {\r\n        return {max_cps: 0, min_cps: 0, mid_cps: 0};\r\n    }\r\n}\r\n\r\nfunction componentToHex(c) {\r\n    const hex = c.toString(16);\r\n    return hex.length == 1 ? '0' + hex : hex;\r\n}\r\n\r\nexport function rgbToHex(r, g, b) {\r\n    return '#' + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n}\r\n\r\nexport function sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport function decOfNum(number, titles, needNumber = true) {\r\n    if (number !== undefined) {\r\n        let decCache = [],\r\n            decCases = [2, 0, 1, 1, 1, 2];\r\n        if (!decCache[number]) decCache[number] = number % 100 > 4 && number % 100 < 20 ? 2 : decCases[Math.min(number % 10, 5)];\r\n        return (needNumber ? number + ' ' : '') + titles[decCache[number]];\r\n    }\r\n}\r\n\r\nexport function numToStr(number) {\r\n    if (number > 0 && number <= 10) {\r\n        const words = [\r\n            'первое', 'второе', 'третье', 'четвертое', 'пятое', 'шестое', 'седьмое', 'восьмое', 'девятое', 'десятое'\r\n        ];\r\n        return words[number - 1];\r\n    } else {\r\n        return number + '';\r\n    }\r\n}\r\n\r\nexport function shortIntegers(int) {\r\n    try {\r\n        return int.toString().replace(/(\\d)(?=(\\d\\d\\d)+([^\\d]|$))/g, '$1 ');\r\n    } catch (e) {\r\n        return 0;\r\n    }\r\n}\r\n\r\nexport function getRandomInt(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nexport function getRandomInts(min, max, count) {\r\n    const array = [];\r\n    for (let i = 0; i < count; i++) {\r\n        const int = getRandomInt(min, max);\r\n        if (array.indexOf(int) === -1) {\r\n            array.push(int);\r\n        } else {\r\n            if (max >= count)\r\n                i--;\r\n            else\r\n                array.push(int);\r\n        }\r\n    }\r\n    return array;\r\n}\r\n\r\nexport function nodeToString(node) {\r\n    let tmpNode = document.createElement(\"div\");\r\n    tmpNode.appendChild(node.cloneNode(true));\r\n    let str = tmpNode.innerHTML;\r\n    tmpNode = node = null;\r\n    return str;\r\n}\r\n\r\nexport function convertMiliseconds(miliseconds) {\r\n    let hours, minutes, total_hours, total_minutes, total_seconds;\r\n\r\n    total_seconds = parseInt(Math.floor(miliseconds / 1000));\r\n    total_minutes = parseInt(Math.floor(total_seconds / 60));\r\n    total_hours = parseInt(Math.floor(total_minutes / 60));\r\n\r\n    minutes = parseInt(total_minutes % 60);\r\n    hours = parseInt(total_hours % 24);\r\n\r\n    return hours + 'ч. ' + minutes + 'мин.';\r\n}\r\n\r\nexport function convertMsToNormalTime(miliseconds) {\r\n    let hours, minutes, seconds, total_hours, total_minutes, total_seconds;\r\n\r\n    total_seconds = parseInt(Math.floor(miliseconds / 1000));\r\n    total_minutes = parseInt(Math.floor(total_seconds / 60));\r\n    total_hours = parseInt(Math.floor(total_minutes / 60));\r\n\r\n    seconds = parseInt(total_seconds % 60);\r\n    minutes = parseInt(total_minutes % 60);\r\n    hours = parseInt(total_hours % 24);\r\n\r\n    return {hours, minutes, seconds};\r\n}\r\n\r\nconst getImage = (src) =>\r\n    new Promise((res, rej) => {\r\n        const image = new Image();\r\n\r\n        image.onload = () => res(image);\r\n        image.crossOrigin = 'anonymous';\r\n        image.onstalled = (e) => {\r\n            console.log('Failed to fetch data, but trying.', e);\r\n            rej(e);\r\n        };\r\n        image.onerror = (e) => {\r\n            console.log('Failed to fetch data, error.', e);\r\n            rej(e);\r\n        };\r\n        image.src = src;\r\n    });\r\n\r\nexport async function toBlob(object, dataUrl = true) {\r\n    const\r\n        myCanvas = document.createElement('canvas'),\r\n        ctxt = myCanvas.getContext('2d');\r\n\r\n    let base = typeof object === 'string' ? object : window.btoa(object);\r\n    const img = await getImage(typeof object === 'string' ? base : `data:image/svg+xml;base64,${base}`);\r\n    myCanvas.height = img.height;\r\n    myCanvas.width = img.width;\r\n    if (ctxt === null) {\r\n        return \"\";\r\n    }\r\n    ctxt.drawImage(img, 0, 0, img.width, img.height);\r\n    return dataUrl ? myCanvas.toDataURL() : myCanvas;\r\n}\r\n\r\nexport function getUrlParams() {\r\n    return window.location.search.length > 0 && JSON.parse('{\"' + decodeURI(window.location.search.substring(1)).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g, '\":\"') + '\"}');\r\n}\r\n\r\nexport const platforms = {\r\n    desktop_web: /desktop_web/g,\r\n    mobile_android: /mobile_android/g,\r\n    mobile_android_messenger: /mobile_android_messenger/g,\r\n    mobile_ipad: /mobile_ipad/g,\r\n    mobile_iphone: /mobile_iphone/g,\r\n    mobile_iphone_messenger: /mobile_iphone_messenger/g,\r\n    mobile_web: /mobile_web/g,\r\n\r\n    android: /mobile_android|mobile_android_messenger/g,\r\n    ios: /mobile_ipad|mobile_iphone|mobile_iphone_messenger/g\r\n};\r\n\r\nexport function isPlatformIOS() {\r\n    return getUrlParams().vk_platform === 'mobile_iphone';\r\n}\r\n\r\nexport function isPlatformAndroid() {\r\n    return platforms.android.test(getUrlParams().vk_platform);\r\n}\r\n\r\nexport function isPlatformDesktop() {\r\n    return getUrlParams().vk_platform === 'desktop_web';\r\n}\r\n\r\nexport let vk_local_users = {},\r\n    name_cases = ['first_name', 'last_name', 'first_name_dat', 'first_name_nom', 'first_name_gen', 'first_name_acc', 'first_name_ins', 'first_name_abl', 'last_name_dat', 'last_name_nom', 'last_name_gen', 'last_name_acc', 'last_name_ins', 'last_name_abl'];\r\n\r\nexport async function getVKUsers(ids) {\r\n    const\r\n        user_ids = [\r\n            ...new Set(\r\n                ids\r\n                    .filter(value => vk_local_users[value] === undefined)\r\n                    .map(\r\n                        value => typeof value === 'number' ? value : value.replace('@', '')\r\n                            .replace('id', '')\r\n                            .replace('vk.com/', '')\r\n                            .replace('http://', '')\r\n                            .replace('https://', '')\r\n                    )\r\n            )\r\n        ],\r\n        i = Math.floor(user_ids.length / 100)\r\n    ;\r\n\r\n    if (user_ids.length > 0) {\r\n        let users = [];\r\n\r\n        for (let j = 0; j < i + 1; j++) {\r\n            users = users.concat(\r\n                await vkApiRequest('users.get', {\r\n                    user_ids: user_ids.slice(j * 100, j * 100 + 100).join(','),\r\n                    fields: ['screen_name', 'photo_100', 'photo_200', 'photo_max_orig', 'sex', ...name_cases].join(',')\r\n                })\r\n            );\r\n        }\r\n\r\n        for (const user of users) {\r\n            vk_local_users[user.id] = user;\r\n        }\r\n    }\r\n\r\n    return ids.map(value => vk_local_users[value] || vk_local_users[Object.keys(vk_local_users).find(key => vk_local_users[key].screen_name === value)]);\r\n}\r\n\r\nexport async function vkApiRequest(method, params = {}) {\r\n    return (await bridge.send('VKWebAppCallAPIMethod', {\r\n        method,\r\n        params: {\r\n            ...params,\r\n            v: '5.126',\r\n            access_token: params.access_token || '47bf45ba47bf45ba47bf45ba1347c8a732447bf47bf45ba271d2be46ed7aad788987004'\r\n        }\r\n    })).response\r\n}\r\n\r\nexport function viewportToPixels(value) {\r\n    const\r\n        parts = value.match(/([0-9\\.]+)(vh|vw)/),\r\n        q = Number(parts[1]),\r\n        side = window[['innerHeight', 'innerWidth'][['vh', 'vw'].indexOf(parts[2])]]\r\n    ;\r\n    return side * (q / 100)\r\n}\r\n\r\nexport function openUrl(url) {\r\n    const element = document.createElement('a');\r\n    element.href = url;\r\n    element.target = '_blank';\r\n    element.click();\r\n    element.remove();\r\n}\r\n\r\nexport function getUrlLocation() {\r\n    return window.location.origin + window.location.pathname.replace('/index.html', '');\r\n}\r\n\r\nexport function getSrcUrl(resource) {\r\n    return getUrlLocation() + resource.substring(1);\r\n}\r\n\r\nexport async function getBase64Image(imageUri) {\r\n    const\r\n        canvas = document.createElement('canvas'),\r\n        ctx = canvas.getContext('2d'),\r\n        img = new Image()\r\n    ;\r\n    img.src = imageUri;\r\n    img.crossOrigin = 'Anonymous';\r\n    return await new Promise(resolve =>\r\n        img.onload = function () {\r\n            canvas.width = this.width;\r\n            canvas.height = this.height;\r\n            ctx.drawImage(img, 0, 0, this.width, this.height);\r\n            resolve(canvas.toDataURL('image/png'));\r\n        }\r\n    );\r\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M110 3.0095V184.326C54.6271 180.939 -0.694326 132.316 31.5388 55.8662C48.1357 16.502 79.4017 2.58244 110 3.0095Z\",\n  fill: \"white\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M110 184.326V3.00952C149.416 3.55965 187.724 27.9163 192.141 52.3571C192.5 54.3448 190.978 56.1206 189 56.5322C129.309 68.9569 155.694 126.363 186.92 132.782C189.625 133.338 191.547 136.155 190.451 138.689C175.893 172.35 142.937 186.341 110 184.326Z\",\n  fill: \"#E7D0A9\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M38 61.5C76.8338 -30.605 173.437 7.4338 180.196 52.3506C180.497 54.3466 178.98 56.1203 177.004 56.5316C117.201 68.977 143.788 126.568 175.088 132.816C177.748 133.347 179.662 136.087 178.68 138.616C142.96 230.579 -5.46898 164.599 38 61.5Z\",\n  fill: \"#FFE4B8\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M150 40C150 49.3888 142.389 57 133 57C133 57 133 49.3888 133 40C133 30.6112 133 23 133 23C142.389 23 150 30.6112 150 40Z\",\n  fill: \"#3769A5\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M116 40C116 49.3888 123.611 57 133 57C133 57 133 49.3888 133 40C133 30.6112 133 23 133 23C123.611 23 116 30.6112 116 40Z\",\n  fill: \"white\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"ellipse\", {\n  cx: 131.5,\n  cy: 40,\n  rx: 11.5,\n  ry: 17,\n  fill: \"#4E9BD4\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 133,\n  cy: 40,\n  r: 18.5,\n  stroke: \"#171C1F\",\n  strokeWidth: 5\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M97 49C97 58.3888 89.3888 66 80 66C80 66 80 58.3888 80 49C80 39.6112 80 32 80 32C89.3888 32 97 39.6112 97 49Z\",\n  fill: \"#EE3C7A\"\n});\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M63 49C63 58.3888 70.6112 66 80 66C80 66 80 58.3888 80 49C80 39.6112 80 32 80 32C70.6112 32 63 39.6112 63 49Z\",\n  fill: \"white\"\n});\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"ellipse\", {\n  cx: 78.5,\n  cy: 49,\n  rx: 11.5,\n  ry: 17,\n  fill: \"#F05F88\"\n});\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 80,\n  cy: 49,\n  r: 18.5,\n  stroke: \"#171C1F\",\n  strokeWidth: 5\n});\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M74 98C74 107.389 66.3888 115 57 115C57 115 57 107.389 57 98C57 88.6112 57 81 57 81C66.3888 81 74 88.6112 74 98Z\",\n  fill: \"#FAAF1A\"\n});\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M40 98C40 107.389 47.6112 115 57 115C57 115 57 107.389 57 98C57 88.6112 57 81 57 81C47.6112 81 40 88.6112 40 98Z\",\n  fill: \"white\"\n});\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"ellipse\", {\n  cx: 55.5,\n  cy: 98,\n  rx: 11.5,\n  ry: 17,\n  fill: \"#FBD20A\"\n});\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 57,\n  cy: 98,\n  r: 18.5,\n  stroke: \"#171C1F\",\n  strokeWidth: 5\n});\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M97 142C97 151.389 89.3888 159 80 159C80 159 80 151.389 80 142C80 132.611 80 125 80 125C89.3888 125 97 132.611 97 142Z\",\n  fill: \"#F05225\"\n});\n\nvar _ref18 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M63 142C63 151.389 70.6112 159 80 159C80 159 80 151.389 80 142C80 132.611 80 125 80 125C70.6112 125 63 132.611 63 142Z\",\n  fill: \"white\"\n});\n\nvar _ref19 =\n/*#__PURE__*/\nReact.createElement(\"ellipse\", {\n  cx: 78.5,\n  cy: 142,\n  rx: 11.5,\n  ry: 17,\n  fill: \"#F16723\"\n});\n\nvar _ref20 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 80,\n  cy: 142,\n  r: 18.5,\n  stroke: \"#171C1F\",\n  strokeWidth: 5\n});\n\nvar _ref21 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 132,\n  cy: 145,\n  r: 14.1471,\n  fill: \"#FFD1B0\",\n  stroke: \"#171C1F\",\n  strokeWidth: 3.82353\n});\n\nvar _ref22 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M31.5384 55.8662C63.9928 -24.637 176.923 -2.44941 191.655 51.924C192.236 54.0694 190.691 56.1691 188.517 56.634C129.451 69.267 155.778 126.38 186.92 132.782C189.625 133.338 191.547 136.155 190.452 138.69C151.491 228.969 -17.9357 178.587 31.5384 55.8662Z\",\n  stroke: \"#171C1F\",\n  strokeWidth: 5\n});\n\nvar _ref23 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M28.789 74.0071H18.789L21.7286 184.733C21.7671 186.184 22.3378 188.007 23.789 188.007C25.2402 188.007 25.8108 186.184 25.8494 184.733L28.789 74.0071Z\",\n  fill: \"#FFE4B8\"\n});\n\nvar _ref24 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M6.28899 48.0071C5.88899 35.2071 15.789 24.3405 20.789 20.5071C22.789 30.5071 26.7889 35.0071 36.2889 42.0071C45.7889 49.0071 40.7889 67.0071 28.789 67.5071C16.789 68.0071 6.78899 64.0071 6.28899 48.0071Z\",\n  fill: \"#FFE4B8\"\n});\n\nvar _ref25 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M24.2888 50.0071C19.7888 51.2929 9.4555 45.5071 5.28883 42.0071C3.78883 52.6738 7.79443 67.5698 25.2889 68.0071C45.2889 68.5071 44.2889 46.0071 36.2888 39.5071C18.2888 40.5071 26.7888 49.2929 24.2888 50.0071Z\",\n  fill: \"#E1E1E1\"\n});\n\nvar _ref26 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M24.2888 46.0071C19.7888 47.2929 9.4555 41.5071 5.28883 38.0071C3.78883 48.6738 7.79443 63.5698 25.2889 64.0071C45.2889 64.5071 44.2889 42.0071 36.2888 35.5071C18.2888 36.5071 26.7888 45.2929 24.2888 46.0071Z\",\n  fill: \"white\"\n});\n\nvar _ref27 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M24.2889 50.0071C19.7889 51.2929 9.45561 45.5071 5.28894 42.0071C7.12227 35.0071 12.7889 20.4072 20.7889 18.0071C22.2889 17.5571 25.7889 38.5071 36.2889 39.5071C18.2889 40.5071 26.7889 49.2929 24.2889 50.0071Z\",\n  fill: \"#F05F88\"\n});\n\nvar _ref28 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M31.7879 74.0868L31.8697 71.0071H28.789H18.789H15.7083L15.79 74.0868L18.7297 184.813C18.7565 185.825 18.9627 187.127 19.5632 188.29C20.1841 189.493 21.5263 191.007 23.789 191.007C26.0516 191.007 27.3939 189.493 28.0148 188.29C28.6153 187.127 28.8214 185.825 28.8483 184.813L31.7879 74.0868ZM23.7307 19.9188L22.7861 15.1958L18.9637 18.1263C16.2 20.2452 12.2308 24.1771 8.98255 29.2847C5.73379 34.3931 3.06551 40.9028 3.29045 48.1008C3.5607 56.7488 6.45078 62.7474 11.4687 66.3757C16.3317 69.8921 22.6414 70.7659 28.9139 70.5045C36.5885 70.1848 41.6847 64.2875 43.4848 58.0232C45.2806 51.7736 44.1224 44.0527 38.0685 39.592C33.3636 36.1252 30.2875 33.4635 28.1265 30.5821C26.0198 27.7733 24.6657 24.5937 23.7307 19.9188Z\",\n  stroke: \"#171C1F\",\n  strokeWidth: 6\n});\n\nvar _ref29 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M5.28894 42.0071C9.45561 45.5071 19.7889 51.2929 24.2889 50.0071C26.7889 49.2929 18.2889 40.5071 36.2889 39.5071\",\n  stroke: \"#171C1F\",\n  strokeWidth: 4\n});\n\nvar SvgIcon = function SvgIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 195,\n    height: 195,\n    viewBox: \"0 0 195 195\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17, _ref18, _ref19, _ref20, _ref21, _ref22, _ref23, _ref24, _ref25, _ref26, _ref27, _ref28, _ref29);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Icon.8e925224.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M80.4243 72.7816L73.3533 79.8527L153.727 156.069C154.78 157.068 156.473 157.953 157.499 156.927C158.525 155.901 157.639 154.208 156.641 153.155L80.4243 72.7816Z\",\n  fill: \"#FFE4B8\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M46.1297 70.3067C36.7958 61.5386 36.1123 46.8544 36.9373 40.6083C45.4226 46.2651 51.4329 46.6187 63.1002 44.8509C74.7675 43.0832 83.9598 59.3466 75.8281 68.1854C67.6964 77.0242 57.7969 81.2669 46.1297 70.3067Z\",\n  fill: \"#FFE4B8\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M60.2718 58.9932C57.9989 63.0844 46.601 66.3 41.1799 66.7714C47.6617 75.3745 61.0271 83.0752 73.7068 71.014C88.2026 57.2254 71.5855 42.0226 61.3324 43.0833C49.3116 56.5184 61.5345 56.7204 60.2718 58.9932Z\",\n  fill: \"#E1E1E1\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M57.4433 56.1648C55.1704 60.2559 43.7725 63.4715 38.3514 63.9429C44.8332 72.5461 58.1986 80.2467 70.8783 68.1855C85.3741 54.3969 68.757 39.1941 58.5039 40.2548C46.4831 53.6899 58.706 53.8919 57.4433 56.1648Z\",\n  fill: \"white\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M60.2718 58.9931C57.999 63.0842 46.6011 66.2999 41.18 66.7713C37.5266 60.5252 31.2098 46.1945 35.1696 38.8406C35.912 37.4617 53.2008 49.8007 61.3325 43.0832C49.3117 56.5182 61.5345 56.7203 60.2718 58.9931Z\",\n  fill: \"#F05F88\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M71.2319 77.7314L69.0536 79.9098L71.289 82.0296L151.663 158.246C152.397 158.943 153.464 159.717 154.711 160.116C156.001 160.527 158.02 160.649 159.62 159.049C161.22 157.449 161.099 155.429 160.687 154.139C160.289 152.892 159.514 151.826 158.818 151.091L82.6012 70.7173L80.4814 68.4819L78.303 70.6603L71.2319 77.7314ZM38.6014 38.1121L34.5938 35.4404L33.9631 40.2154C33.5071 43.668 33.4808 49.2548 34.7955 55.1634C36.1105 61.0727 38.8268 67.5626 44.0756 72.4933C50.3818 78.4173 56.667 80.6153 62.7808 79.6327C68.7059 78.6804 73.7854 74.8367 78.0359 70.2166C83.2366 64.5637 82.6701 56.7901 79.5135 51.0878C76.3642 45.3988 70.0857 40.7583 62.6508 41.8848C56.8725 42.7603 52.8153 43.0534 49.2498 42.544C45.7739 42.0474 42.5682 40.7566 38.6014 38.1121Z\",\n  stroke: \"#171C1F\",\n  strokeWidth: 6\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M41.1799 66.7713C46.601 66.2999 57.9989 63.0843 60.2718 58.9931C61.5344 56.7203 49.3116 56.5183 61.3324 43.0832\",\n  stroke: \"#171C1F\",\n  strokeWidth: 4\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M121.432 80.5199L114.36 73.4488L38.144 153.823C37.1454 154.876 36.2596 156.568 37.2858 157.595C38.312 158.621 40.0047 157.735 41.0578 156.736L121.432 80.5199Z\",\n  fill: \"#FFE4B8\"\n});\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M123.906 46.2252C132.675 36.8914 147.359 36.2079 153.605 37.0329C147.948 45.5181 147.594 51.5285 149.362 63.1958C151.13 74.863 134.867 84.0554 126.028 75.9237C117.189 67.792 112.946 57.8925 123.906 46.2252Z\",\n  fill: \"#FFE4B8\"\n});\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M135.22 60.3674C131.129 58.0945 127.913 46.6966 127.442 41.2755C118.839 47.7573 111.138 61.1227 123.199 73.8024C136.988 88.2981 152.191 71.6811 151.13 61.428C137.695 49.4072 137.493 61.63 135.22 60.3674Z\",\n  fill: \"#E1E1E1\"\n});\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M138.048 57.5389C133.957 55.266 130.742 43.8681 130.27 38.447C121.667 44.9288 113.966 58.2942 126.028 70.9739C139.816 85.4697 155.019 68.8526 153.958 58.5995C140.523 46.5787 140.321 58.8016 138.048 57.5389Z\",\n  fill: \"white\"\n});\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M135.22 60.3674C131.129 58.0946 127.913 46.6967 127.442 41.2755C133.688 37.6222 148.019 31.3053 155.373 35.2651C156.751 36.0076 144.412 53.2964 151.13 61.4281C137.695 49.4073 137.493 61.6301 135.22 60.3674Z\",\n  fill: \"#FBD20A\"\n});\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M116.482 71.3275L114.303 69.1491L112.184 71.3846L35.9671 151.758C35.2706 152.493 34.4957 153.559 34.0976 154.807C33.6861 156.096 33.5646 158.116 35.1645 159.716C36.7644 161.316 38.7842 161.194 40.0738 160.783C41.3211 160.385 42.3876 159.61 43.122 158.913L123.496 82.6968L125.731 80.577L123.553 78.3986L116.482 71.3275ZM156.101 38.697L158.773 34.6893L153.998 34.0587C150.545 33.6027 144.958 33.5764 139.05 34.8911C133.14 36.2061 126.651 38.9224 121.72 44.1712C115.796 50.4774 113.598 56.7626 114.58 62.8764C115.533 68.8015 119.376 73.881 123.997 78.1315C129.649 83.3322 137.423 82.7657 143.125 79.609C148.814 76.4598 153.455 70.1813 152.328 62.7464C151.453 56.968 151.16 52.9109 151.669 49.3453C152.166 45.8695 153.457 42.6637 156.101 38.697Z\",\n  stroke: \"#171C1F\",\n  strokeWidth: 6\n});\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M127.442 41.2755C127.913 46.6966 131.129 58.0945 135.22 60.3673C137.493 61.63 137.695 49.4072 151.13 61.428\",\n  stroke: \"#171C1F\",\n  strokeWidth: 4\n});\n\nvar SvgIconError = function SvgIconError(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 195,\n    height: 195,\n    viewBox: \"0 0 195 195\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIconError, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/IconError.909a833a.svg\";\nexport { ForwardRef as ReactComponent };","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Avatar, Button} from \"@vkontakte/vkui\";\r\nimport {} from \"@vkontakte/icons\";\r\nimport {Icon28Play} from \"@vkontakte/icons\";\r\nimport {decOfNum} from \"../../js/utils\";\r\n\r\nexport class Main extends PureComponent {\r\n\r\n    render() {\r\n        const\r\n            {t} = this.props,\r\n            {lvl, pictures, successfulPictures, guessedPictures} = t.state.user,\r\n            {gamesAsWinner, gamesAsDrawer, top_number} = t.state,\r\n            offset = [Math.min(t.state.colors.length - 3, Math.max(lvl, 4) - 4), Math.min(t.state.colors.length, Math.max(lvl, 3) + 3)],\r\n            colors = t.state.colors.slice(offset[0], offset[1])\r\n        ;\r\n\r\n        return (\r\n            <div className='Main'>\r\n                <Avatar src={t.state.vk_user.photo_100} size={48} shadow={false}/>\r\n                <h3>Привет, {t.state.vk_user.first_name}</h3>\r\n                <h1>Твой профиль</h1>\r\n                <div className='Colors__Container'>\r\n                    <div className='Gradient_Opacity'/>\r\n                    {\r\n                        colors.map((value, index) =>\r\n                            <div\r\n                                className='Color'\r\n                                key={`Color__${index}`}\r\n                                style={{\r\n                                    marginLeft: index > 0 && 12,\r\n                                    background: index + 1 + offset[0] === lvl && 'linear-gradient(156.04deg, #F05F88 0%, #FBD20A 100%)',\r\n                                    border: index + 1 + offset[0] === lvl && 'none'\r\n                                }}\r\n                            >\r\n                                <span>{index + 1 + offset[0]}</span>\r\n                                <div style={{background: value}}/>\r\n                            </div>\r\n                        )\r\n                    }\r\n                </div>\r\n                <p>Отгадывай и рисуй картины, чтобы разблокировать новые цвета</p>\r\n                <div className='Cards__Container'>\r\n                    <div onClick={() => {\r\n                        if (gamesAsDrawer.length > 0) {\r\n                            t.go('gallery')\r\n                        }\r\n                    }}>\r\n                        <span\r\n                            className='Top'>{decOfNum(successfulPictures, ['успешная', 'успешные', 'успешных'])}</span>\r\n                        <div className='Images'>\r\n                            {[1, 0, 2].map((value, index) => <div num={index} key={`div__${index}`}>{\r\n                                gamesAsDrawer[value] && <img alt='img' src={gamesAsDrawer[value]['Picture.url']}/>\r\n                            }</div>)}\r\n                        </div>\r\n                        <div className='Texts'>\r\n                            <span>Галерея</span>\r\n                            <span>{decOfNum(pictures, ['картина', 'картины', 'картин'])}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div onClick={() => t.go('rating')}>\r\n                        <span className='Top'>{top_number && `Ты на ${top_number} месте`}</span>\r\n                        <div className='Images'>\r\n                            {[1, 0, 2].map((value, index) => <div num={index} key={`div__${index}`}>{\r\n                                gamesAsWinner[value] && <img alt='img' src={gamesAsWinner[value]['Picture.url']}/>\r\n                            }</div>)}\r\n                        </div>\r\n                        <div className='Texts'>\r\n                            <span>Отгадано</span>\r\n                            <span>{decOfNum(guessedPictures, ['картина', 'картины', 'картин'])}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className='ButtonPlay' onClick={() => t.go('search')}>\r\n                    <Icon28Play/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nMain.defaultProps = {};\r\n\r\nMain.propTypes = {\r\n    t: PropTypes.object\r\n};\r\n\r\nexport default Main;","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {PanelHeader, PanelHeaderBack, ScreenSpinner} from \"@vkontakte/vkui\";\r\nimport {getBase64Image, getSrcUrl, getUrlParams, isPlatformDesktop} from \"../../js/utils\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\n\r\nexport class Gallery extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            offset: props.t.state.gamesAsDrawer.length,\r\n            limit: 10,\r\n            canGetMore: true,\r\n            prevY: 0\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.observer = new IntersectionObserver(\r\n            this.handleObserver.bind(this),\r\n            {\r\n                root: null,\r\n                rootMargin: '0px',\r\n                threshold: 1.0\r\n            }\r\n        );\r\n        this.observer.observe(this.loadingRef);\r\n    }\r\n\r\n    handleObserver(entities, observer) {\r\n        const\r\n            {y} = entities[0].boundingClientRect,\r\n            {t} = this.props,\r\n            {prevY, offset, limit, canGetMore} = this.state\r\n        ;\r\n        if ((prevY === 0 || prevY > y) && canGetMore) {\r\n            t.socket.call('games.getByDrawerId', {id: t.state.vk_user.id, offset, limit}, r => {\r\n                t.setState({gamesAsDrawer: [...t.state.gamesAsDrawer, ...r.response]});\r\n                this.setState({canGetMore: r.response.length > 0});\r\n                this.forceUpdate();\r\n            });\r\n            this.setState({offset: offset + 10});\r\n        }\r\n        this.setState({prevY: y});\r\n    }\r\n\r\n    shareStory(word, gameId, pic) {\r\n        this.props.t.setPopout(<ScreenSpinner/>);\r\n        const\r\n            {createCanvas, loadImage} = require('canvas')\r\n        ;\r\n\r\n        loadImage(getSrcUrl(require(`../../assets/drawing/stories/Story1.png`))).then(async background => {\r\n            const\r\n                canvas = createCanvas(background.width, background.height),\r\n                ctx = canvas.getContext('2d'),\r\n                canvasData = await getBase64Image(pic),\r\n                title = word.substring(0, 1).toUpperCase() + word.substring(1)\r\n            ;\r\n            ctx.drawImage(background, 0, 0);\r\n\r\n            ctx.font = '64px TT Commons Demibold';\r\n            ctx.textAlign = 'center';\r\n            ctx.fillStyle = '#616161';\r\n            ctx.fillText(title, 539, 708 + 13 + 489);\r\n\r\n            ctx.drawImage(await loadImage(canvasData), 198, 618, 683, 683);\r\n\r\n            try {\r\n                await bridge.send('VKWebAppShowStoryBox', {\r\n                    background_type: 'image',\r\n                    blob: canvas.toDataURL('image/png'),\r\n                    attachment: {\r\n                        url: 'https://vk.com/app' + getUrlParams().vk_app_id,\r\n                        text: 'go_to',\r\n                        type: 'url'\r\n                    }\r\n                });\r\n                this.props.t.socket.call('games.share', {gameId});\r\n            } catch (e) {\r\n            }\r\n            this.props.t.setPopout(null);\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const\r\n            {t} = this.props,\r\n            isDesktop = isPlatformDesktop(),\r\n            {gamesAsDrawer} = t.state\r\n        ;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <PanelHeader\r\n                    left={<PanelHeaderBack onClick={t.back}/>}\r\n                    separator={false}\r\n                >\r\n                    {\r\n                        isDesktop && 'Твоя галерея'\r\n                    }\r\n                </PanelHeader>\r\n                <div className='Gallery'>\r\n                    {\r\n                        !isDesktop && <h2 style={{textAlign: 'left'}}>Твоя галерея</h2>\r\n                    }\r\n                    <p style={{margin: !isDesktop && '8px 0 0 0'}}>\r\n                        Выберите нужную картину, чтобы поделиться ею в истории.\r\n                    </p>\r\n                    <div style={{marginTop: isDesktop ? 18 : 24, gridGap: isDesktop ? 8 : 15}} className='Images_Grid'>\r\n                        {\r\n                            gamesAsDrawer.map((value, index) =>\r\n                                <div key={`Image_${index}`} onClick={() => {\r\n                                    this.shareStory(value['Word.nom'], value.id, value['Picture.url']);\r\n                                }}>\r\n                                    <img alt='img' src={value['Picture.url']}/>\r\n                                </div>\r\n                            )\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div ref={ref => this.loadingRef = ref}/>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nGallery.defaultProps = {};\r\n\r\nGallery.propTypes = {\r\n    t: PropTypes.object\r\n};\r\n\r\nexport default Gallery;","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Avatar, PanelHeader, PanelHeaderBack, ScreenSpinner} from \"@vkontakte/vkui\";\r\nimport {decOfNum, getBase64Image, getSrcUrl, getUrlParams, isPlatformDesktop} from \"../../js/utils\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\n\r\nexport class Rating extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            offset: props.t.state.gamesAsWinner.length,\r\n            limit: 10,\r\n            canGetMore: true,\r\n            prevY: 0\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        this.observer = new IntersectionObserver(\r\n            this.handleObserver.bind(this),\r\n            {\r\n                root: null,\r\n                rootMargin: '0px',\r\n                threshold: 1.0\r\n            }\r\n        );\r\n        this.observer.observe(this.loadingRef);\r\n    }\r\n\r\n    handleObserver(entities, observer) {\r\n        const\r\n            {y} = entities[0].boundingClientRect,\r\n            {t} = this.props,\r\n            {prevY, offset, limit, canGetMore} = this.state\r\n        ;\r\n        if ((prevY === 0 || prevY > y) && canGetMore) {\r\n            t.socket.call('games.getByWinnerId', {id: t.state.vk_user.id, offset, limit}, r => {\r\n                t.setState({gamesAsWinner: [...t.state.gamesAsWinner, ...r.response]});\r\n                this.setState({canGetMore: r.response.length > 0});\r\n                this.forceUpdate();\r\n                console.log('handle', [...t.state.gamesAsWinner, ...r.response]);\r\n            });\r\n            this.setState({offset: offset + 10});\r\n        }\r\n        this.setState({prevY: y});\r\n    }\r\n\r\n    shareStory(gameId, pic) {\r\n        this.props.t.setPopout(<ScreenSpinner/>);\r\n        const\r\n            {createCanvas, loadImage} = require('canvas')\r\n        ;\r\n\r\n        loadImage(getSrcUrl(require(`../../assets/drawing/stories/Story2.png`))).then(async background => {\r\n            const\r\n                canvas = createCanvas(background.width, background.height),\r\n                ctx = canvas.getContext('2d'),\r\n                canvasData = await getBase64Image(pic)\r\n            ;\r\n            ctx.drawImage(background, 0, 0);\r\n            ctx.drawImage(await loadImage(canvasData), 198, 618, 683, 683);\r\n\r\n            try {\r\n                await bridge.send('VKWebAppShowStoryBox', {\r\n                    background_type: 'image',\r\n                    blob: canvas.toDataURL('image/png'),\r\n                    attachment: {\r\n                        url: 'https://vk.com/app' + getUrlParams().vk_app_id,\r\n                        text: 'go_to',\r\n                        type: 'url'\r\n                    }\r\n                });\r\n                this.props.t.socket.call('games.share', {gameId});\r\n            } catch (e) {\r\n            }\r\n            this.props.t.setPopout(null);\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const\r\n            {t} = this.props,\r\n            isDesktop = isPlatformDesktop(),\r\n            {user, gamesAsWinner, top} = t.state,\r\n            {guessedPictures} = user\r\n        ;\r\n\r\n        console.log('render', gamesAsWinner);\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <PanelHeader\r\n                    left={<PanelHeaderBack onClick={t.back}/>}\r\n                    separator={false}\r\n                />\r\n                <div className='Rating'>\r\n                    {\r\n                        top &&\r\n                        <React.Fragment>\r\n                            <p>\r\n                                Лучшие игроки за сегодня:\r\n                            </p>\r\n                            <div className='Users_List'>\r\n                                {\r\n                                    top.map((value, index) =>\r\n                                        <div key={`div__${index}`}>\r\n                                            <Avatar size={48} shadow={false} src={value.photo_100}/>\r\n                                            <div>\r\n                                                <div>{value.first_name} {value.last_name.substring(0, 1)}.</div>\r\n                                                <div>Отгадал{value.sex === 1 && 'а'} {decOfNum(value.guessedPicturesToday, ['картину', 'картины', 'картин'])}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )\r\n                                }\r\n                            </div>\r\n                        </React.Fragment>\r\n                    }\r\n                    {\r\n                        gamesAsWinner.length > 0 &&\r\n                        <React.Fragment>\r\n                            <p style={{margin: '24px 0 0 0'}}>\r\n                                Вы отгадали {decOfNum(guessedPictures, ['картину', 'картины', 'картин'])} (вы можете ими\r\n                                поделиться):\r\n                            </p>\r\n                            <div style={{marginTop: 18, gridGap: isDesktop ? 8 : 15}} className='Images_Grid'>\r\n                                {\r\n                                    gamesAsWinner.map((value, index) =>\r\n                                        <div key={`Image_${index}`} onClick={() => {\r\n                                            this.shareStory(value.id, value['Picture.url']);\r\n                                        }}>\r\n                                            <img alt='img' src={value['Picture.url']}/>\r\n                                        </div>\r\n                                    )\r\n                                }\r\n                            </div>\r\n                        </React.Fragment>\r\n                    }\r\n                    <div ref={ref => this.loadingRef = ref}/>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nRating.defaultProps = {};\r\n\r\nRating.propTypes = {\r\n    t: PropTypes.object\r\n};\r\n\r\nexport default Rating;","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Avatar} from \"@vkontakte/vkui\";\r\nimport {getVKUsers, isPlatformDesktop} from \"../../js/utils\";\r\n\r\nexport class Search extends PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            lobbyPlayers: []\r\n        };\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        const {socket} = this.props.t;\r\n        socket.unsubscribe('changeLobbyUsers', 'gameStart', 'setWord', 'gameEnd', 'draw');\r\n        socket.subscribe('changeLobbyUsers', async r => {\r\n            this.setState({lobbyPlayers: await getVKUsers(r.players)});\r\n        });\r\n        socket.subscribe('setWord', async r => {\r\n            this.props.t.setState({word: r.word});\r\n        });\r\n        socket.subscribe('gameStart', async r => {\r\n            const {lobbyId, drawerId} = r;\r\n            this.props.t.setState({lobbyId, drawerId, gameStart: Date.now()});\r\n            this.props.t.go('game');\r\n        });\r\n        socket.call('games.search');\r\n    }\r\n\r\n    render() {\r\n        const\r\n            {t} = this.props,\r\n            lobbyPlayers = this.state.lobbyPlayers.filter(user => user.id !== t.state.vk_user.id),\r\n            players =\r\n                <svg width=\"274\" height=\"316\" viewBox=\"0 0 274 316\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\r\n                     style={{marginTop: isPlatformDesktop() ? 72 : '8.86699507vh'}}\r\n                     onClick={() => {\r\n                         if (this.state.lobbyPlayers.length < 5) {\r\n                             t.back();\r\n                         }\r\n                     }}\r\n                >\r\n                    <rect x=\"63\" y=\"84\" width=\"148\" height=\"148\" rx=\"74\" fill=\"url(#paint0_linear)\"/>\r\n                    <circle cx=\"137\" cy=\"158\" r=\"48\" fill=\"url(#pattern0)\"/>\r\n                    <line x1=\"27.866\" y1=\"26.5\" x2=\"60.366\" y2=\"82.7916\" stroke=\"var(--border_players_color)\"\r\n                          strokeWidth=\"2\" strokeDasharray=\"4 4\"/>\r\n                    <rect x=\"1.5\" y=\"1.5\" width=\"51\" height=\"51\" rx=\"25.5\" fill=\"var(--background_content)\"/>\r\n                    <circle cx=\"27\" cy=\"27\" r=\"24\" fill=\"url(#pattern1)\"/>\r\n                    <rect x=\"1.5\" y=\"1.5\" width=\"51\" height=\"51\" rx=\"25.5\" stroke=\"var(--border_players_color)\"\r\n                          strokeWidth=\"3\"/>\r\n                    <line y1=\"-1\" x2=\"65\" y2=\"-1\" transform=\"matrix(-0.5 0.866025 0.866025 0.5 246.88 27)\"\r\n                          stroke=\"var(--border_players_color)\" strokeWidth=\"2\" strokeDasharray=\"4 4\"/>\r\n                    <rect x=\"1.5\" y=\"-1.5\" width=\"51\" height=\"51\" rx=\"25.5\" transform=\"matrix(-1 0 0 1 274 3)\"\r\n                          fill=\"var(--background_content)\"/>\r\n                    <circle cx=\"247\" cy=\"27\" r=\"24\" fill=\"url(#pattern2)\"/>\r\n                    <rect x=\"1.5\" y=\"-1.5\" width=\"51\" height=\"51\" rx=\"25.5\" transform=\"matrix(-1 0 0 1 274 3)\"\r\n                          stroke=\"var(--border_players_color)\" strokeWidth=\"3\"/>\r\n                    <line y1=\"-1\" x2=\"65\" y2=\"-1\" transform=\"matrix(0.5 -0.866025 -0.866025 -0.5 27 289)\"\r\n                          stroke=\"var(--border_players_color)\" strokeWidth=\"2\" strokeDasharray=\"4 4\"/>\r\n                    <rect x=\"-1.5\" y=\"1.5\" width=\"51\" height=\"51\" rx=\"25.5\" transform=\"matrix(1 0 0 -1 3 316)\"\r\n                          fill=\"var(--background_content)\"/>\r\n                    <circle cx=\"27\" cy=\"289\" r=\"24\" fill=\"url(#pattern3)\"/>\r\n                    <rect x=\"-1.5\" y=\"1.5\" width=\"51\" height=\"51\" rx=\"25.5\" transform=\"matrix(1 0 0 -1 3 316)\"\r\n                          stroke=\"var(--border_players_color)\" strokeWidth=\"3\"/>\r\n                    <line x1=\"246.014\" y1=\"289.5\" x2=\"213.514\" y2=\"233.208\" stroke=\"var(--border_players_color)\"\r\n                          strokeWidth=\"2\" strokeDasharray=\"4 4\"/>\r\n                    <rect x=\"272.5\" y=\"314.5\" width=\"51\" height=\"51\" rx=\"25.5\" transform=\"rotate(-180 272.5 314.5)\"\r\n                          fill=\"var(--background_content)\"/>\r\n                    <circle cx=\"247\" cy=\"289\" r=\"24\" fill=\"url(#pattern4)\"/>\r\n                    <rect x=\"272.5\" y=\"314.5\" width=\"51\" height=\"51\" rx=\"25.5\" transform=\"rotate(-180 272.5 314.5)\"\r\n                          stroke=\"var(--border_players_color)\" strokeWidth=\"3\"/>\r\n                    <defs>\r\n                        <linearGradient id=\"paint0_linear\" x1=\"63\" y1=\"84\" x2=\"211\" y2=\"232\"\r\n                                        gradientUnits=\"userSpaceOnUse\">\r\n                            <stop stopColor=\"#F05F88\"/>\r\n                            <stop offset=\"1\" stopColor=\"#FAAF1A\"/>\r\n                        </linearGradient>\r\n\r\n                        <pattern id=\"pattern0\" patternContentUnits=\"objectBoundingBox\" width=\"1\" height=\"1\">\r\n                            <use href=\"#image0\" transform=\"scale(0.005)\"/>\r\n                        </pattern>\r\n                        <image href={t.state.vk_user.photo_max_orig} id=\"image0\" width=\"200\" height=\"200\"/>\r\n\r\n                        <pattern id=\"pattern1\" patternContentUnits=\"objectBoundingBox\" width=\"1\" height=\"1\">\r\n                            <use href=\"#image1\" transform=\"scale(0.005)\"/>\r\n                        </pattern>\r\n                        <image href={lobbyPlayers[0] && lobbyPlayers[0].photo_max_orig} id=\"image1\" width=\"200\"\r\n                               height=\"200\"/>\r\n\r\n                        <pattern id=\"pattern2\" patternContentUnits=\"objectBoundingBox\" width=\"1\" height=\"1\">\r\n                            <use href=\"#image2\" transform=\"scale(0.005)\"/>\r\n                        </pattern>\r\n                        <image href={lobbyPlayers[1] && lobbyPlayers[1].photo_max_orig} id=\"image2\" width=\"200\"\r\n                               height=\"200\"/>\r\n\r\n                        <pattern id=\"pattern3\" patternContentUnits=\"objectBoundingBox\" width=\"1\" height=\"1\">\r\n                            <use href=\"#image3\" transform=\"scale(0.005)\"/>\r\n                        </pattern>\r\n                        <image href={lobbyPlayers[2] && lobbyPlayers[2].photo_max_orig} id=\"image3\" width=\"200\"\r\n                               height=\"200\"/>\r\n\r\n                        <pattern id=\"pattern4\" patternContentUnits=\"objectBoundingBox\" width=\"1\" height=\"1\">\r\n                            <use href=\"#image4\" transform=\"scale(0.005)\"/>\r\n                        </pattern>\r\n                        <image href={lobbyPlayers[3] && lobbyPlayers[3].photo_max_orig} id=\"image4\" width=\"200\"\r\n                               height=\"200\"/>\r\n                    </defs>\r\n                </svg>\r\n        ;\r\n\r\n        return (\r\n            <div className='Search'>\r\n                <h1>{this.state.lobbyPlayers.length === 5 ? 'Очищаем холст...' : 'Ищем игроков...'}</h1>\r\n                {players}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nSearch.defaultProps = {};\r\n\r\nSearch.propTypes = {\r\n    t: PropTypes.object\r\n};\r\n\r\nexport default Search;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M16.1568 6.96446L14.0355 4.84314C13.2545 4.06209 11.9881 4.06209 11.2071 4.84314L8.37866 7.67157L13.3284 12.6213L16.1568 9.79289C16.9379 9.01184 16.9379 7.74551 16.1568 6.96446Z\",\n  fill: \"#C3C3C3\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M16.864 6.25738L14.7427 4.13606C13.5711 2.96448 11.6716 2.96448 10.5 4.13606L4.13606 10.5C2.96449 11.6716 2.96449 13.5711 4.13606 14.7427L6.25738 16.864C7.42895 18.0356 9.32845 18.0356 10.5 16.864L16.864 10.5C18.0356 9.32844 18.0356 7.42895 16.864 6.25738Z\",\n  stroke: \"#C3C3C3\",\n  strokeWidth: 2\n});\n\nvar SvgIconErase = function SvgIconErase(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 21,\n    height: 21,\n    viewBox: \"0 0 21 21\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIconErase, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/IconErase.538657b8.svg\";\nexport { ForwardRef as ReactComponent };","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {ActionSheet, ActionSheetItem, Avatar, IconButton, Input, WriteBarIcon} from \"@vkontakte/vkui\";\r\nimport {isPlatformDesktop, vk_local_users} from \"../../js/utils\";\r\nimport {ReactComponent as IconErase} from \"../../assets/drawing/icons/IconErase.svg\";\r\n\r\nconst current = {};\r\nlet interval;\r\n\r\nexport class Game extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            drawer: vk_local_users[props.t.state.drawerId],\r\n            isDrawer: props.t.state.drawerId === props.t.state.vk_user.id,\r\n            text: '',\r\n            selectedColor: 0,\r\n            drawing: false,\r\n            time: 90,\r\n\r\n            messages: []\r\n        };\r\n\r\n        this.onMouseDown = this.onMouseDown.bind(this);\r\n        this.onMouseUp = this.onMouseUp.bind(this);\r\n        this.throttle = this.throttle.bind(this);\r\n        this.onMouseMove = this.onMouseMove.bind(this);\r\n        this.drawLine = this.drawLine.bind(this);\r\n\r\n        interval = setInterval(() => this.setState({time: this.state.time > 0 ? this.state.time - 1 : 0}), 1000);\r\n\r\n        props.t.socket.subscribe('gameEnd', async r => {\r\n            const\r\n                canvasData = this.canvas.toDataURL('image/png'),\r\n                {winnerId, word, gameId} = r\r\n            ;\r\n            if (this.state.isDrawer) {\r\n                this.props.t.socket.call('games.end', {canvasData, lobbyId: this.props.t.state.lobbyId, gameId});\r\n            }\r\n            this.props.t.setState({canvas_: canvasData, winnerId, word, gameId, gameEnd: Date.now()});\r\n            this.props.t.go('result');\r\n        });\r\n\r\n        if (!this.state.isDrawer) {\r\n            props.t.socket.subscribe('draw', r => {\r\n                const {x0, y0, x1, y1, color} = r.data;\r\n                this.drawLine(x0, y0, x1, y1, color);\r\n            });\r\n\r\n            props.t.socket.subscribe('clear', r => {\r\n                this.canvasContext.clearRect(0, 0, 319, 319);\r\n            });\r\n        }\r\n\r\n        props.t.socket.subscribe('message', async r => {\r\n            const {user_id, message} = r;\r\n            await this.setState({messages: [...this.state.messages, {user_id, message, ...vk_local_users[user_id]}]});\r\n\r\n            const comments = document.getElementsByClassName('Comment');\r\n            comments[comments.length - 1].scrollIntoView(false);\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(interval);\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const\r\n            {canvas, onMouseDown, onMouseUp, throttle, onMouseMove} = this,\r\n            {drawer, isDrawer} = this.state\r\n        ;\r\n        this.canvasContext = canvas.getContext('2d');\r\n\r\n        if (isDrawer) {\r\n            canvas.addEventListener('mousedown', onMouseDown, false);\r\n            canvas.addEventListener('mouseup', onMouseUp, false);\r\n            canvas.addEventListener('mouseout', onMouseUp, false);\r\n            canvas.addEventListener('mousemove', throttle(onMouseMove, 10), false);\r\n\r\n            //Touch support for mobile devices\r\n            canvas.addEventListener('touchstart', onMouseDown, false);\r\n            canvas.addEventListener('touchend', onMouseUp, false);\r\n            canvas.addEventListener('touchcancel', onMouseUp, false);\r\n            canvas.addEventListener('touchmove', throttle(onMouseMove, 10), false);\r\n        }\r\n    }\r\n\r\n    onMouseDown(e) {\r\n        this.setState({drawing: true});\r\n        current.x = e.clientX || e.touches[0].clientX;\r\n        current.y = e.clientY || e.touches[0].clientY;\r\n    }\r\n\r\n    onMouseUp(e) {\r\n        const {drawing, selectedColor} = this.state;\r\n        if (!drawing) {\r\n            return;\r\n        }\r\n        this.setState({drawing: false});\r\n        try {\r\n            const\r\n                {canvas} = this,\r\n                canvasRect = canvas.getBoundingClientRect()\r\n            ;\r\n            this.drawLine(current.x - canvasRect.left, current.y - canvasRect.top, (e.clientX || e.touches[0].clientX) - canvasRect.left, (e.clientY || e.touches[0].clientY) - canvasRect.top, this.props.t.state.colors[selectedColor]);\r\n        } catch (er) {\r\n        }\r\n    }\r\n\r\n    onMouseMove(e) {\r\n        const {drawing, selectedColor} = this.state;\r\n        if (!drawing) {\r\n            return;\r\n        }\r\n        const\r\n            {canvas} = this,\r\n            canvasRect = canvas.getBoundingClientRect()\r\n        ;\r\n        this.drawLine(current.x - canvasRect.left, current.y - canvasRect.top, (e.clientX || e.touches[0].clientX) - canvasRect.left, (e.clientY || e.touches[0].clientY) - canvasRect.top, this.props.t.state.colors[selectedColor]);\r\n        current.x = e.clientX || e.touches[0].clientX;\r\n        current.y = e.clientY || e.touches[0].clientY;\r\n        return false;\r\n    }\r\n\r\n    drawLine(x0, y0, x1, y1, color) {\r\n        const\r\n            {lobbyId} = this.props.t.state,\r\n\r\n            {canvas, canvasContext} = this\r\n        ;\r\n\r\n        canvasContext.beginPath();\r\n        canvasContext.moveTo(x0, y0);\r\n        canvasContext.lineTo(x1, y1);\r\n        canvasContext.strokeStyle = color;\r\n        canvasContext.lineWidth = 2;\r\n        canvasContext.stroke();\r\n        canvasContext.closePath();\r\n\r\n        if (this.state.isDrawer) {\r\n            this.props.t.socket.call('games.draw', {\r\n                lobbyId,\r\n                data: {\r\n                    x0,\r\n                    y0,\r\n                    x1,\r\n                    y1,\r\n                    color\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    throttle(callback, delay) {\r\n        var previousCall = new Date().getTime();\r\n        return function () {\r\n            const time = new Date().getTime();\r\n\r\n            if ((time - previousCall) >= delay) {\r\n                previousCall = time;\r\n                callback.apply(null, arguments);\r\n            }\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const\r\n            {t} = this.props,\r\n            {colors, user, word, lobbyId} = t.state,\r\n            {drawer, isDrawer, text, selectedColor, time, messages} = this.state,\r\n            isDesktop = isPlatformDesktop()\r\n        ;\r\n\r\n        return (\r\n            <div className='Game'>\r\n                <div style={{width: isDesktop ? 319 : '100%', alignSelf: 'flex-start'}}>\r\n                    <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                        <h2 style={{textAlign: 'left'}}>\r\n                            {isDrawer ? 'Задача: ' + word.nom : 'Рисует: ' + drawer.first_name}\r\n                        </h2>\r\n                        <h2 style={{textAlign: 'right', width: '50%', color: 'var(--color_secondary)'}}>\r\n                            {time} сек\r\n                        </h2>\r\n                    </div>\r\n                </div>\r\n                <div style={{display: isDesktop && 'flex'}}>\r\n                    <div className='Canvas_Container'>\r\n                        <canvas width={319} height={319} ref={ref => this.canvas = ref} id='canvas'/>\r\n                        <div style={{display: !isDrawer && 'none'}}>\r\n                            <div>\r\n                                {\r\n                                    colors.map((value, index) =>\r\n                                        <div\r\n                                            onClick={() => this.setState({selectedColor: index})}\r\n                                            className='Color'\r\n                                            key={`Color__${index}`}\r\n                                            style={{\r\n                                                marginLeft: index > 0 && 8,\r\n                                                background: value,\r\n                                                outline: selectedColor === index && '4px solid #F3F2F2',\r\n                                                opacity: user.lvl < (index + 1) && .25,\r\n                                                pointerEvents: user.lvl < (index + 1) && 'none'\r\n                                            }}\r\n                                        />\r\n                                    )\r\n                                }\r\n                            </div>\r\n                            <div>\r\n                                <IconButton hasHover={false} onClick={() => {\r\n                                    t.socket.call('games.clear', {lobbyId});\r\n                                    this.canvasContext.clearRect(0, 0, 319, 319);\r\n                                }}>\r\n                                    <IconErase/>\r\n                                </IconButton>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='Comments_Container'>\r\n                        <div className='Comments' ref={ref => this.comments = ref}>\r\n                            {\r\n                                messages.map((value, index) =>\r\n                                    <div\r\n                                        className='Comment' key={`div__${index}`} style={{marginTop: index > 0 && 6}}\r\n                                        onClick={() => {\r\n                                            if (value.id !== t.state.vk_user.id && value.message.replaceAll('*', '').length > 0) {\r\n                                                t.setPopout(<ActionSheet\r\n                                                    onClose={() => t.setPopout(null)}\r\n                                                    iosCloseItem={<ActionSheetItem\r\n                                                        autoclose mode='cancel'>\r\n                                                        Отменить\r\n                                                    </ActionSheetItem>}\r\n                                                >\r\n                                                    <ActionSheetItem\r\n                                                        autoclose mode='destructive'\r\n                                                        onClick={() => t.socket.call('games.report', {message: value.message})}\r\n                                                    >\r\n                                                        Пожаловаться\r\n                                                    </ActionSheetItem>\r\n                                                </ActionSheet>)\r\n                                            }\r\n                                        }}\r\n                                    >\r\n                                        <Avatar size={32} shadow={false} src={value.photo_100}/>\r\n                                        <div>\r\n                                            <div>{value.first_name} {value.last_name}</div>\r\n                                            <div>{value.message}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            }\r\n                        </div>\r\n                        {\r\n                            !isDrawer &&\r\n                            <div className='Comment_Input'>\r\n                                <Input\r\n                                    value={text}\r\n                                    onChange={(e) => {\r\n                                        if (e.currentTarget.value.length <= 120) {\r\n                                            this.setState({text: e.currentTarget.value});\r\n                                        }\r\n                                    }}\r\n                                    placeholder='Есть догадки?'\r\n                                    onKeyDown={(e) => {\r\n                                        if (e.key === 'Enter') {\r\n                                            this.setState({text: ''});\r\n                                            t.socket.call('games.message', {lobbyId, message: text});\r\n                                        }\r\n                                    }}\r\n                                />\r\n                                <WriteBarIcon\r\n                                    style={{display: text.length === 0 && 'none'}} mode='send'\r\n                                    onClick={() => {\r\n                                        this.setState({text: ''});\r\n                                        t.socket.call('games.message', {lobbyId, message: text});\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nGame.defaultProps = {};\r\n\r\nGame.propTypes = {\r\n    t: PropTypes.object\r\n};\r\n\r\nexport default Game;","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Avatar, Button, IconButton, Input, ScreenSpinner, WriteBarIcon} from \"@vkontakte/vkui\";\r\nimport {Icon28ChevronRightOutline, Icon28ShareOutline} from \"@vkontakte/icons\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport {decOfNum, getSrcUrl, getUrlParams, vk_local_users} from \"../../js/utils\";\r\n\r\nexport class Result extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isDrawer: props.t.state.drawerId === props.t.state.vk_user.id,\r\n            isWinner: props.t.state.winnerId === props.t.state.vk_user.id,\r\n            winnerId: props.t.state.winnerId,\r\n            drawerId: props.t.state.drawerId,\r\n            word: props.t.state.word\r\n        };\r\n\r\n        this.shareStory = this.shareStory.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    shareStory() {\r\n        this.props.t.setPopout(<ScreenSpinner/>);\r\n        const\r\n            {createCanvas, loadImage} = require('canvas'),\r\n            {isDrawer, winnerId, isWinner} = this.state,\r\n            type = isDrawer ? 1 : isWinner ? 2 : 3\r\n        ;\r\n\r\n        loadImage(getSrcUrl(require(`../../assets/drawing/stories/Story${type}.png`))).then(async background => {\r\n            const\r\n                canvas = createCanvas(background.width, background.height),\r\n                ctx = canvas.getContext('2d'),\r\n                img = new Image(),\r\n                {word} = this.state,\r\n                title = word.nom.substring(0, 1).toUpperCase() + word.nom.substring(1)\r\n            ;\r\n            ctx.drawImage(background, 0, 0);\r\n\r\n            if (type === 1) {\r\n                ctx.font = '64px TT Commons Demibold';\r\n                ctx.textAlign = 'center';\r\n                ctx.fillStyle = '#616161';\r\n                ctx.fillText(title, 539, 708 + 13 + 489);\r\n            }\r\n\r\n            img.src = this.props.t.state.canvas_;\r\n            ctx.drawImage(img, 198, 618, 683, 683);\r\n\r\n            try {\r\n                await bridge.send('VKWebAppShowStoryBox', {\r\n                    background_type: 'image',\r\n                    blob: canvas.toDataURL('image/png'),\r\n                    attachment: {\r\n                        url: 'https://vk.com/app' + getUrlParams().vk_app_id,\r\n                        text: 'go_to',\r\n                        type: 'url'\r\n                    }\r\n                });\r\n                this.props.t.socket.call('games.share', {gameId: this.props.t.state.gameId});\r\n            } catch (e) {\r\n            }\r\n            this.props.t.updateData();\r\n            this.props.t.setPopout(null);\r\n            this.props.t.setActivePanel('main');\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const\r\n            {t} = this.props,\r\n            {isDrawer, isWinner, winnerId, drawerId, word} = this.state,\r\n            time = Math.round((t.state.gameEnd - t.state.gameStart) / 1000)\r\n        ;\r\n\r\n        return (\r\n            <div className='Result'>\r\n                {\r\n                    isDrawer ?\r\n                        winnerId !== 0 ?\r\n                            <React.Fragment>\r\n                                <h1>Ты молодец!</h1>\r\n                                <p>Твою картину угадали за {decOfNum(time, ['секунду', 'секунды', 'секунд'])}</p>\r\n                            </React.Fragment>\r\n                            :\r\n                            <React.Fragment>\r\n                                <h1>Время вышло</h1>\r\n                                <p>Никто не угадал что нарисовано на твоей картине</p>\r\n                            </React.Fragment>\r\n                        :\r\n                        winnerId !== 0 ?\r\n                            isWinner ?\r\n                                <React.Fragment>\r\n                                    <h1>Ты молодец!</h1>\r\n                                    <p>Ты первый угадал, что {vk_local_users[drawerId].first_name} нарисовал на\r\n                                        картине</p>\r\n                                </React.Fragment>\r\n                                :\r\n                                <React.Fragment>\r\n                                    <h1>Игра окончена</h1>\r\n                                    <p>{vk_local_users[winnerId].first_name} был первым, кто угадал, что изображено на\r\n                                        картине</p>\r\n                                </React.Fragment>\r\n                            :\r\n                            <React.Fragment>\r\n                                <h1>Время вышло</h1>\r\n                                <p>Никто не угадал что нарисовано на картине</p>\r\n                            </React.Fragment>\r\n                }\r\n                <div className='Canvas_Container'>\r\n                    <img alt='canvas' src={t.state.canvas_}/>\r\n                    <h2>{word.nom.substring(0, 1).toUpperCase() + word.nom.substring(1)}</h2>\r\n                    <Button\r\n                        before={<Icon28ShareOutline width={16} height={16}/>}\r\n                        size='m' mode='gradient'\r\n                        onClick={() => {\r\n                            this.shareStory();\r\n                        }}\r\n                    >\r\n                        Поделиться\r\n                    </Button>\r\n                </div>\r\n                <Button\r\n                    size='m' mode='secondary'\r\n                    onClick={() => {\r\n                        t.updateData();\r\n                        t.setActivePanel('main');\r\n                    }}\r\n                >\r\n                    На главную\r\n                </Button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nResult.defaultProps = {};\r\n\r\nResult.propTypes = {\r\n    t: PropTypes.object\r\n};\r\n\r\nexport default Result;","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport {Button} from \"@vkontakte/vkui\";\r\n\r\nexport class Placeholder extends PureComponent {\r\n    render() {\r\n        const\r\n            {icon, title, description, buttonText, buttonIcon, buttonOnClick} = this.props\r\n        ;\r\n\r\n        return (\r\n            <div className='Placeholder'>\r\n                {React.cloneElement(icon, {className: 'Placeholder__Icon'})}\r\n                <div>\r\n                    <h1>{title}</h1>\r\n                    <p>{description}</p>\r\n                    <Button\r\n                        after={buttonIcon}\r\n                        size='m' mode='gradient'\r\n                        onClick={buttonOnClick}\r\n                    >{buttonText}</Button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nPlaceholder.defaultProps = {};\r\n\r\nPlaceholder.propTypes = {\r\n    icon: PropTypes.object.isRequired,\r\n    title: PropTypes.string.isRequired,\r\n    description: PropTypes.string,\r\n    buttonText: PropTypes.string.isRequired,\r\n    buttonIcon: PropTypes.object,\r\n    buttonOnClick: PropTypes.func.isRequired\r\n};\r\n\r\nexport default Placeholder;","import openSocket from \"socket.io-client\";\r\n\r\nclass Socket {\r\n    constructor() {\r\n        this.onConnect = this.onConnect.bind(this);\r\n        this.onDisconnect = this.onDisconnect.bind(this);\r\n        this.onConnectionError = this.onConnectionError.bind(this);\r\n        this.getSocket = this.getSocket.bind(this);\r\n    }\r\n\r\n    onConnect(callback) {\r\n        this.socket.on('connect', callback);\r\n    }\r\n\r\n    onDisconnect(callback) {\r\n        this.socket.on('disconnect', callback);\r\n    }\r\n\r\n    onConnectionError(callback) {\r\n        this.socket.on('connect_error', callback);\r\n    }\r\n\r\n    call(method, params, callback) {\r\n        this.socket.emit(method, params, callback);\r\n    }\r\n\r\n    subscribe(event, callback) {\r\n        this.socket.on(event, callback);\r\n    }\r\n\r\n    unsubscribe(...events) {\r\n        for (const event of events) {\r\n            this.socket.removeAllListeners(event);\r\n        }\r\n    }\r\n\r\n    connect(url, query) {\r\n        if (this.socket) {\r\n            this.socket.connect();\r\n        } else {\r\n            this.socket = openSocket.connect(url, {\r\n                path: '/socket.io',\r\n                query,\r\n                transports: ['websocket', 'polling', 'flashsocket'],\r\n                reconnection: false\r\n            });\r\n        }\r\n    }\r\n\r\n    getSocket() {\r\n        return this.socket;\r\n    }\r\n}\r\n\r\nexport default Socket;","import React from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport '../../css/Drawing/Global.css';\r\n\r\nimport {get, getUrlParams, getVKUsers, isPlatformDesktop, loadFonts, openUrl, vk_local_users} from \"../../js/utils\";\r\nimport {\r\n    Panel,\r\n    View\r\n} from '@vkontakte/vkui';\r\nimport {Icon28ChevronRightOutline} from \"@vkontakte/icons\";\r\n\r\nimport fetch from 'node-fetch';\r\n\r\nimport {registerFont, createCanvas, loadImage} from 'canvas';\r\nimport request from \"request\";\r\n\r\nimport {ReactComponent as IconOnboard} from \"../../assets/drawing/icons/Icon.svg\";\r\nimport {ReactComponent as IconError} from \"../../assets/drawing/icons/IconError.svg\";\r\n\r\nimport Main from \"./Main\";\r\nimport Gallery from \"./Gallery\";\r\nimport Rating from \"./Rating\";\r\nimport Search from \"./Search\";\r\nimport Game from \"./Game\";\r\nimport Result from \"./Result\";\r\nimport Placeholder from \"./Placeholder\";\r\n\r\nimport Socket from '../../js/socket';\r\n\r\nimport (`../../css/Drawing/${window.location.search.length > 0 && JSON.parse('{\"' + decodeURI(window.location.search.substring(1)).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g, '\":\"') + '\"}').vk_platform === 'desktop_web' ? 'Desktop' : 'Mobile'}.css`);\r\n\r\nconst\r\n    socket = new Socket()\r\n;\r\n\r\nclass Drawing extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            activePanel: 'main',\r\n            history: ['main'],\r\n\r\n            colors: [\r\n                '#000000',\r\n                '#FFFFFF',\r\n                '#E63902',\r\n                '#EA5A03',\r\n                '#FA8A00',\r\n                '#FBB101',\r\n                '#FDE401',\r\n                '#85B201',\r\n                '#019317',\r\n                '#019C8B',\r\n                '#035AA2',\r\n                '#00247A',\r\n                '#500A6D',\r\n                '#A9236B'\r\n            ]\r\n        };\r\n\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n        this.updateData = this.updateData.bind(this);\r\n        this.back = () => {\r\n            const {history, popout} = this.state;\r\n\r\n            if (popout !== null && popout !== undefined)\r\n                return;\r\n\r\n            if (history.length > 1) {\r\n                if (history[history.length - 1] === 'search') {\r\n                    socket.call('games.search');\r\n                }\r\n                history.pop();\r\n                this.setState({activePanel: history[history.length - 1], history, snackbar: null});\r\n            } else {\r\n                bridge.send('VKWebAppClose', {status: 'success'});\r\n            }\r\n        };\r\n        this.go = (panel) => {\r\n            const {history} = this.state;\r\n            if (history[history.length - 1] !== panel) {\r\n                history.push(panel);\r\n                window.history.pushState({activePanel: panel}, 'Title');\r\n                this.setState({activePanel: panel, history, snackbar: null});\r\n            }\r\n        };\r\n        this.setActivePanel = (panel) => {\r\n            this.setState({activePanel: panel, history: [panel], snackbar: null});\r\n        };\r\n        this.setPopout = (popout) => {\r\n            //window.history.pushState({popout}, 'Title');\r\n            this.setState({popout});\r\n        };\r\n        this.socket = socket;\r\n    }\r\n\r\n    async componentDidMount() {\r\n        loadFonts();\r\n\r\n        window.addEventListener('popstate', e => {\r\n            e.preventDefault();\r\n            this.back();\r\n        });\r\n\r\n        bridge.subscribe(async ({detail: {type, data}}) => {\r\n            if (type !== undefined) console.log(type, data);\r\n            if (type === 'VKWebAppUpdateConfig') {\r\n                const schemeAttribute = document.createAttribute('scheme');\r\n                schemeAttribute.value = data.scheme ? data.scheme === 'client_light' ? 'bright_light' : data.scheme : 'bright_light';\r\n                document.body.attributes.setNamedItem(schemeAttribute);\r\n            } else if (type === 'VKWebAppViewRestore') {\r\n                this.setState({popout: null});\r\n            }\r\n        });\r\n\r\n        const\r\n            isShowOnboard = (await bridge.send('VKWebAppStorageGet', {keys: ['onboard']})).keys[0].value === '',\r\n            vk_user = await bridge.send('VKWebAppGetUserInfo')\r\n        ;\r\n        await this.setState({isShowOnboard, vk_user});\r\n\r\n        bridge.send('VKWebAppEnableSwipeBack');\r\n\r\n        this.connect();\r\n\r\n        socket.subscribe('exit', r => {\r\n            this.setState({placeholderText: r.title});\r\n            this.setActivePanel('placeholder');\r\n            bridge.send('VKWebAppInit');\r\n        });\r\n        socket.onConnectionError((e) => {\r\n            console.error(e);\r\n            this.setState({placeholderText: 'Не удалось подключиться к серверу.'});\r\n            this.setActivePanel('placeholder');\r\n            bridge.send('VKWebAppInit');\r\n        });\r\n        socket.onDisconnect(() => {\r\n            this.setActivePanel('placeholder');\r\n            bridge.send('VKWebAppInit');\r\n        });\r\n\r\n        await new Promise(resolve =>\r\n            socket.onConnect(async () => {\r\n                this.setActivePanel('main');\r\n                await this.updateData();\r\n                resolve(true);\r\n            })\r\n        );\r\n\r\n        bridge.send('VKWebAppInit');\r\n    }\r\n\r\n    connect() {\r\n        socket.connect('https://draw.avocado.special.vk-apps.com', getUrlParams());\r\n    }\r\n\r\n    async updateData() {\r\n        await new Promise(resolve => {\r\n            socket.call('users.getTopNumber', {}, r => {\r\n                this.setState({top_number: r.response});\r\n            });\r\n            socket.call('users.getTop', {}, async r => {\r\n                const\r\n                    user_ids = r.response.map(value => value.id),\r\n                    vk_users = await getVKUsers(user_ids)\r\n                ;\r\n\r\n                this.setState({top: r.response.map(value => ({...vk_local_users[value.id], ...value}))});\r\n            });\r\n            socket.call('users.get', {}, r => {\r\n                this.setState({user: r.response});\r\n\r\n                socket.call('games.getByDrawerId', {id: this.state.vk_user.id}, r => {\r\n                    this.setState({gamesAsDrawer: r.response});\r\n\r\n                    socket.call('games.getByWinnerId', {id: this.state.vk_user.id}, r => {\r\n                        this.setState({gamesAsWinner: r.response});\r\n\r\n                        resolve(true);\r\n                    });\r\n                });\r\n            })\r\n        });\r\n\r\n        this.setState({time: Date.now()});\r\n        return true;\r\n    }\r\n\r\n    render() {\r\n        const\r\n            {\r\n                activePanel,\r\n                popout,\r\n\r\n                isShowOnboard, vk_user, user,\r\n\r\n                placeholderText,\r\n\r\n                gamesAsWinner, gamesAsDrawer\r\n            } = this.state\r\n        ;\r\n\r\n        return vk_user && user && gamesAsWinner && gamesAsDrawer ? (\r\n            <View\r\n                activePanel={isShowOnboard ? 'onboard' : activePanel}\r\n                popout={popout}\r\n            >\r\n                {\r\n                    [\r\n                        {\r\n                            id: 'onboard',\r\n                            component: <Placeholder\r\n                                icon={<IconOnboard/>}\r\n                                title='Добро пожаловать'\r\n                                description='Здесь Вы можете почувствовать себя в роли как художника, так и шерлока. Рисуйте картины, и угадывайте чужие.'\r\n                                buttonIcon={<Icon28ChevronRightOutline width={16} height={16}/>}\r\n                                buttonText='Продолжить'\r\n                                buttonOnClick={() => {\r\n                                    bridge.send('VKWebAppStorageSet', {key: 'onboard', value: '1'});\r\n                                    this.setState({isShowOnboard: false});\r\n                                }}\r\n                            />\r\n                        },\r\n                        {\r\n                            id: 'placeholder',\r\n                            component: <Placeholder\r\n                                icon={<IconError/>}\r\n                                title='Соединение потеряно'\r\n                                description={placeholderText}\r\n                                buttonText='Переподключиться'\r\n                                buttonOnClick={() => {\r\n                                    this.connect();\r\n                                }}\r\n                            />\r\n                        },\r\n                        {\r\n                            id: 'main',\r\n                            component: <Main t={this} time={this.state.time}/>\r\n                        },\r\n                        {\r\n                            id: 'gallery',\r\n                            component: <Gallery t={this}/>\r\n                        },\r\n                        {\r\n                            id: 'rating',\r\n                            component: <Rating t={this}/>\r\n                        },\r\n                        {\r\n                            id: 'search',\r\n                            component: <Search t={this}/>\r\n                        },\r\n                        {\r\n                            id: 'game',\r\n                            component: <Game t={this}/>\r\n                        },\r\n                        {\r\n                            id: 'result',\r\n                            component: <Result t={this}/>\r\n                        }\r\n                    ].map(({id, component}, index) =>\r\n                        <Panel id={id} key={`Panel__${index}`}>\r\n                            {component}\r\n                        </Panel>\r\n                    )\r\n                }\r\n            </View>\r\n        ) : <div/>;\r\n    }\r\n}\r\n\r\nexport default Drawing;","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport '@vkontakte/vkui/dist/unstable.css'\nimport {AdaptivityProvider, AppRoot, ConfigProvider} from \"@vkontakte/vkui\";\n\nimport './css/Fonts.css';\nimport './css/Error.css';\nimport './css/Utils.css';\n\n//import App from './apps/Tracker';\n//import App from './apps/Wheel';\n//import App from './apps/MedicalCard';\n//import App from './apps/AskMe';\n//import App from './apps/LoveAnalysis';\n//import App from './apps/BattleStat';\n//import App from './apps/BattleStatCatalog';\n//import App from './apps/YearTest';\n//import App from './apps/IQTest';\n//import App from './apps/MvsW';\n//import App from './apps/DeathDate';\n//import App from './apps/Slaves';\n//import App from './apps/VKTime';\n//import App from './apps/LikesStat';\n//import App from './apps/VKAccPrice';\n//import App from './apps/DateCelebrity';\n//import App from './apps/NameInCountry';\n//import App from './apps/AccKarma';\n//import App from './apps/AdvertisementApp';\n//import App from './apps/AdvertisementAppSite';\n//import App from './apps/ClickerBattle/ClickerBattle';\nimport App from './apps/Drawing/Drawing';\n\n\nReactDOM.render(\n    false ?\n        <App/>\n        :\n        <ConfigProvider>\n            <AdaptivityProvider>\n                <AppRoot>\n                    <App/>\n                </AppRoot>\n            </AdaptivityProvider>\n        </ConfigProvider>, document.getElementById('root')\n);\n"],"sourceRoot":""}