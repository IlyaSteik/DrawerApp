{"version":3,"sources":["assets/drawing/stories/Story1.png","assets/drawing/stories/Story2.png","assets/drawing/stories/Story3.png","assets/drawing/stories sync /^/Story.*/.png$","css/Drawing lazy /^/.*/.css$/ groupOptions: {} namespace object","assets/drawing/icons/Icon_Group.png","js/utils.js","js/drawerapp/utils.js","assets/drawing/icons/Icon.svg","assets/drawing/icons/IconError.svg","apps/Drawing/Main.js","apps/Drawing/Gallery.js","apps/Drawing/Rating.js","apps/Drawing/Search.js","assets/drawing/icons/IconErase.svg","apps/Drawing/Game.js","apps/Drawing/Result.js","apps/Drawing/Placeholder.js","js/socket.js","apps/Drawing/Likes.js","apps/Drawing/PictureInfo.js","apps/Drawing/Drawing.js","index.js"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","webpackAsyncContext","Promise","then","ids","all","slice","t","defaultFonts","loadFonts","fonts","font","span","document","createElement","style","fontFamily","innerText","body","appendChild","setTimeout","remove","decOfNum","number","titles","needNumber","undefined","decCache","Math","min","shortIntegers","int","toString","replace","getUrlParams","window","location","search","length","JSON","parse","decodeURI","substring","isPlatformDesktop","vk_platform","openUrl","url","element","href","target","click","getSrcUrl","resource","origin","pathname","getBase64Image","imageUri","a","canvas","ctx","getContext","img","Image","src","crossOrigin","onload","width","this","height","drawImage","toDataURL","vk_local_users","name_cases","getVKUsers","user_ids","Set","filter","value","i","floor","users","j","vkApiRequest","join","fields","concat","user","find","key","screen_name","method","params","static_params","query","stringify","encodeURIComponent","url_","res","rej","fetch","json","answer","catch","err","error","text","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","fillRule","clipRule","d","fill","_ref5","_ref7","cx","cy","rx","ry","_ref8","r","stroke","strokeWidth","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","_ref24","_ref25","_ref26","_ref27","_ref28","_ref29","_ref","svgRef","title","props","viewBox","ref","ForwardRef","forwardRef","Main","socket","unsubscribe","subscribe","setState","online","count","forceUpdate","state","lvl","pictures","successfulPictures","guessedPictures","likes","gamesAsWinner","gamesAsDrawer","top_number","offset","colors","max","className","vk_user","photo_100","size","shadow","first_name","index","marginLeft","background","border","onClick","go","num","alt","setPopout","limit","randomGamesLike","response","drawerId","topLikes","PureComponent","defaultProps","Gallery","canGetMore","prevY","observer","IntersectionObserver","handleObserver","bind","root","rootMargin","threshold","observe","loadingRef","entities","y","boundingClientRect","word","gameId","pic","require","createCanvas","loadImage","canvasData","toUpperCase","textAlign","fillStyle","fillText","bridge","send","background_type","blob","attachment","vk_app_id","type","console","snackbar","onClose","isDesktop","Fragment","left","back","separator","margin","marginTop","gridGap","like_currentPictureSelected","like_method","like_param","Rating","top","last_name","sex","guessedPicturesToday","interval","Search","lobbyPlayers","point_count","starting","clearInterval","setInterval","players","lobbyId","gameStart","Date","now","xmlns","x","x1","y1","x2","y2","strokeDasharray","transform","gradientUnits","stopColor","patternContentUnits","photo_max_orig","Array","current","Game","drawer","isDrawer","selectedColor","drawing","time","messages","onMouseDown","onMouseUp","throttle","onMouseMove","drawLine","winnerId","canvas_","gameEnd","setActivePanel","data","x0","y0","color","canvasContext","clearRect","user_id","message","comments","getElementsByClassName","scrollIntoView","addEventListener","clientX","touches","clientY","canvasRect","getBoundingClientRect","er","beginPath","moveTo","lineTo","strokeStyle","lineWidth","closePath","callback","delay","previousCall","getTime","alignSelf","header","display","justifyContent","nom","outline","opacity","pointerEvents","hasHover","cursor","replaceAll","iosCloseItem","autoclose","mode","autoFocus","onChange","currentTarget","placeholder","onKeyDown","trim","onFocus","getElementById","Result","isWinner","shareStory","updateData","isLiked","round","game_id","before","Placeholder","icon","description","buttonText","buttonIcon","buttonOnClick","buttonMode","buttonBack","React","cloneElement","after","Socket","onConnect","onDisconnect","onConnectionError","getSocket","on","emit","event","events","removeAllListeners","connect","openSocket","path","transports","reconnection","Likes","PictureInfo","shareStory1","shareStory2","param","list","game","needButtonResumeDraw","ButtonResumeDraw","stretched","layout","action","onActionClick","endTime","startTime","like_picturesList","disabled","Drawing","activePanel","history","componentDidMount","popout","pop","status","panel","push","pushState","scale","documentElement","clientHeight","setProperty","preventDefault","detail","log","schemeAttribute","createAttribute","scheme","attributes","setNamedItem","isShowOnboard","isShowVkGroup","placeholderText","component","group_id","Component","ReactDOM","render"],"mappings":"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","file":"static/js/main.364339b3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Story1.c1713922.png\";","module.exports = __webpack_public_path__ + \"static/media/Story2.28d56ba9.png\";","module.exports = __webpack_public_path__ + \"static/media/Story3.2f47cccb.png\";","var map = {\n\t\"./Story1.png\": 165,\n\t\"./Story2.png\": 266,\n\t\"./Story3.png\": 267\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 668;","var map = {\n\t\"./Desktop.css\": [\n\t\t695,\n\t\t3\n\t],\n\t\"./Global.css\": [\n\t\t193\n\t],\n\t\"./Mobile.css\": [\n\t\t696,\n\t\t4\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 692;\nmodule.exports = webpackAsyncContext;","module.exports = __webpack_public_path__ + \"static/media/Icon_Group.9fbb0b78.png\";","import {default as bridge} from '@vkontakte/vk-bridge';\r\n\r\nexport function convertTextToLines(text, font, max_width) {\r\n    const\r\n        {createCanvas} = require('canvas'),\r\n        canvas = createCanvas(1080, 1920),\r\n        ctx = canvas.getContext('2d')\r\n    ;\r\n    ctx.font = font;\r\n    let width = 0, lines = [], result, i, j;\r\n\r\n    while (text.length) {\r\n        for (i = text.length; ctx.measureText(text.substr(0, i)).width > max_width; i--) ;\r\n        result = text.substr(0, i);\r\n\r\n        if (i !== text.length)\r\n\r\n            for (j = 0; result.indexOf(' ', j) !== -1; j = result.indexOf(' ', j) + 1) ;\r\n        lines.push(result.substr(0, j || result.length));\r\n\r\n        width = Math.max(width, ctx.measureText(lines[lines.length - 1]).width);\r\n        text = text.substr(lines[lines.length - 1].length, text.length);\r\n    }\r\n\r\n    return lines;\r\n}\r\n\r\nexport async function get(url, params) {\r\n    const\r\n        query = params ? '?' + Object.keys(params).map((value) =>\r\n            encodeURIComponent(value) + '=' + encodeURIComponent(params[value])\r\n        ).join('&') : '',\r\n        url_ = `${url}${query}`;\r\n    return await new Promise((res, rej) => {\r\n        fetch(url_, {method: 'GET'})\r\n            .then(res =>\r\n                res.json()\r\n            )\r\n            .then(answer =>\r\n                res(answer)\r\n            ).catch(err =>\r\n            res({error: {code: -1, text: err.toString()}})\r\n        );\r\n    });\r\n}\r\n\r\nexport const defaultFonts = [\r\n    'SF Pro Text',\r\n    'SF Pro Text Heavy',\r\n    'SF Pro Text Semibold',\r\n    'SF Pro Display',\r\n    'SF Pro Display Bold',\r\n    'SF Pro Display Semibold',\r\n    'SF Pro Display Medium',\r\n    'SF Pro Rounded',\r\n    'SF Pro Rounded Semibold',\r\n    'SF Pro Rounded Bold',\r\n    'SF UI Display',\r\n    'SF UI Text',\r\n    'TT Commons',\r\n    'TT Commons Bold',\r\n    'TT Commons Demibold',\r\n    'Manrope ExtraBold'\r\n];\r\n\r\nexport function loadFonts(fonts = defaultFonts) {\r\n    for (const font of fonts) {\r\n        const span = document.createElement('span');\r\n        span.style.fontFamily = font;\r\n        span.innerText = '.';\r\n        document.body.appendChild(span);\r\n        setTimeout(() => span.remove(), 1);\r\n    }\r\n}\r\n\r\nexport function animateValue(obj, start, end, duration) {\r\n    if (start === end || end - start === 1) {\r\n        obj.innerHTML = end;\r\n    } else {\r\n        let startTimestamp = null;\r\n        const step = (timestamp) => {\r\n            if (!startTimestamp) startTimestamp = timestamp;\r\n            const progress = Math.min((timestamp - startTimestamp) / duration, 1);\r\n            obj.innerHTML = Math.floor(progress * (end - start) + start);\r\n            if (progress < 1) {\r\n                window.requestAnimationFrame(step);\r\n            }\r\n        };\r\n        window.requestAnimationFrame(step);\r\n    }\r\n}\r\n\r\nexport function cps(array) {\r\n    if (array.length !== 0) {\r\n        let\r\n            first_date = array[0],\r\n            cur_pos = 0,\r\n            clicks_per_second = []\r\n        ;\r\n        array = array.map(value => value - first_date);\r\n\r\n        for (const click of array) {\r\n            cur_pos = click < 1000 ? 0 : parseInt((click + '').substring(0, (click + '').length - 3));\r\n            clicks_per_second[cur_pos] = clicks_per_second[cur_pos] > 0 ? clicks_per_second[cur_pos] + 1 : 1;\r\n        }\r\n\r\n        clicks_per_second = clicks_per_second.filter(value => value > 0);\r\n\r\n        const\r\n            max_cps = Math.max(...clicks_per_second),\r\n            min_cps = Math.min(...clicks_per_second),\r\n            mid_cps = Math.ceil((max_cps + min_cps) / 2)\r\n        ;\r\n        return {max_cps, min_cps, mid_cps};\r\n    } else {\r\n        return {max_cps: 0, min_cps: 0, mid_cps: 0};\r\n    }\r\n}\r\n\r\nfunction componentToHex(c) {\r\n    const hex = c.toString(16);\r\n    return hex.length == 1 ? '0' + hex : hex;\r\n}\r\n\r\nexport function rgbToHex(r, g, b) {\r\n    return '#' + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n}\r\n\r\nexport function sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport function decOfNum(number, titles, needNumber = true) {\r\n    if (number !== undefined) {\r\n        let decCache = [],\r\n            decCases = [2, 0, 1, 1, 1, 2];\r\n        if (!decCache[number]) decCache[number] = number % 100 > 4 && number % 100 < 20 ? 2 : decCases[Math.min(number % 10, 5)];\r\n        return (needNumber ? number + ' ' : '') + titles[decCache[number]];\r\n    }\r\n}\r\n\r\nexport function numToStr(number) {\r\n    if (number > 0 && number <= 10) {\r\n        const words = [\r\n            'первое', 'второе', 'третье', 'четвертое', 'пятое', 'шестое', 'седьмое', 'восьмое', 'девятое', 'десятое'\r\n        ];\r\n        return words[number - 1];\r\n    } else {\r\n        return number + '';\r\n    }\r\n}\r\n\r\nexport function shortIntegers(int) {\r\n    try {\r\n        return int.toString().replace(/(\\d)(?=(\\d\\d\\d)+([^\\d]|$))/g, '$1 ');\r\n    } catch (e) {\r\n        return 0;\r\n    }\r\n}\r\n\r\nexport function getRandomInt(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nexport function getRandomInts(min, max, count) {\r\n    const array = [];\r\n    for (let i = 0; i < count; i++) {\r\n        const int = getRandomInt(min, max);\r\n        if (array.indexOf(int) === -1) {\r\n            array.push(int);\r\n        } else {\r\n            if (max >= count)\r\n                i--;\r\n            else\r\n                array.push(int);\r\n        }\r\n    }\r\n    return array;\r\n}\r\n\r\nexport function nodeToString(node) {\r\n    let tmpNode = document.createElement(\"div\");\r\n    tmpNode.appendChild(node.cloneNode(true));\r\n    let str = tmpNode.innerHTML;\r\n    tmpNode = node = null;\r\n    return str;\r\n}\r\n\r\nexport function convertMiliseconds(miliseconds) {\r\n    let hours, minutes, total_hours, total_minutes, total_seconds;\r\n\r\n    total_seconds = parseInt(Math.floor(miliseconds / 1000));\r\n    total_minutes = parseInt(Math.floor(total_seconds / 60));\r\n    total_hours = parseInt(Math.floor(total_minutes / 60));\r\n\r\n    minutes = parseInt(total_minutes % 60);\r\n    hours = parseInt(total_hours % 24);\r\n\r\n    return hours + 'ч. ' + minutes + 'мин.';\r\n}\r\n\r\nexport function convertMsToNormalTime(miliseconds) {\r\n    let hours, minutes, seconds, total_hours, total_minutes, total_seconds;\r\n\r\n    total_seconds = parseInt(Math.floor(miliseconds / 1000));\r\n    total_minutes = parseInt(Math.floor(total_seconds / 60));\r\n    total_hours = parseInt(Math.floor(total_minutes / 60));\r\n\r\n    seconds = parseInt(total_seconds % 60);\r\n    minutes = parseInt(total_minutes % 60);\r\n    hours = parseInt(total_hours % 24);\r\n\r\n    return {hours, minutes, seconds};\r\n}\r\n\r\nconst getImage = (src) =>\r\n    new Promise((res, rej) => {\r\n        const image = new Image();\r\n\r\n        image.onload = () => res(image);\r\n        image.crossOrigin = 'anonymous';\r\n        image.onstalled = (e) => {\r\n            console.log('Failed to fetch data, but trying.', e);\r\n            rej(e);\r\n        };\r\n        image.onerror = (e) => {\r\n            console.log('Failed to fetch data, error.', e);\r\n            rej(e);\r\n        };\r\n        image.src = src;\r\n    });\r\n\r\nexport async function toBlob(object, dataUrl = true) {\r\n    const\r\n        myCanvas = document.createElement('canvas'),\r\n        ctxt = myCanvas.getContext('2d');\r\n\r\n    let base = typeof object === 'string' ? object : window.btoa(object);\r\n    const img = await getImage(typeof object === 'string' ? base : `data:image/svg+xml;base64,${base}`);\r\n    myCanvas.height = img.height;\r\n    myCanvas.width = img.width;\r\n    if (ctxt === null) {\r\n        return \"\";\r\n    }\r\n    ctxt.drawImage(img, 0, 0, img.width, img.height);\r\n    return dataUrl ? myCanvas.toDataURL() : myCanvas;\r\n}\r\n\r\nexport function getUrlParams() {\r\n    return window.location.search.length > 0 && JSON.parse('{\"' + decodeURI(window.location.search.substring(1)).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g, '\":\"') + '\"}');\r\n}\r\n\r\nexport const platforms = {\r\n    desktop_web: /desktop_web/g,\r\n    mobile_android: /mobile_android/g,\r\n    mobile_android_messenger: /mobile_android_messenger/g,\r\n    mobile_ipad: /mobile_ipad/g,\r\n    mobile_iphone: /mobile_iphone/g,\r\n    mobile_iphone_messenger: /mobile_iphone_messenger/g,\r\n    mobile_web: /mobile_web/g,\r\n\r\n    android: /mobile_android|mobile_android_messenger/g,\r\n    ios: /mobile_ipad|mobile_iphone|mobile_iphone_messenger/g\r\n};\r\n\r\nexport function isPlatformIOS() {\r\n    return getUrlParams().vk_platform === 'mobile_iphone';\r\n}\r\n\r\nexport function isPlatformAndroid() {\r\n    return platforms.android.test(getUrlParams().vk_platform);\r\n}\r\n\r\nexport function isPlatformDesktop() {\r\n    return getUrlParams().vk_platform === 'desktop_web';\r\n}\r\n\r\nexport let\r\n    vk_local_users = {},\r\n    name_cases = ['first_name', 'last_name', 'first_name_dat', 'first_name_nom', 'first_name_gen', 'first_name_acc', 'first_name_ins', 'first_name_abl', 'last_name_dat', 'last_name_nom', 'last_name_gen', 'last_name_acc', 'last_name_ins', 'last_name_abl']\r\n;\r\n\r\nexport async function getVKUsers(ids) {\r\n    const\r\n        user_ids = [\r\n            ...new Set(\r\n                ids\r\n                    .filter(value => vk_local_users[value] === undefined)\r\n                    .map(\r\n                        value => typeof value === 'number' ? value : value.replace('@', '')\r\n                            .replace('id', '')\r\n                            .replace('vk.com/', '')\r\n                            .replace('http://', '')\r\n                            .replace('https://', '')\r\n                    )\r\n            )\r\n        ],\r\n        i = Math.floor(user_ids.length / 100)\r\n    ;\r\n\r\n    if (user_ids.length > 0) {\r\n        let users = [];\r\n\r\n        for (let j = 0; j < i + 1; j++) {\r\n            users = users.concat(\r\n                await vkApiRequest('users.get', {\r\n                    user_ids: user_ids.slice(j * 100, j * 100 + 100).join(','),\r\n                    fields: ['screen_name', 'photo_100', 'photo_200', 'photo_max_orig', 'sex', ...name_cases].join(',')\r\n                })\r\n            );\r\n        }\r\n\r\n        for (const user of users) {\r\n            vk_local_users[user.id] = user;\r\n        }\r\n    }\r\n\r\n    return ids.map(value => vk_local_users[value] || vk_local_users[Object.keys(vk_local_users).find(key => vk_local_users[key].screen_name === value)]);\r\n}\r\n\r\nexport async function vkApiRequest(method, params = {}) {\r\n    return (await bridge.send('VKWebAppCallAPIMethod', {\r\n        method,\r\n        params: {\r\n            ...params,\r\n            v: '5.126',\r\n            access_token: params.access_token\r\n        }\r\n    })).response\r\n}\r\n\r\nexport function viewportToPixels(value) {\r\n    const\r\n        parts = value.match(/([0-9\\.]+)(vh|vw)/),\r\n        q = Number(parts[1]),\r\n        side = window[['innerHeight', 'innerWidth'][['vh', 'vw'].indexOf(parts[2])]]\r\n    ;\r\n    return side * (q / 100)\r\n}\r\n\r\nexport function openUrl(url) {\r\n    const element = document.createElement('a');\r\n    element.href = url;\r\n    element.target = '_blank';\r\n    element.click();\r\n    element.remove();\r\n}\r\n\r\nexport function getUrlLocation() {\r\n    return window.location.origin + window.location.pathname.replace('/index.html', '');\r\n}\r\n\r\nexport function getSrcUrl(resource) {\r\n    return getUrlLocation() + resource.substring(1);\r\n}\r\n\r\nexport async function getBase64Image(imageUri) {\r\n    const\r\n        canvas = document.createElement('canvas'),\r\n        ctx = canvas.getContext('2d'),\r\n        img = new Image()\r\n    ;\r\n    img.src = 'https://murmuring-bastion-20764.herokuapp.com/' + imageUri;\r\n    img.crossOrigin = 'Anonymous';\r\n    return await new Promise(resolve =>\r\n        img.onload = function () {\r\n            canvas.width = this.width;\r\n            canvas.height = this.height;\r\n            ctx.drawImage(img, 0, 0, this.width, this.height);\r\n            resolve(canvas.toDataURL('image/png'));\r\n        }\r\n    );\r\n}","import {getUrlParams} from \"../utils\";\r\n\r\nexport let\r\n    vk_local_users = {},\r\n    name_cases = ['first_name', 'last_name', 'first_name_dat', 'first_name_nom', 'first_name_gen', 'first_name_acc', 'first_name_ins', 'first_name_abl', 'last_name_dat', 'last_name_nom', 'last_name_gen', 'last_name_acc', 'last_name_ins', 'last_name_abl']\r\n;\r\n\r\nexport async function getVKUsers(ids) {\r\n    const\r\n        user_ids = [\r\n            ...new Set(\r\n                ids\r\n                    .filter(value => vk_local_users[value] === undefined && value !== undefined)\r\n                    .map(\r\n                        value => typeof value === 'number' ? value : value.replace('@', '')\r\n                            .replace('id', '')\r\n                            .replace('vk.com/', '')\r\n                            .replace('http://', '')\r\n                            .replace('https://', '')\r\n                    )\r\n            )\r\n        ],\r\n        i = Math.floor(user_ids.length / 100)\r\n    ;\r\n\r\n    if (user_ids.length > 0) {\r\n        let users = [];\r\n\r\n        for (let j = 0; j < i + 1; j++) {\r\n            users = users.concat(\r\n                await vkApiRequest('users.getVK', {\r\n                    user_ids: user_ids.slice(j * 100, j * 100 + 100).join(','),\r\n                    fields: ['screen_name', 'photo_100', 'photo_200', 'photo_max_orig', 'sex', ...name_cases].join(',')\r\n                })\r\n            );\r\n        }\r\n\r\n        for (const user of users) {\r\n            vk_local_users[user.id] = user;\r\n        }\r\n    }\r\n\r\n    return ids.map(value => vk_local_users[value] || vk_local_users[Object.keys(vk_local_users).find(key => vk_local_users[key].screen_name === value)]);\r\n}\r\n\r\nexport async function vkApiRequest(method, params = {}) {\r\n    const\r\n        static_params = {...getUrlParams(), query: JSON.stringify(params)},\r\n        query = static_params ? '?' + Object.keys(static_params).map((value) =>\r\n            encodeURIComponent(value) + '=' + encodeURIComponent(static_params[value])\r\n        ).join('&') : '',\r\n        url_ = `https://draw.avocado.special.vk-apps.com/api/${method}${query}`;\r\n    return await new Promise((res, rej) => {\r\n        fetch(url_, {method: 'GET'})\r\n            .then(res =>\r\n                res.json()\r\n            )\r\n            .then(answer =>\r\n                res(answer)\r\n            ).catch(err =>\r\n            res({error: {code: -1, text: err.toString()}})\r\n        );\r\n    });\r\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M110 3.0095V184.326C54.6271 180.939 -0.694326 132.316 31.5388 55.8662C48.1357 16.502 79.4017 2.58244 110 3.0095Z\",\n  fill: \"white\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M110 184.326V3.00952C149.416 3.55965 187.724 27.9163 192.141 52.3571C192.5 54.3448 190.978 56.1206 189 56.5322C129.309 68.9569 155.694 126.363 186.92 132.782C189.625 133.338 191.547 136.155 190.451 138.689C175.893 172.35 142.937 186.341 110 184.326Z\",\n  fill: \"#E7D0A9\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M38 61.5C76.8338 -30.605 173.437 7.4338 180.196 52.3506C180.497 54.3466 178.98 56.1203 177.004 56.5316C117.201 68.977 143.788 126.568 175.088 132.816C177.748 133.347 179.662 136.087 178.68 138.616C142.96 230.579 -5.46898 164.599 38 61.5Z\",\n  fill: \"#FFE4B8\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M150 40C150 49.3888 142.389 57 133 57C133 57 133 49.3888 133 40C133 30.6112 133 23 133 23C142.389 23 150 30.6112 150 40Z\",\n  fill: \"#3769A5\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M116 40C116 49.3888 123.611 57 133 57C133 57 133 49.3888 133 40C133 30.6112 133 23 133 23C123.611 23 116 30.6112 116 40Z\",\n  fill: \"white\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"ellipse\", {\n  cx: 131.5,\n  cy: 40,\n  rx: 11.5,\n  ry: 17,\n  fill: \"#4E9BD4\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 133,\n  cy: 40,\n  r: 18.5,\n  stroke: \"#171C1F\",\n  strokeWidth: 5\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M97 49C97 58.3888 89.3888 66 80 66C80 66 80 58.3888 80 49C80 39.6112 80 32 80 32C89.3888 32 97 39.6112 97 49Z\",\n  fill: \"#EE3C7A\"\n});\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M63 49C63 58.3888 70.6112 66 80 66C80 66 80 58.3888 80 49C80 39.6112 80 32 80 32C70.6112 32 63 39.6112 63 49Z\",\n  fill: \"white\"\n});\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"ellipse\", {\n  cx: 78.5,\n  cy: 49,\n  rx: 11.5,\n  ry: 17,\n  fill: \"#F05F88\"\n});\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 80,\n  cy: 49,\n  r: 18.5,\n  stroke: \"#171C1F\",\n  strokeWidth: 5\n});\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M74 98C74 107.389 66.3888 115 57 115C57 115 57 107.389 57 98C57 88.6112 57 81 57 81C66.3888 81 74 88.6112 74 98Z\",\n  fill: \"#FAAF1A\"\n});\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M40 98C40 107.389 47.6112 115 57 115C57 115 57 107.389 57 98C57 88.6112 57 81 57 81C47.6112 81 40 88.6112 40 98Z\",\n  fill: \"white\"\n});\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"ellipse\", {\n  cx: 55.5,\n  cy: 98,\n  rx: 11.5,\n  ry: 17,\n  fill: \"#FBD20A\"\n});\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 57,\n  cy: 98,\n  r: 18.5,\n  stroke: \"#171C1F\",\n  strokeWidth: 5\n});\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M97 142C97 151.389 89.3888 159 80 159C80 159 80 151.389 80 142C80 132.611 80 125 80 125C89.3888 125 97 132.611 97 142Z\",\n  fill: \"#F05225\"\n});\n\nvar _ref18 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M63 142C63 151.389 70.6112 159 80 159C80 159 80 151.389 80 142C80 132.611 80 125 80 125C70.6112 125 63 132.611 63 142Z\",\n  fill: \"white\"\n});\n\nvar _ref19 =\n/*#__PURE__*/\nReact.createElement(\"ellipse\", {\n  cx: 78.5,\n  cy: 142,\n  rx: 11.5,\n  ry: 17,\n  fill: \"#F16723\"\n});\n\nvar _ref20 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 80,\n  cy: 142,\n  r: 18.5,\n  stroke: \"#171C1F\",\n  strokeWidth: 5\n});\n\nvar _ref21 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 132,\n  cy: 145,\n  r: 14.1471,\n  fill: \"#FFD1B0\",\n  stroke: \"#171C1F\",\n  strokeWidth: 3.82353\n});\n\nvar _ref22 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M31.5384 55.8662C63.9928 -24.637 176.923 -2.44941 191.655 51.924C192.236 54.0694 190.691 56.1691 188.517 56.634C129.451 69.267 155.778 126.38 186.92 132.782C189.625 133.338 191.547 136.155 190.452 138.69C151.491 228.969 -17.9357 178.587 31.5384 55.8662Z\",\n  stroke: \"#171C1F\",\n  strokeWidth: 5\n});\n\nvar _ref23 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M28.789 74.0071H18.789L21.7286 184.733C21.7671 186.184 22.3378 188.007 23.789 188.007C25.2402 188.007 25.8108 186.184 25.8494 184.733L28.789 74.0071Z\",\n  fill: \"#FFE4B8\"\n});\n\nvar _ref24 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M6.28899 48.0071C5.88899 35.2071 15.789 24.3405 20.789 20.5071C22.789 30.5071 26.7889 35.0071 36.2889 42.0071C45.7889 49.0071 40.7889 67.0071 28.789 67.5071C16.789 68.0071 6.78899 64.0071 6.28899 48.0071Z\",\n  fill: \"#FFE4B8\"\n});\n\nvar _ref25 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M24.2888 50.0071C19.7888 51.2929 9.4555 45.5071 5.28883 42.0071C3.78883 52.6738 7.79443 67.5698 25.2889 68.0071C45.2889 68.5071 44.2889 46.0071 36.2888 39.5071C18.2888 40.5071 26.7888 49.2929 24.2888 50.0071Z\",\n  fill: \"#E1E1E1\"\n});\n\nvar _ref26 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M24.2888 46.0071C19.7888 47.2929 9.4555 41.5071 5.28883 38.0071C3.78883 48.6738 7.79443 63.5698 25.2889 64.0071C45.2889 64.5071 44.2889 42.0071 36.2888 35.5071C18.2888 36.5071 26.7888 45.2929 24.2888 46.0071Z\",\n  fill: \"white\"\n});\n\nvar _ref27 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M24.2889 50.0071C19.7889 51.2929 9.45561 45.5071 5.28894 42.0071C7.12227 35.0071 12.7889 20.4072 20.7889 18.0071C22.2889 17.5571 25.7889 38.5071 36.2889 39.5071C18.2889 40.5071 26.7889 49.2929 24.2889 50.0071Z\",\n  fill: \"#F05F88\"\n});\n\nvar _ref28 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M31.7879 74.0868L31.8697 71.0071H28.789H18.789H15.7083L15.79 74.0868L18.7297 184.813C18.7565 185.825 18.9627 187.127 19.5632 188.29C20.1841 189.493 21.5263 191.007 23.789 191.007C26.0516 191.007 27.3939 189.493 28.0148 188.29C28.6153 187.127 28.8214 185.825 28.8483 184.813L31.7879 74.0868ZM23.7307 19.9188L22.7861 15.1958L18.9637 18.1263C16.2 20.2452 12.2308 24.1771 8.98255 29.2847C5.73379 34.3931 3.06551 40.9028 3.29045 48.1008C3.5607 56.7488 6.45078 62.7474 11.4687 66.3757C16.3317 69.8921 22.6414 70.7659 28.9139 70.5045C36.5885 70.1848 41.6847 64.2875 43.4848 58.0232C45.2806 51.7736 44.1224 44.0527 38.0685 39.592C33.3636 36.1252 30.2875 33.4635 28.1265 30.5821C26.0198 27.7733 24.6657 24.5937 23.7307 19.9188Z\",\n  stroke: \"#171C1F\",\n  strokeWidth: 6\n});\n\nvar _ref29 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M5.28894 42.0071C9.45561 45.5071 19.7889 51.2929 24.2889 50.0071C26.7889 49.2929 18.2889 40.5071 36.2889 39.5071\",\n  stroke: \"#171C1F\",\n  strokeWidth: 4\n});\n\nvar SvgIcon = function SvgIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 195,\n    height: 195,\n    viewBox: \"0 0 195 195\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17, _ref18, _ref19, _ref20, _ref21, _ref22, _ref23, _ref24, _ref25, _ref26, _ref27, _ref28, _ref29);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Icon.8e925224.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M80.4243 72.7816L73.3533 79.8527L153.727 156.069C154.78 157.068 156.473 157.953 157.499 156.927C158.525 155.901 157.639 154.208 156.641 153.155L80.4243 72.7816Z\",\n  fill: \"#FFE4B8\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M46.1297 70.3067C36.7958 61.5386 36.1123 46.8544 36.9373 40.6083C45.4226 46.2651 51.4329 46.6187 63.1002 44.8509C74.7675 43.0832 83.9598 59.3466 75.8281 68.1854C67.6964 77.0242 57.7969 81.2669 46.1297 70.3067Z\",\n  fill: \"#FFE4B8\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M60.2718 58.9932C57.9989 63.0844 46.601 66.3 41.1799 66.7714C47.6617 75.3745 61.0271 83.0752 73.7068 71.014C88.2026 57.2254 71.5855 42.0226 61.3324 43.0833C49.3116 56.5184 61.5345 56.7204 60.2718 58.9932Z\",\n  fill: \"#E1E1E1\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M57.4433 56.1648C55.1704 60.2559 43.7725 63.4715 38.3514 63.9429C44.8332 72.5461 58.1986 80.2467 70.8783 68.1855C85.3741 54.3969 68.757 39.1941 58.5039 40.2548C46.4831 53.6899 58.706 53.8919 57.4433 56.1648Z\",\n  fill: \"white\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M60.2718 58.9931C57.999 63.0842 46.6011 66.2999 41.18 66.7713C37.5266 60.5252 31.2098 46.1945 35.1696 38.8406C35.912 37.4617 53.2008 49.8007 61.3325 43.0832C49.3117 56.5182 61.5345 56.7203 60.2718 58.9931Z\",\n  fill: \"#F05F88\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M71.2319 77.7314L69.0536 79.9098L71.289 82.0296L151.663 158.246C152.397 158.943 153.464 159.717 154.711 160.116C156.001 160.527 158.02 160.649 159.62 159.049C161.22 157.449 161.099 155.429 160.687 154.139C160.289 152.892 159.514 151.826 158.818 151.091L82.6012 70.7173L80.4814 68.4819L78.303 70.6603L71.2319 77.7314ZM38.6014 38.1121L34.5938 35.4404L33.9631 40.2154C33.5071 43.668 33.4808 49.2548 34.7955 55.1634C36.1105 61.0727 38.8268 67.5626 44.0756 72.4933C50.3818 78.4173 56.667 80.6153 62.7808 79.6327C68.7059 78.6804 73.7854 74.8367 78.0359 70.2166C83.2366 64.5637 82.6701 56.7901 79.5135 51.0878C76.3642 45.3988 70.0857 40.7583 62.6508 41.8848C56.8725 42.7603 52.8153 43.0534 49.2498 42.544C45.7739 42.0474 42.5682 40.7566 38.6014 38.1121Z\",\n  stroke: \"#171C1F\",\n  strokeWidth: 6\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M41.1799 66.7713C46.601 66.2999 57.9989 63.0843 60.2718 58.9931C61.5344 56.7203 49.3116 56.5183 61.3324 43.0832\",\n  stroke: \"#171C1F\",\n  strokeWidth: 4\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M121.432 80.5199L114.36 73.4488L38.144 153.823C37.1454 154.876 36.2596 156.568 37.2858 157.595C38.312 158.621 40.0047 157.735 41.0578 156.736L121.432 80.5199Z\",\n  fill: \"#FFE4B8\"\n});\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M123.906 46.2252C132.675 36.8914 147.359 36.2079 153.605 37.0329C147.948 45.5181 147.594 51.5285 149.362 63.1958C151.13 74.863 134.867 84.0554 126.028 75.9237C117.189 67.792 112.946 57.8925 123.906 46.2252Z\",\n  fill: \"#FFE4B8\"\n});\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M135.22 60.3674C131.129 58.0945 127.913 46.6966 127.442 41.2755C118.839 47.7573 111.138 61.1227 123.199 73.8024C136.988 88.2981 152.191 71.6811 151.13 61.428C137.695 49.4072 137.493 61.63 135.22 60.3674Z\",\n  fill: \"#E1E1E1\"\n});\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M138.048 57.5389C133.957 55.266 130.742 43.8681 130.27 38.447C121.667 44.9288 113.966 58.2942 126.028 70.9739C139.816 85.4697 155.019 68.8526 153.958 58.5995C140.523 46.5787 140.321 58.8016 138.048 57.5389Z\",\n  fill: \"white\"\n});\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M135.22 60.3674C131.129 58.0946 127.913 46.6967 127.442 41.2755C133.688 37.6222 148.019 31.3053 155.373 35.2651C156.751 36.0076 144.412 53.2964 151.13 61.4281C137.695 49.4073 137.493 61.6301 135.22 60.3674Z\",\n  fill: \"#FBD20A\"\n});\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M116.482 71.3275L114.303 69.1491L112.184 71.3846L35.9671 151.758C35.2706 152.493 34.4957 153.559 34.0976 154.807C33.6861 156.096 33.5646 158.116 35.1645 159.716C36.7644 161.316 38.7842 161.194 40.0738 160.783C41.3211 160.385 42.3876 159.61 43.122 158.913L123.496 82.6968L125.731 80.577L123.553 78.3986L116.482 71.3275ZM156.101 38.697L158.773 34.6893L153.998 34.0587C150.545 33.6027 144.958 33.5764 139.05 34.8911C133.14 36.2061 126.651 38.9224 121.72 44.1712C115.796 50.4774 113.598 56.7626 114.58 62.8764C115.533 68.8015 119.376 73.881 123.997 78.1315C129.649 83.3322 137.423 82.7657 143.125 79.609C148.814 76.4598 153.455 70.1813 152.328 62.7464C151.453 56.968 151.16 52.9109 151.669 49.3453C152.166 45.8695 153.457 42.6637 156.101 38.697Z\",\n  stroke: \"#171C1F\",\n  strokeWidth: 6\n});\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M127.442 41.2755C127.913 46.6966 131.129 58.0945 135.22 60.3673C137.493 61.63 137.695 49.4072 151.13 61.428\",\n  stroke: \"#171C1F\",\n  strokeWidth: 4\n});\n\nvar SvgIconError = function SvgIconError(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 195,\n    height: 195,\n    viewBox: \"0 0 195 195\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIconError, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/IconError.909a833a.svg\";\nexport { ForwardRef as ReactComponent };","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Avatar, Button, ScreenSpinner} from \"@vkontakte/vkui\";\r\nimport {} from \"@vkontakte/icons\";\r\nimport {Icon28Play} from \"@vkontakte/icons\";\r\nimport {decOfNum, isPlatformDesktop, shortIntegers} from \"../../js/utils\";\r\nimport {Icon24Like} from \"@vkontakte/icons\";\r\nimport {getVKUsers} from \"../../js/drawerapp/utils\";\r\n\r\nexport class Main extends PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        props.t.socket.unsubscribe('changeOnline');\r\n        props.t.socket.subscribe('changeOnline', r => {\r\n            props.t.setState({online: r.count});\r\n            this.forceUpdate();\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const\r\n            {t} = this.props,\r\n            {lvl, pictures, successfulPictures, guessedPictures, likes} = t.state.user,\r\n            {gamesAsWinner, gamesAsDrawer, top_number, online} = t.state,\r\n            offset = [Math.min(t.state.colors.length - 3, Math.max(lvl, 4) - 4), Math.min(t.state.colors.length, Math.max(lvl, 3) + 3)],\r\n            colors = t.state.colors.slice(offset[0], offset[1])\r\n        ;\r\n\r\n        return (\r\n            <div className='Main'>\r\n                <Avatar src={t.state.vk_user.photo_100} size={48} shadow={false}/>\r\n                <h3>Привет, {t.state.vk_user.first_name}</h3>\r\n                <h1>Твой профиль</h1>\r\n                <div className='Colors__Container'>\r\n                    <div className='Gradient_Opacity'/>\r\n                    {\r\n                        colors.map((value, index) =>\r\n                            <div\r\n                                className='Color'\r\n                                key={`Color__${index}`}\r\n                                style={{\r\n                                    marginLeft: index > 0 && 12,\r\n                                    background: index + 1 + offset[0] === lvl && 'linear-gradient(156.04deg, #F05F88 0%, #FBD20A 100%)',\r\n                                    border: index + 1 + offset[0] === lvl && 'none'\r\n                                }}\r\n                            >\r\n                                <span>{index + 1 + offset[0]}</span>\r\n                                <div style={{background: value}}/>\r\n                            </div>\r\n                        )\r\n                    }\r\n                </div>\r\n                <p>Отгадывай и рисуй картины, чтобы разблокировать новые цвета</p>\r\n                <div className='Cards__Container'>\r\n                    <div onClick={() => {\r\n                        if (gamesAsDrawer.length > 0) {\r\n                            t.go('gallery')\r\n                        }\r\n                    }}>\r\n                        <span\r\n                            className='Top'>{decOfNum(successfulPictures, ['успешная', 'успешные', 'успешных'])}</span>\r\n                        <div className='Images'>\r\n                            {[1, 0, 2].map((value, index) => <div num={index} key={`div__${index}`}>{\r\n                                gamesAsDrawer[value] && <img alt='img' src={gamesAsDrawer[value]['Picture.url']}/>\r\n                            }</div>)}\r\n                        </div>\r\n                        <div className='Texts'>\r\n                            <span>Галерея</span>\r\n                            <span>{decOfNum(pictures, ['картина', 'картины', 'картин'])}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div onClick={() => t.go('rating')}>\r\n                        <span className='Top'>{top_number && `Ты на ${top_number} месте`}</span>\r\n                        <div className='Images'>\r\n                            {[1, 0, 2].map((value, index) => <div num={index} key={`div__${index}`}>{\r\n                                gamesAsWinner[value] && <img alt='img' src={gamesAsWinner[value]['Picture.url']}/>\r\n                            }</div>)}\r\n                        </div>\r\n                        <div className='Texts'>\r\n                            <span>Отгадано</span>\r\n                            <span>{decOfNum(guessedPictures, ['картина', 'картины', 'картин'])}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className='Likes__Container'>\r\n                    <div>\r\n                        У тебя <span>{shortIntegers(likes)} <Icon24Like style={{marginLeft: 6}}/></span>\r\n                    </div>\r\n                    <div onClick={async () => {\r\n                        t.setPopout(<ScreenSpinner/>);\r\n                        t.socket.call('pictures.getRandomLikes', {limit: 10}, r => {\r\n                            t.setState({randomGamesLike: r.response});\r\n                            let user_ids = r.response.map(value => value.drawerId);\r\n\r\n                            t.socket.call('pictures.getLikesTop', {limit: 10}, async r => {\r\n                                t.setState({topLikes: r.response});\r\n                                user_ids = [...user_ids, ...r.response.map(value => value.drawerId)];\r\n                                await getVKUsers(user_ids);\r\n\r\n                                t.setPopout(null);\r\n                                t.go('likes');\r\n                            });\r\n                        });\r\n                    }}>\r\n                        Оценить картины\r\n                    </div>\r\n                </div>\r\n                {\r\n                    !isPlatformDesktop() && <div style={{height: 111, width: 1}}/>\r\n                }\r\n                <div className='PlayContainer'>\r\n                    <div className='ButtonPlay' onClick={() => t.go('search')}>\r\n                        <Icon28Play/>\r\n                    </div>\r\n                    <p>Онлайн: {online}</p>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nMain.defaultProps = {};\r\n\r\nMain.propTypes = {\r\n    t: PropTypes.object\r\n};\r\n\r\nexport default Main;","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {PanelHeader, PanelHeaderBack, ScreenSpinner, Snackbar} from \"@vkontakte/vkui\";\r\nimport {getBase64Image, getSrcUrl, getUrlParams, isPlatformDesktop} from \"../../js/utils\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport {getVKUsers} from \"../../js/drawerapp/utils\";\r\n\r\nexport class Gallery extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            offset: props.t.state.gamesAsDrawer.length,\r\n            limit: 10,\r\n            canGetMore: true,\r\n            prevY: 0\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.observer = new IntersectionObserver(\r\n            this.handleObserver.bind(this),\r\n            {\r\n                root: null,\r\n                rootMargin: '0px',\r\n                threshold: 1.0\r\n            }\r\n        );\r\n        this.observer.observe(this.loadingRef);\r\n    }\r\n\r\n    handleObserver(entities, observer) {\r\n        const\r\n            {y} = entities[0].boundingClientRect,\r\n            {t} = this.props,\r\n            {prevY, offset, limit, canGetMore} = this.state\r\n        ;\r\n        if ((prevY === 0 || prevY > y) && canGetMore) {\r\n            t.socket.call('games.getByDrawerId', {id: t.state.vk_user.id, offset, limit}, async r => {\r\n                await getVKUsers(r.response.map(value => value.drawerId));\r\n                t.setState({gamesAsDrawer: [...t.state.gamesAsDrawer, ...r.response]});\r\n                this.setState({canGetMore: r.response.length > 0});\r\n                this.forceUpdate();\r\n            });\r\n            this.setState({offset: offset + 10});\r\n        }\r\n        this.setState({prevY: y});\r\n    }\r\n\r\n    shareStory(word, gameId, pic) {\r\n        try {\r\n            this.props.t.setPopout(<ScreenSpinner/>);\r\n            const\r\n                {createCanvas, loadImage} = require('canvas')\r\n            ;\r\n\r\n            loadImage(getSrcUrl(require(`../../assets/drawing/stories/Story1.png`))).then(async background => {\r\n                try {\r\n                    const\r\n                        canvas = createCanvas(background.width, background.height),\r\n                        ctx = canvas.getContext('2d'),\r\n                        canvasData = await getBase64Image(pic),\r\n                        title = word.substring(0, 1).toUpperCase() + word.substring(1)\r\n                    ;\r\n                    ctx.drawImage(background, 0, 0);\r\n\r\n                    ctx.font = '64px TT Commons Demibold';\r\n                    ctx.textAlign = 'center';\r\n                    ctx.fillStyle = '#616161';\r\n                    ctx.fillText(title, 539, 708 + 13 + 489);\r\n\r\n                    ctx.drawImage(await loadImage(canvasData), 198, 618, 683, 683);\r\n\r\n                    await bridge.send('VKWebAppShowStoryBox', {\r\n                        background_type: 'image',\r\n                        blob: canvas.toDataURL('image/png'),\r\n                        attachment: {\r\n                            url: 'https://vk.com/app' + getUrlParams().vk_app_id,\r\n                            text: 'go_to',\r\n                            type: 'url'\r\n                        }\r\n                    });\r\n                    this.props.t.socket.call('games.share', {gameId});\r\n                    this.props.t.setPopout(null);\r\n                } catch (e) {\r\n                    console.error(e);\r\n                    this.props.t.setPopout(null);\r\n                    this.props.t.setState({\r\n                        snackbar: <Snackbar onClose={() => this.props.t.setState({snackbar: null})}>\r\n                            Произошла ошибка\r\n                        </Snackbar>\r\n                    });\r\n                }\r\n            });\r\n        } catch (e) {\r\n            console.error(e);\r\n            this.props.t.setPopout(null);\r\n            this.props.t.setState({\r\n                snackbar: <Snackbar onClose={() => this.props.t.setState({snackbar: null})}>\r\n                    Произошла ошибка\r\n                </Snackbar>\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const\r\n            {t} = this.props,\r\n            isDesktop = isPlatformDesktop(),\r\n            {gamesAsDrawer} = t.state\r\n        ;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <PanelHeader\r\n                    left={<PanelHeaderBack onClick={t.back}/>}\r\n                    separator={false}\r\n                >\r\n                    {\r\n                        isDesktop && 'Твоя галерея'\r\n                    }\r\n                </PanelHeader>\r\n                <div className='Gallery'>\r\n                    {\r\n                        !isDesktop && <h2 style={{textAlign: 'left'}}>Твоя галерея</h2>\r\n                    }\r\n                    <p style={{margin: !isDesktop && '8px 0 0 0'}}>\r\n                        Выберите нужную картину, чтобы посмотреть информацию и выбрать действие:\r\n                    </p>\r\n                    <div style={{marginTop: isDesktop ? 18 : 24, gridGap: isDesktop ? 8 : 15}} className='Images_Grid'>\r\n                        {\r\n                            gamesAsDrawer.map((value, index) =>\r\n                                <div key={`Image_${index}`} onClick={async () => {\r\n                                    //this.shareStory(value['Word.nom'], value.id, value['Picture.url']);\r\n                                    await t.setState({\r\n                                        like_currentPictureSelected: index,\r\n                                        like_method: 'games.getByDrawerId',\r\n                                        like_param: 'gamesAsDrawer'\r\n                                    });\r\n                                    t.go('picture_info');\r\n                                }}>\r\n                                    <img alt='img' src={value['Picture.url']}/>\r\n                                </div>\r\n                            )\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div ref={ref => this.loadingRef = ref}/>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nGallery.defaultProps = {};\r\n\r\nGallery.propTypes = {\r\n    t: PropTypes.object\r\n};\r\n\r\nexport default Gallery;","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Avatar, PanelHeader, PanelHeaderBack, ScreenSpinner, Snackbar} from \"@vkontakte/vkui\";\r\nimport {decOfNum, getBase64Image, getSrcUrl, getUrlParams, isPlatformDesktop} from \"../../js/utils\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport {getVKUsers} from \"../../js/drawerapp/utils\";\r\n\r\nexport class Rating extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            offset: props.t.state.gamesAsWinner.length,\r\n            limit: 10,\r\n            canGetMore: true,\r\n            prevY: 0\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        this.observer = new IntersectionObserver(\r\n            this.handleObserver.bind(this),\r\n            {\r\n                root: null,\r\n                rootMargin: '0px',\r\n                threshold: 1.0\r\n            }\r\n        );\r\n        this.observer.observe(this.loadingRef);\r\n    }\r\n\r\n    handleObserver(entities, observer) {\r\n        const\r\n            {y} = entities[0].boundingClientRect,\r\n            {t} = this.props,\r\n            {prevY, offset, limit, canGetMore} = this.state\r\n        ;\r\n        if ((prevY === 0 || prevY > y) && canGetMore) {\r\n            t.socket.call('games.getByWinnerId', {id: t.state.vk_user.id, offset, limit}, async r => {\r\n                await getVKUsers(r.response.map(value => value.drawerId));\r\n                t.setState({gamesAsWinner: [...t.state.gamesAsWinner, ...r.response]});\r\n                this.setState({canGetMore: r.response.length > 0});\r\n                this.forceUpdate();\r\n            });\r\n            this.setState({offset: offset + 10});\r\n        }\r\n        this.setState({prevY: y});\r\n    }\r\n\r\n    shareStory(gameId, pic) {\r\n        this.props.t.setPopout(<ScreenSpinner/>);\r\n        try {\r\n\t\t\tconst\r\n\t\t\t\t{createCanvas, loadImage} = require('canvas')\r\n\t\t\t;\r\n\r\n\t\t\tloadImage(getSrcUrl(require(`../../assets/drawing/stories/Story2.png`))).then(async background => {\r\n\t\t\t\tconst\r\n\t\t\t\t\tcanvas = createCanvas(background.width, background.height),\r\n\t\t\t\t\tctx = canvas.getContext('2d'),\r\n\t\t\t\t\tcanvasData = await getBase64Image(pic)\r\n\t\t\t\t;\r\n\t\t\t\tctx.drawImage(background, 0, 0);\r\n\t\t\t\tctx.drawImage(await loadImage(canvasData), 198, 618, 683, 683);\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait bridge.send('VKWebAppShowStoryBox', {\r\n\t\t\t\t\t\tbackground_type: 'image',\r\n\t\t\t\t\t\tblob: canvas.toDataURL('image/png'),\r\n\t\t\t\t\t\tattachment: {\r\n\t\t\t\t\t\t\turl: 'https://vk.com/app' + getUrlParams().vk_app_id,\r\n\t\t\t\t\t\t\ttext: 'go_to',\r\n\t\t\t\t\t\t\ttype: 'url'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.props.t.socket.call('games.share', {gameId});\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t}\r\n\t\t\t\tthis.props.t.setPopout(null);\r\n\t\t\t});\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\tthis.props.t.setPopout(null);\r\n\t\t\tthis.props.t.setState({\r\n                snackbar: <Snackbar onClose={() => this.props.t.setState({snackbar: null})}>\r\n\t\t\t\t\t\t\tПроизошла ошибка\r\n                        </Snackbar>\r\n            });\r\n\t\t}\r\n    }\r\n\r\n    render() {\r\n        const\r\n            {t} = this.props,\r\n            isDesktop = isPlatformDesktop(),\r\n            {user, gamesAsWinner, top} = t.state,\r\n            {guessedPictures} = user\r\n        ;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <PanelHeader\r\n                    left={<PanelHeaderBack onClick={t.back}/>}\r\n                    separator={false}\r\n                />\r\n                <div className='Rating'>\r\n                    {\r\n                        top &&\r\n                        <React.Fragment>\r\n                            <p>\r\n                                Лучшие игроки за сегодня:\r\n                            </p>\r\n                            <div className='Users_List'>\r\n                                {\r\n                                    top.map((value, index) =>\r\n                                        <div key={`div__${index}`}>\r\n                                            <Avatar size={48} shadow={false} src={value.photo_100}/>\r\n                                            <div>\r\n                                                <div>{value.first_name} {value.last_name.substring(0, 1)}.</div>\r\n                                                <div>Отгадал{value.sex === 1 && 'а'} {decOfNum(value.guessedPicturesToday, ['картину', 'картины', 'картин'])}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )\r\n                                }\r\n                            </div>\r\n                        </React.Fragment>\r\n                    }\r\n                    {\r\n                        gamesAsWinner.length > 0 &&\r\n                        <React.Fragment>\r\n                            <p style={{margin: '24px 0 0 0'}}>\r\n                                Вы отгадали {decOfNum(guessedPictures, ['картину', 'картины', 'картин'])} (нажмите на картину, чтобы посмотреть информацию о ней):\r\n                            </p>\r\n                            <div style={{marginTop: 18, gridGap: isDesktop ? 8 : 15}} className='Images_Grid'>\r\n                                {\r\n                                    gamesAsWinner.map((value, index) =>\r\n                                        <div key={`Image_${index}`} onClick={async () => {\r\n                                            //this.shareStory(value.id, value['Picture.url']);\r\n                                            await t.setState({\r\n                                                like_currentPictureSelected: index,\r\n                                                like_method: 'games.getByWinnerId',\r\n                                                like_param: 'gamesAsWinner'\r\n                                            });\r\n                                            t.go('picture_info');\r\n                                        }}>\r\n                                            <img alt='img' src={value['Picture.url']}/>\r\n                                        </div>\r\n                                    )\r\n                                }\r\n                            </div>\r\n                        </React.Fragment>\r\n                    }\r\n                    <div ref={ref => this.loadingRef = ref}/>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nRating.defaultProps = {};\r\n\r\nRating.propTypes = {\r\n    t: PropTypes.object\r\n};\r\n\r\nexport default Rating;","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Avatar} from \"@vkontakte/vkui\";\r\nimport {isPlatformDesktop} from \"../../js/utils\";\r\nimport {getVKUsers} from \"../../js/drawerapp/utils\";\r\n\r\nlet interval;\r\n\r\nexport class Search extends PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            lobbyPlayers: [],\r\n            point_count: 0,\r\n            starting: false\r\n        };\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(interval);\r\n    }\r\n\r\n    componentDidMount() {\r\n        interval = setInterval(() => {\r\n            const {point_count} = this.state;\r\n            this.setState({point_count: point_count >= 3 ? 0 : point_count + 1});\r\n        }, 800);\r\n\r\n        const {socket} = this.props.t;\r\n        socket.unsubscribe('changeLobbyUsers', 'gameStart', 'setWord', 'gameEnd', 'draw', 'gameStarting');\r\n        socket.subscribe('changeLobbyUsers', async r => {\r\n            this.setState({lobbyPlayers: await getVKUsers(r.players)});\r\n        });\r\n        socket.subscribe('setWord', async r => {\r\n            this.props.t.setState({word: r.word});\r\n        });\r\n        socket.subscribe('gameStart', async r => {\r\n            const {lobbyId, drawerId} = r;\r\n            await this.props.t.setState({lobbyId, drawerId, gameStart: Date.now()});\r\n            setTimeout(() => {\r\n                this.props.t.go('game');\r\n            }, 400);\r\n        });\r\n        socket.subscribe('gameStarting', async r => {\r\n            this.setState({starting: true});\r\n        });\r\n        socket.call('games.search');\r\n    }\r\n\r\n    render() {\r\n        const\r\n            {t} = this.props,\r\n            lobbyPlayers = this.state.lobbyPlayers.filter(user => user.id !== t.state.vk_user.id),\r\n            players =\r\n                <svg width=\"274\" height=\"316\" viewBox=\"0 0 274 316\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\r\n                     style={{marginTop: isPlatformDesktop() ? 72 : '8.86699507vh'}}\r\n                     onClick={() => {\r\n                         if (!this.state.starting) {\r\n                             t.back();\r\n                         }\r\n                     }}\r\n                >\r\n                    <rect x=\"63\" y=\"84\" width=\"148\" height=\"148\" rx=\"74\" fill=\"url(#paint0_linear)\"/>\r\n                    <circle className='Search_Avatar' cx=\"137\" cy=\"158\" r=\"48\" fill=\"url(#pattern0)\"/>\r\n                    <line x1=\"27.866\" y1=\"26.5\" x2=\"60.366\" y2=\"82.7916\" stroke=\"var(--border_players_color)\"\r\n                          strokeWidth=\"2\" strokeDasharray=\"4 4\"/>\r\n                    <rect x=\"1.5\" y=\"1.5\" width=\"51\" height=\"51\" rx=\"25.5\"\r\n                          fill=\"var(--background_content)\"/>\r\n                    <circle cx=\"27\" cy=\"27\" r=\"24\" fill=\"url(#pattern1)\"/>\r\n                    <rect x=\"1.5\" y=\"1.5\" width=\"51\" height=\"51\" rx=\"25.5\" stroke=\"var(--border_players_color)\"\r\n                          strokeWidth=\"3\"/>\r\n                    <line y1=\"-1\" x2=\"65\" y2=\"-1\" transform=\"matrix(-0.5 0.866025 0.866025 0.5 246.88 27)\"\r\n                          stroke=\"var(--border_players_color)\" strokeWidth=\"2\" strokeDasharray=\"4 4\"/>\r\n                    <rect x=\"1.5\" y=\"-1.5\" width=\"51\" height=\"51\" rx=\"25.5\" transform=\"matrix(-1 0 0 1 274 3)\"\r\n                          fill=\"var(--background_content)\"/>\r\n                    <rect x=\"1.5\" y=\"-1.5\" width=\"51\" height=\"51\" rx=\"25.5\" transform=\"matrix(-1 0 0 1 274 3)\"/>\r\n                    <circle cx=\"247\" cy=\"27\" r=\"24\" fill=\"url(#pattern2)\"/>\r\n                    <rect x=\"1.5\" y=\"-1.5\" width=\"51\" height=\"51\" rx=\"25.5\" transform=\"matrix(-1 0 0 1 274 3)\"\r\n                          stroke=\"var(--border_players_color)\" strokeWidth=\"3\"/>\r\n                    <line y1=\"-1\" x2=\"65\" y2=\"-1\" transform=\"matrix(0.5 -0.866025 -0.866025 -0.5 27 289)\"\r\n                          stroke=\"var(--border_players_color)\" strokeWidth=\"2\" strokeDasharray=\"4 4\"/>\r\n                    <rect x=\"-1.5\" y=\"1.5\" width=\"51\" height=\"51\" rx=\"25.5\" transform=\"matrix(1 0 0 -1 3 316)\"\r\n                          fill=\"var(--background_content)\"/>\r\n                    <rect x=\"-1.5\" y=\"1.5\" width=\"51\" height=\"51\" rx=\"25.5\" transform=\"matrix(1 0 0 -1 3 316)\"/>\r\n                    <circle cx=\"27\" cy=\"289\" r=\"24\" fill=\"url(#pattern3)\"/>\r\n                    <rect x=\"-1.5\" y=\"1.5\" width=\"51\" height=\"51\" rx=\"25.5\" transform=\"matrix(1 0 0 -1 3 316)\"\r\n                          stroke=\"var(--border_players_color)\" strokeWidth=\"3\"/>\r\n                    <line x1=\"246.014\" y1=\"289.5\" x2=\"213.514\" y2=\"233.208\" stroke=\"var(--border_players_color)\"\r\n                          strokeWidth=\"2\" strokeDasharray=\"4 4\"/>\r\n                    <rect x=\"272.5\" y=\"314.5\" width=\"51\" height=\"51\" rx=\"25.5\" transform=\"rotate(-180 272.5 314.5)\"\r\n                          fill=\"var(--background_content)\"/>\r\n                    <rect x=\"272.5\" y=\"314.5\" width=\"51\" height=\"51\" rx=\"25.5\"\r\n                          transform=\"rotate(-180 272.5 314.5)\"/>\r\n                    <circle cx=\"247\" cy=\"289\" r=\"24\" fill=\"url(#pattern4)\"/>\r\n                    <rect x=\"272.5\" y=\"314.5\" width=\"51\" height=\"51\" rx=\"25.5\" transform=\"rotate(-180 272.5 314.5)\"\r\n                          stroke=\"var(--border_players_color)\" strokeWidth=\"3\"/>\r\n                    <defs>\r\n                        <linearGradient id=\"paint0_linear\" x1=\"63\" y1=\"84\" x2=\"211\" y2=\"232\"\r\n                                        gradientUnits=\"userSpaceOnUse\">\r\n                            <stop stopColor=\"#F05F88\"/>\r\n                            <stop offset=\"1\" stopColor=\"#FAAF1A\"/>\r\n                        </linearGradient>\r\n\r\n                        <pattern id=\"pattern0\" patternContentUnits=\"objectBoundingBox\" width=\"1\" height=\"1\">\r\n                            <use href=\"#image0\" transform=\"scale(0.005)\"/>\r\n                        </pattern>\r\n                        <image href={t.state.vk_user.photo_max_orig} id=\"image0\" width=\"200\" height=\"200\"/>\r\n\r\n                        <pattern id=\"pattern1\" patternContentUnits=\"objectBoundingBox\" width=\"1\" height=\"1\">\r\n                            <use href=\"#image1\" transform=\"scale(0.005)\"/>\r\n                        </pattern>\r\n                        <image href={lobbyPlayers[0] && lobbyPlayers[0].photo_max_orig} id=\"image1\" width=\"200\"\r\n                               height=\"200\"/>\r\n\r\n                        <pattern id=\"pattern2\" patternContentUnits=\"objectBoundingBox\" width=\"1\" height=\"1\">\r\n                            <use href=\"#image2\" transform=\"scale(0.005)\"/>\r\n                        </pattern>\r\n                        <image href={lobbyPlayers[1] && lobbyPlayers[1].photo_max_orig} id=\"image2\" width=\"200\"\r\n                               height=\"200\"/>\r\n\r\n                        <pattern id=\"pattern3\" patternContentUnits=\"objectBoundingBox\" width=\"1\" height=\"1\">\r\n                            <use href=\"#image3\" transform=\"scale(0.005)\"/>\r\n                        </pattern>\r\n                        <image href={lobbyPlayers[2] && lobbyPlayers[2].photo_max_orig} id=\"image3\" width=\"200\"\r\n                               height=\"200\"/>\r\n\r\n                        <pattern id=\"pattern4\" patternContentUnits=\"objectBoundingBox\" width=\"1\" height=\"1\">\r\n                            <use href=\"#image4\" transform=\"scale(0.005)\"/>\r\n                        </pattern>\r\n                        <image href={lobbyPlayers[3] && lobbyPlayers[3].photo_max_orig} id=\"image4\" width=\"200\"\r\n                               height=\"200\"/>\r\n                    </defs>\r\n                </svg>,\r\n            {point_count} = this.state\r\n        ;\r\n\r\n        return (\r\n            <div className='Search'>\r\n                <h1>{this.state.starting ? `Очищаем холст${new Array(point_count).fill('.').join('')}` : `Ищем игроков${new Array(point_count).fill('.').join('')}`}</h1>\r\n                {players}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nSearch.defaultProps = {};\r\n\r\nSearch.propTypes = {\r\n    t: PropTypes.object\r\n};\r\n\r\nexport default Search;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M16.1568 6.96446L14.0355 4.84314C13.2545 4.06209 11.9881 4.06209 11.2071 4.84314L8.37866 7.67157L13.3284 12.6213L16.1568 9.79289C16.9379 9.01184 16.9379 7.74551 16.1568 6.96446Z\",\n  fill: \"#C3C3C3\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M16.864 6.25738L14.7427 4.13606C13.5711 2.96448 11.6716 2.96448 10.5 4.13606L4.13606 10.5C2.96449 11.6716 2.96449 13.5711 4.13606 14.7427L6.25738 16.864C7.42895 18.0356 9.32845 18.0356 10.5 16.864L16.864 10.5C18.0356 9.32844 18.0356 7.42895 16.864 6.25738Z\",\n  stroke: \"#C3C3C3\",\n  strokeWidth: 2\n});\n\nvar SvgIconErase = function SvgIconErase(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 21,\n    height: 21,\n    viewBox: \"0 0 21 21\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIconErase, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/IconErase.538657b8.svg\";\nexport { ForwardRef as ReactComponent };","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {ActionSheet, ActionSheetItem, Avatar, IconButton, Input, Snackbar, WriteBarIcon} from \"@vkontakte/vkui\";\r\nimport {isPlatformDesktop} from \"../../js/utils\";\r\nimport {getVKUsers, vk_local_users} from \"../../js/drawerapp/utils\";\r\nimport {ReactComponent as IconErase} from \"../../assets/drawing/icons/IconErase.svg\";\r\n\r\nconst current = {};\r\nlet interval;\r\n\r\nexport class Game extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            drawer: vk_local_users[props.drawerId],\r\n            isDrawer: props.drawerId === props.t.state.vk_user.id,\r\n            text: '',\r\n            selectedColor: 0,\r\n            drawing: false,\r\n            time: 90,\r\n\r\n            messages: []\r\n        };\r\n        if (!this.state.drawer) {\r\n            setTimeout(async () => {\r\n                await getVKUsers([props.drawerId]);\r\n                this.setState({drawer: vk_local_users[props.drawerId]})\r\n            }, 1);\r\n        }\r\n\r\n        this.onMouseDown = this.onMouseDown.bind(this);\r\n        this.onMouseUp = this.onMouseUp.bind(this);\r\n        this.throttle = this.throttle.bind(this);\r\n        this.onMouseMove = this.onMouseMove.bind(this);\r\n        this.drawLine = this.drawLine.bind(this);\r\n\r\n        interval = setInterval(() => this.setState({time: this.state.time > 0 ? this.state.time - 1 : 0}), 1000);\r\n\r\n        props.t.socket.subscribe('gameEnd', async r => {\r\n            const\r\n                canvasData = this.canvas.toDataURL('image/png'),\r\n                {winnerId, word, gameId} = r\r\n            ;\r\n            if (this.state.isDrawer) {\r\n                this.props.t.socket.call('games.end', {canvasData, lobbyId: this.props.lobbyId, gameId});\r\n            }\r\n            this.props.t.setState({canvas_: canvasData, winnerId, word, gameId, gameEnd: Date.now()});\r\n            this.props.t.setActivePanel('result');\r\n        });\r\n\r\n        if (!this.state.isDrawer) {\r\n            props.t.socket.subscribe('draw', r => {\r\n                const {x0, y0, x1, y1, color} = r.data;\r\n                this.drawLine(x0, y0, x1, y1, color);\r\n            });\r\n\r\n            props.t.socket.subscribe('clear', r => {\r\n                this.canvasContext.clearRect(0, 0, 319, 319);\r\n            });\r\n        }\r\n\r\n        props.t.socket.subscribe('message', async r => {\r\n            const {user_id, message} = r;\r\n            await this.setState({messages: [...this.state.messages, {user_id, message, ...vk_local_users[user_id]}]});\r\n\r\n            try {\r\n                const comments = document.getElementsByClassName('Comment');\r\n                comments[comments.length - 1].scrollIntoView(false);\r\n            } catch (e) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(interval);\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const\r\n            {canvas, onMouseDown, onMouseUp, throttle, onMouseMove} = this,\r\n            {drawer, isDrawer} = this.state\r\n        ;\r\n        this.canvasContext = canvas.getContext('2d');\r\n\r\n        if (isDrawer) {\r\n            canvas.addEventListener('mousedown', onMouseDown, false);\r\n            canvas.addEventListener('mouseup', onMouseUp, false);\r\n            canvas.addEventListener('mouseout', onMouseUp, false);\r\n            canvas.addEventListener('mousemove', throttle(onMouseMove, 10), false);\r\n\r\n            //Touch support for mobile devices\r\n            canvas.addEventListener('touchstart', onMouseDown, false);\r\n            canvas.addEventListener('touchend', onMouseUp, false);\r\n            canvas.addEventListener('touchcancel', onMouseUp, false);\r\n            canvas.addEventListener('touchmove', throttle(onMouseMove, 10), false);\r\n        }\r\n    }\r\n\r\n    onMouseDown(e) {\r\n        this.setState({drawing: true});\r\n        current.x = e.clientX || e.touches[0].clientX;\r\n        current.y = e.clientY || e.touches[0].clientY;\r\n    }\r\n\r\n    onMouseUp(e) {\r\n        const {drawing, selectedColor} = this.state;\r\n        if (!drawing) {\r\n            return;\r\n        }\r\n        this.setState({drawing: false});\r\n        try {\r\n            const\r\n                {canvas} = this,\r\n                canvasRect = canvas.getBoundingClientRect()\r\n            ;\r\n            this.drawLine(current.x - canvasRect.left, current.y - canvasRect.top, (e.clientX || e.touches[0].clientX) - canvasRect.left, (e.clientY || e.touches[0].clientY) - canvasRect.top, this.props.t.state.colors[selectedColor]);\r\n        } catch (er) {\r\n        }\r\n    }\r\n\r\n    onMouseMove(e) {\r\n        const {drawing, selectedColor} = this.state;\r\n        if (!drawing) {\r\n            return;\r\n        }\r\n        const\r\n            {canvas} = this,\r\n            canvasRect = canvas.getBoundingClientRect()\r\n        ;\r\n        this.drawLine(current.x - canvasRect.left, current.y - canvasRect.top, (e.clientX || e.touches[0].clientX) - canvasRect.left, (e.clientY || e.touches[0].clientY) - canvasRect.top, this.props.t.state.colors[selectedColor]);\r\n        current.x = e.clientX || e.touches[0].clientX;\r\n        current.y = e.clientY || e.touches[0].clientY;\r\n        return false;\r\n    }\r\n\r\n    drawLine(x0, y0, x1, y1, color) {\r\n        try {\r\n            const\r\n                {lobbyId} = this.props,\r\n                {canvas, canvasContext} = this\r\n            ;\r\n\r\n            canvasContext.beginPath();\r\n            canvasContext.moveTo(x0, y0);\r\n            canvasContext.lineTo(x1, y1);\r\n            canvasContext.strokeStyle = color;\r\n            canvasContext.lineWidth = 2;\r\n            canvasContext.stroke();\r\n            canvasContext.closePath();\r\n\r\n            if (this.state.isDrawer) {\r\n                this.props.t.socket.call('games.draw', {\r\n                    lobbyId,\r\n                    data: {\r\n                        x0,\r\n                        y0,\r\n                        x1,\r\n                        y1,\r\n                        color\r\n                    }\r\n                });\r\n            }\r\n        } catch (e) {\r\n        }\r\n    }\r\n\r\n    throttle(callback, delay) {\r\n        var previousCall = new Date().getTime();\r\n        return function () {\r\n            const time = new Date().getTime();\r\n\r\n            if ((time - previousCall) >= delay) {\r\n                previousCall = time;\r\n                callback.apply(null, arguments);\r\n            }\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const\r\n            {t, lobbyId} = this.props,\r\n            {colors, user, word} = t.state,\r\n            {drawer, isDrawer, text, selectedColor, time, messages} = this.state,\r\n            isDesktop = isPlatformDesktop()\r\n        ;\r\n\r\n        return (\r\n            <div className='Game'>\r\n                <div style={{width: isDesktop ? 319 : '100%', alignSelf: 'flex-start'}} ref={ref => this.header = ref}>\r\n                    <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                        <h2 style={{textAlign: 'left'}}>\r\n                            {isDrawer ? 'Задача: ' + word.nom : 'Рисует: ' + drawer.first_name}\r\n                        </h2>\r\n                        <h2 style={{textAlign: 'right', width: '25%', color: 'var(--color_secondary)'}}>\r\n                            {time} сек\r\n                        </h2>\r\n                    </div>\r\n                </div>\r\n                <div style={{display: isDesktop && 'flex'}}>\r\n                    <div className='Canvas_Container'>\r\n                        <canvas width={319} height={319} ref={ref => this.canvas = ref} id='canvas'/>\r\n                        <div style={{display: !isDrawer && 'none'}}>\r\n                            <div>\r\n                                {\r\n                                    colors.map((value, index) =>\r\n                                        <div\r\n                                            onClick={() => this.setState({selectedColor: index})}\r\n                                            className='Color'\r\n                                            key={`Color__${index}`}\r\n                                            style={{\r\n                                                marginLeft: index > 0 && 8,\r\n                                                background: value,\r\n                                                outline: selectedColor === index && '4px solid #F3F2F2',\r\n                                                opacity: user.lvl < (index + 1) && .25,\r\n                                                pointerEvents: user.lvl < (index + 1) && 'none'\r\n                                            }}\r\n                                        />\r\n                                    )\r\n                                }\r\n                            </div>\r\n                            <div>\r\n                                <IconButton hasHover={false} onClick={() => {\r\n                                    t.socket.call('games.clear', {lobbyId});\r\n                                    this.canvasContext.clearRect(0, 0, 319, 319);\r\n                                }}>\r\n                                    <IconErase/>\r\n                                </IconButton>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='Comments_Container'>\r\n                        <div className='Comments' ref={ref => this.comments = ref}>\r\n                            {\r\n                                messages.map((value, index) =>\r\n                                    <div\r\n                                        className='Comment' key={`div__${index}`} style={{\r\n                                        marginTop: index > 0 && 6,\r\n                                        cursor: value.id === t.state.vk_user.id && 'default'\r\n                                    }}\r\n                                        onClick={() => {\r\n                                            if (value.id !== t.state.vk_user.id && value.message.replaceAll('*', '').length > 0) {\r\n                                                t.setPopout(<ActionSheet\r\n                                                    onClose={() => t.setPopout(null)}\r\n                                                    iosCloseItem={<ActionSheetItem\r\n                                                        autoclose mode='cancel'>\r\n                                                        Отменить\r\n                                                    </ActionSheetItem>}\r\n                                                >\r\n                                                    <ActionSheetItem\r\n                                                        autoclose mode='destructive'\r\n                                                        onClick={() => {\r\n                                                            t.socket.call('games.reportWord', {message: value.message});\r\n                                                            t.setState({\r\n                                                                snackbar: <Snackbar\r\n                                                                    onClose={() => t.setState({snackbar: null})}>\r\n                                                                    Жалоба отправлена\r\n                                                                </Snackbar>\r\n                                                            });\r\n                                                        }}\r\n                                                    >\r\n                                                        Пожаловаться\r\n                                                    </ActionSheetItem>\r\n                                                </ActionSheet>)\r\n                                            }\r\n                                        }}\r\n                                    >\r\n                                        <Avatar size={32} shadow={false} src={value.photo_100}/>\r\n                                        <div>\r\n                                            <div>{value.first_name} {value.last_name}</div>\r\n                                            <div>{value.message}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            }\r\n                        </div>\r\n                        {\r\n                            !isDrawer &&\r\n                            <div className='Comment_Input'>\r\n                                <Input\r\n                                    autoFocus={true}\r\n                                    id='inputComment'\r\n                                    value={text}\r\n                                    onChange={(e) => {\r\n                                        if (e.currentTarget.value.length <= 120) {\r\n                                            this.setState({text: e.currentTarget.value});\r\n                                        }\r\n                                    }}\r\n                                    placeholder='Есть догадки?'\r\n                                    onKeyDown={(e) => {\r\n                                        if (e.key === 'Enter' && text.trim().length > 0) {\r\n                                            t.socket.call('games.message', {lobbyId, message: text});\r\n                                            this.setState({text: ''});\r\n                                        }\r\n                                    }}\r\n                                    onFocus={() => {\r\n                                        setTimeout(() => {\r\n                                            document.getElementById('inputComment').scrollIntoView(false);\r\n                                        }, 100);\r\n                                    }}\r\n                                />\r\n                                <WriteBarIcon\r\n                                    style={{display: text.length === 0 && 'none'}} mode='send'\r\n                                    onClick={() => {\r\n                                        if (text.trim().length > 0) {\r\n                                            t.socket.call('games.message', {lobbyId, message: text});\r\n                                        }\r\n                                        this.setState({text: ''});\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nGame.defaultProps = {};\r\n\r\nGame.propTypes = {\r\n    t: PropTypes.object,\r\n    drawerId: PropTypes.number.isRequired,\r\n    lobbyId: PropTypes.number.isRequired\r\n\r\n};\r\n\r\nexport default Game;","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Avatar, Button, IconButton, Input, ScreenSpinner, Snackbar, WriteBarIcon} from \"@vkontakte/vkui\";\r\nimport {Icon24Like, Icon28ChevronRightOutline, Icon28ReportOutline, Icon28ShareOutline} from \"@vkontakte/icons\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport {decOfNum, getSrcUrl, getUrlParams} from \"../../js/utils\";\r\nimport {vk_local_users} from \"../../js/drawerapp/utils\";\r\n\r\nexport class Result extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const {drawerId, winnerId, word, t} = props;\r\n\r\n        this.state = {\r\n            isDrawer: drawerId === t.state.vk_user.id,\r\n            isWinner: winnerId === t.state.vk_user.id,\r\n            winnerId: winnerId,\r\n            drawerId: drawerId,\r\n            word\r\n        };\r\n\r\n        this.shareStory = this.shareStory.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    shareStory() {\r\n        this.props.t.setPopout(<ScreenSpinner/>);\r\n        const\r\n            {createCanvas, loadImage} = require('canvas'),\r\n            {isDrawer, winnerId, isWinner} = this.state,\r\n            type = isDrawer ? 1 : isWinner ? 2 : 3\r\n        ;\r\n\r\n        loadImage(getSrcUrl(require(`../../assets/drawing/stories/Story${type}.png`))).then(async background => {\r\n            const\r\n                canvas = createCanvas(background.width, background.height),\r\n                ctx = canvas.getContext('2d'),\r\n                img = new Image(),\r\n                {word} = this.state,\r\n                title = word.nom.substring(0, 1).toUpperCase() + word.nom.substring(1)\r\n            ;\r\n            ctx.drawImage(background, 0, 0);\r\n\r\n            if (type === 1) {\r\n                ctx.font = '64px TT Commons Demibold';\r\n                ctx.textAlign = 'center';\r\n                ctx.fillStyle = '#616161';\r\n                ctx.fillText(title, 539, 708 + 13 + 489);\r\n            }\r\n\r\n            img.src = this.props.t.state.canvas_;\r\n            ctx.drawImage(img, 198, 618, 683, 683);\r\n\r\n            try {\r\n                await bridge.send('VKWebAppShowStoryBox', {\r\n                    background_type: 'image',\r\n                    blob: canvas.toDataURL('image/png'),\r\n                    attachment: {\r\n                        url: 'https://vk.com/app' + getUrlParams().vk_app_id,\r\n                        text: 'go_to',\r\n                        type: 'url'\r\n                    }\r\n                });\r\n                this.props.t.socket.call('games.share', {gameId: this.props.gameId});\r\n            } catch (e) {\r\n            }\r\n            this.props.t.updateData();\r\n            this.props.t.setPopout(null);\r\n            this.props.t.setActivePanel('main');\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const\r\n            {t, gameId} = this.props,\r\n            {vk_user} = t.state,\r\n            {isDrawer, isWinner, winnerId, drawerId, word, isLiked} = this.state,\r\n            time = Math.round((t.state.gameEnd - t.state.gameStart) / 1000)\r\n        ;\r\n\r\n        return (\r\n            <div className='Result'>\r\n                {\r\n                    isDrawer ?\r\n                        winnerId !== 0 ?\r\n                            <React.Fragment>\r\n                                <h1>Ты молодец!</h1>\r\n                                <p>Твою картину угадали за {decOfNum(time, ['секунду', 'секунды', 'секунд'])}</p>\r\n                            </React.Fragment>\r\n                            :\r\n                            <React.Fragment>\r\n                                <h1>Время вышло</h1>\r\n                                <p>Никто не угадал, что нарисовано на твоей картине</p>\r\n                            </React.Fragment>\r\n                        :\r\n                        winnerId !== 0 ?\r\n                            isWinner ?\r\n                                <React.Fragment>\r\n                                    <h1>Ты молодец!</h1>\r\n                                    <p>Ты перв{vk_user.sex === 1 ? 'ая' : 'ый'} угадал{vk_user.sex === 1 && 'а'},\r\n                                        что {vk_local_users[drawerId].first_name} нарисовал{vk_local_users[drawerId].sex === 1 && 'а'} на\r\n                                        картине</p>\r\n                                </React.Fragment>\r\n                                :\r\n                                <React.Fragment>\r\n                                    <h1>Игра окончена</h1>\r\n                                    <p>{vk_local_users[winnerId].first_name} был{vk_local_users[drawerId].sex === 1 && 'а'} первым,\r\n                                        кто угадал, что изображено на\r\n                                        картине</p>\r\n                                </React.Fragment>\r\n                            :\r\n                            <React.Fragment>\r\n                                <h1>Время вышло</h1>\r\n                                <p>Никто не угадал, что нарисовано на картине</p>\r\n                            </React.Fragment>\r\n                }\r\n                <div className='Canvas_Container'>\r\n                    {\r\n                        !isDrawer &&\r\n                        <Icon28ReportOutline className='Report' onClick={() => {\r\n                            t.setPopout(<ScreenSpinner/>);\r\n                            t.socket.call('games.report', {game_id: gameId}, r => {\r\n                                if (r.response) {\r\n                                    t.setState({\r\n                                        snackbar: <Snackbar onClose={() => t.setState({snackbar: null})}>\r\n                                            Жалоба отправлена\r\n                                        </Snackbar>\r\n                                    });\r\n                                } else {\r\n                                    t.setState({\r\n                                        snackbar: <Snackbar onClose={() => t.setState({snackbar: null})}>\r\n                                            Жалоба уже отправлена\r\n                                        </Snackbar>\r\n                                    });\r\n                                }\r\n                                t.setPopout(null);\r\n                            });\r\n                        }}/>\r\n                    }\r\n                    <Icon24Like fill={isLiked ? '#F16384' : 'var(--color_secondary)'} className='Like' onClick={() => {\r\n                        t.setPopout(<ScreenSpinner/>);\r\n                        t.socket.call('pictures.like', {game_id: gameId}, r => {\r\n                            this.setState({isLiked: r.response.isLiked});\r\n                            t.setPopout(null);\r\n                        });\r\n                    }}/>\r\n                    <h2>{word.nom.substring(0, 1).toUpperCase() + word.nom.substring(1)}</h2>\r\n                    <img alt='canvas' src={t.state.canvas_}/>\r\n                    <Button\r\n                        before={<Icon28ShareOutline width={16} height={16}/>}\r\n                        size='m' mode='gradient'\r\n                        onClick={() => {\r\n                            this.shareStory();\r\n                        }}\r\n                    >\r\n                        Поделиться\r\n                    </Button>\r\n                </div>\r\n                <Button\r\n                    size='m' mode='secondary'\r\n                    onClick={() => {\r\n                        t.updateData();\r\n                        t.setActivePanel('main');\r\n                    }}\r\n                >\r\n                    На главную\r\n                </Button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nResult.defaultProps = {};\r\n\r\nResult.propTypes = {\r\n    t: PropTypes.object,\r\n    drawerId: PropTypes.number,\r\n    winnerId: PropTypes.number,\r\n    word: PropTypes.object,\r\n    gameId: PropTypes.number\r\n};\r\n\r\nexport default Result;","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport {Button, PanelHeader, PanelHeaderBack} from \"@vkontakte/vkui\";\r\n\r\nexport class Placeholder extends PureComponent {\r\n    render() {\r\n        const\r\n            {t, icon, title, description, buttonText, buttonIcon, buttonOnClick, buttonMode, buttonBack} = this.props\r\n        ;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {buttonBack && <PanelHeader className='PanelHeader__Placeholder' separator={false} left={<PanelHeaderBack onClick={() => t.back()}/>}/>}\r\n                <div className='Placeholder'>\r\n                    {React.cloneElement(icon, {className: 'Placeholder__Icon'})}\r\n                    <div>\r\n                        <h1>{title}</h1>\r\n                        <p>{description}</p>\r\n                        {\r\n                            buttonText &&\r\n                            <Button\r\n                                after={buttonIcon}\r\n                                size='m' mode={buttonMode || 'gradient'}\r\n                                onClick={buttonOnClick}\r\n                            >{buttonText}</Button>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nPlaceholder.defaultProps = {};\r\n\r\nPlaceholder.propTypes = {\r\n    icon: PropTypes.object.isRequired,\r\n    title: PropTypes.string.isRequired,\r\n    description: PropTypes.string,\r\n    buttonText: PropTypes.string,\r\n    buttonIcon: PropTypes.object,\r\n    buttonOnClick: PropTypes.func,\r\n    buttonMode: PropTypes.string,\r\n    buttonBack: PropTypes.bool\r\n};\r\n\r\nexport default Placeholder;","import openSocket from \"socket.io-client\";\r\n\r\nclass Socket {\r\n    constructor() {\r\n        this.onConnect = this.onConnect.bind(this);\r\n        this.onDisconnect = this.onDisconnect.bind(this);\r\n        this.onConnectionError = this.onConnectionError.bind(this);\r\n        this.getSocket = this.getSocket.bind(this);\r\n    }\r\n\r\n    onConnect(callback) {\r\n        this.socket.on('connect', callback);\r\n    }\r\n\r\n    onDisconnect(callback) {\r\n        this.socket.on('disconnect', callback);\r\n    }\r\n\r\n    onConnectionError(callback) {\r\n        this.socket.on('connect_error', callback);\r\n    }\r\n\r\n    call(method, params, callback) {\r\n        this.socket.emit(method, params, callback);\r\n    }\r\n\r\n    subscribe(event, callback) {\r\n        this.socket.on(event, callback);\r\n    }\r\n\r\n    unsubscribe(...events) {\r\n        for (const event of events) {\r\n            this.socket.removeAllListeners(event);\r\n        }\r\n    }\r\n\r\n    connect(url, query) {\r\n        if (this.socket) {\r\n            this.socket.connect();\r\n        } else {\r\n            this.socket = openSocket.connect(url, {\r\n                path: '/socket.io',\r\n                query,\r\n                transports: ['websocket', 'polling', 'flashsocket'],\r\n                reconnection: false\r\n            });\r\n        }\r\n    }\r\n\r\n    getSocket() {\r\n        return this.socket;\r\n    }\r\n}\r\n\r\nexport default Socket;","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Avatar, PanelHeader, PanelHeaderBack, ScreenSpinner, Snackbar} from \"@vkontakte/vkui\";\r\nimport {decOfNum, getBase64Image, getSrcUrl, getUrlParams, isPlatformDesktop, shortIntegers} from \"../../js/utils\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport {Icon24Like} from \"@vkontakte/icons\";\r\nimport {getVKUsers} from \"../../js/drawerapp/utils\";\r\n\r\nconst isDesktop = isPlatformDesktop();\r\n\r\nexport class Likes extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            offset: props.t.state.randomGamesLike.length,\r\n            limit: 10,\r\n            canGetMore: true,\r\n            prevY: 0\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        this.observer = new IntersectionObserver(\r\n            this.handleObserver.bind(this),\r\n            {\r\n                root: null,\r\n                rootMargin: '0px',\r\n                threshold: 1.0\r\n            }\r\n        );\r\n        this.observer.observe(this.loadingRef);\r\n    }\r\n\r\n    handleObserver(entities, observer) {\r\n        const\r\n            {y} = entities[0].boundingClientRect,\r\n            {t} = this.props,\r\n            {prevY, offset, limit, canGetMore} = this.state\r\n        ;\r\n        if ((prevY === 0 || prevY > y) && canGetMore) {\r\n            t.socket.call('pictures.getRandomLikes', {offset, limit}, async r => {\r\n                await getVKUsers(r.response.map(value => value.drawerId));\r\n                t.setState({randomGamesLike: [...t.state.randomGamesLike, ...r.response]});\r\n                this.setState({canGetMore: r.response.length > 0});\r\n                this.forceUpdate();\r\n            });\r\n            this.setState({offset: offset + 10});\r\n        }\r\n        this.setState({prevY: y});\r\n    }\r\n\r\n    render() {\r\n        const\r\n            {t} = this.props,\r\n            isDesktop = isPlatformDesktop(),\r\n            {randomGamesLike, topLikes} = t.state\r\n        ;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <PanelHeader\r\n                    left={<PanelHeaderBack onClick={t.back}/>}\r\n                    separator={false}\r\n                />\r\n                <div className='Likes'>\r\n                    {\r\n                        topLikes &&\r\n                        <React.Fragment>\r\n                            <p>\r\n                                Лучшие картины:\r\n                            </p>\r\n                            <div className='Pictures_List'>\r\n                                {\r\n                                    topLikes.slice(0, isDesktop ? 4 : 3).map((value, index) =>\r\n                                        <div key={`div__${index}`} onClick={async () => {\r\n                                            await t.setState({\r\n                                                like_currentPictureSelected: index,\r\n                                                like_method: '',\r\n                                                like_param: 'topLikes'\r\n                                            });\r\n                                            t.go('picture_info');\r\n                                        }}>\r\n                                            <img alt='img' src={value['Picture.url']}/>\r\n                                            <div>\r\n                                                {shortIntegers(value['Picture.likes'])}<Icon24Like width={10} height={10} style={{marginLeft: 4}}/>\r\n                                            </div>\r\n                                        </div>\r\n                                    )\r\n                                }\r\n                            </div>\r\n                        </React.Fragment>\r\n                    }\r\n                    {\r\n                        randomGamesLike.length > 0 &&\r\n                        <React.Fragment>\r\n                            <p style={{margin: '24px 0 0 0'}}>\r\n                                Выберите нужную картину, чтобы посмотреть информацию и оценить её:\r\n                            </p>\r\n                            <div style={{marginTop: 18, gridGap: isDesktop ? 8 : 15}} className='Images_Grid'>\r\n                                {\r\n                                    randomGamesLike.map((value, index) =>\r\n                                        <div key={`Image_${index}`} onClick={async () => {\r\n                                            await t.setState({\r\n                                                like_currentPictureSelected: index,\r\n                                                like_method: 'pictures.getRandomLikes',\r\n                                                like_param: 'randomGamesLike'\r\n                                            });\r\n                                            t.go('picture_info');\r\n                                        }}>\r\n                                            <img alt='img' src={value['Picture.url']}/>\r\n                                        </div>\r\n                                    )\r\n                                }\r\n                            </div>\r\n                        </React.Fragment>\r\n                    }\r\n                    <div ref={ref => this.loadingRef = ref}/>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nLikes.defaultProps = {};\r\n\r\nLikes.propTypes = {\r\n    t: PropTypes.object\r\n};\r\n\r\nexport default Likes;","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n    Avatar,\r\n    Button,\r\n    IconButton,\r\n    Input,\r\n    PanelHeader,\r\n    PanelHeaderBack,\r\n    ScreenSpinner,\r\n    Snackbar,\r\n    WriteBarIcon\r\n} from \"@vkontakte/vkui\";\r\nimport {\r\n    Icon16Chevron, Icon16Recent,\r\n    Icon24Like,\r\n    Icon28ChevronRightOutline,\r\n    Icon28ReportOutline,\r\n    Icon28ShareOutline, Icon28WriteOutline\r\n} from \"@vkontakte/icons\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport {\r\n    decOfNum,\r\n    getBase64Image,\r\n    getSrcUrl,\r\n    getUrlParams,\r\n    isPlatformDesktop,\r\n    openUrl,\r\n    shortIntegers\r\n} from \"../../js/utils\";\r\nimport {getVKUsers, vk_local_users} from \"../../js/drawerapp/utils\";\r\n\r\nconst isDesktop = isPlatformDesktop();\r\n\r\nexport class PictureInfo extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            canGetMore: true\r\n        };\r\n\r\n        this.shareStory1 = this.shareStory1.bind(this);\r\n        this.shareStory2 = this.shareStory2.bind(this);\r\n\r\n        const\r\n            {t, param, current} = this.props,\r\n            {socket, state} = t,\r\n            list = state[param]\r\n        ;\r\n        socket.call('pictures.isLiked', {game_id: list[current].id}, r => {\r\n            this.setState({isLiked: r.response});\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    shareStory1(gameId, pic) {\r\n        this.props.t.setPopout(<ScreenSpinner/>);\r\n        try {\r\n            const\r\n                {createCanvas, loadImage} = require('canvas')\r\n            ;\r\n\r\n            loadImage(getSrcUrl(require(`../../assets/drawing/stories/Story3.png`))).then(async background => {\r\n                const\r\n                    canvas = createCanvas(background.width, background.height),\r\n                    ctx = canvas.getContext('2d'),\r\n                    canvasData = await getBase64Image(pic)\r\n                ;\r\n                ctx.drawImage(background, 0, 0);\r\n                ctx.drawImage(await loadImage(canvasData), 198, 618, 683, 683);\r\n\r\n                try {\r\n                    await bridge.send('VKWebAppShowStoryBox', {\r\n                        background_type: 'image',\r\n                        blob: canvas.toDataURL('image/png'),\r\n                        attachment: {\r\n                            url: 'https://vk.com/app' + getUrlParams().vk_app_id,\r\n                            text: 'go_to',\r\n                            type: 'url'\r\n                        }\r\n                    });\r\n                    this.props.t.socket.call('games.share', {gameId});\r\n                } catch (e) {\r\n                }\r\n                this.props.t.setPopout(null);\r\n            });\r\n        } catch (e) {\r\n            console.error(e);\r\n            this.props.t.setPopout(null);\r\n            this.props.t.setState({\r\n                snackbar: <Snackbar onClose={() => this.props.t.setState({snackbar: null})}>\r\n                    Произошла ошибка\r\n                </Snackbar>\r\n            });\r\n        }\r\n    }\r\n\r\n    shareStory2(word, gameId, pic) {\r\n        try {\r\n            this.props.t.setPopout(<ScreenSpinner/>);\r\n            const\r\n                {createCanvas, loadImage} = require('canvas')\r\n            ;\r\n\r\n            loadImage(getSrcUrl(require(`../../assets/drawing/stories/Story1.png`))).then(async background => {\r\n                try {\r\n                    const\r\n                        canvas = createCanvas(background.width, background.height),\r\n                        ctx = canvas.getContext('2d'),\r\n                        canvasData = await getBase64Image(pic),\r\n                        title = word.substring(0, 1).toUpperCase() + word.substring(1)\r\n                    ;\r\n                    ctx.drawImage(background, 0, 0);\r\n\r\n                    ctx.font = '64px TT Commons Demibold';\r\n                    ctx.textAlign = 'center';\r\n                    ctx.fillStyle = '#616161';\r\n                    ctx.fillText(title, 539, 708 + 13 + 489);\r\n\r\n                    ctx.drawImage(await loadImage(canvasData), 198, 618, 683, 683);\r\n\r\n                    await bridge.send('VKWebAppShowStoryBox', {\r\n                        background_type: 'image',\r\n                        blob: canvas.toDataURL('image/png'),\r\n                        attachment: {\r\n                            url: 'https://vk.com/app' + getUrlParams().vk_app_id,\r\n                            text: 'go_to',\r\n                            type: 'url'\r\n                        }\r\n                    });\r\n                    this.props.t.socket.call('games.share', {gameId});\r\n                    this.props.t.setPopout(null);\r\n                } catch (e) {\r\n                    console.error(e);\r\n                    this.props.t.setPopout(null);\r\n                    this.props.t.setState({\r\n                        snackbar: <Snackbar onClose={() => this.props.t.setState({snackbar: null})}>\r\n                            Произошла ошибка\r\n                        </Snackbar>\r\n                    });\r\n                }\r\n            });\r\n        } catch (e) {\r\n            console.error(e);\r\n            this.props.t.setPopout(null);\r\n            this.props.t.setState({\r\n                snackbar: <Snackbar onClose={() => this.props.t.setState({snackbar: null})}>\r\n                    Произошла ошибка\r\n                </Snackbar>\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const\r\n            {t, current, method, param} = this.props,\r\n            list = t.state[param],\r\n            game = list[current],\r\n            {isLiked, canGetMore} = this.state,\r\n            needButtonResumeDraw = game.drawerId === t.state.vk_user.id,\r\n            ButtonResumeDraw = needButtonResumeDraw && (<Button\r\n                style={{\r\n                    marginTop: isDesktop ? 10 : 16\r\n                }}\r\n                className='ButtonResumeDraw'\r\n                before={<Icon28WriteOutline width={16} height={16}/>}\r\n                size='m' mode='gradient' stretched\r\n                onClick={() => {\r\n                    t.setState({\r\n                        snackbar: <Snackbar\r\n                            layout='vertical'\r\n                            onClose={() => t.setState({snackbar: null})}\r\n                            before={<Avatar size={24} style={{background: '#FAAF1A'}}><Icon16Recent\r\n                                fill='#fff' width={14} height={14}/></Avatar>}\r\n                            action='Когда будет доступно?'\r\n                            onActionClick={() => openUrl('https://vk.com/public208964042')}\r\n                        >\r\n                            Функция в разработке...\r\n                        </Snackbar>\r\n                    });\r\n                }}\r\n            >\r\n                Дорисовать\r\n            </Button>)\r\n        ;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <PanelHeader\r\n                    left={<PanelHeaderBack onClick={t.back}/>}\r\n                    separator={false}\r\n                />\r\n                <div className='PictureInfo'>\r\n                    <div className='Canvas_Container'>\r\n                        <h2>{game['Word.nom'].substring(0, 1).toUpperCase() + game['Word.nom'].substring(1)}</h2>\r\n                        <img alt='canvas' src={game['Picture.url']}/>\r\n                        <div className='Actions_Container'>\r\n                            <div className='PictureTime'>\r\n                                {Math.round((game.endTime - game.startTime) / 1000)} с.\r\n                            </div>\r\n                            <div\r\n                                style={isLiked ? {color: '#F9F9F9', background: '#F16384'} : {}} className='LikeButton'\r\n                                onClick={() => {\r\n                                    t.setPopout(<ScreenSpinner/>);\r\n                                    t.socket.call('pictures.like', {game_id: game.id}, r => {\r\n                                        if (r.response) {\r\n                                            list[current] = {...game, ['Picture.likes']: r.response.likes};\r\n                                            t.setState({like_picturesList: list});\r\n                                            this.setState({isLiked: r.response.isLiked});\r\n                                        }\r\n                                        t.setPopout(null);\r\n                                    });\r\n                                }}>\r\n                                {shortIntegers(game['Picture.likes'])} <Icon24Like style={{marginLeft: 4}}/>\r\n                            </div>\r\n                            <div className='ReportButton' onClick={() => {\r\n                                t.setPopout(<ScreenSpinner/>);\r\n                                t.socket.call('games.report', {game_id: game.id}, r => {\r\n                                    if (r.response) {\r\n                                        t.setState({\r\n                                            snackbar: <Snackbar onClose={() => t.setState({snackbar: null})}>\r\n                                                Жалоба отправлена\r\n                                            </Snackbar>\r\n                                        });\r\n                                    } else {\r\n                                        t.setState({\r\n                                            snackbar: <Snackbar onClose={() => t.setState({snackbar: null})}>\r\n                                                Жалоба уже отправлена\r\n                                            </Snackbar>\r\n                                        });\r\n                                    }\r\n                                    t.setPopout(null);\r\n                                });\r\n                            }}>\r\n                                <Icon28ReportOutline width={16} height={16}/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='Author_Container' onClick={() => openUrl(`https://vk.com/id${game.drawerId}`)}>\r\n                        <div>Автор</div>\r\n                        <div>\r\n                            <Avatar shadow={false} size={36} src={vk_local_users[game.drawerId].photo_100}/>\r\n                            <div>{vk_local_users[game.drawerId].first_name} {vk_local_users[game.drawerId].last_name}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='Actions_Container'>\r\n                        <Button\r\n                            before={<Icon28ShareOutline width={16} height={16}/>}\r\n                            size='m' mode={needButtonResumeDraw ? 'secondary' : 'gradient'}\r\n                            onClick={() => {\r\n                                if (game.drawerId !== t.state.vk_user.id) {\r\n                                    this.shareStory1(game.id, game['Picture.url']);\r\n                                } else {\r\n                                    this.shareStory2(game['Word.nom'], game.id, game['Picture.url']);\r\n                                }\r\n                            }}\r\n                        >\r\n                            Поделиться\r\n                        </Button>\r\n                        <Button\r\n                            style={{marginTop: isDesktop && 10}}\r\n                            disabled={!canGetMore}\r\n                            after={<Icon16Chevron/>}\r\n                            size='m' mode='secondary'\r\n                            onClick={() => {\r\n                                if (current === (list.length - 1)) {\r\n                                    if(method && method.length > 0) {\r\n                                        t.setPopout(<ScreenSpinner/>);\r\n                                        t.socket.call(method, {offset: t.state[param].length, limit: 10, id: t.state.vk_user.id}, async r => {\r\n                                            if(r.response.length > 0){\r\n                                                await getVKUsers(r.response.map(value => value.drawerId));\r\n                                                await t.setState({[param]: [...t.state[param], ...r.response]});\r\n                                                t.socket.call('pictures.isLiked', {game_id: r.response[0].id}, r => {\r\n                                                    this.setState({isLiked: r.response});\r\n                                                });\r\n                                                t.setState({like_currentPictureSelected: current + 1});\r\n                                            }\r\n                                            this.setState({canGetMore: r.response.length > 0});\r\n                                            t.setPopout(null);\r\n                                        });\r\n                                    }else{\r\n                                        this.setState({canGetMore: false});\r\n                                    }\r\n                                } else {\r\n                                    t.socket.call('pictures.isLiked', {game_id: list[current + 1].id}, r => {\r\n                                        this.setState({isLiked: r.response});\r\n                                    });\r\n                                    t.setState({like_currentPictureSelected: current + 1});\r\n                                }\r\n                            }}\r\n                        >\r\n                            Дальше\r\n                        </Button>\r\n                        {\r\n                            (needButtonResumeDraw && isDesktop) && ButtonResumeDraw\r\n                        }\r\n                    </div>\r\n                    {\r\n                        (needButtonResumeDraw && !isDesktop) && ButtonResumeDraw\r\n                    }\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nPictureInfo.defaultProps = {};\r\n\r\nPictureInfo.propTypes = {\r\n    t: PropTypes.object,\r\n    current: PropTypes.number,\r\n    method: PropTypes.string,\r\n    param: PropTypes.string\r\n};\r\n\r\nexport default PictureInfo;","import React from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport '../../css/Drawing/Global.css';\r\n\r\nimport {get, getUrlParams, isPlatformDesktop, loadFonts, openUrl} from \"../../js/utils\";\r\nimport {vk_local_users, getVKUsers} from \"../../js/drawerapp/utils\";\r\nimport {\r\n    Panel, Snackbar,\r\n    View\r\n} from '@vkontakte/vkui';\r\nimport {Icon28ChevronRightOutline} from \"@vkontakte/icons\";\r\n\r\nimport fetch from 'node-fetch';\r\n\r\nimport {registerFont, createCanvas, loadImage} from 'canvas';\r\nimport request from \"request\";\r\n\r\nimport {ReactComponent as IconOnboard} from \"../../assets/drawing/icons/Icon.svg\";\r\nimport {ReactComponent as IconError} from \"../../assets/drawing/icons/IconError.svg\";\r\n\r\nimport Main from \"./Main\";\r\nimport Gallery from \"./Gallery\";\r\nimport Rating from \"./Rating\";\r\nimport Search from \"./Search\";\r\nimport Game from \"./Game\";\r\nimport Result from \"./Result\";\r\nimport Placeholder from \"./Placeholder\";\r\n\r\nimport Socket from '../../js/socket';\r\nimport eruda from 'eruda';\r\nimport Likes from \"./Likes\";\r\nimport PictureInfo from \"./PictureInfo\";\r\n\r\nimport (`../../css/Drawing/${window.location.search.length > 0 && JSON.parse('{\"' + decodeURI(window.location.search.substring(1)).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g, '\":\"') + '\"}').vk_platform === 'desktop_web' ? 'Desktop' : 'Mobile'}.css`);\r\n\r\nconst\r\n    socket = new Socket()\r\n;\r\n\r\nlet onlineInterval;\r\n\r\nclass Drawing extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            activePanel: 'main',\r\n            history: ['main'],\r\n\r\n            colors: [\r\n                '#000000',\r\n                '#FFFFFF',\r\n                '#E63902',\r\n                '#EA5A03',\r\n                '#FA8A00',\r\n                '#FBB101',\r\n                '#FDE401',\r\n                '#85B201',\r\n                '#019317',\r\n                '#019C8B',\r\n                '#035AA2',\r\n                '#00247A',\r\n                '#500A6D',\r\n                '#A9236B'\r\n            ],\r\n\r\n            online: 0,\r\n\r\n            drawerId: 0,\r\n            lobbyId: 0\r\n        };\r\n\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n        this.updateData = this.updateData.bind(this);\r\n        this.back = () => {\r\n            const {history, popout} = this.state;\r\n\r\n            if (popout !== null && popout !== undefined)\r\n                return;\r\n\r\n            if (history.length > 1) {\r\n                if (history[history.length - 1] === 'search') {\r\n                    socket.call('games.search');\r\n                    this.setState({\r\n                        snackbar: <Snackbar onClose={() => this.setState({snackbar: null})}>\r\n                            Поиск игры отменён\r\n                        </Snackbar>\r\n                    });\r\n                }\r\n                history.pop();\r\n                this.setState({activePanel: history[history.length - 1], history});\r\n                if (history[history.length - 1] !== 'search')\r\n                    this.setState({snackbar: null});\r\n            } else {\r\n                bridge.send('VKWebAppClose', {status: 'success'});\r\n            }\r\n        };\r\n        this.go = (panel) => {\r\n            const {history} = this.state;\r\n            if (history[history.length - 1] !== panel) {\r\n                history.push(panel);\r\n                window.history.pushState({activePanel: panel}, 'Title');\r\n                this.setState({activePanel: panel, history, snackbar: null});\r\n            }\r\n        };\r\n        this.setActivePanel = (panel) => {\r\n            this.setState({activePanel: panel, history: [panel], snackbar: null});\r\n        };\r\n        this.setPopout = (popout) => {\r\n            //window.history.pushState({popout}, 'Title');\r\n            this.setState({popout});\r\n        };\r\n        this.socket = socket;\r\n\r\n        window.onload = () => {\r\n            const\r\n                windowHeight = document.documentElement.clientHeight,\r\n                scale = 100 / 812 * windowHeight / 100\r\n            ;\r\n            document.body.style.setProperty('--scale-value', scale);\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        loadFonts();\r\n\r\n        window.addEventListener('popstate', e => {\r\n            e.preventDefault();\r\n            this.back();\r\n        });\r\n\r\n        bridge.subscribe(async ({detail: {type, data}}) => {\r\n            if (type !== undefined) console.log(type, data);\r\n            if (type === 'VKWebAppUpdateConfig') {\r\n                const schemeAttribute = document.createAttribute('scheme');\r\n                schemeAttribute.value = data.scheme ? data.scheme === 'client_light' ? 'bright_light' : data.scheme : 'bright_light';\r\n                document.body.attributes.setNamedItem(schemeAttribute);\r\n            } else if (type === 'VKWebAppViewRestore') {\r\n                this.setState({popout: null});\r\n            }\r\n        });\r\n\r\n        const\r\n            isShowOnboard = (await bridge.send('VKWebAppStorageGet', {keys: ['onboard']})).keys[0].value === '',\r\n            isShowVkGroup = (await bridge.send('VKWebAppStorageGet', {keys: ['vk_group1']})).keys[0].value === '',\r\n            vk_user = await bridge.send('VKWebAppGetUserInfo'),\r\n            vk_user_ = getVKUsers([vk_user.id])\r\n        ;\r\n        await this.setState({isShowOnboard, isShowVkGroup, vk_user});\r\n\r\n        bridge.send('VKWebAppEnableSwipeBack');\r\n\r\n        this.connect();\r\n\r\n        socket.subscribe('exit', r => {\r\n            this.setState({placeholderText: r.title});\r\n            this.setPopout(null);\r\n            this.setActivePanel('placeholder');\r\n            bridge.send('VKWebAppInit');\r\n        });\r\n        socket.onConnectionError((e) => {\r\n            console.error(e);\r\n            this.setState({placeholderText: 'Не удалось подключиться к серверу.'});\r\n            this.setPopout(null);\r\n            this.setActivePanel('placeholder');\r\n            bridge.send('VKWebAppInit');\r\n        });\r\n        socket.onDisconnect(() => {\r\n            this.setPopout(null);\r\n            this.setActivePanel('placeholder');\r\n            bridge.send('VKWebAppInit');\r\n        });\r\n\r\n        await new Promise(resolve =>\r\n            socket.onConnect(async () => {\r\n                this.setActivePanel('main');\r\n                await this.updateData();\r\n\r\n                if (isShowVkGroup && !isShowOnboard) {\r\n                    this.go('group_vk');\r\n                }\r\n                resolve(true);\r\n            })\r\n        );\r\n\r\n        bridge.send('VKWebAppInit');\r\n    }\r\n\r\n    connect() {\r\n        socket.connect('https://draw.avocado.special.vk-apps.com', getUrlParams());\r\n    }\r\n\r\n    async updateData() {\r\n        await new Promise(resolve => {\r\n            socket.call('users.getTopNumber', {}, r => {\r\n                this.setState({top_number: r.response});\r\n            });\r\n            socket.call('users.getTop', {}, async r => {\r\n                const\r\n                    user_ids = r.response.map(value => value.id),\r\n                    vk_users = await getVKUsers(user_ids)\r\n                ;\r\n\r\n                this.setState({top: r.response.map(value => ({...vk_local_users[value.id], ...value}))});\r\n            });\r\n            socket.call('users.get', {}, r => {\r\n                this.setState({user: r.response});\r\n\r\n                socket.call('games.getByDrawerId', {id: this.state.vk_user.id, limit: 10}, r => {\r\n                    this.setState({gamesAsDrawer: r.response});\r\n                    let user_ids = r.response.map(value => value.drawerId);\r\n\r\n                    socket.call('games.getByWinnerId', {id: this.state.vk_user.id, limit: 10}, r => {\r\n                        this.setState({gamesAsWinner: r.response});\r\n                        user_ids = [...user_ids, ...r.response.map(value => value.drawerId)];\r\n\r\n                        getVKUsers(user_ids);\r\n                        resolve(true);\r\n                    });\r\n                });\r\n            })\r\n        });\r\n\r\n        this.setState({time: Date.now()});\r\n        return true;\r\n    }\r\n\r\n    render() {\r\n        const\r\n            {\r\n                activePanel,\r\n                popout, snackbar,\r\n\r\n                isShowOnboard, isShowVkGroup,\r\n                vk_user, user,\r\n\r\n                placeholderText,\r\n\r\n                gamesAsWinner, gamesAsDrawer,\r\n\r\n                drawerId, winnerId, lobbyId, gameId, word,\r\n                like_picturesList, like_currentPictureSelected, like_method, like_param\r\n            } = this.state\r\n        ;\r\n\r\n        return vk_user && user && gamesAsWinner && gamesAsDrawer ? (\r\n            <View\r\n                activePanel={isShowOnboard ? 'onboard' : activePanel}\r\n                popout={popout}\r\n            >\r\n                {\r\n                    [\r\n                        {\r\n                            id: 'onboard',\r\n                            component: <Placeholder\r\n                                icon={<IconOnboard/>}\r\n                                title='Добро пожаловать'\r\n                                description='Здесь Вы можете почувствовать себя в роли как художника, так и Шерлока. Рисуйте картины и угадывайте чужие.'\r\n                                buttonIcon={<Icon28ChevronRightOutline width={16} height={16}/>}\r\n                                buttonText='Продолжить'\r\n                                buttonOnClick={() => {\r\n                                    bridge.send('VKWebAppStorageSet', {key: 'onboard', value: '1'});\r\n                                    this.setState({isShowOnboard: false});\r\n                                }}\r\n                            />\r\n                        },\r\n                        {\r\n                            id: 'placeholder',\r\n                            component: <Placeholder\r\n                                icon={<IconError/>}\r\n                                title='Соединение потеряно'\r\n                                description={placeholderText}\r\n                                buttonText='Переподключиться'\r\n                                buttonOnClick={() => {\r\n                                    this.connect();\r\n                                }}\r\n                            />\r\n                        },\r\n                        {\r\n                            id: 'main',\r\n                            component: <React.Fragment>\r\n                                <Main t={this} time={this.state.time}/>\r\n                                {snackbar}\r\n                            </React.Fragment>\r\n                        },\r\n                        {\r\n                            id: 'gallery',\r\n                            component: <React.Fragment>\r\n                                <Gallery t={this}/>\r\n                                {snackbar}\r\n                            </React.Fragment>\r\n                        },\r\n                        {\r\n                            id: 'rating',\r\n                            component: <React.Fragment>\r\n                                <Rating t={this}/>\r\n                                {snackbar}\r\n                            </React.Fragment>\r\n                        },\r\n                        {\r\n                            id: 'likes',\r\n                            component: <React.Fragment>\r\n                                <Likes t={this}/>\r\n                                {snackbar}\r\n                            </React.Fragment>\r\n                        },\r\n                        {\r\n                            id: 'picture_info',\r\n                            component: <React.Fragment>\r\n                                <PictureInfo\r\n                                    t={this}\r\n                                    current={like_currentPictureSelected}\r\n                                    method={like_method} param={like_param}\r\n                                />\r\n                                {snackbar}\r\n                            </React.Fragment>\r\n                        },\r\n                        {\r\n                            id: 'search',\r\n                            component: <Search t={this}/>\r\n                        },\r\n                        {\r\n                            id: 'game',\r\n                            component: <React.Fragment>\r\n                                <Game t={this} drawerId={drawerId} lobbyId={lobbyId}/>\r\n                                {snackbar}\r\n                            </React.Fragment>\r\n                        },\r\n                        {\r\n                            id: 'result',\r\n                            component: <React.Fragment>\r\n                                <Result t={this} drawerId={drawerId} winnerId={winnerId} word={word} gameId={gameId}/>\r\n                                {snackbar}\r\n                            </React.Fragment>\r\n                        },\r\n                        {\r\n                            id: 'group_vk',\r\n                            component: <Placeholder\r\n                                icon={<img src={require('../../assets/drawing/icons/Icon_Group.png')} alt='icon'/>}\r\n                                title='С возвращением!'\r\n                                description='Не хочешь вступить в наше сообщество ВКонтакте? Именно там публикуются все крутые обновления '\r\n                                buttonText='Вступить'\r\n                                buttonOnClick={async () => {\r\n                                    bridge.send('VKWebAppStorageSet', {key: 'vk_group1', value: '1'});\r\n                                    this.setState({isShowVkGroup: false});\r\n                                    try {\r\n                                        await bridge.send('VKWebAppJoinGroup', {group_id: 208964042});\r\n                                    } catch (e) {\r\n                                    }\r\n                                    this.back();\r\n                                }}\r\n                                buttonMode='gradient_gray'\r\n                                buttonBack={true}\r\n                                t={this}\r\n                            />\r\n                        },\r\n                    ].map(({id, component}, index) =>\r\n                        <Panel id={id} key={`Panel__${index}`}>\r\n                            {component}\r\n                        </Panel>\r\n                    )\r\n                }\r\n            </View>\r\n        ) : <div/>;\r\n    }\r\n}\r\n\r\nexport default Drawing;","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport '@vkontakte/vkui/dist/unstable.css'\nimport {AdaptivityProvider, AppRoot, ConfigProvider} from \"@vkontakte/vkui\";\n\nimport './css/Fonts.css';\nimport './css/Error.css';\nimport './css/Utils.css';\n\n//import App from './apps/Tracker';\n//import App from './apps/Wheel';\n//import App from './apps/MedicalCard';\n//import App from './apps/AskMe';\n//import App from './apps/LoveAnalysis';\n//import App from './apps/BattleStat';\n//import App from './apps/BattleStatCatalog';\n//import App from './apps/YearTest';\n//import App from './apps/IQTest';\n//import App from './apps/MvsW';\n//import App from './apps/DeathDate';\n//import App from './apps/DeathDate2';\n//import App from './apps/Slaves';\n//import App from './apps/VKTime';\n//import App from './apps/LikesStat';\n//import App from './apps/VKAccPrice';\n//import App from './apps/DateCelebrity';\n//import App from './apps/NameInCountry';\n//import App from './apps/AccKarma';\n//import App from './apps/AdvertisementApp';\n//import App from './apps/AdvertisementAppSite';\n//import App from './apps/ClickerBattle/ClickerBattle';\nimport App from './apps/Drawing/Drawing';\n//import App from './apps/Drawing/Global';\n//import App from './apps/RandomCooking';\n\n\nReactDOM.render(\n    false ?\n        <App/>\n        :\n        <ConfigProvider>\n            <AdaptivityProvider>\n                <AppRoot>\n                    <App/>\n                </AppRoot>\n            </AdaptivityProvider>\n        </ConfigProvider>, document.getElementById('root')\n);\n"],"sourceRoot":""}